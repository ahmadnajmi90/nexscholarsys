import{r as b,j as e,a as D}from"./app-Dyc2YSa7.js";import{D as I,a as A,b as E,c as R,d as L}from"./dialog-CMZECuIS.js";import{B as j}from"./button-DDycOZPt.js";import{A as c,a as d,L as O}from"./alert-gM37w2Qu.js";import{C as B}from"./checkbox-BbnGzl3U.js";import{S as Y}from"./scroll-area-DeaXef57.js";import{c as v}from"./index-Csod4yPu.js";import{L as P,l as T}from"./logError-B6okArUp.js";import{C as N}from"./circle-check-SbfhXHPb.js";import{C as y}from"./circle-alert-DQS8qzDt.js";import"./index-D-0X1VHc.js";import"./index-CYrMXf2H.js";import"./index-CFIxVmDG.js";import"./index-Mz8iZoV8.js";import"./tslib.es6-BUas5LQb.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";import"./x-DiT1Y4qL.js";import"./createLucideIcon-DgyMBRUj.js";import"./index-Dp3B9jqt.js";import"./index-Bby_8r0G.js";import"./check-6jspxOMq.js";const U=[{id:"confirm_intention",label:"I confirm my intention to accept this supervisor's offer."},{id:"understand_upload",label:"I understand I must upload my official university offer/appointment letter when it is issued."},{id:"agree_storage",label:"I agree that NexScholar may store this information to validate the supervisor-student connection."},{id:"read_rules",label:"I have read and agree to the rules below."}],F=[{id:1,text:"Upload the official university offer/appointment letter within 14-30 days of acceptance (or once issued by the university)."},{id:2,text:"The letter must show student name, programme, intake/semester, supervisor's name, and official stamp/signature."},{id:3,text:"If your supervisor changes, update your status and (when available) upload the new letter within 7 days."}];function ce({isOpen:w,request:a,onClose:t,onAccepted:n}){var u,g;const[m,p]=b.useState({confirm_intention:!1,understand_upload:!1,agree_storage:!1,read_rules:!1}),[l,h]=b.useState(!1),x=((u=a==null?void 0:a.academician)==null?void 0:u.full_name)||"Prof. Supervisor",S=((g=a==null?void 0:a.postgraduate_program)==null?void 0:g.name)||"your degree program",o=Object.values(m).every(s=>s===!0),_=(s,r)=>{p(i=>({...i,[s]:r}))},C=async()=>{var s,r;if(!(!o||l)){h(!0);try{await D.post(route("supervision.requests.student-accept",a.id)),v.success("You have accepted the supervision offer!"),n==null||n(),t==null||t()}catch(i){T(i,"AcceptSupervisorOfferModal handleSubmit");const k=((r=(s=i==null?void 0:i.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to accept supervision offer";v.error(k)}finally{h(!1)}}},f=()=>{l||(p({confirm_intention:!1,understand_upload:!1,agree_storage:!1,read_rules:!1}),t==null||t())};return e.jsx(I,{open:w,onOpenChange:s=>s?null:f(),children:e.jsxs(A,{className:"max-w-2xl max-h-[90vh] overflow-hidden p-0",children:[e.jsxs(E,{className:"px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(N,{className:"h-6 w-6 text-green-600"}),e.jsx(R,{className:"text-xl font-semibold",children:"Accept Supervisor Offer"})]}),e.jsxs(L,{children:["You are accepting an offer from ",e.jsx("strong",{children:x})," to be your supervisor on NexScholar."]})]}),e.jsx(Y,{className:"max-h-[calc(90vh-180px)]",children:e.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[e.jsxs(c,{className:"bg-amber-50 border-amber-200",children:[e.jsx(y,{className:"h-4 w-4 text-amber-600"}),e.jsxs(d,{className:"text-sm text-amber-900",children:[e.jsx("strong",{className:"font-semibold",children:"Important Notice"}),e.jsxs("p",{className:"mt-1",children:["This acceptance does ",e.jsx("strong",{children:"not"})," replace your university's official registration. You'll be asked to upload your official university offer/appointment letter once it's available."]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Required Confirmations"}),e.jsx("div",{className:"space-y-3",children:U.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-slate-200 bg-white",children:[e.jsx(B,{id:s.id,checked:m[s.id],onCheckedChange:r=>_(s.id,r),className:"mt-0.5"}),e.jsx(O,{htmlFor:s.id,className:"text-sm text-slate-700 cursor-pointer flex-1 leading-relaxed",children:s.label})]},s.id))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Rules"}),e.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-5",children:e.jsx("ol",{className:"space-y-3 list-decimal list-inside",children:F.map(s=>e.jsx("li",{className:"text-sm text-slate-700 leading-relaxed",children:e.jsx("span",{className:"ml-2",children:s.text})},s.id))})})]}),o&&e.jsxs(c,{className:"bg-green-50 border-green-200",children:[e.jsx(N,{className:"h-4 w-4 text-green-600"}),e.jsxs(d,{className:"text-sm text-green-900",children:[e.jsx("strong",{className:"font-semibold",children:"Ready to Proceed"}),e.jsxs("p",{className:"mt-1",children:['By clicking "Agree & Accept", you confirm your acceptance of ',x," as your supervisor for ",S,". Your supervision relationship will be activated, and both you and your supervisor will gain access to supervision features including meetings, ScholarLab workspace, and progress tracking."]})]})]}),!o&&e.jsxs(c,{children:[e.jsx(y,{className:"h-4 w-4 text-slate-500"}),e.jsx(d,{className:"text-sm text-slate-600",children:"Please check all boxes above to proceed with accepting the supervision offer."})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t bg-slate-50 flex items-center justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:f,disabled:l,children:"Cancel"}),e.jsxs(j,{onClick:C,disabled:!o||l,className:"bg-green-600 hover:bg-green-700",children:[l&&e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Agree & Accept"]})]})]})})}export{ce as default};
