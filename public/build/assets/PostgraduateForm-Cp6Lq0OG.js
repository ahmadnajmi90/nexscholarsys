import{r as u,q as Ce,W as ke,a as B,j as e,R as Se}from"./app-CeHOQ8__.js";import{T as f,I as d}from"./TextInput-VQuvkmcM.js";import{I as n}from"./InputLabel-VNyuE7ti.js";import{P as T}from"./PrimaryButton-BSY4j5qr.js";import Fe from"./NationalityForm-F9mvE9eL.js";import{S as ae}from"./react-select.esm-NOid0c4r.js";import{z as te}from"./transition-DJgc3peH.js";function Ge({universities:ie,faculties:ne,className:oe="",researchOptions:q,skills:ce,aiGenerationInProgress:F,aiGenerationMethod:de,generatedProfileData:w}){var K,Q,Z;const b=u.useRef(!1),l=Ce().props.postgraduate,{data:a,setData:i,post:P,errors:c,processing:ue,recentlySuccessful:me}=ke({phone_number:(l==null?void 0:l.phone_number)||"",full_name:(l==null?void 0:l.full_name)||"",previous_degree:typeof(l==null?void 0:l.previous_degree)=="string"?JSON.parse(l==null?void 0:l.previous_degree):(l==null?void 0:l.previous_degree)||[],bachelor:(l==null?void 0:l.bachelor)||"",CGPA_bachelor:(l==null?void 0:l.CGPA_bachelor)||"",master:(l==null?void 0:l.master)||"",master_type:(l==null?void 0:l.master_type)||"",nationality:(l==null?void 0:l.nationality)||"",english_proficiency_level:(l==null?void 0:l.english_proficiency_level)||"",funding_requirement:(l==null?void 0:l.funding_requirement)||"",current_postgraduate_status:(l==null?void 0:l.current_postgraduate_status)||"",matric_no:(l==null?void 0:l.matric_no)||"",suggested_research_title:(l==null?void 0:l.suggested_research_title)||"",suggested_research_description:(l==null?void 0:l.suggested_research_description)||"",CV_file:(l==null?void 0:l.CV_file)||"",profile_picture:(l==null?void 0:l.profile_picture)||"",field_of_research:typeof(l==null?void 0:l.field_of_research)=="string"?JSON.parse(l==null?void 0:l.field_of_research):(l==null?void 0:l.field_of_research)||[],website:(l==null?void 0:l.website)||"",linkedin:(l==null?void 0:l.linkedin)||"",google_scholar:(l==null?void 0:l.google_scholar)||"",researchgate:(l==null?void 0:l.researchgate)||"",bio:(l==null?void 0:l.bio)||"",faculty:(l==null?void 0:l.faculty)||"",university:(l==null?void 0:l.university)||"",background_image:(l==null?void 0:l.background_image)||"",skills:(l==null?void 0:l.skills)||[],supervisorAvailability:(l==null?void 0:l.supervisorAvailability)===!0||(l==null?void 0:l.supervisorAvailability)===1||(l==null?void 0:l.supervisorAvailability)==="true",grantAvailability:(l==null?void 0:l.grantAvailability)===!0||(l==null?void 0:l.grantAvailability)===1||(l==null?void 0:l.grantAvailability)==="true"}),[N,_]=u.useState(!1),[he,m]=u.useState(""),[p,A]=u.useState(null),[ge,V]=u.useState(!1),[R,M]=u.useState(!1),[C,O]=u.useState(!1),[k,U]=u.useState(!1);u.useEffect(()=>{Array.isArray(a.previous_degree)&&(O(a.previous_degree.includes("Bachelor Degree")),U(a.previous_degree.includes("Master")))},[a.previous_degree]),u.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("generation_initiated")==="true";console.log("Checking if automatic generation should be triggered:",{aiGenerationInProgress:F,aiGenerationMethod:de,generationTriggeredRef:b.current,isGenerating:N,generatedProfileData:!!w,generationInitiated:r,location:window.location.href}),w&&!b.current?(console.log("Applying directly available generated profile data:",w),S(w),b.current=!0,window._profileSuccessShown||(window._profileSuccessShown=!0,alert("Profile successfully generated! Please review and save the changes."))):(F||r)&&!b.current&&!N&&(console.log("Generation in progress or initiated, checking status"),$())},[F,N,w]);const $=()=>{var s;b.current||(_(!0),m("Checking generation status..."),console.log("Checking generation status"),B.get(route("ai.status"),{headers:{"X-CSRF-TOKEN":(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content")}}).then(r=>{console.log("Status check response:",r.data),r.data.status==="in_progress"?(m("Generation in progress, please wait..."),setTimeout($,3e3)):r.data.status==="error"?(_(!1),m(""),alert("Profile generation failed: "+(r.data.message||"Unknown error"))):r.data.status==="completed"?(_(!1),m("Profile generated successfully!"),r.data.data&&(S(r.data.data),b.current=!0,window._profileSuccessShown||(window._profileSuccessShown=!0,alert("Profile successfully generated! Please review and save the changes.")))):(_(!1),m(""),console.log("Unexpected status:",r.data.status))}).catch(r=>{console.error("Error checking generation status:",r),_(!1),m("")}))},S=s=>{console.log("Updating form with data:",s),i(r=>({...r,full_name:s.full_name||r.full_name,phone_number:s.phone_number||r.phone_number,bio:s.bio||r.bio,nationality:s.nationality||r.nationality,english_proficiency_level:s.english_proficiency_level||r.english_proficiency_level,previous_degree:s.previous_degree||r.previous_degree,bachelor:s.bachelor||r.bachelor,CGPA_bachelor:s.CGPA_bachelor||r.CGPA_bachelor,master:s.master||r.master,master_type:s.master_type||r.master_type,field_of_research:s.field_of_research&&s.field_of_research.length>0?s.field_of_research:r.field_of_research,suggested_research_title:s.suggested_research_title||r.suggested_research_title,suggested_research_description:s.suggested_research_description||r.suggested_research_description,skills:s.skills||r.skills,funding_requirement:s.funding_requirement||r.funding_requirement,current_postgraduate_status:s.current_postgraduate_status||r.current_postgraduate_status}))},z=async()=>{var s,r,t,h,g,x;if(a.CV_file&&typeof a.CV_file=="string"){_(!0),m("Generating profile from existing CV...");try{const o=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"),j=new FormData;console.log("Attempting CV generation with existing CV file"),console.log("CSRF Token:",o),console.log("Using existing CV:",a.CV_file);const v={"X-CSRF-TOKEN":o,Accept:"application/json"},y=await B.post(route("ai.generate.cv"),j,{headers:v});console.log("CV generation successful:",y.data),y.data&&(S(y.data),m("Profile generated successfully!"),_(!1))}catch(o){console.error("Error generating profile from CV:",o),console.log("Error details:",{message:o.message,response:(r=o.response)==null?void 0:r.data,status:(t=o.response)==null?void 0:t.status,statusText:(h=o.response)==null?void 0:h.statusText,headers:(g=o.response)==null?void 0:g.headers}),m(`Error (${((x=o.response)==null?void 0:x.status)||"unknown"}): ${o.message}`),_(!1)}}else V(!0)},fe=s=>{A(s.target.files[0])},xe=async()=>{var s,r,t,h,g,x;if(p){M(!0),m("Uploading CV and generating profile...");try{const o=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"),j=new FormData;if(j.append("CV_file",p,p.name),console.log("CV File details:",{name:p.name,size:p.size,type:p.type,lastModified:new Date(p.lastModified).toISOString()}),p.size>5*1024*1024)throw new Error("File size exceeds 5MB. Please upload a smaller file.");const v=await B.post(route("ai.generate.cv"),j,{headers:{"X-CSRF-TOKEN":o,Accept:"application/json"},responseType:"json",timeout:6e4});console.log("CV generation successful:",v.data),v.data&&(V(!1),A(null),S(v.data),m("Profile generated successfully!"),M(!1))}catch(o){console.error("Error uploading CV:",o),console.log("Error details:",{message:o.message,response:(r=o.response)==null?void 0:r.data,status:(t=o.response)==null?void 0:t.status,statusText:(h=o.response)==null?void 0:h.statusText,headers:(g=o.response)==null?void 0:g.headers}),m(`Error (${((x=o.response)==null?void 0:x.status)||"unknown"}): ${o.message}`),M(!1)}}},pe=s=>{const r=s.target.value;r!=="Registered"?(i(t=>({...t,current_postgraduate_status:r,matric_no:"",university:"",faculty:""})),W("")):i(t=>({...t,current_postgraduate_status:r}))},[L,W]=u.useState(a.university),_e=ne.filter(s=>s.university_id===parseInt(L)),[E,I]=u.useState(!1);u.useEffect(()=>{(a.suggested_research_title||a.suggested_research_description)&&I(!0)},[a.suggested_research_title,a.suggested_research_description]);const Y=s=>{s.target.value==="yes"?I(!0):(I(!1),i(r=>({...r,suggested_research_title:"",suggested_research_description:""})))},J=ce.map(s=>({value:s.id,label:s.name})),ve=s=>{s.preventDefault();const r=new FormData;Object.keys(a).forEach(t=>{t!=="profile_picture"&&(Array.isArray(a[t])?r.append(t,JSON.stringify(a[t])):r.append(t,a[t]))});for(let[t,h]of r.entries())console.log(`${t}: ${h}`);P(route("role.update"),{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile updated successfully.")},onError:t=>{console.error("Error updating profile:",t),alert("Failed to update the profile. Please try again.")}})},[be,X]=u.useState(!1),je=()=>X(!0),H=()=>X(!1),[ye,G]=u.useState(!1);u.useState("profiles");const we=s=>{if(s.preventDefault(),!a.profile_picture){alert("Please select a profile picture.");return}const r=new FormData;r.append("profile_picture",a.profile_picture),P(route("role.updateProfilePicture"),{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile picture updated successfully."),H(),window.location.reload()},onError:t=>{console.error("Error updating profile picture:",t),alert("Failed to update the profile picture. Please try again.")}})},Ne=s=>{if(s.preventDefault(),!a.background_image){alert("Please select a background image.");return}const r=new FormData;r.append("background_image",a.background_image),P(route("role.updateBackgroundImage"),{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Background image updated successfully."),G(!1),window.location.reload()},onError:t=>{console.error("Error updating background image:",t),alert("Failed to update the background image. Please try again.")}})};return e.jsxs("div",{className:"max-w-8xl mx-auto px-4 pb-8",children:[e.jsxs("div",{className:"w-full bg-white pb-12 shadow-md relative mb-4",children:[e.jsxs("div",{className:"relative w-full h-48 overflow-hidden",children:[e.jsx("img",{src:`/storage/${a.background_image||"default-background.jpg"}`,alt:"Background",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>G(!0),className:"absolute top-4 right-4 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Background Image",children:"✏️"})]}),e.jsxs("div",{className:"relative flex flex-col items-center -mt-16 z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/${a.profile_picture||"default-profile.jpg"}`,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"}),e.jsx("button",{onClick:je,className:"absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Profile Picture",children:"✏️"})]}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:a.full_name}),a.previous_degree&&e.jsxs("p",{className:"text-gray-500",children:[(K=a.previous_degree)!=null&&K.includes("Master")?"Master":"Bachelor Degree"," in ",a.master?a.master:a.bachelor]}),e.jsx("p",{className:"text-gray-500",children:a.current_position})]})]})]}),ye&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Background Image"}),e.jsxs("form",{onSubmit:Ne,children:[e.jsx("input",{type:"file",accept:"image/*",className:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:s=>i("background_image",s.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx(T,{type:"submit",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>G(!1),className:"ml-2 px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),be&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Profile Picture"}),e.jsxs("form",{onSubmit:we,children:[e.jsx("input",{type:"file",accept:"image/*",className:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:s=>i("profile_picture",s.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx(T,{type:"submit",children:"Save"}),e.jsx("button",{type:"button",onClick:H,className:"ml-2 px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),e.jsxs("section",{className:oe,children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your personal information."})]}),e.jsx("div",{className:"hidden sm:flex space-x-2 absolute top-0 right-0 mt-2 mr-2",children:e.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-800",children:"AI Generate Profile From CV"})}),e.jsx("div",{className:"sm:hidden mt-4",children:e.jsx("button",{type:"button",onClick:z,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-800",children:"AI Generate Profile From CV"})})]}),e.jsxs("form",{onSubmit:ve,className:"mt-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"full_name",value:"Full Name",required:!0}),e.jsx(f,{id:"full_name",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.full_name,onChange:s=>i("full_name",s.target.value),required:!0,autoComplete:"full_name"}),e.jsx(d,{className:"mt-2",message:c.full_name})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"bio",value:"Short Bio"}),e.jsx("textarea",{id:"bio",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-4",value:a.bio,onChange:s=>i("bio",s.target.value),rows:4}),e.jsx(d,{className:"mt-2",message:c.bio})]})}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Your Previous Degree"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:space-x-4 space-y-2 sm:space-y-0",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:C,onChange:()=>{const s=!C;O(s),i(r=>({...r,previous_degree:JSON.stringify([...s?["Bachelor Degree"]:[],...k?["Master"]:[]]),bachelor:s?r.bachelor:"",CGPA_bachelor:s?r.CGPA_bachelor:""}))}}),e.jsx("span",{children:"Bachelor Degree"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:k,onChange:()=>{const s=!k;U(s),i(r=>({...r,previous_degree:JSON.stringify([...C?["Bachelor Degree"]:[],...s?["Master"]:[]]),master:s?r.master:"",master_type:s?r.master_type:""}))}}),e.jsx("span",{children:"Master"})]})]}),C&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"bachelor",value:"Name of Bachelor Degree"}),e.jsx(f,{id:"bachelor",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.bachelor||"",onChange:s=>i(r=>({...r,bachelor:s.target.value}))}),e.jsx(d,{className:"mt-2",message:c.bachelor})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"CGPA_bachelor",value:"CGPA Bachelor"}),e.jsx(f,{id:"CGPA_bachelor",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.CGPA_bachelor||"",onChange:s=>i(r=>({...r,CGPA_bachelor:s.target.value}))}),e.jsx(d,{className:"mt-2",message:c.CGPA_bachelor})]})]}),k&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"master",value:"Name of Master Degree"}),e.jsx(f,{id:"master",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.master||"",onChange:s=>i(r=>({...r,master:s.target.value}))}),e.jsx(d,{className:"mt-2",message:c.master})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"master_type",value:"Master Type"}),e.jsxs("select",{id:"master_type",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.master_type||"",onChange:s=>i(r=>({...r,master_type:s.target.value})),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Master Type"}),e.jsx("option",{value:"Full Research",children:"Full Research"}),e.jsx("option",{value:"Coursework",children:"Coursework"}),e.jsx("option",{value:"Research + Coursework",children:"Research + Coursework"})]}),e.jsx(d,{className:"mt-2",message:c.master_type})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"phone_number",value:"Phone Number",required:!0}),e.jsx(f,{id:"phone_number",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.phone_number,onChange:s=>i("phone_number",s.target.value),autoComplete:"tel"}),e.jsx(d,{className:"mt-2",message:c.phone_number})]}),e.jsx("div",{children:e.jsx(Fe,{title:"Nationality",value:a.nationality,onChange:s=>i("nationality",s)})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"english_proficiency_level",value:"English Proficiency Level"}),e.jsxs("select",{id:"english_proficiency_level",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.english_proficiency_level||"",onChange:s=>i("english_proficiency_level",s.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select English Proficiency Level"}),e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Elementary",children:"Elementary"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Upper Intermediate",children:"Upper Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]}),e.jsx(d,{className:"mt-2",message:c.english_proficiency_level})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"funding_requirement",value:"Funding Requirement"}),e.jsxs("select",{id:"funding_requirement",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.funding_requirement||"",onChange:s=>i("funding_requirement",s.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Funding Requirement"}),e.jsx("option",{value:"I need a scholarship",children:"I need a scholarship"}),e.jsx("option",{value:"I need a grant",children:"I need a grant"}),e.jsx("option",{value:"I am self-funded",children:"I am self-funded"})]}),e.jsx(d,{className:"mt-2",message:c.funding_requirement})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"current_postgraduate_status",children:"Current Postgraduate Status"}),e.jsxs("select",{id:"current_postgraduate_status",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.current_postgraduate_status,onChange:pe,children:[e.jsx("option",{value:"",hidden:!0,children:"Select your current postgraduate status"}),e.jsx("option",{value:"Not registered yet",children:"Not registered yet"}),e.jsx("option",{value:"Registered",children:"Registered"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"skills",value:"Skills"}),e.jsx(ae,{id:"skills",isMulti:!0,options:J,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",classNamePrefix:"select",value:(Q=a.skills)==null?void 0:Q.map(s=>J.find(t=>t.value===s)||{value:s,label:s}),onChange:s=>{const r=s.map(t=>t.value);i("skills",r)},placeholder:"Select your skills..."})]})]}),a.current_postgraduate_status==="Registered"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"university",value:"University",required:!0}),e.jsxs("select",{id:"university",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:L||"",onChange:s=>{const r=parseInt(s.target.value);W(r),i("university",r)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select your University"}),ie.map(s=>e.jsx("option",{value:s.id,children:s.full_name},s.id))]}),e.jsx(d,{className:"mt-2",message:c.university})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"faculty",value:"Faculty",required:!0}),e.jsxs("select",{id:"faculty",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.faculty,onChange:s=>i("faculty",s.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select your Faculty"}),_e.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(d,{className:"mt-2",message:c.faculty})]})]}),a.current_postgraduate_status==="Registered"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"matric_no",value:"Matric No.",required:!0}),e.jsx(f,{id:"matric_no",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.matric_no,onChange:s=>i("matric_no",s.target.value),required:!0,autoComplete:"matric_no"}),e.jsx(d,{className:"mt-2",message:c.matric_no})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"supervisorAvailability",value:"Looking for a Supervisor?"}),e.jsxs("select",{id:"supervisorAvailability",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.supervisorAvailability===!0?"true":"false",onChange:s=>i("supervisorAvailability",s.target.value==="true"),children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]}),e.jsx(d,{className:"mt-2",message:c.supervisorAvailability})]})]}),a.current_postgraduate_status==="Registered"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"grantAvailability",value:"Looking for a Grant?"}),e.jsxs("select",{id:"grantAvailability",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.grantAvailability===!0?"true":"false",onChange:s=>i("grantAvailability",s.target.value==="true"),children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]}),e.jsx(d,{className:"mt-2",message:c.grantAvailability})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"has_suggested_research_title",children:"Have own suggested research title?"}),e.jsxs("select",{id:"has_suggested_research_title",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:E?"yes":"no",onChange:Y,children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]})]})]}),a.current_postgraduate_status!=="Registered"&&e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"has_suggested_research_title",children:"Have own suggested research title?"}),e.jsxs("select",{id:"has_suggested_research_title",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:E?"yes":"no",onChange:Y,children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]})]}),E&&e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"suggested_research_title",value:"Suggested Research Title",required:!0}),e.jsx(f,{id:"suggested_research_title",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.suggested_research_title,onChange:s=>i("suggested_research_title",s.target.value),required:!0,autoComplete:"suggested_research_title"}),e.jsx(d,{className:"mt-2",message:c.suggested_research_title})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"suggested_research_description",value:"Suggested Research Description"}),e.jsx("textarea",{id:"suggested_research_description",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.suggested_research_description,onChange:s=>i("suggested_research_description",s.target.value),rows:4}),e.jsx(d,{className:"mt-2",message:c.suggested_research_description})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"field_of_research",children:"Field of Research (Multiple Selection) Structure : Field of Research - Research Area - Niche Domain"}),e.jsx(ae,{id:"field_of_research",isMulti:!0,options:q.map(s=>({value:`${s.field_of_research_id}-${s.research_area_id}-${s.niche_domain_id}`,label:`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",classNamePrefix:"select",hideSelectedOptions:!1,closeMenuOnSelect:!1,value:(Z=a.field_of_research)==null?void 0:Z.map(s=>{const r=q.find(t=>`${t.field_of_research_id}-${t.research_area_id}-${t.niche_domain_id}`===s);return{value:s,label:r?`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`:s}}),styles:{valueContainer:s=>({...s,maxWidth:"100%"}),multiValueLabel:s=>({...s,maxWidth:250,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),menuPortal:s=>({...s,zIndex:9999}),option:(s,{data:r,isSelected:t,isFocused:h,isDisabled:g})=>({...s,backgroundColor:t?"#2563EB":h?"#F3F4F6":"white",color:t?"white":"#374151",paddingLeft:t?"25px":s.paddingLeft,position:"relative",":before":t?{content:'"✓"',position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"white"}:void 0})},onChange:s=>{const r=s.map(t=>t.value);i("field_of_research",r)},placeholder:"Select field of research...",filterOption:(s,r)=>!0,components:{MenuList:s=>{const r=Se.Children.toArray(s.children),t=a.field_of_research||[],h=r.sort((g,x)=>{var D,ee,se,le,re;if(!g||!x||!g.props||!x.props)return 0;const o=(D=g.props.data)==null?void 0:D.value,j=(ee=x.props.data)==null?void 0:ee.value,v=t.includes(o),y=t.includes(j);return v&&!y?-1:!v&&y?1:((re=(se=g.props.data)==null?void 0:se.label)==null?void 0:re.localeCompare((le=x.props.data)==null?void 0:le.label))||0});return e.jsx("div",{className:"react-select__menu-list",...s.innerProps,style:{maxHeight:"215px",overflowY:"auto",padding:"5px 0"},children:h})}}})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"website",value:"Website"}),e.jsx(f,{id:"website",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.website,onChange:s=>i("website",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:c.website})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"linkedin",value:"LinkedIn"}),e.jsx(f,{id:"linkedin",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.linkedin,onChange:s=>i("linkedin",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:c.linkedin})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"google_scholar",value:"Google Scholar"}),e.jsx(f,{id:"google_scholar",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.google_scholar,onChange:s=>i("google_scholar",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:c.google_scholar})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"researchgate",value:"ResearchGate"}),e.jsx(f,{id:"researchgate",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:a.researchgate,onChange:s=>i("researchgate",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:c.researchgate})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"CV_file",value:"Upload CV (Max 5MB)"}),e.jsx("input",{type:"file",id:"CV_file",name:"CV_file",className:"block w-full border-gray-300 rounded-md py-2",accept:".pdf,.doc,.docx",onChange:s=>{const r=s.target.files[0];r&&(r.size<=5*1024*1024?i(t=>({...t,CV_file:r})):alert("File size exceeds 5MB. Please upload a smaller file."))}}),a.CV_file&&e.jsx("div",{className:"mt-2",children:typeof a.CV_file=="string"?e.jsxs("a",{href:`/storage/${a.CV_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline",children:["View Current File: ",a.CV_file.split("/").pop()]}):e.jsxs("p",{className:"text-sm text-gray-500",children:["File Selected: ",a.CV_file.name]})}),e.jsx(d,{className:"mt-2",message:c.CV_file})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{disabled:ue,children:"Save"}),e.jsx(te,{show:me,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]}),N&&e.jsx(te,{show:N,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-lg font-medium",children:he||"Generating profile..."}),e.jsxs("svg",{className:"animate-spin h-8 w-8 mt-4 text-blue-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})]})})}),ge&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50"}),e.jsx("div",{className:"relative w-auto my-6 mx-auto max-w-3xl z-50",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Upload CV for Profile Generation"}),e.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"Upload your CV to generate your profile. We support PDF, DOCX, DOC, and image formats."}),e.jsx("input",{type:"file",className:"mb-4 p-2 border rounded w-full",onChange:fe,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.tiff"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",onClick:()=>{V(!1),A(null)},disabled:R,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:xe,disabled:!p||R,children:R?"Uploading...":"Upload & Generate Profile"})]})]})})]})]})}export{Ge as default};
