import{r as i,j as e,a as C}from"./app-Ba9NEla_.js";import{C as j,b as y,c as N,a as b}from"./card-CqrB6JdE.js";import{l as w}from"./logError-D4ezqrCx.js";import{L as k}from"./loader-circle-BzQWx5Qr.js";import{C as p}from"./clock-CFRRy-CZ.js";import{C as A}from"./circle-x-BEVhYyuW.js";import{C as c}from"./circle-check-big-BoAppQCr.js";import{C as I}from"./calendar-BvXP8mpX.js";import{C as L}from"./calendar-clock-BdqfjLZ9.js";import{c as M}from"./createLucideIcon-D9Xjp5kf.js";import{U as d}from"./user-plus-CAe95gky.js";import{M as S}from"./message-circle-sI6XXa8u.js";import{F as T}from"./file-text-dcTnRxuT.js";import{L as q}from"./lightbulb-BVvQLSv1.js";import{U as E}from"./user-minus-BuKoHi33.js";import{C as l}from"./circle-alert-B0XxNn8a.js";import{U as m}from"./users-DHlOkeZx.js";import{f as R}from"./formatDistanceToNow-GKXiLTrL.js";import"./utils-D-KgF5mV.js";import"./constructNow-DtVD-0hX.js";import"./en-US-DNUEYIb-.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],F=M("CalendarX",U),O={request_rejected:A,request_accepted:c,meeting_scheduled:I,meeting_rescheduled:L,meeting_cancelled:F,request_submitted:d,offer_accepted:c,message_received:S,document_uploaded:T,recommendations_available:q,unbind_approved:E,unbind_pending:l,cosupervisor_added:m,cosupervisor_pending_approval:l,cosupervisor_invited:d,cosupervisor_invitation_received:m},P={request_rejected:"text-red-500",request_accepted:"text-green-500",meeting_scheduled:"text-blue-500",meeting_rescheduled:"text-amber-500",meeting_cancelled:"text-red-500",request_submitted:"text-indigo-500",offer_accepted:"text-green-500",message_received:"text-purple-500",document_uploaded:"text-amber-500",recommendations_available:"text-indigo-500",unbind_approved:"text-red-600",unbind_pending:"text-orange-500",cosupervisor_added:"text-emerald-500",cosupervisor_pending_approval:"text-yellow-500",cosupervisor_invited:"text-indigo-500",cosupervisor_invitation_received:"text-purple-500"};function ce({userRole:s,triggerReload:o=0}){const[t,n]=i.useState([]),[x,u]=i.useState(!0),[a,h]=i.useState(!1),v=async()=>{try{const r=await C.get(route("supervision.activity.recent"));n(r.data.data||[])}catch(r){w(r,"RecentActivityPanel loadActivities")}finally{u(!1)}};i.useEffect(()=>{v()},[o]);const f=a?t.slice(0,8):t.slice(0,3),_=t.length>3,g=t.length>8;return e.jsxs(j,{className:"shadow-sm",children:[e.jsx(y,{className:"pb-3",children:e.jsx(N,{className:"text-base font-semibold text-slate-900",children:"Recent Activity"})}),e.jsx(b,{className:"space-y-1",children:x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(k,{className:"h-5 w-5 animate-spin text-indigo-600"})}):t.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(p,{className:"h-8 w-8 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No recent activity"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Your supervision updates will appear here"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-0 divide-y divide-slate-100",children:f.map(r=>e.jsx(V,{activity:r},r.id))}),_&&e.jsxs("div",{className:"pt-3 mt-3 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>h(!a),className:"w-full text-sm font-medium text-indigo-600 hover:text-indigo-700 transition-colors",children:a?"Show Less":`View More (${Math.min(t.length-3,5)} more)`}),a&&g&&e.jsx("p",{className:"text-xs text-slate-400 text-center mt-1",children:"Showing latest 8 activities"})]})]})})]})}function V({activity:s}){const o=O[s.type]||p,t=P[s.type]||"text-slate-500",n=s.created_at?R(new Date(s.created_at),{addSuffix:!0}):"";return e.jsxs("div",{className:"flex items-start gap-3 py-3 group cursor-pointer hover:bg-slate-50 -mx-3 px-3 rounded-md transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(o,{className:`h-4 w-4 ${t}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed",children:s.description}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:n})]})]})}export{ce as default};
