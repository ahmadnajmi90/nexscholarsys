import{r as s,j as r}from"./app-CCUz7VIy.js";import{C as y,D as w}from"./index-DTXsARQz.js";import{y as k}from"./index-D7UibgDV.js";import{B as u}from"./BookmarkHandler-GufPaIhh.js";const C=({bookmarkableType:l,bookmarkableId:n,category:f="general",className:g="",iconSize:c="text-lg",showText:x=!1,tooltipPosition:t="bottom"})=>{const[o,i]=s.useState(!1),[m,a]=s.useState(!0),[b,d]=s.useState(!1);s.useEffect(()=>{h()},[n,l]);const h=async()=>{a(!0);try{const e=await u.checkBookmarkStatus(l,n);i(e.is_bookmarked)}catch(e){console.error("Error checking bookmark status:",e)}finally{a(!1)}},p=async()=>{if(!m){a(!0);try{const e=await u.toggleBookmark(l,n,f);i(e.is_bookmarked),k.success(e.is_bookmarked?"Added to bookmarks":"Removed from bookmarks",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}catch(e){console.error("Error toggling bookmark:",e),k.error("Failed to update bookmark. Please try again.",{position:"bottom-right",autoClose:3e3})}finally{a(!1)}}};return r.jsxs("div",{className:`relative cursor-pointer ${g}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[r.jsxs("button",{onClick:p,className:`flex items-center focus:outline-none ${o?"text-yellow-500":"text-gray-500 hover:text-yellow-500"} transition duration-200`,disabled:m,"aria-label":o?"Remove bookmark":"Add bookmark",children:[m?r.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):r.jsx(r.Fragment,{children:o?r.jsx(y,{className:c}):r.jsx(w,{className:c})}),x&&r.jsx("span",{className:"ml-1",children:o?"Bookmarked":"Bookmark"})]}),b&&r.jsxs("div",{className:`
          absolute z-50 w-max 
          ${t==="bottom"?"top-full mt-2 left-1/2 transform -translate-x-1/2":t==="top"?"bottom-full mb-2 left-1/2 transform -translate-x-1/2":t==="right"?"left-full ml-2 top-1/2 transform -translate-y-1/2":"right-full mr-2 top-1/2 transform -translate-y-1/2"} 
          px-3 py-2 text-sm font-medium text-gray-800 bg-white border border-gray-200 rounded-lg shadow-lg whitespace-nowrap
        `,children:[r.jsx("div",{className:`
            absolute w-3 h-3 bg-white transform rotate-45 border-gray-200
            ${t==="bottom"?"top-0 -translate-y-1/2 border-t border-l left-1/2 -translate-x-1/2":t==="top"?"bottom-0 translate-y-1/2 border-b border-r left-1/2 -translate-x-1/2":t==="right"?"left-0 -translate-x-1/2 border-l border-t top-1/2 -translate-y-1/2":"right-0 translate-x-1/2 border-r border-b top-1/2 -translate-y-1/2"}
          `}),r.jsx("div",{className:"relative z-10",children:o?"Remove from bookmarks":"Add to bookmarks"})]})]})};export{C as B};
