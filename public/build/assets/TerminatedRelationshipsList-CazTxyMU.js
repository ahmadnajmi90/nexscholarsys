import{r as w,j as e,b as u}from"./app-DlrLkdql.js";import{C as y,b as C,c as M,a as _}from"./card-BIYhEdWl.js";import{B as D}from"./button-CmAFW6Q4.js";import{B as R}from"./badge-DOEya6TB.js";import{A as h,a as f}from"./avatar-BUsG5DLW.js";import S from"./StudentRelationshipDetailModal-6Motn_ed.js";import{n as A}from"./en-US-DIdCsyf3.js";import{d as T,f as g}from"./format-BOijCLBA.js";import{C as k}from"./calendar-BUDN8Wve.js";import{C as H}from"./clock-Ud-VH7sM.js";import{C as F}from"./circle-x-CkeR9Pb4.js";import{H as B}from"./history-_pjcNf-8.js";import{f as E}from"./formatDistanceToNow-CZclDLe0.js";import"./utils-CBfrqCZ4.js";import"./index-CdJFUDDL.js";import"./modalAnimations-CCENKliM.js";import"./supervisionHelpers-EJT0WNFw.js";import"./tabs-BHwQVOEn.js";import"./index-CooGWVRp.js";import"./index-_t9AzER0.js";import"./index-BPUO_Du-.js";import"./index-CxKA1-ru.js";import"./index-kmWevIUn.js";import"./index-BiBX-aEh.js";import"./index-DTEdqLdY.js";import"./index-DliD_jgu.js";import"./index-MQT5_bdA.js";import"./scroll-area-CcD72brL.js";import"./index-BdQq_4o_.js";import"./ThreadPane-B2-NznzI.js";import"./Modal-Cu2styYL.js";import"./dialog-C4T7sENw.js";import"./transition-CrpKBowS.js";import"./file-text-DuT2_NhJ.js";import"./createLucideIcon-DuVmJdM5.js";import"./download-C9BmgKLA.js";import"./x-CaP1GlTY.js";import"./index-B_EXF9H_.js";import"./isSameDay-BHs4V-zU.js";import"./ScheduleMeetingDialog-BKfoj1m2.js";import"./input-BA79iiec.js";import"./textarea-DkBJcOd9.js";import"./label-DjtJ3Q_j.js";import"./alert-DSFFSMc8.js";import"./logError-BloCzXDJ.js";import"./useGoogleCalendar-n1GyoeWI.js";import"./external-link-BbmK-hZ2.js";import"./loader-circle-BDp7_rWE.js";import"./UnifiedOverviewTab-z_VFr6AQ.js";import"./user-round-COXXmn1M.js";import"./briefcase-BY2whaIk.js";import"./mail-BUoIwSDY.js";import"./phone-QUfO4DSt.js";import"./graduation-cap-ByJq4Rk3.js";import"./globe-Bq6NnCQd.js";import"./calendar-clock-C9dxkGqa.js";import"./UnbindRequestModal-Bl4t29Ww.js";import"./user-minus-Di9dcZKV.js";import"./triangle-alert-DvEsydhA.js";import"./RelationshipHistoryTab-CC5WAQSZ.js";import"./circle-alert-BSGnPwsh.js";import"./users-DIbmjsPC.js";import"./tooltip-Y6AC5kbZ.js";import"./index-Cua-v5t-.js";import"./index-Fs6G4e3d.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-Ci_0jHjH.js";import"./index-6fNHbBBE.js";import"./index-raKJPBbr.js";import"./proxy-9_5LvuaU.js";import"./video-B5xdVhqU.js";import"./constructNow-6bIQB1GK.js";function U(s,r,a){const[t,o]=A(a?.in,s,r),l=j(t,o),i=Math.abs(T(t,o));t.setDate(t.getDate()-l*i);const n=+(j(t,o)===-l),m=l*(i-n);return m===0?0:m}function j(s,r){const a=s.getFullYear()-r.getFullYear()||s.getMonth()-r.getMonth()||s.getDate()-r.getDate()||s.getHours()-r.getHours()||s.getMinutes()-r.getMinutes()||s.getSeconds()-r.getSeconds()||s.getMilliseconds()-r.getMilliseconds();return a<0?-1:a>0?1:a}function rs({relationships:s=[],reload:r,isLoading:a=!1}){const[t,o]=w.useState(null),l=!a&&(!Array.isArray(s)||s.length===0);return a?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((i,n)=>e.jsxs("div",{className:"border border-dashed rounded-xl p-5 bg-white shadow-sm animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-slate-200"}),e.jsx("div",{className:"h-3 w-24 rounded bg-slate-100"})]})]}),e.jsx("div",{className:"h-6 w-24 rounded-full bg-slate-100"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"h-3 w-full rounded bg-slate-100"}),e.jsx("div",{className:"h-3 w-3/4 rounded bg-slate-100"})]}),e.jsx("div",{className:"mt-4 h-10 rounded bg-slate-200"})]},`terminated-skeleton-${n}`))}):l?e.jsxs(y,{className:"border-dashed border-slate-200",children:[e.jsx(C,{children:e.jsx(M,{className:"text-lg font-semibold text-slate-800",children:"No Terminated Relationships"})}),e.jsx(_,{className:"text-sm text-slate-600",children:"You don't have any terminated supervision relationships. All past relationships will appear here."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:s.map(i=>e.jsx($,{relationship:i,onViewHistory:()=>o(i)},i.id))}),t&&e.jsx(S,{relationship:t,onClose:()=>o(null),onUpdated:r,isReadOnly:!0})]})}function $({relationship:s,onViewHistory:r}){const a=s?.academician??{},t=a.full_name??"Supervisor",o=a.profile_picture?`/storage/${a.profile_picture}`:null,l=a.url||null,i=s?.accepted_at||s?.start_date,n=s?.terminated_at,m=i?g(new Date(i),"dd/MM/yyyy"):"—",N=n?g(new Date(n),"dd/MM/yyyy"):"—",c=n?E(new Date(n),{addSuffix:!0}):null,d=i&&n?U(new Date(n),new Date(i)):0,b=d>0?`${Math.floor(d/30)} months, ${d%30} days`:"—",p=s?.unbind_requests?.length>0?s.unbind_requests[s.unbind_requests.length-1]?.reason:"No reason provided",x=t.split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,3);return e.jsxs("div",{className:"border rounded-xl p-5 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[l?e.jsx(u,{href:route("academicians.show",l),className:"flex-shrink-0",children:e.jsx(h,{className:"h-10 w-10 border border-slate-200 hover:ring-2 hover:ring-slate-300 transition-all cursor-pointer",children:o?e.jsx("img",{src:o,alt:t,className:"h-full w-full object-cover"}):e.jsx(f,{className:"bg-slate-100 text-slate-600 text-sm",children:x})})}):e.jsx(h,{className:"h-10 w-10 border border-slate-200",children:o?e.jsx("img",{src:o,alt:t,className:"h-full w-full object-cover"}):e.jsx(f,{className:"bg-slate-100 text-slate-600 text-sm",children:x})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[l?e.jsx(u,{href:route("academicians.show",l),children:e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate hover:text-indigo-600 transition-colors cursor-pointer",children:t})}):e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:t}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.role==="main"?"Main Supervisor":"Co-Supervisor"}),c&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Terminated ",c]})]})]}),e.jsx(R,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 flex-shrink-0",children:"Terminated"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(k,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:[m," → ",N]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(H,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:["Duration: ",b]})]})]}),p&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-red-900 mb-1",children:"Termination Reason:"}),e.jsx("p",{className:"text-xs text-red-800 line-clamp-2",children:p})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(D,{variant:"outline",className:"w-full",onClick:r,children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"View History"]})})]})}export{rs as default};
