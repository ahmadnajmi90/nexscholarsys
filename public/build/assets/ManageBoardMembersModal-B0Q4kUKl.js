import{c as y}from"./createLucideIcon-CDRXeg4x.js";import{r as m,j as s,a as N,y as b}from"./app-O3Za6ZI8.js";import{M as k}from"./Modal-CrwJvZIV.js";import{P as S}from"./PrimaryButton-ZmKGNhsy.js";import{S as M}from"./SecondaryButton-BufK10Lc.js";import{c as h}from"./index-vsb0BAG8.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],_=y("UserCheck",U);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],z=y("UserPlus",w);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],B=y("UserX",P);function F({show:o,onClose:n,board:c,workspaceMembers:x}){const[l,p]=m.useState([]),[d,g]=m.useState(!1);m.useEffect(()=>{o&&c&&c.members&&p(c.members.map(e=>e.id))},[o,c]);const j=e=>{p(a=>a.includes(e)?a.filter(t=>t!==e):[...a,e])},v=e=>{e.preventDefault(),g(!0),N.post(route("project-hub.boards.sync-members",c.id),{user_ids:l}).then(a=>{h.success("Board access updated successfully"),b.reload({preserveScroll:!0,onSuccess:()=>{n()},onError:()=>{n(),h.error("Changes saved but page refresh failed. Please reload the page.")}})}).catch(a=>{var r,i;const t=((i=(r=a.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to update board access";h.error(t),g(!1)})},u=e=>{if(!e)return"Unknown User";const a=e.academician||e.postgraduate||e.undergraduate;return(a==null?void 0:a.full_name)||e.name},f=e=>{var t,r,i;if(!e)return null;const a=((t=e.academician)==null?void 0:t.profile_picture)||((r=e.postgraduate)==null?void 0:r.profile_picture)||((i=e.undergraduate)==null?void 0:i.profile_picture);return a?`/storage/${a}`:null};return s.jsx(k,{show:o,onClose:n,maxWidth:"md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Manage Board Access"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Select which members should have access to the ",s.jsx("strong",{children:c==null?void 0:c.name})," board."]}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-2 max-h-80 overflow-y-auto",children:x&&x.length>0?s.jsx("div",{className:"space-y-2",children:x.map(e=>{var a,t;return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${l.includes(e.id)?"bg-indigo-50 border border-indigo-100":"bg-white border border-gray-100"}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:f(e)?s.jsx("img",{src:f(e),alt:u(e),className:"h-full w-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-sm",children:u(e).charAt(0)})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:u(e)}),s.jsx("p",{className:"text-xs text-gray-500",children:(((a=e.pivot)==null?void 0:a.role)||"Member").charAt(0).toUpperCase()+(((t=e.pivot)==null?void 0:t.role)||"Member").slice(1)})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only",checked:l.includes(e.id),onChange:()=>j(e.id),disabled:d}),l.includes(e.id)?s.jsx("span",{className:"p-1.5 bg-indigo-100 rounded-md text-indigo-600",children:s.jsx(_,{className:"w-5 h-5"})}):s.jsx("span",{className:"p-1.5 text-gray-400 bg-gray-100 hover:bg-gray-200 rounded-md",children:s.jsx(B,{className:"w-5 h-5"})})]})})]},e.id)})}):s.jsx("div",{className:"text-center p-4",children:s.jsx("p",{className:"text-gray-500",children:"No members available to manage."})})}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(M,{onClick:n,disabled:d,children:"Cancel"}),s.jsx(S,{type:"submit",disabled:d,children:d?"Saving...":"Save Changes"})]})]})]})})}export{F as M,z as U};
