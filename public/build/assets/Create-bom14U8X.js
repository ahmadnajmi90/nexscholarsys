import{q as v,W as y,r as d,j as e}from"./app-Gmo_y8ZH.js";import{M as b}from"./MainLayout-BQqIayN2.js";import f from"./NationalityForm-DSYfuzAA.js";import{R as N}from"./quill.snow-DKiMv7rt.js";import{u as w}from"./useRoles-C63dVazG.js";import{I as n}from"./InputLabel-DT8l-7UT.js";import"./index-CO66aP5A.js";import"./createLucideIcon-2cHt7vfe.js";import"./analytics-BQ374C1C.js";import"./index-CeZT4AlS.js";import"./react-select.esm-DjomHlLR.js";import"./InputError-DHmYYlFb.js";function B(){const{auth:c}=v().props;w();const{data:s,setData:l,post:g,processing:j,errors:a}=y({title:"",description:"",start_date:"",end_date:"",application_deadline:"",grant_type:"",grant_theme:[],cycle:"",sponsored_by:"",email:"",website:"",country:"",image:null,attachment:null,status:"published"});d.useState(s.university);const[o,h]=d.useState(!1),m=d.useRef(null);d.useEffect(()=>{const t=i=>{m.current&&!m.current.contains(i.target)&&h(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[o]);const x=t=>{s.grant_theme.includes(t)?l("grant_theme",s.grant_theme.filter(i=>i!==t)):l("grant_theme",[...s.grant_theme,t])};d.useState("");function p(t){t&&t.preventDefault();const i=new FormData;Object.keys(s).forEach(r=>{s[r]instanceof File?i.append(r,s[r]):Array.isArray(s[r])?i.append(r,JSON.stringify(s[r])):i.append(r,s[r])});for(let[r,u]of i.entries())console.log(`${r}: ${u}`),console.log(`${r}: ${typeof u}`);g(route("post-grants.store"),{data:i,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Grant posted successfully.")},onError:r=>{console.error("Error updating profile:",r),alert("Failed to post the grant. Please try again.")}})}return e.jsx(b,{title:"",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"absolute top-4 left-4 text-gray-700 hover:text-gray-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsxs("form",{onSubmit:p,className:"bg-white p-4 sm:p-6 rounded-lg max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Grant"}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",value:e.jsxs(e.Fragment,{children:["Grant Name ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"title",type:"text",value:s.title,onChange:t=>l("title",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter grant title"}),a.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.title})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"description",value:e.jsxs(e.Fragment,{children:["Grant Description ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("div",{className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",style:{height:"300px",overflowY:"auto"},children:e.jsx(N,{theme:"snow",value:s.description,onChange:t=>l("description",t),placeholder:"Enter description",style:{height:"300px",maxHeight:"300px"}})}),a.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"start_date",value:e.jsxs(e.Fragment,{children:["Start Date (Grant) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"start_date",type:"date",value:s.start_date,onChange:t=>l("start_date",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),a.start_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.start_date})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"end_date",value:e.jsxs(e.Fragment,{children:["End Date (Grant) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"end_date",type:"date",value:s.end_date,min:s.start_date||"",onChange:t=>l("end_date",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),a.end_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.end_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"application_deadline",value:e.jsxs(e.Fragment,{children:["Application Deadline ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"application_deadline",type:"date",value:s.application_deadline,onChange:t=>l("application_deadline",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),a.application_deadline&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.application_deadline})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"grant_type",value:e.jsxs(e.Fragment,{children:["Grant Type ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsxs("select",{id:"grant_type",value:s.grant_type,onChange:t=>l("grant_type",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Grant Type"}),e.jsx("option",{value:"Matching Grant",children:"Matching Grant"}),e.jsx("option",{value:"Seed Grant",children:"Seed Grant"}),e.jsx("option",{value:"Research Grant",children:"Research Grant"}),e.jsx("option",{value:"Travel Grant",children:"Travel Grant"}),e.jsx("option",{value:"Innovation Grant",children:"Innovation Grant"}),e.jsx("option",{value:"Collaboration Grant",children:"Collaboration Grant"}),e.jsx("option",{value:"Training Grant",children:"Training Grant"}),e.jsx("option",{value:"Capacity-Building Grant",children:"Capacity-Building Grant"}),e.jsx("option",{value:"Community Grant",children:"Community Grant"}),e.jsx("option",{value:"Development Grant",children:"Development Grant"}),e.jsx("option",{value:"Pilot Grant",children:"Pilot Grant"}),e.jsx("option",{value:"Commercialization Grant",children:"Commercialization Grant"}),e.jsx("option",{value:"Technology Grant",children:"Technology Grant"}),e.jsx("option",{value:"Sponsorship Grant",children:"Sponsorship Grant"}),e.jsx("option",{value:"Social Impact Grant",children:"Social Impact Grant"}),e.jsx("option",{value:"Emergency or Relief Grant",children:"Emergency or Relief Grant"}),e.jsx("option",{value:"International Grant",children:"International Grant"}),e.jsx("option",{value:"Equipment Grant",children:"Equipment Grant"}),e.jsx("option",{value:"Small Business Grant",children:"Small Business Grant"})]}),a.grant_type&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.grant_type})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{ref:m,children:[e.jsx(n,{value:e.jsxs(e.Fragment,{children:["Grant Theme (Multiselect) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("div",{className:`relative mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 px-2.5 cursor-pointer bg-white ${o?"shadow-lg":""}`,onClick:()=>h(!o),children:s.grant_theme&&s.grant_theme.length>0?s.grant_theme.join(", "):"Select Grant Themes"}),o&&e.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-300 rounded shadow-lg w-[37.5rem]",children:e.jsxs("div",{className:"p-2 space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:"Science & Technology",checked:s.grant_theme.includes("Science & Technology"),onChange:t=>x(t.target.value),className:"mr-2"}),e.jsx("span",{children:"Science & Technology"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:"Social Science",checked:s.grant_theme.includes("Social Science"),onChange:t=>x(t.target.value),className:"mr-2"}),e.jsx("span",{children:"Social Science"})]})]})}),a.grant_theme&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.grant_theme})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"cycle",value:e.jsxs(e.Fragment,{children:["Cycle ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsxs("select",{id:"cycle",value:s.cycle,onChange:t=>l("cycle",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Cycle"}),e.jsx("option",{value:"No Cycle",children:"No Cycle"}),e.jsx("option",{value:"Cycle 1",children:"Cycle 1"}),e.jsx("option",{value:"Cycle 2",children:"Cycle 2"}),e.jsx("option",{value:"Cycle 3",children:"Cycle 3"})]}),a.cycle&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.cycle})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"sponsored_by",value:e.jsxs(e.Fragment,{children:["Sponsored By ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"sponsored_by",type:"text",value:s.sponsored_by,onChange:t=>l("sponsored_by",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter sponsor"}),a.sponsored_by&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.sponsored_by})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",value:e.jsxs(e.Fragment,{children:["Contact Email ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"email",type:"email",value:s.email,onChange:t=>l("email",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter email"}),a.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.email}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:s.email===c.email,onChange:t=>{t.target.checked?l("email",c.email):l("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsxs("label",{htmlFor:"usePersonalEmail",className:"ml-2 text-gray-700",children:["Use personal email (",c.email,")"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"website",value:"Website / Link"}),e.jsx("input",{id:"website",type:"url",value:s.website,onChange:t=>l("website",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Website / Link"}),a.website&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.website})]}),e.jsxs("div",{children:[e.jsx(f,{title:"Country",value:s.country,isNotSpecify:!0,onChange:t=>l("country",t),errors:a}),a.country&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.country})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"image",value:"Upload Image"}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:t=>l("image",t.target.files[0]),className:"mt-1 block w-full border-gray-300 rounded-md py-2 text-sm"}),a.image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.image})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"attachment",value:"Upload Attachment"}),e.jsx("input",{id:"attachment",type:"file",onChange:t=>l("attachment",t.target.files[0]),className:"mt-1 block w-full border-gray-300 rounded-md py-2 text-sm"}),a.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.attachment})]})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:()=>{p()},disabled:j,className:"w-full sm:w-auto inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"})})]})]})})}export{B as default};
