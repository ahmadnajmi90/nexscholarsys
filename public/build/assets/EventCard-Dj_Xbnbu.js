import{r as l,j as t,b as z}from"./app-6KcAPae7.js";import{F as i}from"./FilterDropdown-JaWHfkRV.js";import{S as y}from"./SearchBar-Bq4wsLuj.js";import{P as L}from"./Pagination-BbSK2vVE.js";import U from"./ContentSkeletonCard-DoYY9rYV.js";import{f as G}from"./index-Ce5Il87X.js";import"./purify.es-9JUW7zMc.js";import"./react-select.esm-Caq7p8aY.js";import"./index-JAD3o4sP.js";import"./floating-ui.dom-D5EC_49c.js";import"./chevron-left-Dg3HzLsn.js";import"./createLucideIcon-Dg0NKHwN.js";import"./chevron-right-BAu-tXgn.js";import"./iconBase-n0Q-2a7D.js";const H=({html:a,maxLength:o=100,className:c})=>{if(!a)return t.jsx("p",{className:c,children:"No content available"});const n=a.replace(/<[^>]*>/g,""),d=n.length>o?n.substring(0,o)+"...":n;return t.jsx("p",{className:c,children:d})},ie=({events:a,researchOptions:o,isLoading:c})=>{const[n,d]=l.useState(!1),[m,w]=l.useState([]),[h,_]=l.useState([]),[u,N]=l.useState([]),[x,S]=l.useState([]),[p,F]=l.useState([]),[g,E]=l.useState(""),[f,D]=l.useState(""),[b,k]=l.useState(1),v=9,C=[...new Set(a.map(e=>e.event_mode))].filter(Boolean).map(e=>({value:e,label:e})),T=[...new Set(a.map(e=>e.event_type))].filter(Boolean).map(e=>({value:e,label:e})),A=[...new Set(a.flatMap(e=>e.event_theme||[]))].filter(Boolean).map(e=>({value:e,label:e})),V=[...new Set(a.map(e=>e.country))].filter(Boolean).map(e=>({value:e,label:e})),M=Array.from(new Set(a.flatMap(e=>Array.isArray(e.field_of_research)?e.field_of_research:[]))).map(e=>{const s=o.find(r=>`${r.field_of_research_id}-${r.research_area_id}-${r.niche_domain_id}`===e);return{value:e,label:s?`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`:"Unknown Research Area"}}),j=a.filter(e=>{const s=m.length===0||m.includes(e.event_mode),r=h.length===0||h.includes(e.event_type),B=u.length===0||u.includes(e.event_theme),R=x.length===0||x.includes(e.country),q=p.length===0||Array.isArray(e.field_of_research)&&e.field_of_research.some(W=>p.includes(W)),O=(!g||new Date(e.start_date)>=new Date(g))&&(!f||new Date(e.start_date)<=new Date(f));return s&&r&&B&&R&&q&&O}),P=Math.ceil(j.length/v),$=j.slice((b-1)*v,b*v);return t.jsxs("div",{className:"min-h-screen",children:[t.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col items-end space-y-2 lg:hidden",children:[t.jsx("button",{onClick:()=>d(!n),className:"bg-indigo-600 text-white p-2 rounded-lg shadow-lg",children:t.jsx(G,{className:"text-xl"})}),t.jsx(y,{placeholder:"Search events...",routeName:"events.index",className:""})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 p-4 md:p-0 md:py-2 md:px-4 lg:p-0 lg:py-2 lg:pr-2",children:[t.jsx("div",{className:"lg:w-1/4",children:t.jsxs("div",{className:`fixed lg:relative top-0 left-0 lg:block lg:w-full w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",t.jsx("button",{onClick:()=>d(!1),className:"text-gray-600 lg:hidden",children:"âœ•"})]}),t.jsx(i,{label:"Event Mode",options:C,selectedValues:m,setSelectedValues:w}),t.jsx(i,{label:"Event Type",options:T,selectedValues:h,setSelectedValues:_}),t.jsx(i,{label:"Event Theme",options:A,selectedValues:u,setSelectedValues:N}),t.jsx(i,{label:"Country",options:V,selectedValues:x,setSelectedValues:S}),t.jsx(i,{label:"Research Area",options:M,selectedValues:p,setSelectedValues:F}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-gray-700 font-medium",children:"Start Date"}),t.jsx("input",{type:"date",value:g,onChange:e=>E(e.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-gray-700 font-medium",children:"End Date"}),t.jsx("input",{type:"date",value:f,onChange:e=>D(e.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200"})]})]})}),t.jsxs("div",{className:"lg:w-3/4",children:[t.jsx("div",{className:"mb-6 hidden lg:block",children:t.jsx(y,{placeholder:"Search events...",routeName:"events.index",className:""})}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-0 md:px-2 lg:px-0",children:c?Array.from({length:9},(e,s)=>t.jsx(U,{},s)):$.map((e,s)=>{const r=new Date(e.end_date)<new Date;return t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden text-center pb-8",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:e.image?`/storage/${e.image}`:"/storage/default.jpg",alt:e.event_name,className:"w-full h-48 object-cover"}),r&&t.jsx("span",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded",children:"Ended"})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 truncate",title:e.event_name,children:e.event_name}),t.jsx("p",{className:"text-gray-600 h-12 mt-4 text-center font-extralight",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.jsx(H,{html:e.description||"No description available.",maxLength:100})})]}),t.jsx(z,{href:route("events.show",e.url),className:"inline-block rounded-full border border-gray-300 px-7 py-2 text-base font-medium transition hover:border-primary hover:bg-primary hover:text-white",children:"View Details"})]},s)})}),t.jsx("div",{className:"mt-6",children:t.jsx(L,{currentPage:b,totalPages:P,onPageChange:k})})]})]})]})};export{ie as default};
