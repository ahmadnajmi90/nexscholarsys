import{r as C,j as e,b as h}from"./app-DycluJDi.js";import{C as M,b as _,c as D,a as R}from"./card--WzO-fcI.js";import{B as S}from"./button-DrpbBg5w.js";import{B as A}from"./badge-7bhQenKW.js";import{A as g,a as j}from"./avatar-DLxWZnV0.js";import T from"./StudentRelationshipDetailModal-DFF1I4Hw.js";import{n as k}from"./en-US-DNUEYIb-.js";import{d as H,f as N}from"./format-Dv9Rm441.js";import{C as F}from"./calendar-B99WzEhS.js";import{C as B}from"./clock-CXQ5cZnz.js";import{C as E}from"./circle-x-B0ePoeZ3.js";import{H as U}from"./history-C-nHJ_-o.js";import{f as $}from"./formatDistanceToNow-GKXiLTrL.js";import"./utils-D-KgF5mV.js";import"./index-CGrAONsN.js";import"./modalAnimations-CCENKliM.js";import"./supervisionHelpers-EJT0WNFw.js";import"./tabs--JuXotzZ.js";import"./index-CQUljECt.js";import"./index-Cyyfgiou.js";import"./index-0qH_eg9b.js";import"./index-3QGgbkx-.js";import"./index-DhTYVmtt.js";import"./index-TfP-1Own.js";import"./index-C_G9iF1W.js";import"./index-D7eWovwz.js";import"./scroll-area-DStNuix4.js";import"./index-BdQq_4o_.js";import"./ThreadPane-B59ibpsg.js";import"./Modal-B5RxEfWL.js";import"./dialog-BhLoydV6.js";import"./transition-CPF_n0Aj.js";import"./AttachmentPreviewModal-o5AETYTO.js";import"./file-text-CM_fgsBl.js";import"./createLucideIcon-D0KJwFBT.js";import"./download-BSCvsIuy.js";import"./x-DMdqOVgw.js";import"./index-CRoFkAwq.js";import"./isSameDay-Dm-A-V7S.js";import"./ScheduleMeetingDialog-DxmMlWVk.js";import"./input-DGTuyCNK.js";import"./textarea-CSq6H5gP.js";import"./label-DymNAe9a.js";import"./alert-DSLdBZdj.js";import"./logError-D4ezqrCx.js";import"./useGoogleCalendar-B8hZgA0d.js";import"./external-link-C7oBCvIe.js";import"./loader-circle-DBMiS7kS.js";import"./UnifiedOverviewTab-Hu8ps4s-.js";import"./user-round-D0HJxKcP.js";import"./briefcase-B4GBZk0m.js";import"./mail-vd1JXS-x.js";import"./phone-Cz2eoHVX.js";import"./graduation-cap-D5C30QRj.js";import"./globe-VmxN95cK.js";import"./calendar-clock-CmwHfodY.js";import"./UnbindRequestModal-Dh6S40t4.js";import"./user-minus-Dy6Dt6Xk.js";import"./triangle-alert-CJCKiVvc.js";import"./RelationshipHistoryTab-BiwPbhVH.js";import"./circle-alert-C0Kb6UEK.js";import"./users-B5watpD6.js";import"./tooltip-Bjh7jqzi.js";import"./index-CjkJyM6P.js";import"./index-MS7JGIS8.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-DygBQkXJ.js";import"./index-Bf3MYqwD.js";import"./index-D2lR-Ixd.js";import"./proxy-BQWTDGOX.js";import"./video-BDzp7SjL.js";import"./constructNow-DtVD-0hX.js";function q(s,a,t){const[r,o]=k(t==null?void 0:t.in,s,a),m=b(r,o),i=Math.abs(H(r,o));r.setDate(r.getDate()-m*i);const l=+(b(r,o)===-m),n=m*(i-l);return n===0?0:n}function b(s,a){const t=s.getFullYear()-a.getFullYear()||s.getMonth()-a.getMonth()||s.getDate()-a.getDate()||s.getHours()-a.getHours()||s.getMinutes()-a.getMinutes()||s.getSeconds()-a.getSeconds()||s.getMilliseconds()-a.getMilliseconds();return t<0?-1:t>0?1:t}function is({relationships:s=[],reload:a,isLoading:t=!1}){const[r,o]=C.useState(null),m=!t&&(!Array.isArray(s)||s.length===0);return t?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((i,l)=>e.jsxs("div",{className:"border border-dashed rounded-xl p-5 bg-white shadow-sm animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-slate-200"}),e.jsx("div",{className:"h-3 w-24 rounded bg-slate-100"})]})]}),e.jsx("div",{className:"h-6 w-24 rounded-full bg-slate-100"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"h-3 w-full rounded bg-slate-100"}),e.jsx("div",{className:"h-3 w-3/4 rounded bg-slate-100"})]}),e.jsx("div",{className:"mt-4 h-10 rounded bg-slate-200"})]},`terminated-skeleton-${l}`))}):m?e.jsxs(M,{className:"border-dashed border-slate-200",children:[e.jsx(_,{children:e.jsx(D,{className:"text-lg font-semibold text-slate-800",children:"No Terminated Relationships"})}),e.jsx(R,{className:"text-sm text-slate-600",children:"You don't have any terminated supervision relationships. All past relationships will appear here."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:s.map(i=>e.jsx(Y,{relationship:i,onViewHistory:()=>o(i)},i.id))}),r&&e.jsx(T,{relationship:r,onClose:()=>o(null),onUpdated:a,isReadOnly:!0})]})}function Y({relationship:s,onViewHistory:a}){var u,f;const t=(s==null?void 0:s.academician)??{},r=t.full_name??"Supervisor",o=t.profile_picture?`/storage/${t.profile_picture}`:null,m=t.url||null,i=(s==null?void 0:s.accepted_at)||(s==null?void 0:s.start_date),l=s==null?void 0:s.terminated_at,n=i?N(new Date(i),"dd/MM/yyyy"):"—",v=l?N(new Date(l),"dd/MM/yyyy"):"—",c=l?$(new Date(l),{addSuffix:!0}):null,d=i&&l?q(new Date(l),new Date(i)):0,w=d>0?`${Math.floor(d/30)} months, ${d%30} days`:"—",x=((u=s==null?void 0:s.unbind_requests)==null?void 0:u.length)>0?(f=s.unbind_requests[s.unbind_requests.length-1])==null?void 0:f.reason:"No reason provided",p=r.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,3);return e.jsxs("div",{className:"border rounded-xl p-5 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),className:"flex-shrink-0",children:e.jsx(g,{className:"h-10 w-10 border border-slate-200 hover:ring-2 hover:ring-slate-300 transition-all cursor-pointer",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})})}):e.jsx(g,{className:"h-10 w-10 border border-slate-200",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),children:e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate hover:text-indigo-600 transition-colors cursor-pointer",children:r})}):e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:r}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.role==="main"?"Main Supervisor":"Co-Supervisor"}),c&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Terminated ",c]})]})]}),e.jsx(A,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 flex-shrink-0",children:"Terminated"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(F,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:[n," → ",v]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(B,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:["Duration: ",w]})]})]}),x&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-red-900 mb-1",children:"Termination Reason:"}),e.jsx("p",{className:"text-xs text-red-800 line-clamp-2",children:x})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(S,{variant:"outline",className:"w-full",onClick:a,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"View History"]})})]})}export{is as default};
