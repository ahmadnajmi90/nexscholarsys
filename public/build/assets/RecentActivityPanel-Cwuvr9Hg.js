import{r as i,j as e,a as C}from"./app-iMgHp_eS.js";import{C as j,b as y,c as N,a as b}from"./card-64sxD4c0.js";import{l as w}from"./logError-BloCzXDJ.js";import{L as k}from"./loader-circle-F27clpTW.js";import{C as p}from"./clock-qgsdW-h0.js";import{U as c}from"./users-B-SRuXWr.js";import{U as d}from"./user-plus-Bg5CcB8d.js";import{C as l}from"./circle-alert-Br8bwMRQ.js";import{U as A}from"./user-minus-DcLlawfv.js";import{L as I}from"./lightbulb-ChMIwUPI.js";import{F as L}from"./file-text-C4_We7ct.js";import{M}from"./message-circle-BGfVKvHq.js";import{C as m}from"./circle-check-big-BORgBAPo.js";import{c as S}from"./createLucideIcon-BXdi-pyk.js";import{C as T}from"./calendar-clock-Cu_uFgIh.js";import{C as q}from"./calendar-D8qiMF9A.js";import{C as E}from"./circle-x-BUQEvxPL.js";import{f as R}from"./formatDistanceToNow-CZclDLe0.js";import"./utils-CBfrqCZ4.js";import"./constructNow-6bIQB1GK.js";import"./en-US-DIdCsyf3.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],F=S("CalendarX",U),O={request_rejected:E,request_accepted:m,meeting_scheduled:q,meeting_rescheduled:T,meeting_cancelled:F,request_submitted:d,offer_accepted:m,message_received:M,document_uploaded:L,recommendations_available:I,unbind_approved:A,unbind_pending:l,cosupervisor_added:c,cosupervisor_pending_approval:l,cosupervisor_invited:d,cosupervisor_invitation_received:c},P={request_rejected:"text-red-500",request_accepted:"text-green-500",meeting_scheduled:"text-blue-500",meeting_rescheduled:"text-amber-500",meeting_cancelled:"text-red-500",request_submitted:"text-indigo-500",offer_accepted:"text-green-500",message_received:"text-purple-500",document_uploaded:"text-amber-500",recommendations_available:"text-indigo-500",unbind_approved:"text-red-600",unbind_pending:"text-orange-500",cosupervisor_added:"text-emerald-500",cosupervisor_pending_approval:"text-yellow-500",cosupervisor_invited:"text-indigo-500",cosupervisor_invitation_received:"text-purple-500"};function ce({userRole:s,triggerReload:o=0}){const[t,n]=i.useState([]),[x,u]=i.useState(!0),[a,h]=i.useState(!1),v=async()=>{try{const r=await C.get(route("supervision.activity.recent"));n(r.data.data||[])}catch(r){w(r,"RecentActivityPanel loadActivities")}finally{u(!1)}};i.useEffect(()=>{v()},[o]);const f=a?t.slice(0,8):t.slice(0,3),_=t.length>3,g=t.length>8;return e.jsxs(j,{className:"shadow-sm",children:[e.jsx(y,{className:"pb-3",children:e.jsx(N,{className:"text-base font-semibold text-slate-900",children:"Recent Activity"})}),e.jsx(b,{className:"space-y-1",children:x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(k,{className:"h-5 w-5 animate-spin text-indigo-600"})}):t.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(p,{className:"h-8 w-8 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No recent activity"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Your supervision updates will appear here"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-0 divide-y divide-slate-100",children:f.map(r=>e.jsx(V,{activity:r},r.id))}),_&&e.jsxs("div",{className:"pt-3 mt-3 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>h(!a),className:"w-full text-sm font-medium text-indigo-600 hover:text-indigo-700 transition-colors",children:a?"Show Less":`View More (${Math.min(t.length-3,5)} more)`}),a&&g&&e.jsx("p",{className:"text-xs text-slate-400 text-center mt-1",children:"Showing latest 8 activities"})]})]})})]})}function V({activity:s}){const o=O[s.type]||p,t=P[s.type]||"text-slate-500",n=s.created_at?R(new Date(s.created_at),{addSuffix:!0}):"";return e.jsxs("div",{className:"flex items-start gap-3 py-3 group cursor-pointer hover:bg-slate-50 -mx-3 px-3 rounded-md transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(o,{className:`h-4 w-4 ${t}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed",children:s.description}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:n})]})]})}export{ce as default};
