import{r as l,q as xe,j as e,b as h,a as he}from"./app-CxJcie6X.js";import{f as ue,Z as ge,I as pe,i as fe,j as je,k as be,l as ve}from"./index-Bo4JNGWa.js";import ye from"./RecommendationModal-D4q6sZHj.js";import Ne from"./RecommendationDisplay-BUqjzC-A.js";import{F as A}from"./FilterDropdown-Dw4bIsEE.js";import{B as _e}from"./BookmarkButton-DQGaM3_U.js";import{C as we}from"./ConnectionButton-Do9i8zJf.js";import{S as I}from"./SearchBar-B9e59dJf.js";import{P as ke}from"./Pagination-Bqvo9HVR.js";import Se from"./LoadingSkeletonCard-DiXvQhGh.js";import{S as Ae,T as Ce,a as Pe}from"./SkillsModal-jxq33TxX.js";import{T as $e,a as C,b as P,c as $}from"./tooltip-DY-ehbAy.js";import"./iconBase-Dgfn16JF.js";import"./react-select.esm-BE9ZVOSi.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-Be4FYkdk.js";import"./BookmarkHandler-BDBkY9zY.js";import"./chevron-left-Th47VGaA.js";import"./createLucideIcon-BZHwJ_Ns.js";import"./chevron-right-h_pjGxD5.js";import"./index-CFiLjjEK.js";import"./index-BB13cI-f.js";import"./index-CobXwCSB.js";import"./index-D9NnzX5f.js";import"./index-CtHA97Ma.js";import"./index-ONskwyIA.js";import"./index-CO9hoYs6.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";const Fe=o=>typeof o!="string"?"":o.replace(/\w\S*/g,c=>c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()),ds=({profilesData:o,universitiesList:c,faculties:Ue,users:q,researchOptions:u,searchQuery:Re,isLoading:z,onSearch:F})=>{const[O,d]=l.useState(!1),[a,g]=l.useState(null),[W,p]=l.useState(!1),[U,G]=l.useState(null),[D,f]=l.useState(!1),[R,B]=l.useState(!1),{skills:M}=xe().props;console.log(o);const[j,Q]=l.useState([]),[b,H]=l.useState([]),[v,Y]=l.useState(""),[y,Z]=l.useState([]),[N,L]=l.useState(1),[m,_]=l.useState(!1),w=9,k=l.useRef(null);l.useEffect(()=>{function s(t){k.current&&!k.current.contains(t.target)&&m&&_(!1)}return m&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[m]);const J=s=>{f(!0),he.get(route("academicians.quick-info",s.academician_id)).then(t=>{t.data&&t.data.academician?(g({...s,...t.data.academician,projects_count:t.data.projects_count||0,grants_count:t.data.grants_count||0,publications_count:t.data.publications_count||0}),d(!0)):(g(s),d(!0)),f(!1)}).catch(t=>{console.error("Error fetching academician detail:",t),g(s),d(!0),f(!1)})},K=s=>{const t=c.find(r=>r.id===s);return t?t.full_name:"Unknown University"},X=()=>(a==null?void 0:a.grants_count)||0,ee=()=>(a==null?void 0:a.projects_count)||0,se=()=>(a==null?void 0:a.publications_count)||0,te=(s,t)=>{t.preventDefault(),G(s),p(!0)},ae=()=>{p(!1)},re=new Set(o.flatMap(s=>Array.isArray(s.skills)?s.skills.map(t=>t.id):[])),T=(Array.isArray(M)?M:[]).filter(s=>re.has(s.id)).map(s=>{let t=s.name;return s.subdomain&&s.subdomain.domain?t=`${s.subdomain.domain.name} - ${s.subdomain.name} - ${s.name}`:s.full_name?t=s.full_name:t=Fe(s.name),{value:s.id,label:t}});console.log(T.label);const ie=(()=>{const s=new Set;return o.forEach(t=>{Array.isArray(t.research_expertise)&&t.research_expertise.forEach(r=>{s.add(r)})}),Array.from(s).map(t=>{const r=u.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===t);return r?{value:t,label:`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`}:{value:t,label:`${t}`}})})(),le=Array.from(new Set(o.map(s=>s.university))).map(s=>{const t=c.find(r=>r.id===s);return{value:s?s.toString():"",label:t?t.short_name:"Unknown University"}}),ne=s=>s===null?"0":s===!0||s==="1"||s===1?"1":s===!1||s==="0"||s===0?"0":"",E=o.filter(s=>{if(!s)return!1;const t=s.university?s.university.toString():"";let r=!0;j.length>0&&(r=Array.isArray(s.research_expertise)&&s.research_expertise.some(S=>j.includes(S)));const i=b.length===0||b.includes(t),n=s.availability_as_supervisor,x=ne(n),de=v===""||x===v,me=y.length===0||s.skills&&s.skills.some(S=>y.includes(S.id));return r&&i&&de&&me}),oe=Math.ceil(E.length/w),V=E.slice((N-1)*w,N*w),ce=s=>{L(s)};return e.jsx($e,{delayDuration:0,children:e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col items-end space-y-2 lg:hidden",children:[e.jsx("button",{onClick:()=>_(!m),className:"bg-indigo-600 text-white p-2 rounded-lg shadow-lg",children:e.jsx(ue,{className:"text-xl"})}),e.jsx(I,{placeholder:"Search academicians...",onSearch:F,className:""})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 p-4 md:p-0 md:py-2 lg:p-0 lg:py-2",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{ref:k,className:`fixed lg:relative top-0 left-0 lg:block lg:w-full w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${m?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",e.jsx("button",{onClick:()=>_(!1),className:"text-gray-600 lg:hidden",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{label:"Research Expertise",options:ie,selectedValues:j,setSelectedValues:Q}),e.jsx(A,{label:"Skills",options:T,selectedValues:y,setSelectedValues:Z}),e.jsx(A,{label:"University",options:le,selectedValues:b,setSelectedValues:H}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Available As Supervisor"}),e.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full pl-4",value:v,onChange:s=>{Y(s.target.value),L(1)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]})]})]})}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsx("div",{className:"mb-6 hidden lg:block",children:e.jsx(I,{placeholder:"Search academicians...",onSearch:F,className:""})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 px-0 md:px-6 lg:px-0",children:z?Array.from({length:9},(s,t)=>e.jsx(Se,{},t)):V.map(s=>{var t,r;return e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-[10px] font-semibold px-2.5 py-0.5 rounded-full",children:((t=c.find(i=>i.id===s.university))==null?void 0:t.short_name)||"Unknown University"}),e.jsx("div",{className:"h-32",children:e.jsx("img",{src:s.background_image!==null?`/storage/${s.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Banner",className:"object-cover w-full h-full"})}),e.jsx("div",{className:"flex justify-center -mt-12",children:e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg",children:e.jsx("img",{src:s.profile_picture!==null?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",alt:"Profile",className:"w-full h-full object-cover"})}),s.verified===1&&e.jsxs(C,{children:[e.jsx(P,{asChild:!0,children:e.jsx("div",{className:"absolute bottom-0 right-0 p-1 rounded-full group cursor-pointer",children:e.jsx("div",{className:"flex items-center justify-center w-7 h-7 bg-blue-500 rounded-full cursor-pointer",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})})}),e.jsx($,{className:"max-w-xs",children:e.jsxs("p",{children:["This account is verified by ",K(s.university)]})})]})]})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("h2",{className:"text-lg font-semibold truncate px-6",children:s.full_name}),e.jsx("p",{className:"text-gray-500 text-sm px-6",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"2.5rem"},children:Array.isArray(s.research_expertise)&&s.research_expertise.length>0?(()=>{const i=s.research_expertise[0],n=u.find(x=>`${x.field_of_research_id}-${x.research_area_id}-${x.niche_domain_id}`===i);return n?`${n.field_of_research_name} - ${n.research_area_name} - ${n.niche_domain_name}`:"Unknown"})():"No Field of Research or Expertise"}),e.jsx("p",{className:"text-gray-500 text-sm",children:s.current_position?s.current_position:"No Position"}),e.jsxs("div",{className:"mt-2 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>J(s),className:"bg-blue-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-blue-600",children:"Quick Info"}),e.jsx(h,{href:route("academicians.show",s.url),className:"bg-green-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-green-600",children:"Full Profile"})]})]}),e.jsxs("div",{className:"flex justify-around items-center mt-6 py-4 border-t px-10",children:[e.jsx(we,{user:s.user}),e.jsxs(C,{children:[e.jsx(P,{asChild:!0,children:e.jsx(h,{href:route("email.compose",{to:(r=q.find(i=>i.unique_id===s.academician_id))==null?void 0:r.email}),className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",children:e.jsx(ge,{className:"text-lg"})})}),e.jsx($,{children:e.jsx("p",{children:"Send Email"})})]}),e.jsxs(C,{children:[e.jsx(P,{asChild:!0,children:e.jsx("a",{href:"#",onClick:i=>te(s,i),className:"text-gray-500 text-lg hover:text-yellow-500",children:e.jsx(pe,{className:"text-lg"})})}),e.jsx($,{children:e.jsx("p",{children:"Recommend"})})]}),e.jsx(_e,{bookmarkableType:"academician",bookmarkableId:s.id,category:"Academicians",iconSize:"text-lg",tooltipPosition:"top"})]})]},s.id)})}),e.jsx("div",{className:"mt-6",children:e.jsx(ke,{currentPage:N,totalPages:oe,onPageChange:ce})}),V.length===0&&e.jsx("div",{className:"flex justify-center items-center h-48 w-full",children:e.jsxs("div",{className:"text-center p-6 bg-gray-100 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Matching Academicians"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or search criteria to find academicians."})]})})]})]}),O&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>d(!1),children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg relative max-h-[80vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[D?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading academician information..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 ",children:a.full_name}),e.jsx("hr",{className:"border-t border-gray-800 mb-4"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Short Bio"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:a.bio||"Not Provided"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Research Expertise"}),e.jsx("div",{className:"",children:(()=>{let s=a.research_expertise||[];return Array.isArray(s)&&s.length>0?e.jsx("div",{className:"space-y-2",children:s.map((t,r)=>{const i=u.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===t);return i?e.jsxs("p",{className:"text-gray-600",children:[r+1,". ",i.field_of_research_name," - ",i.research_area_name," - ",i.niche_domain_name]},r):null})}):e.jsx("p",{className:"text-gray-600",children:"Not Provided"})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Skills"}),Array.isArray(a.skills)&&a.skills.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ae,{skills:a.skills,className:"",textClass:"text-sm font-medium text-gray-700"}),e.jsx(Ce,{skills:a.skills,maxSkills:5,onViewAll:()=>B(!0),showViewAllButton:a.skills.length>5})]}):e.jsx("p",{className:"text-gray-600",children:"No skills listed"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Style of Supervision"}),e.jsx("div",{className:"space-y-2",children:Array.isArray(a.style_of_supervision)&&a.style_of_supervision.length>0?e.jsx("div",{className:"mt-2 text-normal text-gray-600",children:a.style_of_supervision.map((s,t)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("span",{className:"font-medium",children:[t+1,". ",s]}),e.jsxs("div",{className:"ml-4 text-sm",children:[s==="Directive Supervision"&&"Structured approach with active guidance and regular monitoring",s==="Facilitative Supervision"&&"Supportive approach encouraging student independence",s==="Coaching Supervision"&&"Focuses on personal development and academic growth",s==="Adaptive Supervision"&&"Flexible support based on student's changing needs",s==="Participatory Supervision"&&"Collaborative approach with shared decision-making"]})]},t))}):e.jsx("p",{className:"text-gray-600",children:"Not Specified"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Supervised Student"}),e.jsx("p",{className:"text-gray-600",children:a.supervised_students_count||"Not Provided"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Available Grant and Project"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-600",children:[X()+ee()," Projects/Grants"]}),e.jsxs(h,{href:route("academicians.projects",a.url),className:"mt-2 self-start text-xs px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200 flex items-center",children:[e.jsx("span",{children:"View Projects"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Publication"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-600",children:[se()," Publications"]}),e.jsxs(h,{href:route("academicians.publications",a.url),className:"mt-2 self-start text-xs px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200 flex items-center",children:[e.jsx("span",{children:"View Publications"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Recommendation by Others"}),e.jsx(Ne,{academicianId:a.academician_id})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Connect via"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("a",{href:a.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-red-700",title:"Google Scholar",children:e.jsx(fe,{})}),a.personal_website&&e.jsx("a",{href:a.personal_website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-green-700",title:"Personal Website",children:e.jsx(je,{})}),a.institution_website&&e.jsx("a",{href:a.institution_website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-blue-700",title:"Institutional Website",children:e.jsx(be,{})}),e.jsx("a",{href:a.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-blue-800",title:"LinkedIn",children:e.jsx(ve,{})})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})}),W&&U&&e.jsx(ye,{academician:U,onClose:()=>p(!1),onSuccess:ae}),R&&a&&e.jsx(Pe,{isOpen:R,onClose:()=>B(!1),skills:a.skills||[],profileName:a.full_name})]})})};export{ds as default};
