import{j as e,r as c,a as L,b as u}from"./app-xmIh42KO.js";import{a0 as F,a1 as Q,a2 as q,a3 as H,B as J,C as K}from"./index-D9eridZg.js";import{B as W}from"./BackButton-sTxjGrDq.js";import{c as d}from"./utils-CBfrqCZ4.js";import{b as X}from"./button-BxlM9Ynt.js";import{C as Z}from"./chevron-left-CugAg8G6.js";import{c as ee}from"./createLucideIcon-DVFNR6_B.js";import{C as se}from"./chevron-right-W86pD0Cb.js";import"./iconBase-CmbK3yE2.js";import"./arrow-left-D3IbPUQw.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ae=ee("Ellipsis",te),A=({className:t,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:d("mx-auto flex w-full justify-center",t),...a});A.displayName="Pagination";const $=c.forwardRef(({className:t,...a},i)=>e.jsx("ul",{ref:i,className:d("flex flex-row items-center gap-1",t),...a}));$.displayName="PaginationContent";const j=c.forwardRef(({className:t,...a},i)=>e.jsx("li",{ref:i,className:d("",t),...a}));j.displayName="PaginationItem";const b=({className:t,isActive:a,size:i="icon",...S})=>e.jsx("a",{"aria-current":a?"page":void 0,className:d(X({variant:a?"outline":"ghost",size:i}),t),...S});b.displayName="PaginationLink";const E=({className:t,...a})=>e.jsxs(b,{"aria-label":"Go to previous page",size:"default",className:d("gap-1 pl-2.5",t),...a,children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});E.displayName="PaginationPrevious";const I=({className:t,...a})=>e.jsxs(b,{"aria-label":"Go to next page",size:"default",className:d("gap-1 pr-2.5",t),...a,children:[e.jsx("span",{children:"Next"}),e.jsx(se,{className:"h-4 w-4"})]});I.displayName="PaginationNext";const B=({className:t,...a})=>e.jsxs("span",{"aria-hidden":!0,className:d("flex h-9 w-9 items-center justify-center",t),...a,children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});B.displayName="PaginationEllipsis";const ge=({academician:t,university:a,faculty:i,user:S,publications:h,scholarProfile:m,researchOptions:le,isEditing:p=!1,hideNavigation:P=!1,hideProfile:f=!1})=>{const[r,N]=c.useState(1),[k,M]=c.useState({}),[n,y]=c.useState(!1),[v,R]=c.useState(null),[w,D]=c.useState(!1),g=10,x=Math.ceil(h.length/g),V=h.slice((r-1)*g,r*g),z=h.reduce((s,l)=>{const o=l.year||"Unknown";return s[o]=(s[o]||0)+1,s},{}),C=Object.entries(z).sort(([s],[l])=>s==="Unknown"?1:l==="Unknown"?-1:parseInt(l)-parseInt(s)),O=s=>{M(l=>({...l,[s]:!l[s]}))},Y=()=>{const s=[];if(x<=5)for(let o=1;o<=x;o++)s.push(o);else{s.push(1),r>3&&s.push("ellipsis-start");const o=Math.max(2,r-1),T=Math.min(x-1,r+1);for(let _=o;_<=T;_++)s.push(_);r<x-2&&s.push("ellipsis-end"),s.push(x)}return s};c.useEffect(()=>{p&&t?.google_scholar&&U()},[p,t?.google_scholar]);const U=()=>{L.get("/api/scholar/status").then(s=>{s.data.success&&(R(s.data),D(s.data.can_update))}).catch(s=>{console.error("Error fetching Google Scholar status:",s)})},G=()=>{if(!t.google_scholar){alert("Please add your Google Scholar URL first in your profile settings.");return}y(!0),L.post("/api/scholar/scrape").then(s=>{y(!1),s.data.success?(alert(s.data.message),U(),window.location.reload()):alert(s.data.message||"Failed to update Google Scholar profile.")}).catch(s=>{y(!1),console.error("Error scraping Google Scholar:",s),alert(s.response?.data?.message||"An error occurred while updating your Google Scholar profile.")})};return e.jsxs("div",{className:`${f?"":"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8"}`,children:[!P&&e.jsx("div",{className:"mb-4",children:e.jsx(W,{})}),!f&&e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-4 sm:mb-6",children:[e.jsxs("div",{className:"relative h-48 sm:h-64",children:[e.jsx("img",{src:t.background_image?`/storage/${t.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Background",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute -bottom-16 left-4 sm:left-8",children:e.jsx("img",{src:t.profile_picture?`/storage/${t.profile_picture}`:"/images/default-avatar.jpg",alt:t.full_name,className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full border-4 border-white shadow-lg object-cover"})})]}),e.jsxs("div",{className:"px-4 sm:px-8 pt-20 pb-4 sm:pb-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:t.full_name}),t.current_position&&e.jsx("p",{className:"text-base sm:text-lg text-gray-600 mt-1",children:t.current_position}),e.jsx("div",{className:"mt-2 flex flex-wrap items-center text-gray-500",children:e.jsxs("p",{className:"text-sm sm:text-base",children:[a?.full_name," - ",i?.name]})})]})]}),!P&&e.jsx("div",{className:"border-b border-gray-300 mb-6",children:e.jsxs("div",{className:"flex md:space-x-12 space-x-4 px-4 sm:px-8",children:[e.jsx(u,{href:route("academicians.show",t.url),className:"md:text-lg text-base font-semibold text-gray-600 hover:text-blue-600 pb-2",children:"Profile"}),e.jsx(u,{href:route("academicians.publications",t.url),className:"md:text-lg text-base font-semibold text-blue-600 hover:text-blue-800 border-b-2 border-blue-600 pb-2",children:"Publications"}),e.jsx(u,{href:route("academicians.projects",t.url),className:"md:text-lg text-base font-semibold text-gray-600 hover:text-blue-600 pb-2",children:"Projects"}),e.jsx(u,{href:"#",className:"md:text-lg text-base font-semibold text-gray-600 hover:text-blue-600 pb-2",children:"Supervisors"})]})}),e.jsx("div",{className:f?"":"min-h-screen",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Overview"}),m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Total Citations"}),e.jsx("p",{className:"text-xl font-semibold",children:m.total_citations})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"h-index"}),e.jsx("p",{className:"text-xl font-semibold",children:m.h_index})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"i10-index"}),e.jsx("p",{className:"text-xl font-semibold",children:m.i10_index})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-700",children:m.last_scraped_at?new Date(m.last_scraped_at).toLocaleDateString():"Not available"})]}),p&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{type:"button",onClick:G,disabled:n||!w,className:`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium 
                          ${n||!w?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors`,children:[e.jsx(F,{className:`mr-2 ${n?"animate-spin":""}`}),n?"Updating...":"Update Google Scholar Data"]}),v&&!w&&v.latest_scraping&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Profile was recently updated. Next update available ",v.latest_scraping.created_at_human,"."]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Scholar profile information not available"}),p&&t.google_scholar&&e.jsxs("button",{type:"button",onClick:G,disabled:n,className:`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium 
                        ${n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors`,children:[e.jsx(F,{className:`mr-2 ${n?"animate-spin":""}`}),n?"Updating...":"Import Google Scholar Data"]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publications by Year"}),C.length>0?e.jsx("div",{className:"space-y-2",children:C.map(([s,l])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:s}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:l})]},s))}):e.jsx("p",{className:"text-gray-500",children:"No publication data available"})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Publications"}),t.google_scholar&&e.jsxs("a",{href:t.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx("span",{className:"mr-2",children:"View on Google Scholar"}),e.jsx(Q,{})]})]}),h.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No Publications Found"}),e.jsx("p",{className:"text-gray-500",children:p?"You don't have any recorded publications yet. Add your Google Scholar URL in the profile tab and click the Update button to import your publications.":"This academician has no recorded publications yet."})]}):e.jsxs("div",{className:"space-y-8",children:[V.map((s,l)=>e.jsxs("div",{className:"border-b pb-6 last:border-0 last:pb-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 hover:text-blue-600 mb-2",children:s.url?e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:s.title}):s.title}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:s.authors}),e.jsxs("div",{className:"flex items-center text-sm text-gray-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:s.venue}),s.year&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:s.year})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.citations>0&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(q,{className:"mr-2 text-xs"}),e.jsxs("span",{children:["Cited by ",s.citations]})]}),s.abstract&&e.jsxs("button",{onClick:()=>O(s.id),className:"flex items-center text-gray-600 hover:text-blue-600",children:[e.jsx(H,{className:"mr-2 text-xs"}),e.jsx("span",{children:"Abstract"}),k[s.id]?e.jsx(J,{className:"ml-1 text-xs"}):e.jsx(K,{className:"ml-1 text-xs"})]})]}),k[s.id]&&s.abstract&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded text-sm text-gray-700",children:s.abstract})]},l)),h.length>g&&e.jsx(A,{className:"mt-8",children:e.jsxs($,{children:[e.jsx(j,{children:e.jsx(E,{onClick:()=>N(s=>Math.max(s-1,1)),className:r===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Y().map((s,l)=>e.jsx(j,{children:typeof s=="number"?e.jsx(b,{onClick:()=>N(s),isActive:r===s,className:"cursor-pointer",children:s}):e.jsx(B,{})},`page-${s}-${l}`)),e.jsx(j,{children:e.jsx(I,{onClick:()=>N(s=>Math.min(s+1,x)),className:r===x?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})]})})]})})]})};export{ge as default};
