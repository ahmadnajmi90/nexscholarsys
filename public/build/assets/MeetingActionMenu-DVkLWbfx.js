import{r as l,j as e,a as M}from"./app-DlrLkdql.js";import{c as a}from"./index-B_EXF9H_.js";import{D as y,a as b,b as k,c as n,d as g}from"./dropdown-menu-bsM0tUmr.js";import"./button-CmAFW6Q4.js";import{A as N,a as v,b as T,c as _,d as S,e as G,f as E,g as I}from"./alert-dialog-B_TXh56Y.js";import{u as L}from"./useGoogleCalendar-n1GyoeWI.js";import{E as F}from"./ellipsis-vertical-DyGpwJ33.js";import{V as J}from"./video-B5xdVhqU.js";import{c as P}from"./createLucideIcon-DuVmJdM5.js";import{L as u}from"./loader-circle-BDp7_rWE.js";import{C as V}from"./check-CFw64E0p.js";import{C as q}from"./calendar-BUDN8Wve.js";import{T as H}from"./trash-2-Cs_KmYcC.js";import"./index-CooGWVRp.js";import"./index-_t9AzER0.js";import"./index-BPUO_Du-.js";import"./index-DliD_jgu.js";import"./index-kmWevIUn.js";import"./index-MQT5_bdA.js";import"./index-Cua-v5t-.js";import"./index-DTEdqLdY.js";import"./index-C4hYSks0.js";import"./index-Fs6G4e3d.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-Ci_0jHjH.js";import"./index-CxKA1-ru.js";import"./index-BiBX-aEh.js";import"./utils-CBfrqCZ4.js";import"./chevron-right-EHi25R_G.js";import"./circle-Axh3tJBp.js";import"./index-C46cEohh.js";import"./logError-BloCzXDJ.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],z=P("SquarePen",R);function Ae({meeting:r,onUpdate:f,onCancel:c}){const[x,i]=l.useState(!1),[t,d]=l.useState(!1),[m,p]=l.useState(!1),{isConnected:C,addMeetingToCalendar:j}=L(),h=!!r.location_link,s=r.external_event_id&&r.external_provider==="google",w=()=>{h&&window.open(r.location_link,"_blank","noopener,noreferrer")},D=async()=>{if(!C){a.error("Please connect Google Calendar in your profile settings first");return}if(s){a("This meeting is already in your Google Calendar",{icon:"ℹ️",duration:3e3});return}p(!0);try{const o=await j(r.id);(o.success||o.alreadyExists)&&c?.()}finally{p(!1)}},A=async()=>{d(!0);try{await M.delete(route("supervision.meetings.destroy",r.id)),a.success("Meeting cancelled"),c?.(),i(!1)}catch(o){console.error("Cancel meeting error:",o),a.error(o?.response?.data?.message||"Failed to cancel meeting")}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx(b,{className:"inline-flex items-center justify-center h-8 w-8 rounded-md text-sm font-medium hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsxs(k,{align:"end",children:[h&&e.jsxs(n,{onClick:w,children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Join Meeting"]}),e.jsxs(n,{onClick:()=>f?.(r),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Reschedule"]}),e.jsx(g,{}),e.jsxs(n,{onClick:D,disabled:m||s,children:[m?e.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}):s?e.jsx(V,{className:"mr-2 h-4 w-4 text-green-600"}):e.jsx(q,{className:"mr-2 h-4 w-4"}),s?"Added to Google Calendar":"Add to Google Calendar"]}),e.jsx(g,{}),e.jsxs(n,{onClick:()=>i(!0),className:"text-red-600",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Cancel Meeting"]})]})]}),e.jsx(N,{open:x,onOpenChange:i,children:e.jsxs(v,{children:[e.jsxs(T,{children:[e.jsx(_,{children:"Cancel meeting?"}),e.jsxs(S,{children:['This will cancel "',r.title,'" scheduled for'," ",new Date(r.scheduled_for).toLocaleString(),". The other party will be notified."]})]}),e.jsxs(G,{children:[e.jsx(E,{disabled:t,children:"Keep Meeting"}),e.jsxs(I,{onClick:A,disabled:t,className:"bg-red-600 hover:bg-red-700",children:[t&&e.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancel Meeting"]})]})]})})]})}export{Ae as default};
