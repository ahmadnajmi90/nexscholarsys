import{r as l,j as o}from"./app-iMgHp_eS.js";import{o as f,p as j}from"./index-B-2HQZRs.js";import{V as m}from"./index---wvTow-.js";import{B as k}from"./BookmarkHandler-DQpgqc6V.js";import{T as B,a as y,b as w,c as b}from"./tooltip-D0CFLqml.js";const F=({bookmarkableType:a,bookmarkableId:t,category:d="general",className:x="",iconSize:n="text-lg",showText:u=!1,tooltipPosition:h="bottom"})=>{const[s,c]=l.useState(!1),[i,e]=l.useState(!0);l.useEffect(()=>{p()},[t,a]);const p=async()=>{e(!0);try{const r=await k.checkBookmarkStatus(a,t);c(r.is_bookmarked)}catch(r){console.error("Error checking bookmark status:",r)}finally{e(!1)}},g=async()=>{if(!i){e(!0);try{const r=await k.toggleBookmark(a,t,d);c(r.is_bookmarked),m.success(r.is_bookmarked?"Added to bookmarks":"Removed from bookmarks")}catch(r){console.error("Error toggling bookmark:",r),m.error("Failed to update bookmark. Please try again.")}finally{e(!1)}}};return o.jsx(B,{delayDuration:0,children:o.jsxs(y,{children:[o.jsx(w,{asChild:!0,children:o.jsx("div",{className:`cursor-pointer ${x}`,children:o.jsxs("button",{onClick:g,className:`flex items-center focus:outline-none ${s?"text-yellow-500":"text-gray-500 hover:text-yellow-500"} transition duration-200`,disabled:i,"aria-label":s?"Remove bookmark":"Add bookmark",children:[i?o.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):o.jsx(o.Fragment,{children:s?o.jsx(f,{className:n}):o.jsx(j,{className:n})}),u&&o.jsx("span",{className:"ml-1",children:s?"Bookmarked":"Bookmark"})]})})}),o.jsx(b,{side:h,children:o.jsx("p",{children:s?"Remove from bookmarks":"Add to bookmarks"})})]})})};export{F as B};
