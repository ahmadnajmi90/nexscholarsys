import{W as E,j as e,b as P,q as V,r as x,y as _}from"./app-DlrLkdql.js";import{M as R}from"./MainLayout-CaDLPfY8.js";import{T as H}from"./TextInput-DjqfVms6.js";import{I as S,a as D}from"./InputError-D3TjMBVQ.js";import{P as u}from"./PrimaryButton-jNMHCCwm.js";import{S as F}from"./SecondaryButton-COLypBy8.js";import{V as d}from"./index-B_EXF9H_.js";import{M as J}from"./Modal-Cu2styYL.js";import{S as K}from"./react-select.esm-xpGDxdzZ.js";import{M as Q}from"./ManageCollaboratorsModal-DWovG6Ml.js";import{C as M}from"./ConfirmationModal-CtFFtmmC.js";import"./purify.es-9JUW7zMc.js";import{P as W}from"./plus-BExPN_B_.js";import{U as k}from"./users-DIbmjsPC.js";import{B as w}from"./briefcase-BY2whaIk.js";import{C as O}from"./clock-Ud-VH7sM.js";import{T}from"./trash-2-Cs_KmYcC.js";import"./house-DhqGzN5G.js";import"./createLucideIcon-DuVmJdM5.js";import"./zap-C5sZ12y6.js";import"./folder-open-BeKiZvsi.js";import"./settings-CYYGlRx6.js";import"./useRoles-Qm-DlQme.js";import"./chevron-left-D4CJlqlf.js";import"./proxy-9_5LvuaU.js";import"./user-round-COXXmn1M.js";import"./clipboard-list-B_J7gyqU.js";import"./dollar-sign-CfrQ8X-j.js";import"./calendar-BUDN8Wve.js";import"./file-text-DuT2_NhJ.js";import"./message-square-Ns6phRZt.js";import"./graduation-cap-ByJq4Rk3.js";import"./building-BnusGjoU.js";import"./Dropdown-CyPVq9Ib.js";import"./transition-CrpKBowS.js";import"./sparkles-B8I717mR.js";import"./bookmark-CHxePipJ.js";import"./folder-kanban-DrAARP9_.js";import"./building-2-BVV_ifkz.js";import"./database-BVDqe0Nq.js";import"./shield-1ZrIkVDR.js";import"./index-raKJPBbr.js";import"./analytics-BQ374C1C.js";import"./iconBase-CNX8JClf.js";import"./index-C4Dw6-hd.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-CBfrqCZ4.js";import"./ThreadPane-B2-NznzI.js";import"./scroll-area-CcD72brL.js";import"./index-_t9AzER0.js";import"./index-BPUO_Du-.js";import"./index-CooGWVRp.js";import"./index-DTEdqLdY.js";import"./index-MQT5_bdA.js";import"./index-BdQq_4o_.js";import"./format-BOijCLBA.js";import"./en-US-DIdCsyf3.js";import"./button-CmAFW6Q4.js";import"./dialog-C4T7sENw.js";import"./download-C9BmgKLA.js";import"./x-CaP1GlTY.js";import"./isSameDay-BHs4V-zU.js";import"./constructNow-6bIQB1GK.js";import"./addDays-KHeCUDUr.js";import"./search-C39YJhqP.js";import"./circle-check-big-BEClqQUa.js";import"./chevron-right-EHi25R_G.js";import"./tooltip-Y6AC5kbZ.js";import"./index-Cua-v5t-.js";import"./index-BiBX-aEh.js";import"./index-Fs6G4e3d.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-Ci_0jHjH.js";import"./index-DliD_jgu.js";import"./index-6fNHbBBE.js";import"./index-Chjiymov.js";import"./dialog-B93jKqok.js";import"./index-C46cEohh.js";import"./index-C4hYSks0.js";import"./user-Dp2DubXk.js";import"./info-BD1hr8Rw.js";import"./triangle-alert-DvEsydhA.js";function X({isOpen:i,onClose:a}){const{data:o,setData:h,post:j,processing:c,errors:t,reset:g}=E({name:"",description:""}),p=l=>{l.preventDefault(),j(route("project-hub.workspaces.store"),{onSuccess:()=>{d.success(`Workspace "${o.name}" created successfully.`),g(),a()},onError:r=>{console.error("Error creating workspace:",r),d.error("Failed to create workspace. Please check the form for errors.")}})};return i?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:a}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative z-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Workspace"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(S,{htmlFor:"name",value:"Workspace Name"}),e.jsx(H,{id:"name",type:"text",className:"mt-1 block w-full",value:o.name,onChange:l=>h("name",l.target.value),required:!0}),e.jsx(D,{message:t.name,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(S,{htmlFor:"description",value:"Description (Optional)"}),e.jsx("textarea",{id:"description",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:o.description,onChange:l=>h("description",l.target.value),rows:"3"}),e.jsx(D,{message:t.description,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(F,{onClick:a,disabled:c,children:"Cancel"}),e.jsx(u,{type:"submit",disabled:c,children:c?"Creating...":"Create Workspace"})]})]})]})]}):null}function Z({show:i,onClose:a,linkableProjects:o=[]}){const{data:h,setData:j,post:c,processing:t,errors:g,reset:p}=E({post_project_id:""}),l=r=>{r.preventDefault(),c(route("project-hub.projects.store"),{preserveScroll:!0,onSuccess:n=>{const f=o.find(b=>b.id===h.post_project_id),m=f?f.title:"Project";d.success(`Project "${m}" created successfully.`),p(),a()},onError:n=>{console.error("Error creating project:",n),d.error("Failed to create project. Please check the form for errors.")}})};return e.jsx(J,{show:i,onClose:a,maxWidth:"md",children:e.jsxs("form",{onSubmit:l,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Workspace from Project"}),e.jsxs("div",{className:"mb-6",children:[e.jsx(S,{htmlFor:"post_project_id",value:"Select a Project to Create a Workspace For",className:"mb-2"}),o.length>0?e.jsxs(e.Fragment,{children:[e.jsx(K,{id:"post_project_id",options:o.map(r=>({value:r.id,label:r.title})),onChange:r=>j("post_project_id",r?r.value:""),className:"w-full",classNamePrefix:"select",placeholder:"Select a project...",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The workspace will inherit the title and description from the selected project."})]}):e.jsxs("div",{className:"text-amber-600 py-4 px-3 bg-amber-50 border border-amber-200 rounded-md",children:[e.jsx("p",{className:"mb-3",children:"You don't have any projects available for linking. Please create a project first."}),e.jsx(P,{href:route("post-projects.create"),className:"inline-flex items-center px-4 py-2 bg-amber-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-amber-700 focus:bg-amber-700 active:bg-amber-900 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"Create Project"})]}),e.jsx(D,{message:g.post_project_id,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(F,{onClick:a,className:"mr-2",children:"Cancel"}),e.jsx(u,{type:"submit",disabled:t||o.length===0,children:"Create Workspace"})]})]})})}function ee({workspaces:i,projects:a,linkableProjects:o,connections:h}){const j=Array.isArray(i)?i:i?.data||[],c=Array.isArray(a)?a:a?.data||[],{auth:t}=V().props,[g,p]=x.useState(!1),[l,r]=x.useState(!1),[n,f]=x.useState(null),[m,b]=x.useState(null),[A,I]=x.useState(!1),[$,B]=x.useState(null),[L,Y]=x.useState(null),y=t.user.academician!==null,z=(s,N)=>{s.preventDefault(),s.stopPropagation(),f(N)},q=()=>{n&&_.delete(route("project-hub.workspaces.destroy",n.id),{onSuccess:()=>{d.success(`Workspace "${n.name}" deleted successfully.`),f(null)},onError:s=>{console.error("Error deleting workspace:",s),d.error("Failed to delete workspace. Please try again.")}})},G=(s,N)=>{s.preventDefault(),s.stopPropagation(),b(N)},U=()=>{m&&_.delete(route("project-hub.projects.destroy",m.id),{onSuccess:()=>{d.success(`Project "${m.name}" deleted successfully.`),b(null)},onError:s=>{console.error("Error deleting project:",s),d.error("Failed to delete project. Please try again.")}})};return e.jsxs("div",{className:"space-y-8 lg:mt-2 mt-20",children:[e.jsxs("div",{className:"space-y-6 lg:mx-0 mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 pl-2",children:"Your Workspaces"}),e.jsx("div",{className:"space-x-2",children:e.jsxs(u,{onClick:()=>p(!0),children:[e.jsx(W,{className:"w-4 h-4 mr-2"})," New Workspace"]})})]}),j.length===0?e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"mx-auto bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center",children:e.jsx(k,{className:"w-8 h-8 text-gray-500"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workspaces yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first workspace to start organizing your projects."}),e.jsxs("div",{className:"space-x-2",children:[y&&e.jsxs(u,{onClick:()=>r(!0),children:[e.jsx(w,{className:"w-4 h-4 mr-2"})," Create Project"]}),e.jsxs(u,{onClick:()=>p(!0),children:[e.jsx(W,{className:"w-4 h-4 mr-2"})," Create Workspace"]})]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(s=>{const v=(s.owner.academician||s.owner.postgraduate||s.owner.undergraduate)?.full_name||s.owner.name;return e.jsxs("div",{className:"relative bg-white shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:[e.jsxs(P,{href:route("project-hub.workspaces.show",s.id),className:"block p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 truncate pr-12",children:s.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:[e.jsxs("div",{className:"flex items-center mr-4 truncate",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Owner: ",t.user.id===s.owner_id?"You":v]})]}),e.jsxs("div",{className:"flex items-center ml-auto",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("en-GB")})]})]})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[t.user.id===s.owner_id&&e.jsxs("div",{className:"bg-indigo-100 text-indigo-800 text-xs font-medium px-2 py-1 rounded-full flex items-center",children:[e.jsx("span",{className:"mr-1",children:"ðŸ‘‘"}),e.jsx("span",{children:"Owner"})]}),t.user.id===s.owner_id&&e.jsx("button",{onClick:C=>z(C,s),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-full",title:"Delete workspace",children:e.jsx(T,{className:"w-4 h-4"})})]})]},s.id)})})]}),e.jsxs("div",{className:"space-y-6 lg:mx-0 mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 pl-2",children:"Your Projects"}),e.jsx("div",{className:"space-x-2",children:y&&e.jsxs(u,{onClick:()=>r(!0),children:[e.jsx(w,{className:"w-4 h-4 mr-2"})," New Project"]})})]}),c.length===0?e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"mx-auto bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center",children:e.jsx(w,{className:"w-8 h-8 text-gray-500"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first project to start organizing your research."}),e.jsx("div",{className:"space-x-2",children:y&&e.jsxs(u,{onClick:()=>r(!0),children:[e.jsx(w,{className:"w-4 h-4 mr-2"})," Create Project"]})})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(s=>{const v=(s.owner.academician||s.owner.postgraduate||s.owner.undergraduate)?.full_name||s.owner.name;return e.jsxs("div",{className:"relative bg-blue-50 shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:[e.jsxs(P,{href:route("project-hub.projects.show",s.id),className:"block p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 truncate pr-24",children:s.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:[e.jsxs("div",{className:"flex items-center mr-4 truncate",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Owner: ",t.user.id===s.owner_id?"You":v]})]}),e.jsxs("div",{className:"flex items-center ml-auto",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("en-GB")})]})]})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[t.user.id===s.owner_id&&e.jsxs("div",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full flex items-center",children:[e.jsx("span",{className:"mr-1",children:"ðŸ‘‘"}),e.jsx("span",{children:"Owner"})]}),t.user.id===s.owner_id&&e.jsx("button",{onClick:C=>G(C,s),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-blue-100 rounded-full",title:"Delete project",children:e.jsx(T,{className:"w-4 h-4"})})]})]},s.id)})})]}),e.jsx(X,{isOpen:g,onClose:()=>p(!1)}),e.jsx(Z,{show:l,onClose:()=>r(!1),linkableProjects:o||[]}),e.jsx(Q,{show:A,onClose:()=>{I(!1),B(null),Y(null)},context:$,contextType:L,connections:h||[]}),e.jsx(M,{show:!!n,onClose:()=>f(null),onConfirm:q,title:"Delete Workspace",message:n?`Are you sure you want to delete the workspace "${n.name}"? This action cannot be undone and will delete all boards and tasks within this workspace.`:""}),e.jsx(M,{show:!!m,onClose:()=>b(null),onConfirm:U,title:"Delete Project",message:m?`Are you sure you want to delete the project "${m.name}"? This action cannot be undone and will delete all boards and tasks within this project.`:""})]})}ee.layout=i=>e.jsx(R,{title:"NexLab",children:i,TopMenuOpen:!1});export{ee as default};
