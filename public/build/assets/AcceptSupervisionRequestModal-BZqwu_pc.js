import{r as a,j as e,a as V}from"./app-iMgHp_eS.js";import{M as q}from"./Modal-CtrNcR4a.js";import{B as E}from"./button-Ct11kXcH.js";import{L as r}from"./label-DMRicobw.js";import{T as U}from"./textarea-C-VaV38D.js";import{C as O}from"./checkbox-D5zrMqIW.js";import{S as d,a as m,b as h,c as x,d as p}from"./select-BXNqCCbm.js";import{A as W,a as G}from"./alert-6lJ_2Thn.js";import{c as F}from"./index---wvTow-.js";import{l as $}from"./logError-BloCzXDJ.js";import{C as I}from"./circle-check-B-nP5cAP.js";import{U as z}from"./user-round-4L2MoMDj.js";import{L as J}from"./lightbulb-ChMIwUPI.js";import{L as K}from"./loader-circle-F27clpTW.js";import"./dialog-tgbUGkxp.js";import"./transition-GCCCemnQ.js";import"./index-CPRTWrZv.js";import"./utils-CBfrqCZ4.js";import"./index-CBiZf16v.js";import"./index-CdJFUDDL.js";import"./index-ZtdpDmOR.js";import"./index-BF2RFu8G.js";import"./index-vpnpucSR.js";import"./index-Bgv0hvvi.js";import"./check-D26Fs7Uc.js";import"./createLucideIcon-BXdi-pyk.js";import"./index-BdQq_4o_.js";import"./index-DKGZNE_Q.js";import"./index-BRZqG0or.js";import"./index-B_K2CkPG.js";import"./index-DGrGDkv0.js";import"./index-TSyOZiO6.js";import"./index-CrTPggVb.js";import"./index-BFoK7Kyw.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-BJzUWGlx.js";import"./chevron-down-LlZn8pLr.js";import"./chevron-up-LkcO-j5k.js";const Q=[{value:"March",label:"March"},{value:"September",label:"September"}],g=new Date().getFullYear(),X=Array.from({length:21},(b,l)=>g-10+l),Z=[{value:"weekly",label:"Weekly meetings"},{value:"biweekly",label:"Bi-weekly meetings (every 2 weeks)"},{value:"monthly",label:"Monthly meetings"},{value:"flexible",label:"Flexible (as needed)"}],D=[{id:"enrollment",label:"Complete enrollment paperwork",checked:!0},{id:"orientation",label:"Attend graduate school orientation",checked:!0},{id:"accounts",label:"Set up university accounts and access",checked:!0},{id:"meetings",label:"Join research group meetings",checked:!0},{id:"ethics",label:"Complete ethics training",checked:!0},{id:"timeline",label:"Discuss research timeline and milestones",checked:!0}];function Ye({isOpen:b,request:l,onClose:v,onAccepted:B}){const[i,N]=a.useState(""),[c,f]=a.useState(g.toString()),[u,S]=a.useState(""),[C,k]=a.useState(""),[y,w]=a.useState(!0),[_,M]=a.useState(D),[n,T]=a.useState(!1),j=(l?.student||{}).full_name||"Student";l?.postgraduate_program?.name;const Y=l?.proposal_title||"Research Topic",A=i&&c&&u,R=i&&c?`${i} ${c}`:"",H=s=>{M(t=>t.map(o=>o.id===s?{...o,checked:!o.checked}:o))},P=async()=>{if(!(!A||n)){T(!0);try{const s={cohort_start_term:R,supervision_role:"main_supervisor",meeting_cadence:u,welcome_message:C.trim()||null,create_scholarlab:y,onboarding_checklist:_.filter(t=>t.checked).map(t=>({task:t.label,completed:!1}))};await V.post(route("supervision.requests.accept",l.id),s),F.success("Supervision offer sent to student"),B?.(),v?.()}catch(s){$(s,"AcceptSupervisionRequestModal handleSubmit");const t=s?.response?.data?.message||"Failed to accept supervision request";F.error(t)}finally{T(!1)}}},L=()=>{n||(N(""),f(g.toString()),S(""),k(""),w(!0),M(D),v?.())};return e.jsx(q,{show:b,onClose:L,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(I,{className:"h-6 w-6 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Accept Supervision Request"})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Confirm your decision to supervise ",j," and set up the supervision parameters."]})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Student Details"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(z,{className:"h-4 w-4 text-slate-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Student Name"}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:j})]})]})}),e.jsxs("div",{className:"mt-3 flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-slate-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Research Topic"}),e.jsx("div",{className:"text-sm text-slate-900",children:Y})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Supervision Setup"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(r,{className:"mb-2 block",children:["Cohort/Start Term ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs(d,{value:i,onValueChange:N,children:[e.jsx(m,{id:"cohortMonth",children:e.jsx(h,{placeholder:"Select month"})}),e.jsx(x,{children:Q.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))})]})}),e.jsx("div",{className:"space-y-2",children:e.jsxs(d,{value:c,onValueChange:f,children:[e.jsx(m,{id:"cohortYear",children:e.jsx(h,{placeholder:"Select year"})}),e.jsx(x,{children:X.map(s=>e.jsx(p,{value:s.toString(),children:s},s))})]})})]}),i&&c&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Selected: ",e.jsx("span",{className:"font-medium",children:R})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"role",children:"Supervision Role"}),e.jsxs(d,{value:"main_supervisor",disabled:!0,children:[e.jsx(m,{id:"role",children:e.jsx(h,{})}),e.jsx(x,{children:e.jsx(p,{value:"main_supervisor",children:"Main Supervisor"})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Co-supervisor assignment available in supervision panel"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"cadence",children:["Expected Meeting Cadence ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(d,{value:u,onValueChange:S,children:[e.jsx(m,{id:"cadence",children:e.jsx(h,{placeholder:"Select meeting frequency"})}),e.jsx(x,{children:Z.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"message",children:"Custom Message to Student (Optional)"}),e.jsx(U,{id:"message",rows:4,value:C,onChange:s=>k(s.target.value),placeholder:"Add a personal message to welcome the student...",className:"resize-none"})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Integration Setup"}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-slate-200 bg-white",children:[e.jsx(O,{id:"scholarlab",checked:y,onCheckedChange:w,className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"scholarlab",className:"text-sm font-medium text-slate-900 cursor-pointer",children:"Create NexLab Supervision Board"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically create a shared board in NexLab with default lists for supervision tasks, deliverables, meetings, and paper workstreams."})]})]})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Onboarding Checklist Preview"}),e.jsx("p",{className:"text-sm text-slate-600",children:"These items will be added to the student's onboarding checklist:"}),e.jsx("div",{className:"space-y-2",children:_.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-slate-200 bg-white",children:[e.jsx(O,{id:s.id,checked:s.checked,onCheckedChange:()=>H(s.id),className:"mt-0.5"}),e.jsx(r,{htmlFor:s.id,className:"text-sm text-slate-700 cursor-pointer",children:s.label})]},s.id))})]}),e.jsxs(W,{className:"bg-green-50 border-green-200",children:[e.jsx(I,{className:"h-4 w-4 text-green-600"}),e.jsxs(G,{className:"text-sm text-green-900",children:[e.jsx("strong",{className:"font-semibold",children:"Ready to Accept"}),e.jsxs("p",{className:"mt-1",children:["By accepting, you agree to supervise ",j,". The student will be notified immediately, and supervision records will be created after the student accepts your offer."]})]})]})]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t flex items-center justify-end gap-3",children:[e.jsx(E,{variant:"outline",onClick:L,disabled:n,children:"Cancel"}),e.jsxs(E,{onClick:P,disabled:!A||n,className:"bg-green-600 hover:bg-green-700",children:[n&&e.jsx(K,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm & Notify Student"]})]})]})})}export{Ye as default};
