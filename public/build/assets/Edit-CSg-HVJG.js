import{W as w,r as m,j as e,Y as S}from"./app-Doi1BfNX.js";import{M as C}from"./MainLayout-VD0w9tEu.js";import F from"./NationalityForm-DZJmH0oY.js";import{R as G}from"./quill.snow-DwmW8mxh.js";import{u as E}from"./useRoles-ZkMXyAVp.js";import{I as o}from"./InputError-rYQ9y34N.js";import{B as k}from"./BackButton-CwH7gK3q.js";import"./house-DG9-SKJz.js";import"./createLucideIcon-BIWf6Fgr.js";import"./zap-Jwr2WBUL.js";import"./users-CJk5icQ6.js";import"./folder-open-Dt0aD5aH.js";import"./settings-BrND01Uv.js";import"./chevron-left-B4SkBdMm.js";import"./proxy-BUFhk0Wh.js";import"./user-round-B_eanpyP.js";import"./clipboard-list-DrTWdQ-4.js";import"./dollar-sign-D4dg_IhF.js";import"./calendar-CBO9yeE8.js";import"./file-text-CjHuEEW2.js";import"./message-square-THXDma7t.js";import"./graduation-cap-BiSIS5Fh.js";import"./building-Blr4MO9I.js";import"./Dropdown-C3siJS7L.js";import"./transition-Dk-vnbkR.js";import"./sparkles-CoZiYbuv.js";import"./bookmark-TdMgL57n.js";import"./folder-kanban-Ci5r-Zyx.js";import"./building-2-DoFw0cmv.js";import"./database-B1qHiJEl.js";import"./shield-B9sqgGYc.js";import"./index-CvKzrQIm.js";import"./analytics-BQ374C1C.js";import"./index-dbiIR3J5.js";import"./index-Degf296b.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-D-KgF5mV.js";import"./ThreadPane-B5BIAZi7.js";import"./Modal-BjJ_nX2Q.js";import"./dialog-DYcl7DcC.js";import"./scroll-area-Du06xGgY.js";import"./index-FRhtyj0h.js";import"./index-B_QUZuO0.js";import"./index-BdR5mO0l.js";import"./index-Bb94jkfk.js";import"./index-BdQq_4o_.js";import"./format-Dv9Rm441.js";import"./en-US-DNUEYIb-.js";import"./button-KPEq8PdI.js";import"./download-Xk6ccwe6.js";import"./x-DrXySrr5.js";import"./isSameDay-Dm-A-V7S.js";import"./constructNow-DtVD-0hX.js";import"./addDays-CAl2nVVE.js";import"./PrimaryButton-DP3HZhbg.js";import"./SecondaryButton-u54usrQd.js";import"./chevron-right-Dg3EFaoF.js";import"./search-FGZFllxI.js";import"./circle-check-big-BlfyvA-C.js";import"./tooltip-CJCiABJO.js";import"./index-CZA6k5rr.js";import"./index-Be4Hbpsc.js";import"./index-BkPy3AN8.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-CJzlUPP7.js";import"./index-CkAoBwhz.js";import"./index-BvLvCl4J.js";import"./briefcase-Cs22VvWr.js";import"./user-dLQj9SMU.js";import"./react-select.esm-D1FqzvMq.js";import"./arrow-left-BXAFDvhN.js";const T=["Merit-Based Scholarship","Dean's Scholarship","Academic Excellence Scholarship","Need-Based Scholarship","Hardship Scholarship","First-Generation Scholarship","STEM Scholarship","Arts & Humanities Scholarship","Business/Finance Scholarship","Medical/Healthcare Scholarship","Minority Scholarship","Women in STEM Scholarship","International Student Scholarship","Disability Scholarship","Athletic Scholarship","Artistic/Creative Scholarship","Leadership Scholarship"],D=["Matching Grant","Seed Grant","Research Grant","Travel Grant","Innovation Grant","Collaboration Grant","Training Grant","Capacity-Building Grant","Community Grant","Development Grant","Pilot Grant","Commercialization Grant","Technology Grant","Sponsorship Grant","Social Impact Grant","Emergency or Relief Grant","International Grant","Equipment Grant","Small Business Grant"];function Ke({fundingItem:l,auth:h,type:b}){var j,_,v;E();const s=b||(l.cycle?"grants":"scholarships"),{data:a,setData:n,post:N,processing:f,errors:r}=w({type:s==="grants"?"grant":"scholarship",title:l.title||"",description:l.description||"",start_date:l.start_date||"",end_date:l.end_date||"",application_deadline:l.application_deadline||"",grant_type:l.grant_type||l.scholarship_type||"",grant_theme:l.grant_theme||l.scholarship_theme||[],scholarship_type:l.scholarship_type||l.grant_type||"",scholarship_theme:l.scholarship_theme||l.grant_theme||[],cycle:l.cycle||"",sponsored_by:l.sponsored_by||"",email:l.email||"",website:l.website||"",country:l.country||"",image:l.image||"",attachment:l.attachment||"",status:l.status||"draft"});m.useState(a.university);const[d,g]=m.useState(!1),p=m.useRef(null);m.useEffect(()=>{const t=c=>{p.current&&!p.current.contains(c.target)&&g(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[d]);const u=t=>{const c=s==="grants"?"grant_theme":"scholarship_theme",i=a[c]||[];i.includes(t)?n(c,i.filter(x=>x!==t)):n(c,[...i,t])},y=()=>{const t={type:s==="grants"?"grant":"scholarship",title:a.title,description:a.description,start_date:a.start_date,end_date:a.end_date,application_deadline:a.application_deadline,sponsored_by:a.sponsored_by,email:a.email,website:a.website,country:a.country,status:a.status};(a.image instanceof File||typeof a.image=="string")&&(t.image=a.image),(a.attachment instanceof File||typeof a.attachment=="string")&&(t.attachment=a.attachment),s==="grants"?(t.grant_type=a.grant_type,t.grant_theme=a.grant_theme,t.cycle=a.cycle):(t.scholarship_type=a.scholarship_type,t.scholarship_theme=a.scholarship_theme);const c=new FormData;Object.keys(t).forEach(i=>{t[i]instanceof File?c.append(i,t[i]):Array.isArray(t[i])?c.append(i,JSON.stringify(t[i])):t[i]!==null&&t[i]!==void 0&&c.append(i,t[i])}),console.log("Updating payload for:",s);for(let[i,x]of c.entries())console.log(`${i}: ${x}`);N(route("funding.admin.update",{id:l.id}),{data:c,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert(`${s==="grants"?"Grant":"Scholarship"} updated successfully!`)},onError:i=>{console.error(`Error updating ${s==="grants"?"grant":"scholarship"}:`,i),alert(`Failed to update ${s==="grants"?"grant":"scholarship"}. Please try again.`)}})};return e.jsxs(C,{title:"",children:[e.jsx(S,{title:`Edit ${s==="grants"?"Grant":"Scholarship"}`}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(k,{})}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),y()},className:"bg-white p-6 lg:p-0 rounded-lg max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-700 text-center",children:["Edit ",s==="grants"?"Grant":"Scholarship"]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"title",value:e.jsxs(e.Fragment,{children:[s==="grants"?"Grant":"Scholarship"," Name ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{type:"text",id:"title",value:a.title,onChange:t=>n("title",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter grant title"}),r.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.title})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",value:e.jsxs(e.Fragment,{children:[s==="grants"?"Grant":"Scholarship"," Description ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("div",{id:"description",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",style:{height:"300px",overflowY:"auto"},children:e.jsx(G,{theme:"snow",value:a.description,onChange:t=>n("description",t),placeholder:"Enter description",style:{height:"300px",maxHeight:"300px"}})}),r.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"start_date",value:e.jsxs(e.Fragment,{children:["Start Date (Grant) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"start_date",type:"date",value:a.start_date,onChange:t=>n("start_date",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),r.start_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.start_date})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"end_date",value:e.jsxs(e.Fragment,{children:["End Date (Grant) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"end_date",type:"date",value:a.end_date,min:a.start_date||"",onChange:t=>n("end_date",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),r.end_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.end_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"application_deadline",value:e.jsxs(e.Fragment,{children:["Application Deadline ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"application_deadline",type:"date",value:a.application_deadline,onChange:t=>n("application_deadline",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),r.application_deadline&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.application_deadline})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:s==="grants"?"grant_type":"scholarship_type",value:e.jsxs(e.Fragment,{children:[s==="grants"?"Grant":"Scholarship"," Type ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsxs("select",{id:s==="grants"?"grant_type":"scholarship_type",name:s==="grants"?"grant_type":"scholarship_type",value:a[s==="grants"?"grant_type":"scholarship_type"],onChange:t=>n(s==="grants"?"grant_type":"scholarship_type",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsxs("option",{value:"",disabled:!0,hidden:!0,children:["Select a ",s==="grants"?"Grant":"Scholarship"," Type"]}),s==="grants"?D.map(t=>e.jsx("option",{value:t,children:t},t)):T.map(t=>e.jsx("option",{value:t,children:t},t))]}),r[s==="grants"?"grant_type":"scholarship_type"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r[s==="grants"?"grant_type":"scholarship_type"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{ref:p,children:[e.jsx(o,{htmlFor:s==="grants"?"grant_theme":"scholarship_theme",value:e.jsxs(e.Fragment,{children:[s==="grants"?"Grant":"Scholarship"," Theme (Multiselect) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("div",{id:s==="grants"?"grant_theme":"scholarship_theme",className:`relative mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 px-2.5 cursor-pointer bg-white ${d?"shadow-lg":""}`,onClick:()=>g(!d),children:((j=a[s==="grants"?"grant_theme":"scholarship_theme"])==null?void 0:j.length)>0?a[s==="grants"?"grant_theme":"scholarship_theme"].join(", "):`Select ${s==="grants"?"Grant":"Scholarship"} Themes`}),d&&e.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-300 rounded shadow-lg w-full",children:e.jsxs("div",{className:"p-2 space-y-2",children:[e.jsx(o,{className:"flex items-center",htmlFor:"theme-science",value:"Science & Technology",children:e.jsx("input",{id:"theme-science",type:"checkbox",value:"Science & Technology",checked:((_=a[s==="grants"?"grant_theme":"scholarship_theme"])==null?void 0:_.includes("Science & Technology"))||!1,onChange:t=>u(t.target.value),className:"mr-2"})}),e.jsx(o,{className:"flex items-center",htmlFor:"theme-social",value:"Social Science",children:e.jsx("input",{id:"theme-social",type:"checkbox",value:"Social Science",checked:((v=a[s==="grants"?"grant_theme":"scholarship_theme"])==null?void 0:v.includes("Social Science"))||!1,onChange:t=>u(t.target.value),className:"mr-2"})})]})}),r[s==="grants"?"grant_theme":"scholarship_theme"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r[s==="grants"?"grant_theme":"scholarship_theme"]})]},s),s==="grants"&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"cycle",value:e.jsxs(e.Fragment,{children:["Cycle ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsxs("select",{id:"cycle",name:"cycle",value:a.cycle,onChange:t=>n("cycle",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Cycle"}),e.jsx("option",{value:"No Cycle",children:"No Cycle"}),e.jsx("option",{value:"Cycle 1",children:"Cycle 1"}),e.jsx("option",{value:"Cycle 2",children:"Cycle 2"}),e.jsx("option",{value:"Cycle 3",children:"Cycle 3"})]}),r.cycle&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.cycle})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sponsored_by",value:e.jsxs(e.Fragment,{children:["Sponsored By ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"sponsored_by",type:"text",value:a.sponsored_by,onChange:t=>n("sponsored_by",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter sponsor"}),r.sponsored_by&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.sponsored_by})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",value:e.jsxs(e.Fragment,{children:["Contact Email ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"email",type:"email",value:a.email,onChange:t=>n("email",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter email"}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:a.email===h.user.email,onChange:t=>{t.target.checked?n("email",h.user.email):n("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsx(o,{htmlFor:"usePersonalEmail",value:`Use personal email (${h.user.email})`,className:"ml-2 text-gray-700"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"website",value:"Website / Link"}),e.jsx("input",{id:"website",type:"url",value:a.website,onChange:t=>n("website",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Website / Link"}),r.website&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.website})]}),e.jsxs("div",{children:[e.jsx(F,{title:"Country",value:a.country,isNotSpecify:!0,onChange:t=>n("country",t),errors:r}),r.country&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.country})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"image",value:"Upload Image"}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:t=>n("image",t.target.files[0]),className:"mt-1 block w-full border-gray-300 rounded-md"}),r.image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.image}),l.image&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Image:"," ",e.jsx("a",{href:`/storage/${l.image}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Image"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"attachment",value:"Upload Attachment"}),e.jsx("input",{id:"attachment",type:"file",onChange:t=>n("attachment",t.target.files[0]),className:"mt-1 block w-full border-gray-300 rounded-md"}),r.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.attachment}),l.attachment&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Attachment:"," ",e.jsx("a",{href:`/storage/${l.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"})]})]})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:()=>{y()},disabled:f,className:"w-full sm:w-auto inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"})})]})]})]})}export{Ke as default};
