import{r as o,q as $,j as e,b as a,a as w,y as q,Y as P}from"./app-CcL8mqJg.js";import{P as A,H as _,o as k,Q as C,k as H,R as L,N as E,S as R,T as U,U as V,V as B,W as D,X as T,p as S,A as M,q as Z,L as X,D as Q}from"./index-D26INkXh.js";import{u as G}from"./useRoles-CyoACi4S.js";import{t as J}from"./analytics-BQ374C1C.js";import{O as K}from"./index-CIAO3bRK.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I=(...s)=>s.filter((i,d,x)=>!!i&&i.trim()!==""&&x.indexOf(i)===d).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=o.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:x,className:g="",children:h,iconNode:j,...m},p)=>o.createElement("svg",{ref:p,...O,width:i,height:i,stroke:s,strokeWidth:x?Number(d)*24/Number(i):d,className:I("lucide",g),...m},[...j.map(([u,t])=>o.createElement(u,t)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=(s,i)=>{const d=o.forwardRef(({className:x,...g},h)=>o.createElement(ee,{ref:h,iconNode:i,className:I(`lucide-${Y(s)}`,x),...g}));return d.displayName=`${s}`,d};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ae=v("Briefcase",se);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M11 14h1v4",key:"fy54vd"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],te=v("Calendar1",re);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"12ixgl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",key:"u0c8gj"}],["path",{d:"M7 16.5 8 22l-3-1-3 1 1-5.5",key:"5gm2nr"}]],le=v("FileBadge",ne);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ie=v("House",ce);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],z=v("LayoutGrid",de);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xe=v("User",oe),he=({isOpen:s,toggleSidebar:i})=>{const{isAdmin:d,isPostgraduate:x,isUndergraduate:g,isFacultyAdmin:h,isAcademician:j,canPostEvents:m,canPostProjects:p,canPostGrants:u,canCreateFacultyAdmin:t,canAssignAbilities:y}=G(),{auth:b,pendingRequestCount:l}=$().props;b.user;const[r,n]=o.useState({networking:!1,journal:!1,grant:!1,project:!1,event:!1,survey:!1,workspace:!1,profile:!1}),c=N=>{n(f=>({...f,[N]:!f[N]}))};return e.jsxs("div",{className:`bg-white h-full fixed z-10 transition-all duration-300 ${s?"w-64":"w-20"}`,children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-[-14px] w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:s?"<":">"}),e.jsxs("div",{className:"p-4 h-full overflow-auto",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("a",{href:"/",className:"flex items-center space-x-2",children:e.jsx("h2",{className:`ml-2 text-lg text-blue-600 font-semibold ${!s&&"hidden"}`,children:"Nexscholar"})})}),e.jsxs("nav",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-gray-500 uppercase text-xs font-bold ${!s&&"hidden"}`,children:"Main"}),e.jsxs(a,{href:route("dashboard"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(A,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Dashboard"})]})]}),h&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-gray-500 uppercase text-xs font-bold ${!s&&"hidden"}`,children:"Faculty Admin"}),e.jsxs(a,{href:route("faculty-admin.academicians"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(_,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Verify Academicians"})]}),e.jsxs(a,{href:route("faculty-admin.directory"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(k,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Academicians Directory"})]})]}),d&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold mt-5",children:"Admin"}),e.jsxs("div",{className:`group relative ${s?"":"w-12"}`,children:[e.jsxs(a,{href:route("roles.index"),className:"flex items-center p-2 hover:bg-gray-100 rounded",children:[e.jsx(C,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Roles & Permissions"})]}),e.jsxs(a,{href:route("faculty-admins.index"),className:"flex items-center p-2 hover:bg-gray-100 rounded",children:[e.jsx(H,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Faculty Admin"})]}),e.jsxs(a,{href:route("admin.profiles.index"),className:"flex items-center p-2 hover:bg-gray-100 rounded",children:[e.jsx(k,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Profile Management"})]}),!s&&e.jsxs("div",{className:"hidden group-hover:block absolute left-full top-0 ml-2 bg-white shadow-md rounded p-2 whitespace-nowrap z-10",children:[e.jsx("div",{className:"py-1",children:"Roles & Permissions"}),e.jsx("div",{className:"py-1",children:"Faculty Admin"}),e.jsx("div",{className:"py-1",children:"Profile Management"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-gray-500 uppercase text-xs font-bold ${!s&&"hidden"}`,children:"Features"}),e.jsxs(a,{href:route("ai.matching.index"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(L,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"AI Matching"})]}),e.jsxs(a,{href:route("bookmarks.index"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(E,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"My Bookmarks"})]}),e.jsxs(a,{href:route("project-hub.index"),className:`flex items-center py-2 px-4 hover:bg-gray-100 rounded ${route().current("project-hub.index")||route().current().startsWith("project-hub.")?"bg-blue-50 text-blue-600":""}`,children:[e.jsx(z,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Scholar Lab"})]}),e.jsxs("button",{onClick:()=>c("networking"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(k,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Networking"}),s&&e.jsx("span",{className:"ml-auto",children:r.networking?"-":"+"})]}),r.networking&&e.jsxs("div",{className:`${!s&&"hidden"} ml-6`,children:[e.jsxs(a,{href:route("connections.index"),className:"flex items-center justify-between py-2 hover:bg-gray-100 rounded",children:[e.jsx("span",{children:"My Connections"}),l>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full",children:l})]}),e.jsx(a,{href:"/postgraduates",className:"block py-2 hover:bg-gray-100 rounded",children:"Postgraduate"}),e.jsx(a,{href:"/undergraduates",className:"block py-2 hover:bg-gray-100 rounded",children:"Undergraduate"}),e.jsx(a,{href:"/academicians",className:"block py-2 hover:bg-gray-100 rounded",children:"Academician"}),e.jsx(a,{href:"/universities",className:"block py-2 hover:bg-gray-100 rounded",children:"University"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-gray-500 uppercase text-xs font-bold ${!s&&"hidden"}`,children:"Manage"}),e.jsxs("button",{onClick:()=>c("grant"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(R,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Grant"}),s&&e.jsx("span",{className:"ml-auto",children:r.grant?"-":"+"})]}),r.grant&&e.jsxs("div",{className:`${!s&&"hidden"} ml-6`,children:[e.jsx(a,{href:"/grants",className:"block py-2 hover:bg-gray-100 rounded",children:"View Grant"}),u&&e.jsx(a,{href:route("post-grants.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage Grants"})]}),e.jsxs("button",{onClick:()=>c("project"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(U,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Project"}),s&&e.jsx("span",{className:"ml-auto",children:r.project?"-":"+"})]}),r.project&&e.jsxs("div",{className:`${!s&&"hidden"} ml-6`,children:[e.jsx(a,{href:"/projects",className:"block py-2 hover:bg-gray-100 rounded",children:" View Project"}),p&&e.jsx(a,{href:route("post-projects.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage Projects"})]}),e.jsxs("button",{onClick:()=>c("event"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(V,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Event"}),s&&e.jsx("span",{className:"ml-auto",children:r.event?"-":"+"})]}),r.event&&e.jsxs("div",{className:`${!s&&"hidden"} ml-6`,children:[e.jsx(a,{href:"/events",className:"block py-2 hover:bg-gray-100 rounded",children:"View Event"}),m&&e.jsx(a,{href:route("post-events.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage Event"})]}),e.jsxs("button",{onClick:()=>c("post"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(B,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Post"}),s&&e.jsx("span",{className:"ml-auto",children:r.post?"-":"+"})]}),r.post&&e.jsxs("div",{className:`${!s&&"hidden"} ml-6`,children:[e.jsx(a,{href:"/posts",className:"block py-2 hover:bg-gray-100 rounded",children:"View Post"}),e.jsx(a,{href:route("create-posts.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage Post"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-gray-500 uppercase text-xs font-bold ${!s&&"hidden"}`,children:"Setting"}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>c("profile"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(D,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Profile"}),s&&e.jsx("span",{className:"ml-auto",children:r.profile?"-":"+"})]}),r.profile&&e.jsxs("div",{className:`${!s&&"hidden"} ml-6`,children:[e.jsx(a,{href:route("profile.edit"),className:"block py-2 hover:bg-gray-100 rounded",children:"General Account Setting"}),e.jsx(a,{href:route("role.edit"),className:"block py-2 hover:bg-gray-100 rounded",children:"Personal Information"})]})]}),e.jsxs(a,{href:route("logout"),method:"post",as:"button",className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(C,{className:"text-gray-600"}),e.jsx("span",{className:`ml-2 ${!s&&"hidden"}`,children:"Log Out"})]})]})]})]})]})},me=()=>{const{isAdmin:s,isPostgraduate:i,isUndergraduate:d,isFacultyAdmin:x,isAcademician:g,canPostEvents:h,canPostProjects:j,canPostGrants:m,canCreateFacultyAdmin:p,canAssignAbilities:u}=G(),{pendingRequestCount:t}=$().props,[y,b]=o.useState(!1),[l,r]=o.useState({networking:!1,grant:!1,project:!1,event:!1,survey:!1,profile:!1,admin:!1}),n=()=>{b(!y)},c=N=>{r(f=>({...f,[N]:!f[N]}))};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"fixed top-4 right-4 z-50 bg-blue-600 text-white p-3 rounded-md shadow-md lg:hidden",onClick:n,children:y?"✕":"☰"}),e.jsx("div",{className:`fixed top-0 left-0 h-full w-64 bg-white shadow-md z-40 transform transition-transform duration-300 ${y?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:e.jsxs("div",{className:"p-4 h-full overflow-auto",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("a",{href:"/",className:"flex items-center space-x-2",children:e.jsx("h2",{className:"text-lg text-blue-600 font-semibold",children:"NexScholar"})})}),e.jsxs("nav",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Main"}),e.jsxs(a,{href:route("dashboard"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(A,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Dashboard"})]})]}),x&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Faculty Admin"}),e.jsxs(a,{href:route("faculty-admin.academicians"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(_,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Verify Academicians"})]}),e.jsxs(a,{href:route("faculty-admin.directory"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(k,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Academicians Directory"})]})]}),s&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Admin Features"}),e.jsxs(a,{href:route("faculty-admins.index"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(A,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Create Faculty Admin"})]}),e.jsxs(a,{href:route("roles.index"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(A,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Assign Abilities"})]})]}),s&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Admin"}),e.jsxs("button",{onClick:()=>c("admin"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(C,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Admin Tools"}),e.jsx("span",{className:"ml-auto",children:l.admin?"-":"+"})]}),l.admin&&e.jsxs("div",{className:"ml-6",children:[e.jsx(a,{href:route("roles.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Roles & Permissions"}),e.jsx(a,{href:route("faculty-admins.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Faculty Admin"}),e.jsx(a,{href:route("admin.profiles.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Profile Management"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Features"}),e.jsxs(a,{href:route("ai.matching.index"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(L,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"AI Matching"})]}),e.jsxs(a,{href:route("bookmarks.index"),className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(E,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"My Bookmarks"})]}),e.jsxs(a,{href:route("project-hub.index"),className:`flex items-center py-2 px-4 hover:bg-gray-100 rounded ${route().current("project-hub.index")||route().current().startsWith("project-hub.")?"bg-blue-50 text-blue-600":""}`,children:[e.jsx(z,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Scholar Lab"})]}),e.jsxs("button",{onClick:()=>c("networking"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(k,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Networking"}),e.jsx("span",{className:"ml-auto",children:l.networking?"-":"+"})]}),l.networking&&e.jsxs("div",{className:"ml-6",children:[e.jsxs(a,{href:route("connections.index"),className:"flex items-center justify-between py-2 hover:bg-gray-100 rounded",children:[e.jsx("span",{children:"My Connections"}),t>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full",children:t})]}),e.jsx(a,{href:"/postgraduates",className:"block py-2 hover:bg-gray-100 rounded",children:"Postgraduate"}),e.jsx(a,{href:"/undergraduates",className:"block py-2 hover:bg-gray-100 rounded",children:"Undergraduate"}),e.jsx(a,{href:"/academicians",className:"block py-2 hover:bg-gray-100 rounded",children:"Academician"}),e.jsx(a,{href:"/universities",className:"block py-2 hover:bg-gray-100 rounded",children:"University"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Manage"}),e.jsxs("button",{onClick:()=>c("grant"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(R,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Grant"}),e.jsx("span",{className:"ml-auto",children:l.grant?"-":"+"})]}),l.grant&&e.jsxs("div",{className:"ml-6",children:[e.jsx(a,{href:"/grants",className:"block py-2 hover:bg-gray-100 rounded",children:"View Grant"}),m&&e.jsx(a,{href:route("post-grants.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage Grants"})]}),e.jsxs("button",{onClick:()=>c("project"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(U,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Project"}),e.jsx("span",{className:"ml-auto",children:l.project?"-":"+"})]}),l.project&&e.jsxs("div",{className:"ml-6",children:[e.jsx(a,{href:"/projects",className:"block py-2 hover:bg-gray-100 rounded",children:"View project"}),j&&e.jsx(a,{href:route("post-projects.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage project"})]}),e.jsxs("button",{onClick:()=>c("event"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(V,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Event"}),e.jsx("span",{className:"ml-auto",children:l.event?"-":"+"})]}),l.event&&e.jsxs("div",{className:"ml-6",children:[e.jsx(a,{href:"/events",className:"block py-2 hover:bg-gray-100 rounded",children:"View event"}),h&&e.jsx(a,{href:route("post-events.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage event"})]}),e.jsxs("button",{onClick:()=>c("post"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(B,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Post"}),e.jsx("span",{className:"ml-auto",children:l.post?"-":"+"})]}),l.post&&e.jsxs("div",{className:"ml-6",children:[e.jsx(a,{href:"/posts",className:"block py-2 hover:bg-gray-100 rounded",children:"View post"}),e.jsx(a,{href:route("create-posts.index"),className:"block py-2 hover:bg-gray-100 rounded",children:"Manage post"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Survey"}),e.jsxs("button",{onClick:()=>c("survey"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(T,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Survey"}),e.jsx("span",{className:"ml-auto",children:l.survey?"-":"+"})]}),l.survey&&e.jsx("div",{className:"ml-6",children:e.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSdPX9CXPOAZLedNsqA9iyMs5ZkAOACol4_wBVN2LPdxbnsJeg/viewform",className:"block py-2 hover:bg-gray-100 rounded",target:"_blank",rel:"noopener noreferrer",children:"Free Survey"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold",children:"Settings"}),e.jsxs("button",{onClick:()=>c("profile"),className:"flex items-center w-full py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(D,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Profile"}),e.jsx("span",{className:"ml-auto",children:l.profile?"-":"+"})]}),l.profile&&e.jsxs("div",{className:"ml-6",children:[e.jsx(a,{href:route("profile.edit"),className:"block py-2 hover:bg-gray-100 rounded",children:"General Account Setting"}),e.jsx(a,{href:route("role.edit"),className:"block py-2 hover:bg-gray-100 rounded",children:"Personal Information"})]})]}),e.jsxs(a,{href:route("logout"),method:"post",as:"button",className:"flex items-center py-2 px-4 hover:bg-gray-100 rounded",children:[e.jsx(C,{className:"text-gray-600"}),e.jsx("span",{className:"ml-2",children:"Log Out"})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:n})]})},ue=({profilePicture:s})=>e.jsx("nav",{className:"border-b border-gray-200 px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(a,{href:route("profile.edit"),className:"text-gray-700 hover:text-blue-600 font-medium",children:"My Account"}),e.jsx(a,{href:route("role.edit"),className:"text-gray-700 hover:text-blue-600 font-medium",children:"Profile"})]}),e.jsx("div",{className:"flex items-center space-x-4"})]})}),ge=({isOpen:s,onClose:i})=>{const[d,x]=o.useState({unread:[],read:[],unread_count:0}),[g,h]=o.useState(!0),[j,m]=o.useState([]),p=o.useRef(null);o.useEffect(()=>{const r=n=>{p.current&&!p.current.contains(n.target)&&i()};return s&&(u(),document.addEventListener("mousedown",r)),()=>{document.removeEventListener("mousedown",r)}},[s]);const u=async()=>{h(!0);try{const r=await w.get("/api/v1/notifications");x(r.data)}catch(r){console.error("Error fetching notifications:",r)}finally{h(!1)}},t=async r=>{m(n=>[...n,r]);try{await w.post("/api/v1/notifications/mark-as-read",{notification_id:r}),x(n=>{const c=n.unread.filter(f=>f.id!==r),N=n.unread.find(f=>f.id===r);return N?(N.read_at=new Date().toISOString(),{unread:c,read:[N,...n.read],unread_count:c.length}):n})}catch(n){console.error("Error marking notification as read:",n)}finally{m(n=>n.filter(c=>c!==r))}},y=async()=>{try{await w.post("/api/v1/notifications/mark-all-as-read"),x(r=>{const n=r.unread.map(c=>({...c,read_at:new Date().toISOString()}));return{unread:[],read:[...n,...r.read],unread_count:0}})}catch(r){console.error("Error marking all notifications as read:",r)}},b=(r,n)=>{m(f=>[...f,r]);const c=route(`connections.${n}`,r);q[n==="accept"?"patch":"delete"](c,{},{onSuccess:()=>{u()},onFinish:()=>{m(f=>f.filter(W=>W!==r))}})},l=r=>{const n=r.data;if(j.includes(r.id)||n.connection_id&&j.includes(n.connection_id))return e.jsxs("div",{className:"flex items-center justify-center py-2",children:[e.jsx(S,{className:"animate-spin text-blue-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Processing..."})]});switch(n.type){case"connection_request":return e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"flex items-start mb-1",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:e.jsx(X,{className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:n.message}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(r.created_at).toLocaleDateString()})]})]}),!r.read_at&&e.jsxs("div",{className:"flex mt-2 space-x-2",children:[e.jsxs("button",{onClick:()=>b(n.connection_id,"accept"),className:"px-2 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600 flex items-center",children:[e.jsx(M,{className:"mr-1"})," Accept"]}),e.jsx("button",{onClick:()=>b(n.connection_id,"reject"),className:"px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:"Reject"})]})]});case"connection_accepted":return e.jsx("div",{className:"py-2",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:e.jsx(Z,{className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:n.message}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(r.created_at).toLocaleDateString()})]})]})});default:return e.jsxs("div",{className:"py-2",children:[e.jsx("p",{className:"text-sm",children:n.message||"Notification"}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(r.created_at).toLocaleDateString()})]})}};return s?e.jsxs("div",{ref:p,className:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg overflow-hidden z-50 max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-100 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications"}),d.unread_count>0&&e.jsx("button",{onClick:y,className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark all as read"})]}),e.jsx("div",{className:"overflow-y-auto flex-grow",children:g?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(S,{className:"animate-spin text-blue-500 mr-2"}),e.jsx("span",{children:"Loading notifications..."})]}):e.jsxs(e.Fragment,{children:[d.unread.length>0&&e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b",children:e.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase",children:"New"})}),d.unread.map(r=>e.jsx("div",{className:"px-4 border-b hover:bg-gray-50 bg-blue-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"flex-grow",children:l(r)}),e.jsx("button",{onClick:()=>t(r.id),className:"text-xs text-gray-500 hover:text-gray-700 mt-2",children:e.jsx(M,{title:"Mark as read"})})]})},r.id)),d.read.length>0&&e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b",children:e.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Earlier"})}),d.read.map(r=>e.jsx("div",{className:"px-4 border-b hover:bg-gray-50 text-gray-600",children:l(r)},r.id)),d.unread.length===0&&d.read.length===0&&e.jsx("div",{className:"px-4 py-6 text-center text-gray-500",children:e.jsx("p",{children:"No notifications"})})]})})]}):null},F=()=>{const[s,i]=o.useState(0),[d,x]=o.useState(!1),[g,h]=o.useState(!1),j=o.useRef(null);o.useEffect(()=>{m();const t=setInterval(m,3e4);return()=>clearInterval(t)},[]);const m=async()=>{h(!0);try{const t=await w.get("/api/v1/notifications");i(t.data.unread_count)}catch(t){console.error("Error fetching notifications count:",t)}finally{h(!1)}},p=()=>{x(!d)},u=()=>{x(!1)};return e.jsxs("div",{className:"relative",ref:j,children:[e.jsxs("button",{onClick:p,className:"relative p-1 rounded-full text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"View notifications"}),e.jsx(Q,{className:"h-6 w-6"}),s>0&&e.jsx("span",{className:"absolute top-0 right-0 -mt-1 -mr-1 flex items-center justify-center h-5 w-5 rounded-full bg-red-500 text-white text-xs",children:s>9?"9+":s})]}),e.jsx(ge,{isOpen:d,onClose:u})]})},be=({children:s,title:i,TopMenuOpen:d})=>{const[x,g]=o.useState(!1),[h,j]=o.useState(!1),{url:m}=$(),p=()=>{const t=!x;g(t),localStorage.setItem("isSidebarOpen",t)};o.useEffect(()=>{setTimeout(()=>{let t=i;if(t===void 0&&(t=document.title,t==="Nexscholar"||t.endsWith("- Nexscholar"))){const y=m.split("/").filter(Boolean);y.length>0&&(t=y[y.length-1].split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "))}console.log(`MainLayout tracking: ${t||"Unknown"} at ${m}`),J(m,t)},250)},[m,i]),o.useEffect(()=>{const t=()=>{j(window.innerWidth>=1024),window.innerWidth>=1024?g(!0):g(!1)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.useEffect(()=>{const t=localStorage.getItem("isSidebarOpen");t!==null&&g(t==="true")},[]);const u=t=>m.startsWith(t);return e.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[e.jsx(K,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,style:{background:"#22c55e",color:"#fff"}},error:{duration:4e3,style:{background:"#ef4444",color:"#fff"}}}}),h&&e.jsx(he,{isOpen:x,toggleSidebar:p}),!h&&e.jsx(me,{isOpen:x,toggleSidebar:p}),h?e.jsxs("div",{className:`flex-1 p-6 transition-all duration-300 ${x?"ml-64":"ml-20"}`,children:[d&&e.jsx(ue,{}),e.jsx(P,{title:i}),e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold pt-2 pl-2",children:i}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(F,{})})]}),s]})]}):e.jsxs("div",{children:[e.jsx(P,{title:i}),e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"sticky top-0 z-50 bg-white shadow-sm px-4 py-2 flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-semibold",children:i}),e.jsx(F,{})]}),s]}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white border-t border-gray-200 rounded-t-3xl shadow-lg",children:e.jsxs("div",{className:"flex justify-around items-center relative py-3",children:[e.jsxs(a,{href:"/events",className:`flex flex-col items-center ${u("/event")?"text-blue-500":"text-gray-500"}`,children:[e.jsx(te,{className:"w-6 h-6 stroke-current"}),e.jsx("span",{className:"text-xs font-medium",children:"Event"})]}),e.jsxs(a,{href:"/projects",className:`flex flex-col items-center ${u("/project")?"text-blue-500":"text-gray-500"}`,children:[e.jsx(ae,{className:"w-6 h-6 stroke-current"}),e.jsx("span",{className:"text-xs font-medium",children:"Project"})]}),e.jsx("div",{className:"absolute -top-6 w-14 h-14 flex items-center justify-center bg-blue-500 rounded-full shadow-lg border-4 border-white",children:e.jsx(a,{href:"/dashboard",children:e.jsx(ie,{className:"w-7 h-7 stroke-white stroke-[1.5]"})})}),e.jsxs(a,{href:"/grants",className:`flex flex-col items-center ${u("/grant")?"text-blue-500":"text-gray-500"}`,children:[e.jsx(le,{className:"w-6 h-6 stroke-current"}),e.jsx("span",{className:"text-xs font-medium",children:"Grant"})]}),e.jsxs(a,{href:"/role",className:`flex flex-col items-center ${u("/role")?"text-blue-500":"text-gray-500"}`,children:[e.jsx(xe,{className:"w-6 h-6 stroke-current"}),e.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})]})]})};export{ae as B,z as L,be as M,xe as U,v as c};
