import{r as x,j as e,a as F}from"./app-CRunKGlS.js";import{M as U}from"./Modal-B6Xe6uPJ.js";import{B as u}from"./button-CvHeaofT.js";import{L as w}from"./label-BXs4LQ9L.js";import{A as M,a as L}from"./alert-DLMX4gfy.js";import{c as i}from"./index-BP2IIEZc.js";import{l as P}from"./logError-D4ezqrCx.js";import{U as j}from"./upload-CUaaAm6k.js";import{C}from"./circle-alert-DX7nHMHh.js";import{F as z}from"./file-text-uLWXHWQR.js";import{X as B}from"./x-D71_YNlz.js";import{L as A}from"./loader-circle-CA_94cJH.js";import"./dialog-6F-BmcU5.js";import"./transition-Bs7yPu4Z.js";import"./utils-D-KgF5mV.js";import"./index-B_k58LZM.js";import"./index-CGrAONsN.js";import"./createLucideIcon-Cn5nLR87.js";function Z({isOpen:b,relationship:g,onClose:n,onUploaded:c}){const[l,o]=x.useState(null),[a,f]=x.useState(!1),[v,d]=x.useState(!1),y=s=>{var t;const r=(t=s.target.files)==null?void 0:t[0];if(r){if(r.type!=="application/pdf"){i.error("Please upload a PDF file");return}if(r.size>10*1024*1024){i.error("File size must be less than 10MB");return}o(r)}},m=s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?d(!0):s.type==="dragleave"&&d(!1)},N=s=>{var t;s.preventDefault(),s.stopPropagation(),d(!1);const r=(t=s.dataTransfer.files)==null?void 0:t[0];if(r){if(r.type!=="application/pdf"){i.error("Please upload a PDF file");return}if(r.size>10*1024*1024){i.error("File size must be less than 10MB");return}o(r)}},D=async()=>{var s,r;if(!(!l||a)){f(!0);try{const t=new FormData;t.append("letter",l),(await F.post(route("supervision.relationships.university-letter.upload",g.id),t,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(i.success("University letter uploaded successfully"),c==null||c(),p())}catch(t){P(t,"UniversityLetterUploadModal handleUpload");const h=((r=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to upload university letter";i.error(h)}finally{f(!1)}}},p=()=>{a||(o(null),n==null||n())};return e.jsx(U,{show:b,onClose:p,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Upload University Letter"})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"Upload your official university offer or appointment letter to complete the validation process."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{className:"bg-blue-50 border-blue-200",children:[e.jsx(C,{className:"h-4 w-4 text-blue-600"}),e.jsxs(L,{className:"text-sm text-blue-900",children:[e.jsx("strong",{className:"font-semibold",children:"Required Document:"}),e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1 text-xs",children:[e.jsx("li",{children:"Official university offer letter or appointment letter"}),e.jsx("li",{children:"Must be in PDF format"}),e.jsx("li",{children:"Maximum file size: 10MB"}),e.jsx("li",{children:"Document should clearly show your supervisor assignment"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{htmlFor:"letter-upload",children:"Upload Document"}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${v?"border-blue-500 bg-blue-50":l?"border-green-500 bg-green-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:N,children:[e.jsx("input",{id:"letter-upload",type:"file",className:"hidden",accept:"application/pdf",onChange:y,disabled:a}),l?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(z,{className:"h-10 w-10 text-green-600"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-green-900",children:l.name}),e.jsxs("p",{className:"text-sm text-green-700",children:[(l.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>o(null),disabled:a,className:"hover:bg-green-100",children:e.jsx(B,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{className:"h-12 w-12 text-slate-400 mx-auto"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Drop your PDF file here, or"," ",e.jsx("label",{htmlFor:"letter-upload",className:"text-blue-600 hover:text-blue-700 cursor-pointer underline",children:"browse"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"PDF only, max 10MB"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t flex items-center justify-end gap-3",children:[e.jsx(u,{variant:"outline",onClick:p,disabled:a,children:"Cancel"}),e.jsxs(u,{onClick:D,disabled:!l||a,className:"bg-blue-600 hover:bg-blue-700",children:[a&&e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Uploading...":"Upload Letter"]})]})]})})}export{Z as default};
