import{q as m,W as x,j as e,a as u,r as p}from"./app-D13lAaq_.js";import{M as h}from"./MainLayout-BL3PuZc8.js";import{R as g}from"./quill.snow-CzLrB3Hw.js";import{u as f}from"./useRoles-C3aNN1f9.js";import"./index-j-l_UYNY.js";function j({tags:s,setTags:l}){const[i,c]=p.useState(""),r=a=>{if(a.key==="Enter"||a.key===","){a.preventDefault();const t=i.trim();t&&!s.includes(t)&&l([...s,t]),c("")}else a.key==="Backspace"&&!i.length&&s.length&&l(s.slice(0,s.length-1))},d=a=>{l(s.filter((t,o)=>o!==a))};return e.jsxs("div",{className:"flex flex-wrap items-center border rounded-lg p-2",children:[s.map((a,t)=>e.jsxs("div",{className:"bg-blue-200 text-blue-800 rounded-full px-3 py-1 m-1 flex items-center",children:[e.jsx("span",{children:a}),e.jsx("button",{type:"button",onClick:()=>d(t),className:"ml-2 text-sm text-blue-800",children:"Ã—"})]},t)),e.jsx("input",{type:"text",value:i,onChange:a=>c(a.target.value),onKeyDown:r,className:"flex-grow outline-none p-1",placeholder:"Type a tag and press enter"})]})}function C(){m().props,f();const{data:s,setData:l,post:i,processing:c,errors:r}=x({title:"",url:"",content:"",category:"",tags:[],image:null,featured_image:null,attachment:null,status:"published"}),d=t=>{l("tags",t)};function a(t){t.preventDefault();const o=new FormData;Object.keys(s).forEach(n=>{n==="tags"?o.append(n,JSON.stringify(s[n])):(s[n]instanceof File,o.append(n,s[n]))}),i(route("create-posts.store"),{data:o,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Post created successfully.")},onError:n=>{console.error("Error creating Post:",n),alert("Failed to create the Post. Please try again.")}})}return e.jsx(h,{title:"",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:a,className:"bg-white p-6 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Post"}),e.jsxs("div",{className:"grid grid-cols-10 gap-8",children:[e.jsxs("div",{className:"col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Post Title",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.title,onChange:t=>l("title",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter Post Title"}),r.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.title})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:s.category,onChange:t=>l("category",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Category"}),e.jsx("option",{value:"General Discussion",children:"General Discussion"}),e.jsx("option",{value:"Academic Research",children:"Academic Research"}),e.jsx("option",{value:"Student Life",children:"Student Life"}),e.jsx("option",{value:"Career Opportunities",children:"Career Opportunities"}),e.jsx("option",{value:"Events & Workshops",children:"Events & Workshops"}),e.jsx("option",{value:"Scholarships & Funding",children:"Scholarships & Funding"})]}),r.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.category})]})]}),e.jsxs("div",{className:"grid grid-cols-10 gap-8",children:[e.jsxs("div",{className:"col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 w-full rounded-lg border border-gray-200",style:{height:"300px",overflowY:"auto"},children:e.jsx(g,{theme:"snow",value:s.content,onChange:t=>l("content",t),placeholder:"Enter content",style:{height:"300px",maxHeight:"300px"}})}),r.content&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.content})]}),e.jsxs("div",{className:"col-span-3 flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Tags"}),e.jsx(j,{tags:s.tags,setTags:d}),r.tags&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.tags})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>l("image",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Featured Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>l("featured_image",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:t=>l("attachment",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:a,disabled:c,className:"inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"}),e.jsx(u,{href:route("create-posts.index"),className:"inline-block rounded-lg bg-gray-300 px-5 py-3 text-sm font-medium text-gray-700 hover:bg-gray-400",children:"Cancel"})]})]})})})}export{C as default};
