import{r as j,j as e,Y as k,a as y}from"./app-D3AktG82.js";import{M as C}from"./MainLayout-DyjsH-98.js";import{e as L,s as m}from"./index-4w4A1DnI.js";import{V as b}from"./index-Bz5m1Gx8.js";import"./purify.es-B2xYLbnv.js";import"./createLucideIcon-BEo8yGt5.js";import"./zap-B4gBKpeG.js";import"./users-DQ2dlNeF.js";import"./folder-open-CtZVJMb7.js";import"./settings-BcaEoq3Z.js";import"./useRoles-BXvHrhRl.js";import"./chevron-left-DmFct3vL.js";import"./proxy-CTBUQWec.js";import"./user-DB_cYFRu.js";import"./calendar-DasA5wIm.js";import"./file-text-BLKGCQ46.js";import"./graduation-cap-Cylr7fZX.js";import"./building-DK5ypr6H.js";import"./sparkles-CfPKHqXi.js";import"./database-B3XV13OP.js";import"./shield-mBM_ZWl6.js";import"./index-C5BWK2P1.js";import"./transition-BO_k3XuF.js";import"./analytics-BQ374C1C.js";import"./Modal-CaMfwqK0.js";import"./dialog-CA0cJW7K.js";import"./briefcase-C2ucIUTn.js";import"./iconBase-OotpJ8Sd.js";const u=({text:i,maxLength:o=100,className:l})=>{if(!i)return e.jsx("p",{className:l,children:"No content available"});const t=i.replace(/<[^>]*>/g,""),c=t.length>o?t.substring(0,o)+"...":t;return e.jsx("p",{className:l,children:c})},_=({bookmark:i,onRemove:o})=>{const l=()=>{const{bookmarkable:t,bookmarkable_type:c}=i;if(!t)return e.jsx("div",{className:"p-4 bg-red-100 rounded-md",children:e.jsx("p",{className:"text-red-600",children:"This item is no longer available"})});switch(c){case"App\\Models\\Academician":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:t.profile_picture?`/storage/${t.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3 object-cover",alt:t.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.current_position})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("academicians.show",t.url),className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\Undergraduate":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:t.profile_picture?`/storage/${t.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3 object-cover",alt:t.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Undergraduate Student"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("undergraduates.show",t.url),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\Postgraduate":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:t.profile_picture?`/storage/${t.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3 object-cover",alt:t.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Postgraduate Student"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("postgraduates.show",t.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostGrant":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium mr-2",children:"Grant"})}),e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.title}),e.jsx(u,{text:t.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("funding.show.grant",t.url),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition",children:"View Grant"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostScholarship":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full font-medium mr-2",children:"Scholarship"})}),e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.title}),e.jsx(u,{text:t.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("funding.show.scholarship",t.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Scholarship"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostProject":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.title}),e.jsx(u,{text:t.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("projects.show",t.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Project"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostEvent":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.event_name}),e.jsx(u,{text:t.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("events.show",t.url),className:"px-3 py-1 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600 transition",children:"View Event"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\CreatePost":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:t.title}),e.jsx(u,{text:t.content,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("posts.show",t.url),className:"px-3 py-1 bg-indigo-500 text-white text-sm rounded hover:bg-indigo-600 transition",children:"View Post"}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});default:return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("p",{className:"text-gray-600",children:"Unknown bookmark type"}),e.jsx("button",{onClick:()=>o(i.id),className:"mt-2 text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})}};return e.jsx("div",{className:"mb-4",children:l()})};function ae({auth:i,bookmarks:o}){const[l,t]=j.useState(o),[c,f]=j.useState("all"),[n,w]=j.useState(""),v=(()=>{const s={...l};return s.Funding&&s.Grants&&(s.Funding=[...s.Funding,...s.Grants],delete s.Grants),Object.keys(s).sort()})(),N=async s=>{try{await y.delete(route("bookmarks.destroy",s));const a={...l};Object.keys(a).forEach(r=>{a[r]=a[r].filter(p=>p.id!==s),a[r].length===0&&delete a[r]}),t(a),b.success("Bookmark removed successfully")}catch(a){console.error("Error removing bookmark:",a),b.error("Failed to remove bookmark")}},x=(()=>{if(n===""&&c==="all"){const r={...l};return r.Funding&&r.Grants&&(r.Funding=[...r.Funding,...r.Grants],delete r.Grants),r}const s={};return(c==="all"?Object.keys(l):[c]).forEach(r=>{l[r]&&(n===""?s[r]=l[r]:(s[r]=l[r].filter(p=>{const d=p.bookmarkable;if(!d)return!1;switch(p.bookmarkable_type){case"App\\Models\\Academician":return d.full_name.toLowerCase().includes(n.toLowerCase())||d.current_position&&d.current_position.toLowerCase().includes(n.toLowerCase());case"App\\Models\\Undergraduate":case"App\\Models\\Postgraduate":return d.full_name.toLowerCase().includes(n.toLowerCase());case"App\\Models\\PostGrant":case"App\\Models\\PostScholarship":case"App\\Models\\PostProject":return d.title.toLowerCase().includes(n.toLowerCase())||d.description.toLowerCase().includes(n.toLowerCase());case"App\\Models\\PostEvent":return d.event_name.toLowerCase().includes(n.toLowerCase())||d.description.toLowerCase().includes(n.toLowerCase());case"App\\Models\\CreatePost":return d.title.toLowerCase().includes(n.toLowerCase())||d.content.toLowerCase().includes(n.toLowerCase());default:return!1}}),s[r].length===0&&delete s[r]))}),s.Funding&&s.Grants&&(s.Funding=[...s.Funding,...s.Grants],delete s.Grants),s})(),h=Object.values(l).reduce((s,a)=>s+a.length,0),g=Object.values(x).reduce((s,a)=>s+a.length,0);return e.jsxs(C,{auth:i,title:"My Bookmarks",children:[e.jsx(k,{title:"My Bookmarks"}),e.jsx("div",{children:e.jsx("div",{className:"max-w-7xl mx-auto ",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm",children:e.jsxs("div",{className:"p-6 md:p-6 lg:p-0 lg:pr-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"Filter by:"}),e.jsx(L,{className:"text-gray-500 mr-2"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5",value:c,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),v.map(s=>{var r;let a=0;return s==="Funding"?a=(l.Funding||[]).length+(l.Grants||[]).length:a=((r=l[s])==null?void 0:r.length)||0,e.jsxs("option",{value:s,children:[s," (",a,")"]},s)})]})]}),e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("input",{type:"text",className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 pl-10",placeholder:"Search bookmarks...",value:n,onChange:s=>w(s.target.value)}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})})]})]}),e.jsx("div",{className:"mb-6 text-gray-600",children:g===h?e.jsxs("p",{children:["Showing all ",h," bookmarks"]}):e.jsxs("p",{children:["Showing ",g," of ",h," bookmarks"]})}),Object.keys(x).length===0?e.jsxs("div",{className:"py-10 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bookmarks found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n||c!=="all"?"Try adjusting your filters or search term":"Start adding bookmarks by clicking the bookmark icon on profiles, posts, events, projects, or grants."})]}):Object.keys(x).sort().map(s=>{let a=x[s].length;return s==="Funding"&&(a=x[s].length),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 pb-2 border-b",children:[s," (",a,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x[s].map(r=>e.jsx(_,{bookmark:r,onRemove:N},r.id))})]},s)})]})})})})]})}export{ae as default};
