import{r as t,j as e,a as o,b as g}from"./app-D5asg2Sc.js";import{e as w,a as E,b as U,f as O,c as I,g as G,h as P,i as M,j as T}from"./index-DEBDkoo8.js";function V({project:s,previous:h,next:x,academicians:u,researchOptions:y,universities:N,auth:_,isWelcome:j}){const[v,k]=t.useState(s.total_likes||0),[z,S]=t.useState(s.total_shares||0),[L,A]=t.useState(s.liked||!1),[f,l]=t.useState(!1),c=t.useRef(null);t.useEffect(()=>{const a=n=>{c.current&&!c.current.contains(n.target)&&l(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const i=u&&u.find(a=>a.academician_id===s.author_id)||null,p=()=>{if(!s.field_of_research)return null;const n=(Array.isArray(s.field_of_research)?s.field_of_research:[s.field_of_research]).map(B=>{const d=y.find(m=>`${m.field_of_research_id}-${m.research_area_id}-${m.niche_domain_id}`===B);return d?`${d.field_of_research_name} - ${d.research_area_name} - ${d.niche_domain_name}`:null}).filter(Boolean);return n.length?n.join(", "):null},b=()=>{if(!s.university)return null;const a=N.find(n=>String(n.id)===String(s.university));return a?a.full_name:null},C=()=>{if(!_){window.location.href=route("login");return}g.post(route("projects.toggleLike",s.url)).then(a=>{k(a.data.total_likes),A(a.data.liked)}).catch(a=>console.error(a))},r=a=>{a(),g.post(route("projects.share",s.url)).then(n=>{S(n.data.total_shares)}).catch(n=>console.error(n))},D=()=>{const a=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;window.open(a,"_blank","width=600,height=400")},F=()=>{const a=`https://wa.me/?text=${encodeURIComponent(window.location.href)}`;window.open(a,"_blank")},$=()=>{const a=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;window.open(a,"_blank","width=600,height=400")},R=()=>{navigator.clipboard.writeText(window.location.href).then(()=>{alert("Link copied to clipboard")})};return e.jsx("div",{className:"px-10 md:px-16",children:e.jsxs("div",{className:"max-w-8xl mx-auto py-6",children:[j?e.jsx("div",{className:"absolute top-[6.2rem] left-2 md:top-[6.1rem] md:left-[1rem] z-10",children:e.jsx(o,{href:route("welcome"),className:"flex items-center justify-center w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600",children:e.jsx(w,{className:"text-lg md:text-xl"})})}):e.jsx("div",{className:"absolute top-[1.8rem] left-2 md:top-[5.5rem] md:left-[19.5rem] z-10",children:e.jsx(o,{href:route("projects.index"),className:"flex items-center justify-center w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600",children:e.jsx(w,{className:"text-lg md:text-xl"})})}),s.title&&e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 text-left",children:s.title}),i?e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("img",{src:`/storage/${i.profile_picture}`,alt:i.full_name,className:"w-12 h-12 rounded-full object-cover shadow-md bg-gray-200 border-2 border-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:i.full_name}),e.jsx("div",{className:"text-gray-500",children:s.created_at?new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""})]})]}):e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("img",{src:"/storage/Admin.jpg",alt:"Admin",className:"w-12 h-12 rounded-full object-cover shadow-md border-2 border-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:"Admin"}),e.jsx("div",{className:"text-gray-500",children:s.created_at?new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""})]})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("hr",{}),e.jsxs("div",{className:"flex flex-wrap items-center space-x-4 py-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"w-6 h-6 text-gray-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:s.total_views})]}),e.jsxs("button",{onClick:C,className:"flex items-center",children:[L?e.jsx(U,{className:"w-6 h-6 text-red-600"}):e.jsx(O,{className:"w-6 h-6 text-gray-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:v})]}),e.jsxs("div",{className:"relative",ref:c,children:[e.jsx("button",{onClick:()=>l(!f),className:"flex items-center",children:e.jsx(I,{className:"w-6 h-6 text-gray-600"})}),f&&e.jsxs("div",{className:"absolute left-0 mt-2 w-40 bg-white shadow-lg rounded z-10",children:[e.jsxs("button",{onClick:()=>{r(R),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx(G,{className:"w-5 h-5 inline mr-2 text-gray-600"}),"Copy Link"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{r(D),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx(P,{className:"w-5 h-5 inline mr-2 text-blue-600"}),"Facebook"]}),e.jsxs("button",{onClick:()=>{r(F),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx(M,{className:"w-5 h-5 inline mr-2 text-green-600"}),"WhatsApp"]}),e.jsxs("button",{onClick:()=>{r($),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx(T,{className:"w-5 h-5 inline mr-2 text-blue-700"}),"LinkedIn"]})]})]})]}),e.jsx("hr",{})]}),s.image&&e.jsx("img",{src:`/storage/${s.image}`,alt:"Banner",className:"w-full h-auto md:h-64 object-cover mb-4"}),s.description&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Description"}),e.jsx("div",{className:"mb-4 text-gray-700 prose w-full text-justify max-w-none break-words",dangerouslySetInnerHTML:{__html:s.description}})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[s.project_theme&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Project Theme:"})," ",s.project_theme]}),s.purpose&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Purpose:"})," ",Array.isArray(s.purpose)?s.purpose.join(", "):s.purpose]}),s.start_date&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Start Date:"})," ",new Date(s.start_date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),s.end_date&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"End Date:"})," ",new Date(s.end_date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),s.application_deadline&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Application Deadline:"})," ",new Date(s.application_deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),s.duration&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Duration:"})," ",s.duration," ",e.jsx("span",{children:"(months)"})]}),s.sponsored_by&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Sponsored By:"})," ",s.sponsored_by]}),s.category&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Category:"})," ",s.category]}),s.field_of_research&&p()&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Field of Research:"})," ",p()]}),s.supervisor_category&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Supervisor Category:"})," ",s.supervisor_category]}),s.supervisor_name&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Supervisor Name:"})," ",s.supervisor_name]}),s.university&&b()&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"University:"})," ",b()]}),s.email&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",s.email]}),s.origin_country&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Origin Country:"})," ",s.origin_country]}),s.student_nationality&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Student Nationality:"})," ",s.student_nationality]}),s.student_level&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Student Level:"})," ",s.student_level]}),s.appointment_type&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Appointment Type:"})," ",s.appointment_type]}),s.purpose_of_collaboration&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Purpose of Collaboration:"})," ",s.purpose_of_collaboration]}),s.amount&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Amount:"})," ",s.amount]}),s.application_url&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Application:"}),e.jsx("a",{href:s.application_url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-500 underline",children:"Apply"})]})]}),s.attachment&&e.jsx("div",{className:"mb-2",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",e.jsx("a",{href:`/storage/${s.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"})]})}),e.jsxs("div",{className:"max-w-3xl mx-auto py-6 flex justify-between",children:[h?e.jsx(o,{href:route("projects.show",h.url),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Previous"}):e.jsx("span",{}),x?e.jsx(o,{href:route("projects.show",x.url),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Next"}):e.jsx("span",{})]})]})})}export{V as default};
