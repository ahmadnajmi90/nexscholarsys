import{r as j,j as e,Y as N,a as y}from"./app-BmIvASSa.js";import{M as C}from"./MainLayout-BrYiVrvC.js";import{i as _,q as m}from"./index-Jy5108Fp.js";import{y as g}from"./index-Aaix8mV8.js";import"./purify.es-B2xYLbnv.js";import"./useRoles-DJpouIQr.js";import"./analytics-B60H_cQS.js";const u=({text:a,maxLength:o=100,className:l})=>{if(!a)return e.jsx("p",{className:l,children:"No content available"});const s=a.replace(/<[^>]*>/g,""),c=s.length>o?s.substring(0,o)+"...":s;return e.jsx("p",{className:l,children:c})},L=({bookmark:a,onRemove:o})=>{const l=()=>{const{bookmarkable:s,bookmarkable_type:c}=a;if(!s)return e.jsx("div",{className:"p-4 bg-red-100 rounded-md",children:e.jsx("p",{className:"text-red-600",children:"This item is no longer available"})});switch(c){case"App\\Models\\Academician":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:s.profile_picture?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3",alt:s.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.current_position})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("academicians.show",s.url),className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\Undergraduate":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:s.profile_picture?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3",alt:s.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Undergraduate Student"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("undergraduates.show",s.url),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\Postgraduate":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:s.profile_picture?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3",alt:s.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Postgraduate Student"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("postgraduates.show",s.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostGrant":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx(u,{text:s.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("grants.show",s.url),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition",children:"View Grant"}),e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostProject":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx(u,{text:s.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("projects.show",s.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Project"}),e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostEvent":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold",children:s.event_name}),e.jsx(u,{text:s.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("events.show",s.url),className:"px-3 py-1 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600 transition",children:"View Event"}),e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\CreatePost":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx(u,{text:s.content,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("posts.show",s.url),className:"px-3 py-1 bg-indigo-500 text-white text-sm rounded hover:bg-indigo-600 transition",children:"View Post"}),e.jsx("button",{onClick:()=>o(a.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});default:return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("p",{className:"text-gray-600",children:"Unknown bookmark type"}),e.jsx("button",{onClick:()=>o(a.id),className:"mt-2 text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})}};return e.jsx("div",{className:"mb-4",children:l()})};function F({auth:a,bookmarks:o}){const[l,s]=j.useState(o),[c,f]=j.useState("all"),[i,w]=j.useState(""),v=Object.keys(l).sort(),k=async t=>{try{await y.delete(route("bookmarks.destroy",t));const r={...l};Object.keys(r).forEach(n=>{r[n]=r[n].filter(h=>h.id!==t),r[n].length===0&&delete r[n]}),s(r),g.success("Bookmark removed successfully",{position:"bottom-right",autoClose:2e3})}catch(r){console.error("Error removing bookmark:",r),g.error("Failed to remove bookmark",{position:"bottom-right",autoClose:3e3})}},x=(()=>{if(i===""&&c==="all")return l;const t={};return(c==="all"?Object.keys(l):[c]).forEach(n=>{l[n]&&(i===""?t[n]=l[n]:(t[n]=l[n].filter(h=>{const d=h.bookmarkable;if(!d)return!1;switch(h.bookmarkable_type){case"App\\Models\\Academician":return d.full_name.toLowerCase().includes(i.toLowerCase())||d.current_position&&d.current_position.toLowerCase().includes(i.toLowerCase());case"App\\Models\\PostGrant":case"App\\Models\\PostProject":return d.title.toLowerCase().includes(i.toLowerCase())||d.description.toLowerCase().includes(i.toLowerCase());case"App\\Models\\PostEvent":return d.event_name.toLowerCase().includes(i.toLowerCase())||d.description.toLowerCase().includes(i.toLowerCase());case"App\\Models\\CreatePost":return d.title.toLowerCase().includes(i.toLowerCase())||d.content.toLowerCase().includes(i.toLowerCase());default:return!1}}),t[n].length===0&&delete t[n]))}),t})(),p=Object.values(l).reduce((t,r)=>t+r.length,0),b=Object.values(x).reduce((t,r)=>t+r.length,0);return e.jsxs(C,{auth:a,title:"My Bookmarks",children:[e.jsx(N,{title:"My Bookmarks"}),e.jsx("div",{className:"py-0",children:e.jsx("div",{className:"max-w-8xl mx-auto ",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"Filter by:"}),e.jsx(_,{className:"text-gray-500 mr-2"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5",value:c,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),v.map(t=>e.jsxs("option",{value:t,children:[t," (",l[t].length,")"]},t))]})]}),e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("input",{type:"text",className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 pl-10",placeholder:"Search bookmarks...",value:i,onChange:t=>w(t.target.value)}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})})]})]}),e.jsx("div",{className:"mb-6 text-gray-600",children:b===p?e.jsxs("p",{children:["Showing all ",p," bookmarks"]}):e.jsxs("p",{children:["Showing ",b," of ",p," bookmarks"]})}),Object.keys(x).length===0?e.jsxs("div",{className:"py-10 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bookmarks found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i||c!=="all"?"Try adjusting your filters or search term":"Start adding bookmarks by clicking the bookmark icon on profiles, posts, events, projects, or grants."})]}):Object.keys(x).sort().map(t=>e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 pb-2 border-b",children:[t," (",x[t].length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x[t].map(r=>e.jsx(L,{bookmark:r,onRemove:k},r.id))})]},t))]})})})})]})}export{F as default};
