import{q as D,r as d,j as s,a as K}from"./app-i2lPbC_i.js";import{F as N}from"./FilterDropdown-CB0x9pgw.js";import{d as ee,t as se,F as re,u as ae,j as te}from"./index-n5Gwh-7c.js";const R=o=>typeof o!="string"?"":o.replace(/\w\S*/g,h=>h.charAt(0).toUpperCase()+h.substr(1).toLowerCase()),de=({profilesData:o,supervisorAvailabilityKey:h,universitiesList:_,faculties:B,isPostgraduateList:k,isUndergraduateList:m,isFacultyAdminDashboard:I,users:w,researchOptions:u})=>{var U;const{skills:$}=D().props,q=new Set(o.flatMap(e=>Array.isArray(e.skills)?e.skills:[])),E=(Array.isArray($)?$:[]).filter(e=>q.has(e.id)).map(e=>({value:e.id,label:R(e.name)})),[f,V]=d.useState([]),[g,z]=d.useState([]),[p,M]=d.useState(""),[y,O]=d.useState([]),[b,A]=d.useState(1),[S,P]=d.useState(!1),[W,x]=d.useState(!1),[t,G]=d.useState(null),j=9,Q=e=>{G(e),x(!0)},T=Array.from(new Set(o.flatMap(e=>{const a=Array.isArray(e.field_of_research)?e.field_of_research:[],n=Array.isArray(e.research_expertise)?e.research_expertise:[],i=Array.isArray(e.research_preference)?e.research_preference:[];return[...a,...n,...i]}))).map(e=>{const a=u.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===e);return{value:e,label:a?`${a.field_of_research_name} - ${a.research_area_name} - ${a.niche_domain_name}`:"Unknown Research Area"}}),Y=Array.from(new Set(o.map(e=>e.university))).map(e=>{const a=_.find(n=>n.id===e);return{value:e?e.toString():"",label:a?a.short_name:"Unknown University"}}),H=e=>e===null?"0":e===!0||e==="1"||e===1?"1":e===!1||e==="0"||e===0?"0":"",C=o.filter(e=>{const a=e.university?e.university.toString():"",n=f.length===0||(e.field_of_research||e.research_expertise||e.research_preference||[]).some(v=>f.includes(v)),i=g.length===0||g.includes(a),l=H(e[h]),r=p===""||l===p,c=y.length===0||e.skills&&e.skills.some(v=>y.includes(v));return n&&i&&r&&c}),J=Math.ceil(C.length/j),L=C.slice((b-1)*j,b*j),X=e=>{A(e)},F=e=>{const a=_.find(n=>n.id===e);return a?a.full_name:"Unknown University"},Z=e=>{const a=B.find(n=>n.id===e);return a?a.name:"Unknown University"};return s.jsxs("div",{className:"min-h-screen flex",children:[s.jsx("button",{onClick:()=>P(!S),className:"fixed top-20 right-4 z-50 bg-blue-600 text-white p-2 rounded-full shadow-lg lg:hidden",children:s.jsx(ee,{className:"text-xl"})}),s.jsxs("div",{className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${S?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",s.jsx("button",{onClick:()=>P(!1),className:"text-gray-600 lg:hidden",children:"âœ•"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(N,{label:m?"Preferred Research Area":"Research Area",options:T,selectedValues:f,setSelectedValues:V}),(k||m)&&s.jsx(N,{label:"Skills",options:E,selectedValues:y,setSelectedValues:O}),!I&&s.jsx(N,{label:"University",options:Y,selectedValues:g,setSelectedValues:z}),!m&&s.jsxs("div",{children:[h==="availability_as_supervisor"?s.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Available As Supervisor"}):s.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Looking for a supervisor"}),s.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full pl-4",value:p,onChange:e=>{M(e.target.value),A(1)},children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"1",children:"Yes"}),s.jsx("option",{value:"0",children:"No"})]})]})]})]}),s.jsxs("div",{className:"flex-1 py-6 sm:py-4 lg:py-0 px-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:[L.map(e=>{var a,n;return s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-[10px] font-semibold px-2.5 py-0.5 rounded-full",children:((a=_.find(i=>i.id===e.university))==null?void 0:a.short_name)||"Unknown University"}),!m&&s.jsxs("div",{className:"relative group",children:[e.verified===1&&s.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-purple-100 px-2.5 py-0.5 text-[10px] text-purple-700 cursor-pointer",children:"Verified"}),e.verified!==1&&s.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-red-100 px-2.5 py-0.5 text-[10px] text-red-700 cursor-pointer",children:"Not Verified"}),s.jsx("div",{className:"absolute top-8 right-0 hidden group-hover:flex items-center bg-gray-800 text-white text-xs rounded px-3 py-2 shadow-lg z-10",children:e.verified===1?`This account is verified by ${F(e.university)}`:"This account is not verified"})]}),s.jsx("div",{className:"h-32",children:s.jsx("img",{src:e.background_image!==null?`/storage/${e.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Banner",className:"object-cover w-full h-full"})}),s.jsx("div",{className:"flex justify-center -mt-12",children:s.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg",children:s.jsx("img",{src:e.profile_picture!==null?`/storage/${e.profile_picture}`:"/storage/profile_pictures/default.jpg",alt:"Profile",className:"w-full h-full object-cover"})})}),s.jsxs("div",{className:"text-center mt-4",children:[s.jsx("h2",{className:"text-lg font-semibold truncate px-6",children:e.full_name}),s.jsx("p",{className:"text-gray-500 text-sm px-6",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"2.5rem"},children:Array.isArray(e.field_of_research)&&e.field_of_research.length>0?(()=>{const i=e.field_of_research[0],l=u.find(r=>`${r.field_of_research_id}-${r.research_area_id}-${r.niche_domain_id}`===i);return l?`${l.field_of_research_name} - ${l.research_area_name} - ${l.niche_domain_name}`:"Unknown"})():Array.isArray(e.research_expertise)&&e.research_expertise.length>0?(()=>{const i=e.research_expertise[0],l=u.find(r=>`${r.field_of_research_id}-${r.research_area_id}-${r.niche_domain_id}`===i);return l?`${l.field_of_research_name} - ${l.research_area_name} - ${l.niche_domain_name}`:"Unknown"})():Array.isArray(e.research_preference)&&e.research_preference.length>0?(()=>{const i=e.research_preference[0],l=u.find(r=>`${r.field_of_research_id}-${r.research_area_id}-${r.niche_domain_id}`===i);return l?`${l.field_of_research_name} - ${l.research_area_name} - ${l.niche_domain_name}`:"Unknown"})():"No Field of Research or Expertise"}),s.jsx("p",{className:"text-gray-500 text-sm",children:e.current_position?e.current_position:"No Position"}),s.jsx("button",{onClick:()=>Q(e),className:"mt-2 bg-blue-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-blue-600",children:"Quick Info"})]}),s.jsxs("div",{className:"flex justify-around items-center mt-6 py-4 border-t px-10",children:[s.jsx(K,{href:route("email.compose",{to:(n=w.find(i=>i.unique_id===(e.academician_id||e.postgraduate_id||e.undergraduate_id)))==null?void 0:n.email}),className:"text-gray-500 text-sm cursor-pointer hover:text-blue-700",title:"Send Email",children:s.jsx(se,{})}),s.jsx("a",{href:e.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-red-700",title:"Google Scholar",children:s.jsx(re,{})}),s.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-green-700",title:"Website",children:s.jsx(ae,{})}),s.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-blue-800",title:"LinkedIn",children:s.jsx(te,{})})]})]},e.id)}),W&&t&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>x(!1),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg relative max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[s.jsx("button",{onClick:()=>x(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Close",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:t.full_name}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"University:"})," ",F(t.university)]}),s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Faculty:"})," ",Z(t.faculty)]}),s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Bio:"})," ",t.bio||"No bio available."]}),s.jsxs("p",{className:"text-gray-600",children:[s.jsxs("span",{className:"font-semibold",children:[m?"Preferred Research Area":"Fields of Research",":"]})," ",(()=>{const e=Array.isArray(t.field_of_research)&&t.field_of_research.length>0?t.field_of_research.map(l=>{const r=u.find(c=>`${c.field_of_research_id}-${c.research_area_id}-${c.niche_domain_id}`===l);return r?`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`:null}).filter(Boolean):[],a=Array.isArray(t.research_expertise)&&t.research_expertise.length>0?t.research_expertise.map(l=>{const r=u.find(c=>`${c.field_of_research_id}-${c.research_area_id}-${c.niche_domain_id}`===l);return r?`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`:null}).filter(Boolean):[],n=Array.isArray(t.research_preference)&&t.research_preference.length>0?t.research_preference.map(l=>{const r=u.find(c=>`${c.field_of_research_id}-${c.research_area_id}-${c.niche_domain_id}`===l);return r?`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`:null}).filter(Boolean):[],i=[...e,...a,...n];return i.length>0?i.join(", "):"    "})()]}),(k||m)&&t.skills&&Array.isArray(t.skills)&&t.skills.length>0&&s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Skills:"})," ",t.skills.map(e=>R(e)).join(", ")]}),!m&&s.jsxs("p",{className:"text-gray-600",children:[h==="availability_as_supervisor"?s.jsx("span",{className:"font-semibold",children:"Available as supervisor:"}):s.jsx("span",{className:"font-semibold",children:"Looking for a supervisor:"}),t[h]===1?" Yes":" No"]}),s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Email:"})," ",((U=w.find(e=>e.unique_id===(t.academician_id||t.postgraduate_id||t.undergraduate_id)))==null?void 0:U.email)||"No email provided"]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>x(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]}),s.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:J},(e,a)=>s.jsx("button",{onClick:()=>X(a+1),className:`px-4 py-2 border rounded ${b===a+1?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:a+1},a))})]})]})};export{de as P};
