import{r,j as t,R as F}from"./app-DD00Je9-.js";import{F as p}from"./FilterDropdown-X3kfbaSQ.js";import"./react-select.esm-DhMEfNlZ.js";const P=({grants:n})=>{const[s,b]=r.useState(null),[j,u]=r.useState(!1),[o,N]=r.useState([]),[c,f]=r.useState([]),[d,v]=r.useState([]),[l,m]=r.useState(1),x=9,w=[...new Set(n.map(e=>e.grant_type))].filter(Boolean).map(e=>({value:e,label:e})),k=[...new Set(n.flatMap(e=>e.grant_theme||[]))].filter(Boolean).map(e=>({value:e,label:e})),_=[...new Set(n.map(e=>e.country))].filter(Boolean).map(e=>({value:e,label:e})),g=n.filter(e=>{const a=o.length===0||o.includes(e.grant_type),h=c.length===0||e.grant_theme&&e.grant_theme.some(T=>c.includes(T)),G=d.length===0||d.includes(e.country);return a&&h&&G}),i=Math.ceil(g.length/x),C=g.slice((l-1)*x,l*x),S=e=>{b(e),u(!0)},y=()=>{b(null),u(!1)};return t.jsxs("div",{className:"min-h-screen flex",children:[t.jsxs("div",{className:"w-1/4 p-4 bg-gray-100 border-r",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),t.jsx(p,{label:"Grant Type",options:w,selectedValues:o,setSelectedValues:N}),t.jsx(p,{label:"Grant Theme",options:k,selectedValues:c,setSelectedValues:f}),t.jsx(p,{label:"Country",options:_,selectedValues:d,setSelectedValues:v})]}),t.jsxs("div",{className:"flex-1 px-8",children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map((e,a)=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden text-center pb-8",children:[t.jsx("img",{src:e.image?`/storage/${e.image}`:"/storage/default.jpg",alt:e.title,className:"w-full h-48 object-cover"}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 truncate",title:e.title,children:e.title}),t.jsx("p",{className:"text-gray-600 mt-4 text-center font-extralight",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},dangerouslySetInnerHTML:{__html:e.description||"No description available."}})]}),t.jsx("button",{onClick:()=>S(e),className:"inline-block rounded-full border border-gray-300 px-7 py-2 text-base font-medium text-body-color transition hover:border-primary hover:bg-primary hover:text-dark dark:border-dark-300 dark:text-dark-600",children:"View Details"})]},a))}),t.jsxs("div",{className:"flex justify-center mt-6 space-x-2 items-center",children:[t.jsx("button",{onClick:()=>m(e=>Math.max(e-1,1)),disabled:l===1,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"◄"}),Array.from({length:i},(e,a)=>a+1).filter(e=>e===1||e===i||Math.abs(e-l)<=1).map((e,a,h)=>t.jsxs(F.Fragment,{children:[a>0&&e-h[a-1]>1&&t.jsx("span",{className:"px-2",children:"..."}),t.jsx("button",{onClick:()=>m(e),className:`px-4 py-2 border rounded ${l===e?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:e})]},e)),t.jsx("button",{onClick:()=>m(e=>Math.min(e+1,i)),disabled:l===i,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"►"})]})]}),j&&s&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:y,children:t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-3xl w-full overflow-y-auto max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[t.jsx("img",{src:s.image?`/storage/${s.image}`:"/storage/default.jpg",alt:s.title,className:"w-full h-48 object-cover rounded-t-lg mb-4"}),t.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:s.title}),t.jsx("p",{className:"text-gray-600 mb-2",dangerouslySetInnerHTML:{__html:s.description}}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Grant Type:"})," ",s.grant_type||"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Grant Theme:"})," ",Array.isArray(s.grant_theme)?s.grant_theme.join(", "):"No Grant Theme Specified"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Cycle:"})," ",s.cycle||"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Grant Duration:"})," ",s.start_date?`${s.start_date} - ${s.end_date}`:"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Application Deadline:"})," ",s.application_deadline||"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Sponsored by:"})," ",s.sponsored_by||"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Website / Link:"})," ",s.website||"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Contact Email:"})," ",s.email||"Not provided"]}),t.jsxs("p",{className:"text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",s.attachment?t.jsx("a",{href:`/storage/${s.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"}):"No attachment available."]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:y,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]})};export{P as default};
