import{r as b,j as e}from"./app-CCUz7VIy.js";import{S as y}from"./react-select.esm-kxEpi0ic.js";import{d as $,e as C}from"./index-DTXsARQz.js";import"./iconBase-QOivDQQ2.js";function B({searchType:o,searchResults:s,universities:_,faculties:L,researchOptions:N,selectedArea:w,setSelectedArea:g,selectedUniversity:A,setSelectedUniversity:p,selectedAvailability:k,setSelectedAvailability:j,onClose:d=null,isOpen:h=!0,toggleOpen:n=null}){const[m,c]=b.useState(h),v=b.useRef(null);b.useEffect(()=>{function i(a){v.current&&!v.current.contains(a.target)&&window.innerWidth<1024&&(c(!1),n&&n(!1))}return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[n]),b.useEffect(()=>{c(h)},[h]);const f=(()=>{if(!s||!s.matches)return{researchAreas:[],universities:[]};const i=new Set;s.matches.forEach(r=>{const t=r.academician||r.student||{},l=o==="supervisor"||o==="collaborators"&&r.result_type==="academician"?t.research_expertise:t.student_type==="postgraduate"?t.field_of_research:t.research_preference;Array.isArray(l)&&l.forEach(E=>{i.add(E)})});const a=Array.from(i).map(r=>{const t=N.find(l=>`${l.field_of_research_id}-${l.research_area_id}-${l.niche_domain_id}`===r);return t?{value:r,label:`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`}:{value:r,label:`${r}`}}),u=new Set;s.matches.forEach(r=>{const t=r.academician||r.student||{};t.university&&u.add(t.university.toString())});const x=Array.from(u).map(r=>{const t=_.find(l=>l.id.toString()===r);return{value:r,label:t?t.short_name:"Unknown University"}});return{researchAreas:a,universities:x}})(),F=()=>{var i,a;if(o==="supervisor")return"Available for Supervision";if(o==="students")return"Looking for Supervision";if(o==="collaborators"){const u=(i=s==null?void 0:s.matches)==null?void 0:i.some(r=>r.result_type==="academician"),x=(a=s==null?void 0:s.matches)==null?void 0:a.some(r=>r.result_type!=="academician");return u&&!x?"Available for Collaboration":!u&&x?"Looking for Supervision":"Availability"}return"Availability"},S=e.jsx("div",{className:"fixed top-20 right-4 z-50 flex items-center space-x-4 lg:hidden",children:e.jsx("button",{onClick:()=>{c(!m),n&&n(!m)},className:"bg-blue-600 text-white p-2 rounded-full shadow-lg",children:e.jsx(C,{className:"text-xl"})})});return e.jsxs(e.Fragment,{children:[S,e.jsx("div",{ref:v,className:`fixed lg:relative top-0 left-0 lg:block lg:w-full w-3/4 h-full bg-white rounded-lg shadow-lg transition-transform duration-300 z-30 ${m?"translate-x-0":"-translate-x-full"} lg:translate-x-0 overflow-auto pb-20 lg:pb-0`,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filters"}),e.jsx("button",{onClick:()=>{c(!1),n&&n(!1),d&&d()},className:"text-gray-500 hover:text-gray-700 lg:hidden",children:e.jsx($,{})})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Research Area"}),e.jsx(y,{isMulti:!0,name:"researchAreas",options:f.researchAreas,value:f.researchAreas.filter(i=>w.includes(i.value)),onChange:i=>g(i?i.map(a=>a.value):[]),placeholder:"Filter by research area...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"University"}),e.jsx(y,{isMulti:!0,name:"universities",options:f.universities,value:f.universities.filter(i=>A.includes(i.value)),onChange:i=>p(i?i.map(a=>a.value):[]),placeholder:"Filter by university...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0})]}),o!=="collaborators"&&e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:F()}),e.jsxs("select",{className:`mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 
                          focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm 
                          rounded-md`,value:k,onChange:i=>j(i.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]}),e.jsx("button",{className:`w-full mt-2 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm 
                    font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none 
                    focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,onClick:()=>{g([]),p([]),j("")},children:"Reset All Filters"})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>{c(!1),n&&n(!1),d&&d()}})]})}export{B as default};
