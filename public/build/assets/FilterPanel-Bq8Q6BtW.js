import{j as e}from"./app-DZMAG1Os.js";import{S as v}from"./react-select.esm-DD5_CwH9.js";import{d as N}from"./index-CjVDtbtg.js";function $({searchType:l,searchResults:s,universities:x,faculties:A,researchOptions:h,selectedArea:p,setSelectedArea:d,selectedUniversity:g,setSelectedUniversity:f,selectedAvailability:y,setSelectedAvailability:b,onClose:u=null}){const c=(()=>{if(!s||!s.matches)return{researchAreas:[],universities:[]};const i=new Set;s.matches.forEach(r=>{const a=r.academician||r.student||{},n=l==="supervisor"||l==="collaborators"&&r.result_type==="academician"?a.research_expertise:a.student_type==="postgraduate"?a.field_of_research:a.research_preference;Array.isArray(n)&&n.forEach(j=>{i.add(j)})});const t=Array.from(i).map(r=>{const a=h.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===r);return a?{value:r,label:`${a.field_of_research_name} - ${a.research_area_name} - ${a.niche_domain_name}`}:{value:r,label:`${r}`}}),o=new Set;s.matches.forEach(r=>{const a=r.academician||r.student||{};a.university&&o.add(a.university.toString())});const m=Array.from(o).map(r=>{const a=x.find(n=>n.id.toString()===r);return{value:r,label:a?a.short_name:"Unknown University"}});return{researchAreas:t,universities:m}})(),_=()=>{var i,t;if(l==="supervisor")return"Available for Supervision";if(l==="students")return"Looking for Supervision";if(l==="collaborators"){const o=(i=s==null?void 0:s.matches)==null?void 0:i.some(r=>r.result_type==="academician"),m=(t=s==null?void 0:s.matches)==null?void 0:t.some(r=>r.result_type!=="academician");return o&&!m?"Available for Collaboration":!o&&m?"Looking for Supervision":"Availability"}return"Availability"};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-5 mb-6",children:[u&&e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filters"}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700",children:e.jsx(N,{})})]}),!u&&e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Research Area"}),e.jsx(v,{isMulti:!0,name:"researchAreas",options:c.researchAreas,value:c.researchAreas.filter(i=>p.includes(i.value)),onChange:i=>d(i?i.map(t=>t.value):[]),placeholder:"Filter by research area...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"University"}),e.jsx(v,{isMulti:!0,name:"universities",options:c.universities,value:c.universities.filter(i=>g.includes(i.value)),onChange:i=>f(i?i.map(t=>t.value):[]),placeholder:"Filter by university...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0})]}),l!=="collaborators"&&e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:_()}),e.jsxs("select",{className:`mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 
                      focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm 
                      rounded-md`,value:y,onChange:i=>b(i.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]}),e.jsx("button",{className:`w-full mt-2 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm 
                font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none 
                focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,onClick:()=>{d([]),f([]),b("")},children:"Reset All Filters"})]})}export{$ as default};
