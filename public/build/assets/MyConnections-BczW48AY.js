import{q as at,r as a,a as Z,j as e,Y as it,y as U,b as ce}from"./app-9sOlul-A.js";import{M as lt,X as de}from"./MainLayout-UVZJxeK9.js";import{H as ct,a6 as Re,E as dt,a7 as ut,a8 as ft,F as mt}from"./index-DS_q5hIy.js";import{V as R,c as je}from"./index-BVMN_ci4.js";import{C as pt}from"./ConfirmationModal-Dq3j0VwY.js";import{M as Le}from"./Modal-__dFzRf6.js";import{I as ht}from"./InputError-2skiNOV2.js";import{T as xt}from"./TextInput-W7MPtHIu.js";import{I as gt}from"./InputLabel-ahWWXQMw.js";import{P as bt}from"./PrimaryButton-Be3LMdkb.js";import{S as yt}from"./SecondaryButton-DtZyh7cc.js";import{d as me,u as ee,P as W,b as D,f as vt,e as we,c as Me,a as jt,g as wt}from"./index-BaUHjtOz.js";import{u as Nt,a as Ct}from"./index-PdmKF8iy.js";import{u as Tt,o as Et,s as Pt,f as St,a as Rt,b as At,h as _t,l as kt}from"./floating-ui.react-dom-DOdl7R4m.js";import{a as Ot}from"./floating-ui.dom-CGGKCEC8.js";import{c as Lt}from"./utils-CIsb_jhR.js";import{I as Mt}from"./info-CPtk48CV.js";import{c as $t}from"./createLucideIcon-CqCCpi2c.js";import{E as ue}from"./eye-CQbxmtno.js";import{T as Ae}from"./trash-2-BQPXzNFN.js";import{S as _e}from"./square-check-big-DImo88j1.js";import{G as Dt}from"./graduation-cap-DeO-BY31.js";import{U as Ft}from"./users-dxqOC6T6.js";import"./house-Bym9AccL.js";import"./zap-mdzwGggf.js";import"./folder-open-C5KeX40M.js";import"./settings-YKX8uX5s.js";import"./useRoles-CZS0kArg.js";import"./chevron-left-CUa5RM7O.js";import"./proxy-COfvf44E.js";import"./dollar-sign-eIhke8tl.js";import"./calendar-BKaTcZfZ.js";import"./file-text-B9-opA34.js";import"./building-CzB0S5b5.js";import"./sparkles-BlKVw_0U.js";import"./database-Zi6NWSjX.js";import"./shield-CheUKAX0.js";import"./transition-sFw21F7U.js";import"./analytics-BQ374C1C.js";import"./briefcase-BmUFfeTs.js";import"./user-IMrMn7Vi.js";import"./iconBase-DCmj7YYs.js";import"./dialog-CBhRGzjQ.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],fe=$t("Tags",zt),Ht=({show:t,onClose:s,connectionIds:r})=>{const{auth:o}=at().props,[n,i]=a.useState([]),[c,p]=a.useState([]),[u,f]=a.useState(!1),[m,b]=a.useState(!1),[g,y]=a.useState([]),N=!!o.user.academician;a.useEffect(()=>{t&&(w(),r.length===1?C(r[0]):(p([]),y([])))},[t,r]);const w=async()=>{f(!0);try{const j=await Z.get("/connection-tags");i(j.data)}catch(j){console.error("Error fetching tags:",j),R.error("Failed to load tags")}finally{f(!1)}},C=async j=>{f(!0);try{const P=await Z.get(`/connections/${j}/tags`);y(P.data),p(P.data.map(A=>A.id))}catch(P){console.error("Error fetching connection tags:",P),R.error("Failed to load connection tags")}finally{f(!1)}},S=j=>{p(P=>P.includes(j)?P.filter(A=>A!==j):[...P,j])},E=async()=>{b(!0);try{console.log("Sending request to assign tags:",{connection_ids:r,tag_ids:c}),await Z.post("/connections/tags",{connection_ids:r,tag_ids:c},{withCredentials:!0,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"}}),R.success(r.length>1?"Tags updated for selected connections":"Tags updated for connection"),s()}catch(j){console.error("Error saving tags:",j),console.log("Request details:",{url:"/connections/tags",data:{connection_ids:r,tag_ids:c}}),R.error("Failed to update tags")}finally{b(!1)}};return e.jsx(Le,{show:t,onClose:s,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:r.length>1?"Manage Tags for Selected Connections":"Manage Connection Tags"}),u?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r.length>1?`Select tags to apply to ${r.length} connections.`:"Select tags to categorize this connection."}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:n.map(j=>j.name==="Student"&&!N?null:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`tag-${j.id}`,checked:c.includes(j.id),onChange:()=>S(j.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:`tag-${j.id}`,className:"ml-2 block text-sm text-gray-900",children:[j.name,j.is_default&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Default)"})]})]},j.id))}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"button",onClick:E,disabled:m,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"mr-2"}),"Save Tags"]})})]})]})]})})},It=({show:t,onClose:s,onTagCreated:r})=>{const[o,n]=a.useState(""),[i,c]=a.useState({}),[p,u]=a.useState(!1),f=async m=>{var b;m.preventDefault(),u(!0),c({});try{const g=await Z.post("/connection-tags",{name:o});je.success("Tag created successfully"),n(""),r&&typeof r=="function"&&r(g.data.tag),s()}catch(g){((b=g.response)==null?void 0:b.status)===422?(c(g.response.data.errors),je.error("Please check the form for errors")):(console.error("Error creating tag:",g),je.error("Failed to create tag"))}finally{u(!1)}};return e.jsx(Le,{show:t,onClose:s,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Tag"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(gt,{htmlFor:"name",value:"Tag Name"}),e.jsx(xt,{id:"name",type:"text",name:"name",value:o,onChange:m=>n(m.target.value),className:"mt-1 block w-full",placeholder:"Enter tag name",required:!0,autoFocus:!0}),i.name&&e.jsx(ht,{message:i.name[0],className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center justify-end mt-6",children:[e.jsx(yt,{onClick:s,disabled:p,className:"mr-3",children:"Cancel"}),e.jsx(bt,{type:"submit",disabled:p,children:p?"Creating...":"Create Tag"})]})]})]})})};function qt(t,s=globalThis==null?void 0:globalThis.document){const r=me(t);a.useEffect(()=>{const o=n=>{n.key==="Escape"&&r(n)};return s.addEventListener("keydown",o,{capture:!0}),()=>s.removeEventListener("keydown",o,{capture:!0})},[r,s])}var Bt="DismissableLayer",Ne="dismissableLayer.update",Ut="dismissableLayer.pointerDownOutside",Wt="dismissableLayer.focusOutside",ke,$e=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),De=a.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:c,onDismiss:p,...u}=t,f=a.useContext($e),[m,b]=a.useState(null),g=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=a.useState({}),N=ee(s,T=>b(T)),w=Array.from(f.layers),[C]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),S=w.indexOf(C),E=m?w.indexOf(m):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,P=E>=S,A=Gt(T=>{const L=T.target,z=[...f.branches].some(H=>H.contains(L));!P||z||(n==null||n(T),c==null||c(T),T.defaultPrevented||p==null||p())},g),_=Xt(T=>{const L=T.target;[...f.branches].some(H=>H.contains(L))||(i==null||i(T),c==null||c(T),T.defaultPrevented||p==null||p())},g);return qt(T=>{E===f.layers.size-1&&(o==null||o(T),!T.defaultPrevented&&p&&(T.preventDefault(),p()))},g),a.useEffect(()=>{if(m)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(ke=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),Oe(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=ke)}},[m,g,r,f]),a.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),Oe())},[m,f]),a.useEffect(()=>{const T=()=>y({});return document.addEventListener(Ne,T),()=>document.removeEventListener(Ne,T)},[]),e.jsx(W.div,{...u,ref:N,style:{pointerEvents:j?P?"auto":"none":void 0,...t.style},onFocusCapture:D(t.onFocusCapture,_.onFocusCapture),onBlurCapture:D(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:D(t.onPointerDownCapture,A.onPointerDownCapture)})});De.displayName=Bt;var Yt="DismissableLayerBranch",Vt=a.forwardRef((t,s)=>{const r=a.useContext($e),o=a.useRef(null),n=ee(s,o);return a.useEffect(()=>{const i=o.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(W.div,{...t,ref:n})});Vt.displayName=Yt;function Gt(t,s=globalThis==null?void 0:globalThis.document){const r=me(t),o=a.useRef(!1),n=a.useRef(()=>{});return a.useEffect(()=>{const i=p=>{if(p.target&&!o.current){let u=function(){Fe(Ut,r,f,{discrete:!0})};const f={originalEvent:p};p.pointerType==="touch"?(s.removeEventListener("click",n.current),n.current=u,s.addEventListener("click",n.current,{once:!0})):u()}else s.removeEventListener("click",n.current);o.current=!1},c=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),s.removeEventListener("pointerdown",i),s.removeEventListener("click",n.current)}},[s,r]),{onPointerDownCapture:()=>o.current=!0}}function Xt(t,s=globalThis==null?void 0:globalThis.document){const r=me(t),o=a.useRef(!1);return a.useEffect(()=>{const n=i=>{i.target&&!o.current&&Fe(Wt,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",n),()=>s.removeEventListener("focusin",n)},[s,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function Oe(){const t=new CustomEvent(Ne);document.dispatchEvent(t)}function Fe(t,s,r,{discrete:o}){const n=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&n.addEventListener(t,s,{once:!0}),o?vt(n,i):n.dispatchEvent(i)}var Kt="Arrow",ze=a.forwardRef((t,s)=>{const{children:r,width:o=10,height:n=5,...i}=t;return e.jsx(W.svg,{...i,ref:s,width:o,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});ze.displayName=Kt;var Qt=ze;function Zt(t){const[s,r]=a.useState(void 0);return we(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const o=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let c,p;if("borderBoxSize"in i){const u=i.borderBoxSize,f=Array.isArray(u)?u[0]:u;c=f.inlineSize,p=f.blockSize}else c=t.offsetWidth,p=t.offsetHeight;r({width:c,height:p})});return o.observe(t,{box:"border-box"}),()=>o.unobserve(t)}else r(void 0)},[t]),s}var Ee="Popper",[He,Ie]=Me(Ee),[Jt,qe]=He(Ee),Be=t=>{const{__scopePopper:s,children:r}=t,[o,n]=a.useState(null);return e.jsx(Jt,{scope:s,anchor:o,onAnchorChange:n,children:r})};Be.displayName=Ee;var Ue="PopperAnchor",We=a.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:o,...n}=t,i=qe(Ue,r),c=a.useRef(null),p=ee(s,c),u=a.useRef(null);return a.useEffect(()=>{const f=u.current;u.current=(o==null?void 0:o.current)||c.current,f!==u.current&&i.onAnchorChange(u.current)}),o?null:e.jsx(W.div,{...n,ref:p})});We.displayName=Ue;var Pe="PopperContent",[er,tr]=He(Pe),Ye=a.forwardRef((t,s)=>{var ae,X,K,Q,ie,l;const{__scopePopper:r,side:o="bottom",sideOffset:n=0,align:i="center",alignOffset:c=0,arrowPadding:p=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:b="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:N,...w}=t,C=qe(Pe,r),[S,E]=a.useState(null),j=ee(s,d=>E(d)),[P,A]=a.useState(null),_=Zt(P),T=(_==null?void 0:_.width)??0,L=(_==null?void 0:_.height)??0,z=o+(i!=="center"?"-"+i:""),H=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},I=Array.isArray(f)?f:[f],q=I.length>0,Y={padding:H,boundary:I.filter(sr),altBoundary:q},{refs:re,floatingStyles:se,placement:ne,isPositioned:V,middlewareData:$}=Tt({strategy:"fixed",placement:z,whileElementsMounted:(...d)=>Ot(...d,{animationFrame:y==="always"}),elements:{reference:C.anchor},middleware:[Et({mainAxis:n+L,alignmentAxis:c}),u&&Pt({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?kt():void 0,...Y}),u&&St({...Y}),Rt({...Y,apply:({elements:d,rects:x,availableWidth:v,availableHeight:h})=>{const{width:M,height:O}=x.reference,le=d.floating.style;le.setProperty("--radix-popper-available-width",`${v}px`),le.setProperty("--radix-popper-available-height",`${h}px`),le.setProperty("--radix-popper-anchor-width",`${M}px`),le.setProperty("--radix-popper-anchor-height",`${O}px`)}}),P&&At({element:P,padding:p}),nr({arrowWidth:T,arrowHeight:L}),g&&_t({strategy:"referenceHidden",...Y})]}),[B,oe]=Xe(ne),G=me(N);we(()=>{V&&(G==null||G())},[V,G]);const ge=(ae=$.arrow)==null?void 0:ae.x,be=(X=$.arrow)==null?void 0:X.y,F=((K=$.arrow)==null?void 0:K.centerOffset)!==0,[ye,ve]=a.useState();return we(()=>{S&&ve(window.getComputedStyle(S).zIndex)},[S]),e.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:V?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[(Q=$.transformOrigin)==null?void 0:Q.x,(ie=$.transformOrigin)==null?void 0:ie.y].join(" "),...((l=$.hide)==null?void 0:l.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(er,{scope:r,placedSide:B,onArrowChange:A,arrowX:ge,arrowY:be,shouldHideArrow:F,children:e.jsx(W.div,{"data-side":B,"data-align":oe,...w,ref:j,style:{...w.style,animation:V?void 0:"none"}})})})});Ye.displayName=Pe;var Ve="PopperArrow",rr={top:"bottom",right:"left",bottom:"top",left:"right"},Ge=a.forwardRef(function(s,r){const{__scopePopper:o,...n}=s,i=tr(Ve,o),c=rr[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(Qt,{...n,ref:r,style:{...n.style,display:"block"}})})});Ge.displayName=Ve;function sr(t){return t!==null}var nr=t=>({name:"transformOrigin",options:t,fn(s){var C,S,E;const{placement:r,rects:o,middlewareData:n}=s,c=((C=n.arrow)==null?void 0:C.centerOffset)!==0,p=c?0:t.arrowWidth,u=c?0:t.arrowHeight,[f,m]=Xe(r),b={start:"0%",center:"50%",end:"100%"}[m],g=(((S=n.arrow)==null?void 0:S.x)??0)+p/2,y=(((E=n.arrow)==null?void 0:E.y)??0)+u/2;let N="",w="";return f==="bottom"?(N=c?b:`${g}px`,w=`${-u}px`):f==="top"?(N=c?b:`${g}px`,w=`${o.floating.height+u}px`):f==="right"?(N=`${-u}px`,w=c?b:`${y}px`):f==="left"&&(N=`${o.floating.width+u}px`,w=c?b:`${y}px`),{data:{x:N,y:w}}}});function Xe(t){const[s,r="center"]=t.split("-");return[s,r]}var or=Be,ar=We,ir=Ye,lr=Ge,cr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dr="VisuallyHidden",Ke=a.forwardRef((t,s)=>e.jsx(W.span,{...t,ref:s,style:{...cr,...t.style}}));Ke.displayName=dr;var ur=Ke,[pe,Ns]=Me("Tooltip",[Ie]),he=Ie(),Qe="TooltipProvider",fr=700,Ce="tooltip.open",[mr,Se]=pe(Qe),Ze=t=>{const{__scopeTooltip:s,delayDuration:r=fr,skipDelayDuration:o=300,disableHoverableContent:n=!1,children:i}=t,c=a.useRef(!0),p=a.useRef(!1),u=a.useRef(0);return a.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),e.jsx(mr,{scope:s,isOpenDelayedRef:c,delayDuration:r,onOpen:a.useCallback(()=>{window.clearTimeout(u.current),c.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.current=!0,o)},[o]),isPointerInTransitRef:p,onPointerInTransitChange:a.useCallback(f=>{p.current=f},[]),disableHoverableContent:n,children:i})};Ze.displayName=Qe;var te="Tooltip",[pr,xe]=pe(te),Je=t=>{const{__scopeTooltip:s,children:r,open:o,defaultOpen:n,onOpenChange:i,disableHoverableContent:c,delayDuration:p}=t,u=Se(te,t.__scopeTooltip),f=he(s),[m,b]=a.useState(null),g=Nt(),y=a.useRef(0),N=c??u.disableHoverableContent,w=p??u.delayDuration,C=a.useRef(!1),[S,E]=Ct({prop:o,defaultProp:n??!1,onChange:T=>{T?(u.onOpen(),document.dispatchEvent(new CustomEvent(Ce))):u.onClose(),i==null||i(T)},caller:te}),j=a.useMemo(()=>S?C.current?"delayed-open":"instant-open":"closed",[S]),P=a.useCallback(()=>{window.clearTimeout(y.current),y.current=0,C.current=!1,E(!0)},[E]),A=a.useCallback(()=>{window.clearTimeout(y.current),y.current=0,E(!1)},[E]),_=a.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{C.current=!0,E(!0),y.current=0},w)},[w,E]);return a.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),e.jsx(or,{...f,children:e.jsx(pr,{scope:s,contentId:g,open:S,stateAttribute:j,trigger:m,onTriggerChange:b,onTriggerEnter:a.useCallback(()=>{u.isOpenDelayedRef.current?_():P()},[u.isOpenDelayedRef,_,P]),onTriggerLeave:a.useCallback(()=>{N?A():(window.clearTimeout(y.current),y.current=0)},[A,N]),onOpen:P,onClose:A,disableHoverableContent:N,children:r})})};Je.displayName=te;var Te="TooltipTrigger",et=a.forwardRef((t,s)=>{const{__scopeTooltip:r,...o}=t,n=xe(Te,r),i=Se(Te,r),c=he(r),p=a.useRef(null),u=ee(s,p,n.onTriggerChange),f=a.useRef(!1),m=a.useRef(!1),b=a.useCallback(()=>f.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),e.jsx(ar,{asChild:!0,...c,children:e.jsx(W.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...o,ref:u,onPointerMove:D(t.onPointerMove,g=>{g.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),m.current=!0)}),onPointerLeave:D(t.onPointerLeave,()=>{n.onTriggerLeave(),m.current=!1}),onPointerDown:D(t.onPointerDown,()=>{n.open&&n.onClose(),f.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:D(t.onFocus,()=>{f.current||n.onOpen()}),onBlur:D(t.onBlur,n.onClose),onClick:D(t.onClick,n.onClose)})})});et.displayName=Te;var hr="TooltipPortal",[Cs,xr]=pe(hr,{forceMount:void 0}),J="TooltipContent",tt=a.forwardRef((t,s)=>{const r=xr(J,t.__scopeTooltip),{forceMount:o=r.forceMount,side:n="top",...i}=t,c=xe(J,t.__scopeTooltip);return e.jsx(jt,{present:o||c.open,children:c.disableHoverableContent?e.jsx(rt,{side:n,...i,ref:s}):e.jsx(gr,{side:n,...i,ref:s})})}),gr=a.forwardRef((t,s)=>{const r=xe(J,t.__scopeTooltip),o=Se(J,t.__scopeTooltip),n=a.useRef(null),i=ee(s,n),[c,p]=a.useState(null),{trigger:u,onClose:f}=r,m=n.current,{onPointerInTransitChange:b}=o,g=a.useCallback(()=>{p(null),b(!1)},[b]),y=a.useCallback((N,w)=>{const C=N.currentTarget,S={x:N.clientX,y:N.clientY},E=wr(S,C.getBoundingClientRect()),j=Nr(S,E),P=Cr(w.getBoundingClientRect()),A=Er([...j,...P]);p(A),b(!0)},[b]);return a.useEffect(()=>()=>g(),[g]),a.useEffect(()=>{if(u&&m){const N=C=>y(C,m),w=C=>y(C,u);return u.addEventListener("pointerleave",N),m.addEventListener("pointerleave",w),()=>{u.removeEventListener("pointerleave",N),m.removeEventListener("pointerleave",w)}}},[u,m,y,g]),a.useEffect(()=>{if(c){const N=w=>{const C=w.target,S={x:w.clientX,y:w.clientY},E=(u==null?void 0:u.contains(C))||(m==null?void 0:m.contains(C)),j=!Tr(S,c);E?g():j&&(g(),f())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[u,m,c,f,g]),e.jsx(rt,{...t,ref:i})}),[br,yr]=pe(te,{isInside:!1}),vr=wt("TooltipContent"),rt=a.forwardRef((t,s)=>{const{__scopeTooltip:r,children:o,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:c,...p}=t,u=xe(J,r),f=he(r),{onClose:m}=u;return a.useEffect(()=>(document.addEventListener(Ce,m),()=>document.removeEventListener(Ce,m)),[m]),a.useEffect(()=>{if(u.trigger){const b=g=>{const y=g.target;y!=null&&y.contains(u.trigger)&&m()};return window.addEventListener("scroll",b,{capture:!0}),()=>window.removeEventListener("scroll",b,{capture:!0})}},[u.trigger,m]),e.jsx(De,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:b=>b.preventDefault(),onDismiss:m,children:e.jsxs(ir,{"data-state":u.stateAttribute,...f,...p,ref:s,style:{...p.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(vr,{children:o}),e.jsx(br,{scope:r,isInside:!0,children:e.jsx(ur,{id:u.contentId,role:"tooltip",children:n||o})})]})})});tt.displayName=J;var st="TooltipArrow",jr=a.forwardRef((t,s)=>{const{__scopeTooltip:r,...o}=t,n=he(r);return yr(st,r).isInside?null:e.jsx(lr,{...n,...o,ref:s})});jr.displayName=st;function wr(t,s){const r=Math.abs(s.top-t.y),o=Math.abs(s.bottom-t.y),n=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(r,o,n,i)){case i:return"left";case n:return"right";case r:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Nr(t,s,r=5){const o=[];switch(s){case"top":o.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":o.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":o.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":o.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return o}function Cr(t){const{top:s,right:r,bottom:o,left:n}=t;return[{x:n,y:s},{x:r,y:s},{x:r,y:o},{x:n,y:o}]}function Tr(t,s){const{x:r,y:o}=t;let n=!1;for(let i=0,c=s.length-1;i<s.length;c=i++){const p=s[i],u=s[c],f=p.x,m=p.y,b=u.x,g=u.y;m>o!=g>o&&r<(b-f)*(o-m)/(g-m)+f&&(n=!n)}return n}function Er(t){const s=t.slice();return s.sort((r,o)=>r.x<o.x?-1:r.x>o.x?1:r.y<o.y?-1:r.y>o.y?1:0),Pr(s)}function Pr(t){if(t.length<=1)return t.slice();const s=[];for(let o=0;o<t.length;o++){const n=t[o];for(;s.length>=2;){const i=s[s.length-1],c=s[s.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))s.pop();else break}s.push(n)}s.pop();const r=[];for(let o=t.length-1;o>=0;o--){const n=t[o];for(;r.length>=2;){const i=r[r.length-1],c=r[r.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))r.pop();else break}r.push(n)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Sr=Ze,Rr=Je,Ar=et,nt=tt;const _r=Sr,k=Rr,kr=Ar,ot=a.forwardRef(({className:t,sideOffset:s=4,...r},o)=>e.jsx(nt,{ref:o,sideOffset:s,className:Lt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));ot.displayName=nt.displayName;const Ts=({acceptedConnections:t,receivedRequests:s,sentRequests:r,tags:o=[],activeTagId:n=null})=>{const[i,c]=a.useState("connections"),[p,u]=a.useState(""),[f,m]=a.useState([]),[b,g]=a.useState(!1),[y,N]=a.useState(null),[w,C]=a.useState([]),[S,E]=a.useState(!1),[j,P]=a.useState(!1),[A,_]=a.useState(!1),[T,L]=a.useState(null),[z,H]=a.useState(o),I=l=>l.academician?route("academicians.show",l.academician.url):l.postgraduate?route("postgraduates.show",l.postgraduate.url):l.undergraduate?route("undergraduates.show",l.undergraduate.url):"#",q=l=>{N(l),g(!0)},Y=async()=>{var d,x;if(!y)return;const l=y.connection_id;m(v=>[...v,l]);try{await Z.delete(route("api.app.connections.destroy",l)),R.success("Connection removed successfully."),U.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})}catch(v){v.response?v.response.status===404?(R.error("Connection not found. It may have been already removed."),U.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})):v.response.status===403?R.error("You do not have permission to remove this connection."):(d=v.response.data)!=null&&d.error?R.error(v.response.data.error):(x=v.response.data)!=null&&x.message?R.error(v.response.data.message):R.error(`Error (${v.response.status}): Unable to remove connection.`):R.error("Network error or server not responding."),console.error("Error removing connection:",v)}finally{g(!1),N(null),C([]),m(v=>v.filter(h=>h!==l))}},re=l=>{C(d=>d.includes(l)?d.filter(x=>x!==l):[...d,l])},se=()=>{if(A)C([]);else{const l=B(t);C(l.map(d=>d.connection_id))}_(!A)},ne=l=>{C([l]),L(l),E(!0)},V=()=>{L(null),E(!0)},$=l=>{c(l),C([]),_(!1)},B=l=>p?(l.data||l).filter(x=>(x.user.full_name||x.user.name||"").toLowerCase().includes(p.toLowerCase())||(x.user.email||"").toLowerCase().includes(p.toLowerCase())):l.data||l,oe=l=>{l===n?U.get(route("connections.index")):U.get(route("connections.index",{tag_id:l}))},G=l=>{H(d=>[...d,l])},ge=l=>{if(!l.user_id)switch(l.name.toLowerCase()){case"collaborator":return e.jsx(Ft,{size:14,className:"text-blue-600"});case"student":return e.jsx(Dt,{size:14,className:"text-green-600"});default:return e.jsx(fe,{size:14,className:"text-blue-500"})}return e.jsx(fe,{size:14,className:"text-gray-500"})},be=()=>i!=="connections"?null:e.jsxs("div",{className:"w-64 bg-white shadow-sm rounded-lg p-4 mr-4 h-fit",children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"font-medium text-gray-900 mr-2",children:"Organize with Tags"}),e.jsxs(k,{children:[e.jsx(kr,{asChild:!0,children:e.jsx(Mt,{size:16,className:"text-gray-400 hover:text-gray-600 cursor-help"})}),e.jsx(ot,{className:"max-w-xs",children:"Use tags to manually organize your connections. Tags are not assigned automatically based on a user's role. For example, you can tag someone as a 'Collaborator' to easily add them to your ScholarLab projects later."})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>oe(null),className:`w-full text-left px-3 py-2 rounded-md text-sm ${n===null?"bg-blue-100 text-blue-800 font-medium":"text-gray-700 hover:bg-gray-100"}`,children:"All Connections"}),z.length>0?z.map(l=>e.jsxs("button",{onClick:()=>oe(l.id),className:`w-full text-left px-3 py-2 rounded-md text-sm flex items-center group ${n===l.id?"bg-blue-100 text-blue-800 font-medium":l.user_id?"text-gray-700 hover:bg-gray-100":"text-gray-800 hover:bg-blue-50 border border-blue-200 bg-blue-50/30"}`,children:[e.jsx("div",{className:"flex items-center mr-3",children:ge(l)}),e.jsx("span",{className:"flex-1",children:l.name}),l.user_id?e.jsx("span",{className:"text-xs text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"(Custom)"}):e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Suggested"})]},l.id)):e.jsx("div",{className:"text-sm text-gray-500 py-2 text-center",children:"No tags available"})]})]}),F=async(l,d)=>{var x,v;if(d!=="destroy"){m(h=>[...h,l]);try{const h=route(`api.app.connections.${d}`,l);await Z[d==="accept"?"patch":"delete"](h),d==="accept"?R.success("Connection request accepted."):d==="reject"&&R.success("Connection request rejected."),U.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})}catch(h){h.response?h.response.status===404?(R.error("Connection request not found. It may have been already processed."),U.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})):h.response.status===403?R.error("You do not have permission to perform this action."):(x=h.response.data)!=null&&x.error?R.error(h.response.data.error):(v=h.response.data)!=null&&v.message?R.error(h.response.data.message):R.error(`Error (${h.response.status}): Unable to ${d} connection request.`):R.error("Network error or server not responding."),console.error(`Error ${d}ing connection:`,h)}finally{m(h=>h.filter(M=>M!==l))}}else[...t,...r,...s].find(M=>M.connection_id===l)&&q({connection_id:l})},ye=()=>e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex overflow-x-auto scrollbar-hide","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>$("connections"),className:`py-4 px-2 md:px-4 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${i==="connections"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Connections"}),e.jsx("span",{className:"sm:hidden",children:"Connect"}),e.jsx("span",{className:"ml-1 md:ml-2 bg-gray-100 text-gray-700 py-0.5 px-1.5 md:px-2.5 rounded-full text-xs",children:t.length})]})}),e.jsx("button",{onClick:()=>$("received"),className:`py-4 px-2 md:px-4 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${i==="received"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(dt,{className:"mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Received Requests"}),e.jsx("span",{className:"sm:hidden",children:"Received"}),e.jsx("span",{className:"ml-1 md:ml-2 bg-gray-100 text-gray-700 py-0.5 px-1.5 md:px-2.5 rounded-full text-xs",children:s.length})]})}),e.jsx("button",{onClick:()=>$("sent"),className:`py-4 px-2 md:px-4 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${i==="sent"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ut,{className:"mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sent Requests"}),e.jsx("span",{className:"sm:hidden",children:"Sent"}),e.jsx("span",{className:"ml-1 md:ml-2 bg-gray-100 text-gray-700 py-0.5 px-1.5 md:px-2.5 rounded-full text-xs",children:r.length})]})})]})}),ve=()=>e.jsxs("div",{className:"relative w-full md:w-96 w-[25rem] mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex items-center",children:i==="connections"&&e.jsxs("div",{className:"flex items-center mr-4",children:[e.jsx("input",{type:"checkbox",id:"select-all",checked:A,onChange:se,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"select-all",className:"ml-2 text-sm text-gray-700",children:"Select All"})]})}),i==="connections"&&w.length>0&&e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:V,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ft,{className:"mr-1"}),"Manage Tags"]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(mt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search connections...",value:p,onChange:l=>u(l.target.value)})]})]}),ae=l=>{const{user:d,connection_id:x}=l,v=f.includes(x);return e.jsxs("div",{className:"flex space-x-2",children:[i==="connections"&&e.jsx(k,{content:"Manage Tags",position:"left",children:e.jsxs("button",{onClick:()=>ne(x),className:"p-1 rounded-full text-blue-600 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"Manage Tags"}),e.jsx(fe,{className:"h-5 w-5"})]})}),e.jsx(k,{content:"View Profile",position:"left",children:e.jsxs(ce,{href:I(d),className:"p-1 rounded-full text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"View Profile"}),e.jsx(ue,{className:"h-5 w-5"})]})}),i==="connections"&&e.jsx(k,{content:"Remove Connection",position:"left",children:e.jsxs("button",{onClick:()=>q({connection_id:x}),disabled:v,className:`p-1 rounded-full text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${v?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("span",{className:"sr-only",children:"Remove Connection"}),v?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-red-600 rounded-full border-t-transparent"}):e.jsx(Ae,{className:"h-5 w-5"})]})}),i==="received"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{content:"Accept Request",position:"left",children:e.jsxs("button",{onClick:()=>F(x,"accept"),disabled:v,className:`p-1 rounded-full text-green-600 hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 ${v?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("span",{className:"sr-only",children:"Accept Request"}),v?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-green-600 rounded-full border-t-transparent"}):e.jsx(_e,{className:"h-5 w-5"})]})}),e.jsx(k,{content:"Reject Request",position:"left",children:e.jsxs("button",{onClick:()=>F(x,"reject"),disabled:v,className:`p-1 rounded-full text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${v?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("span",{className:"sr-only",children:"Reject Request"}),v?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-red-600 rounded-full border-t-transparent"}):e.jsx(de,{className:"h-5 w-5"})]})})]}),i==="sent"&&e.jsx(k,{content:"Cancel Request",position:"left",children:e.jsxs("button",{onClick:()=>q({connection_id:x}),disabled:v,className:`p-1 rounded-full text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${v?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("span",{className:"sr-only",children:"Cancel Request"}),v?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-red-600 rounded-full border-t-transparent"}):e.jsx(de,{className:"h-5 w-5"})]})})]})},X=l=>{const{user:d,connection_id:x,status:v}=l,h=f.includes(x),M=w.includes(x),O=()=>{if(!d.role)return{};switch(d.role){case"Academician":return{bg:"bg-blue-100",text:"text-blue-800"};case"Postgraduate":return{bg:"bg-green-100",text:"text-green-800"};case"Undergraduate":return{bg:"bg-purple-100",text:"text-purple-800"};case"Industry":return{bg:"bg-orange-100",text:"text-orange-800"};default:return{bg:"bg-gray-100",text:"text-gray-800"}}};return e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i==="connections"&&e.jsx("div",{className:"flex-shrink-0 mr-2",children:e.jsx("input",{type:"checkbox",checked:M,onChange:()=>re(x),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("div",{className:"h-12 w-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:d.profile_photo_url?e.jsx("img",{src:d.profile_photo_url,alt:`${d.name}'s profile`,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-blue-100 text-blue-500",children:d.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 truncate",children:d.full_name||d.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:d.email}),d.role&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${O().bg} ${O().text} mt-1`,children:d.role})]})]}),ae(l)]}),i==="received"&&e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx("button",{onClick:()=>F(x,"accept"),disabled:h,className:`flex-1 inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Processing...":"Accept"}),e.jsx("button",{onClick:()=>F(x,"reject"),disabled:h,className:`flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Processing...":"Reject"})]})]}),e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[i==="connections"&&e.jsx("div",{className:"flex-shrink-0 mr-3",children:e.jsx("input",{type:"checkbox",checked:M,onChange:()=>re(x),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("div",{className:"h-12 w-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:d.profile_photo_url?e.jsx("img",{src:d.profile_photo_url,alt:`${d.name}'s profile`,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-blue-100 text-blue-500",children:d.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.full_name||d.name}),e.jsx("p",{className:"text-sm text-gray-500",children:d.email}),d.role&&e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${O().bg} ${O().text} mt-1`,children:d.role})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[i==="connections"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{content:"Manage Tags",children:e.jsx("button",{onClick:()=>ne(x),className:"inline-flex items-center justify-center w-9 h-9 border border-blue-300 text-sm rounded-full text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(fe,{size:18})})}),e.jsx(k,{content:"View Profile",children:e.jsx(ce,{href:I(d),className:"inline-flex items-center justify-center w-9 h-9 border border-gray-300 text-sm rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(ue,{size:18})})}),e.jsx(k,{content:"Remove Connection",children:e.jsx("button",{onClick:()=>q({connection_id:x}),disabled:h,className:`inline-flex items-center justify-center w-9 h-9 border border-red-300 text-sm rounded-full text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-red-700 rounded-full border-t-transparent"}):e.jsx(Ae,{size:18})})})]}),i==="received"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{content:"Accept Request",children:e.jsx("button",{onClick:()=>F(x,"accept"),disabled:h,className:`inline-flex items-center justify-center w-9 h-9 border border-green-300 text-sm rounded-full text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(_e,{size:18})})}),e.jsx(k,{content:"View Profile",children:e.jsx(ce,{href:I(d),className:"inline-flex items-center justify-center w-9 h-9 border border-gray-300 text-sm rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(ue,{size:18})})}),e.jsx(k,{content:"Reject Request",children:e.jsx("button",{onClick:()=>F(x,"reject"),disabled:h,className:`inline-flex items-center justify-center w-9 h-9 border border-red-300 text-sm rounded-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):e.jsx(de,{size:18})})})]}),i==="sent"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{content:"View Profile",children:e.jsx(ce,{href:I(d),className:"inline-flex items-center justify-center w-9 h-9 border border-gray-300 text-sm rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(ue,{size:18})})}),e.jsx(k,{content:"Cancel Request",children:e.jsx("button",{onClick:()=>q({connection_id:x}),disabled:h,className:`inline-flex items-center justify-center w-9 h-9 border border-gray-300 text-sm rounded-full text-red-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-red-700 rounded-full border-t-transparent"}):e.jsx(de,{size:18})})})]})]})]})]},x)},K=l=>e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx(Re,{className:"h-full w-full"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:l})]}),Q=l=>!l||!l.meta||l.meta.total<=l.meta.per_page?null:(console.log(l),e.jsx("div",{className:"flex items-center justify-between border-t border-gray-200 px-4 py-3 sm:px-6 mt-4",children:e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:l.meta.from||0})," to"," ",e.jsx("span",{className:"font-medium",children:l.meta.to||0})," of"," ",e.jsx("span",{className:"font-medium",children:l.meta.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:l.meta.links.map((d,x)=>d.label==="&laquo; Previous"||d.label==="Next &raquo;"?null:e.jsx("button",{onClick:()=>{!d.url||d.active||U.get(d.url)},disabled:!d.url||d.active,className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${d.active?"z-10 bg-blue-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:outline-offset-0"} ${d.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:d.label}},x))})})]})})),ie=()=>{switch(i){case"connections":const l=B(t),d=Array.isArray(l)&&l.length>0;return e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[be(),e.jsx("div",{className:"flex-1",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:l.map(O=>X(O))}),Q(t)]}):K(p?"No connections match your search":"You have no connections yet")})]})});case"received":const x=B(s),v=Array.isArray(x)&&x.length>0;return e.jsx("div",{className:"mt-6",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:x.map(O=>X(O))}),Q(s)]}):K(p?"No requests match your search":"You have no pending requests")});case"sent":const h=B(r),M=Array.isArray(h)&&h.length>0;return e.jsx("div",{className:"mt-6",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:h.map(O=>X(O))}),Q(r)]}):K(p?"No requests match your search":"You have no sent requests")});default:return null}};return e.jsx(_r,{delayDuration:0,children:e.jsxs(lt,{title:"My Network",children:[e.jsx(it,{title:"My Network"}),e.jsxs("div",{className:"md:mt-6 px-2 md:px-0 mt-20 ml-1",children:[ve(),ye(),ie()]}),e.jsx(pt,{show:b,onClose:()=>g(!1),onConfirm:Y,title:"Remove Connection",message:"Are you sure you want to remove this connection? This action cannot be undone.",confirmButtonText:"Remove"}),e.jsx(Ht,{show:S,onClose:()=>{E(!1),L(null)},connectionIds:T?[T]:w}),e.jsx(It,{show:j,onClose:()=>P(!1),onTagCreated:G})]})})};export{Ts as default};
