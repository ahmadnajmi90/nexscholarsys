import{j as e,r as p,a as z}from"./app--kjMxizj.js";import{M as U}from"./MainLayout-VAoquhzB.js";import{P as $}from"./ProfileCard-D61y8iRm.js";import{u as I}from"./useRoles-hrtvSw7h.js";import"./index-t8aTlMeI.js";import"./FilterDropdown-DjaTV2Bl.js";import"./react-select.esm-D5vFxpYg.js";const P=()=>{const a=[{label:"Give Feedback",icon:e.jsx("img",{src:"/images/feedback.png",alt:"Feedback",style:{width:"30px",height:"30px"}}),link:"https://forms.gle/CQnJJxd8tfSrL2RE7"},{label:"Find Academician",icon:e.jsx("img",{src:"/images/academician.png",alt:"Academician",style:{width:"30px",height:"30px"}}),link:"/academicians"},{label:"Find Postgraduate",icon:e.jsx("img",{src:"/images/postgraduate.png",alt:"Postgraduate",style:{width:"30px",height:"30px"}}),link:"/postgraduates"},{label:"ChatGPT",icon:e.jsx("img",{src:"/images/chatgpt.png",alt:"ChatGPT",style:{width:"30px",height:"30px"}}),link:"https://chatgpt.com/"},{label:"Scispaces",icon:e.jsx("img",{src:"/images/scispaces.png",alt:"Scispaces",style:{width:"30px",height:"30px"}}),link:"https://typeset.io/"},{label:"Canva",icon:e.jsx("img",{src:"/images/canva.png",alt:"Canva",style:{width:"30px",height:"30px"}}),link:"https://www.canva.com/"},{label:"Mendeley",icon:e.jsx("img",{src:"/images/mendeley.png",alt:"Mendeley",style:{width:"30px",height:"30px"}}),link:"https://www.mendeley.com/"},{label:"Zotero",icon:e.jsx("img",{src:"/images/zotero.png",alt:"Zotero",style:{width:"30px",height:"30px"}}),link:"https://www.zotero.org/"},{label:"Scimago",icon:e.jsx("img",{src:"/images/scimago.png",alt:"Scimago",style:{width:"30px",height:"30px"}}),link:"https://www.scimagojr.com/"},{label:"Scopus",icon:e.jsx("img",{src:"/images/scopus.png",alt:"Scopus",style:{width:"30px",height:"30px"}}),link:"https://www.scopus.com/sources.uri?zone=TopNavBar&origin=searchbasic"}];return e.jsxs("div",{className:"mx-auto",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 mt-4",children:"QuickLinks"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-9 gap-4",children:a.map((t,r)=>e.jsx("div",{className:"flex flex-col items-center justify-center bg-white shadow-md rounded-lg hover:bg-gray-100 transition p-4",style:{width:"100%",height:"137px"},children:t.link?e.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2",children:t.icon}),e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:t.label})]}):e.jsxs("button",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2",children:t.icon}),e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:t.label})]})},r))})]})},T=({events:a=[]})=>{const[t,r]=p.useState(1),i=5,c=Math.ceil(a.length/i),m=a.slice((t-1)*i,t*i),x=()=>{t>1&&r(t-1)},d=()=>{t<c&&r(t+1)};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 h-full",children:[e.jsx("h2",{className:"text-base font-bold mb-3",children:"Upcoming Events"}),e.jsx("ul",{className:"space-y-2",children:m.map((s,f)=>e.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-gray-50 shadow hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("img",{src:"https://flagcdn.com/w40/my.png",alt:"Malaysia Flag",className:"w-6 h-4 mt-1 ml-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 truncate pr-2 w-32",title:s.event_name,children:s.event_name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.start_date_time,"   ",s.location]})]})]}),e.jsx(z,{href:route("events.show",s.url),className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-blue-700 text-xs",children:"→"})]},f))}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("button",{onClick:x,disabled:t===1,className:`px-3 py-1 text-xs font-medium rounded-lg ${t===1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Prev"}),e.jsxs("p",{className:"text-xs",children:["Page ",t," of ",c]}),e.jsx("button",{onClick:d,disabled:t===c,className:`px-3 py-1 text-xs font-medium rounded-lg ${t===c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Next"})]})]})},E=({totalUsers:a})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Total Registered Users"}),e.jsx("p",{className:"text-3xl font-bold",children:a})]}),G=({onlineUsers:a})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Online Users"}),e.jsx("p",{className:"text-3xl font-bold",children:a})]}),L=({clicksByType:a})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Clicks by Type"}),["grant","event","project"].map(t=>{const r=a.filter(i=>i.entity_type===t);return r.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-bold text-gray-800 capitalize",children:t==="grant"?"Grant":t==="event"?"Event":"Project"}),e.jsx("ul",{className:"mt-2",children:r.map((i,c)=>e.jsxs("li",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:i.entity_name})," -"," ",e.jsxs("span",{className:"text-blue-500",children:[i.total_clicks," clicks"]})]},c))})]},t)})]}),j=({items:a=[],timer:t=7e3,renderItem:r,fadeDuration:i=300,className:c="",label:m,seoPrefix:x="/events/"})=>{const[d,s]=p.useState(0),[f,o]=p.useState(!0),h=p.useRef(null),g=p.useRef(null);p.useEffect(()=>{if(!a.length)return;const n=setInterval(()=>{o(!1),setTimeout(()=>{s(u=>(u+1)%a.length),o(!0)},i)},t);return()=>clearInterval(n)},[a,t,i]);const N=n=>{o(!1),setTimeout(()=>{s(n),o(!0)},i)},b=n=>{h.current=n},v=n=>{if(g.current=n,h.current===null||g.current===null)return;const u=h.current-g.current;u>50?(o(!1),setTimeout(()=>{s(y=>(y+1)%a.length),o(!0)},i)):u<-50&&(o(!1),setTimeout(()=>{s(y=>y===0?a.length-1:y-1),o(!0)},i)),h.current=null,g.current=null},w=n=>{b(n.touches[0].clientX)},k=n=>{},l=n=>{v(n.changedTouches[0].clientX)},D=n=>{b(n.clientX)},S=n=>{v(n.clientX)},_=()=>{const n=a[d];n&&n.url&&(window.location.href=`${x}${n.url}`)};return e.jsxs("div",{className:`relative h-full ${c}`,onTouchStart:w,onTouchMove:k,onTouchEnd:l,onTouchCancel:l,onMouseDown:D,onMouseUp:S,children:[m&&e.jsx("div",{className:"absolute top-2 right-3 bg-red-500 text-white px-2 py-1 text-xs font-bold rounded z-50",children:m}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:_,className:`cursor-pointer transform h-full transition-opacity duration-${i} ${f?"opacity-100":"opacity-0"}`,children:r(a[d],d)}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-2",children:a.map((n,u)=>e.jsx("button",{onClick:()=>N(u),className:`w-2 h-2 rounded-full ${u===d?"bg-indigo-500":"bg-gray-300"}`},u))})]})]})},C=({totalUsers:a,onlineUsers:t,clicksByType:r,posts:i,events:c,projects:m,grants:x,academicians:d,universities:s,faculties:f,users:o,researchOptions:h})=>{const{isAdmin:g,isFacultyAdmin:N}=I(),b=l=>e.jsxs("div",{className:"block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(l.featured_image?`/storage/${l.featured_image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white pr-10",children:[e.jsx("h2",{className:"text-4xl font-bold truncate",title:l.title,children:l.title||"Untitled Post"}),l.content&&e.jsx("div",{className:"text-sm line-clamp-2 mb-2",dangerouslySetInnerHTML:{__html:l.content}}),e.jsx("p",{className:"text-xs mt-1",children:new Date(l.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),v=l=>e.jsxs("div",{className:"block relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(l.image?`/storage/${l.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:l.event_name,children:l.event_name||"Untitled Event"}),e.jsx("p",{className:"text-xs",children:new Date(l.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),w=l=>e.jsxs("div",{className:"block relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(l.image?`/storage/${l.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:l.title,children:l.title||"Untitled Project"}),e.jsx("p",{className:"text-xs",children:new Date(l.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),k=l=>e.jsxs("div",{className:"relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(l.image?`/storage/${l.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:l.title,children:l.title||"Untitled Grant"}),e.jsx("p",{className:"text-xs",children:new Date(l.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]});return e.jsxs("div",{className:"p-6 min-h-screen",children:[g&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(E,{totalUsers:a}),e.jsx(G,{onlineUsers:t}),e.jsx(L,{clicksByType:r})]}),N&&e.jsx($,{profilesData:d,supervisorAvailabilityKey:"availability_as_supervisor",universitiesList:s,faculties:f,isPostgraduateList:!1,isFacultyAdminDashboard:!0,users:o,researchOptions:h}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-6 mb-[10rem] h-[300px]",children:[e.jsx("div",{className:"md:col-span-4 h-full",children:e.jsx(j,{items:i.slice(0,5),timer:7e3,fadeDuration:300,renderItem:b,label:"Post",seoPrefix:"/posts/"})}),e.jsxs("div",{className:"md:col-span-3 h-full flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-1/2",children:[e.jsx(j,{items:c.slice(0,5),timer:8e3,fadeDuration:300,renderItem:v,label:"Event",seoPrefix:"/events/"}),e.jsx(j,{items:m.slice(0,5),timer:9e3,fadeDuration:300,renderItem:w,label:"Project",seoPrefix:"/projects/"})]}),e.jsx("div",{className:"h-1/2",children:e.jsx(j,{items:x.slice(0,5),timer:1e4,fadeDuration:300,renderItem:k,label:"Grant",seoPrefix:"/grants/"})})]}),e.jsx("div",{className:"md:col-span-3 h-full",children:e.jsx(T,{events:c})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(P,{})})]})},R=({posts:a,events:t,grants:r,users:i})=>{const c=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),m=s=>e.jsxs("div",{className:"block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(s.featured_image?`/storage/${s.featured_image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white pr-10",children:[e.jsx("h2",{className:"text-4xl font-bold truncate",title:s.title,children:s.title||"Untitled Post"}),s.content&&e.jsx("div",{className:"text-sm line-clamp-2 mb-2",dangerouslySetInnerHTML:{__html:s.content}}),e.jsx("p",{className:"text-xs mt-1",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),x=s=>e.jsxs("div",{className:"block relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(s.image?`/storage/${s.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:s.event_name,children:s.event_name||"Untitled Event"}),e.jsx("p",{className:"text-xs",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),d=s=>e.jsxs("div",{className:"relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(s.image?`/storage/${s.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:s.title,children:s.title||"Untitled Grant"}),e.jsx("p",{className:"text-xs",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]});return e.jsx("div",{className:"w-screen bg-gray-200 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white text-gray-800 rounded-xl shadow-lg overflow-hidden relative flex flex-col",style:{width:"414px",maxWidth:"100%"},children:e.jsxs("div",{className:"bg-white w-full px-5 pt-6 pb-4 overflow-y-auto",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Today"}),e.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:c})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"mb-4 h-[280px]",children:e.jsx(j,{items:a.slice(0,5),timer:7e3,fadeDuration:300,renderItem:m,label:"Post",seoPrefix:"/posts/"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-[160px]",children:e.jsx(j,{items:t.slice(0,5),timer:8e3,fadeDuration:300,renderItem:x,label:"Event",seoPrefix:"/events/"})}),e.jsx("div",{className:"h-[160px]",children:e.jsx(j,{items:r.slice(0,5),timer:9e3,fadeDuration:300,renderItem:d,label:"Grant",seoPrefix:"/grants/"})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(P,{})})]})})})},M=()=>{const[a,t]=p.useState(!1);return p.useEffect(()=>{const r=()=>{t(window.innerWidth>=1024)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),a},J=({totalUsers:a,onlineUsers:t,clicksByType:r,events:i,posts:c,projects:m,grants:x,academicians:d,universities:s,faculties:f,users:o,researchOptions:h})=>{I();const g=M();return e.jsx(U,{title:"Dashboard",children:g?e.jsx(C,{totalUsers:a,onlineUsers:t,clicksByType:r,events:i,posts:c,projects:m,grants:x,academicians:d,universities:s,faculties:f,users:o,researchOptions:h}):e.jsx(R,{events:i,users:o,grants:x,posts:c})})};export{J as default};
