import{W as R,r as d,j as e}from"./app-BGc9yukt.js";import{M as F}from"./MainLayout-m_xeYg-w.js";import _ from"./NationalityForm-D6ZFUIkv.js";import{S as c}from"./react-select.esm-CDsi-IRW.js";import{R as M}from"./quill.snow-BS_BsI3i.js";import{u as D}from"./useRoles-C5dkApVs.js";import{I as o}from"./InputLabel-Cm5AaDjt.js";import"./index-DDcWGdFy.js";import"./analytics-B60H_cQS.js";function K({postProject:r,auth:u,researchOptions:h,universities:y}){var v,f,j;D();const{data:s,setData:n,post:b,processing:N,errors:t}=R({title:r.title||"",description:r.description||"",project_type:r.project_type||"",project_theme:r.project_theme||"",purpose:r.purpose||[],start_date:r.start_date||"",end_date:r.end_date||"",application_deadline:r.application_deadline||"",duration:r.duration||"",sponsored_by:r.sponsored_by||"",category:r.category||"",field_of_research:r.field_of_research||[],supervisor_category:r.supervisor_category||"",supervisor_name:r.supervisor_name||"",university:r.university||"",email:r.email||"",origin_country:r.origin_country||"",student_nationality:r.student_nationality||"",student_level:r.student_level||[],student_mode_study:r.student_mode_study||[],appointment_type:r.appointment_type||"",purpose_of_collaboration:r.purpose_of_collaboration||"",image:r.image||"",attachment:r.attachment||"",amount:r.amount||"",application_url:r.application_url||"",project_status:r.project_status||"draft"}),[w,S]=d.useState(s.university),[E,C]=d.useState(!1),m=d.useRef(null);d.useEffect(()=>{const a=l=>{m.current&&!m.current.contains(l.target)&&C(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const x=[{value:"Seek for Postgraduate",label:"Seek for Postgraduate"},{value:"Seek for Undergraduate",label:"Seek for Undergraduate"},{value:"Seek for Academician Collaboration",label:"Seek for Academician Collaboration"},{value:"Seek for Industrial Collaboration",label:"Seek for Industrial Collaboration"},{value:"For Showcase",label:"For Showcase"}],k=a=>{if(!a){n("purpose",[]);return}const l=a.map(p=>p.value);if(l.includes("For Showcase")){n("purpose",["For Showcase"]);return}const i=l.filter(p=>p!=="For Showcase");n("purpose",i)},A=a=>a.value==="For Showcase"?s.purpose.some(l=>l==="Seek for Postgraduate"||l==="Seek for Undergraduate"||l==="Seek for Academician Collaboration"||l==="Seek for Industrial Collaboration"):s.purpose.includes("For Showcase");d.useState("");const g=async a=>{a&&a.preventDefault();const l=new FormData;Object.keys(s).forEach(i=>{i==="image"||i==="attachment"?(s[i]instanceof File||typeof s[i]=="string")&&l.append(i,s[i]):Array.isArray(s[i])?l.append(i,JSON.stringify(s[i])):l.append(i,s[i])}),console.log("Form Data Contents:");for(let i of l.entries())console.log(i[0]+": "+i[1]);b(route("post-projects.update",r.id),{data:l,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Project updated successfully!")},onError:i=>{console.error("Error updating Project:",i),alert("Failed to update the Project. Please try again.")}})};return e.jsx(F,{title:"",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"absolute top-4 left-4 text-gray-700 hover:text-gray-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsxs("form",{onSubmit:g,className:"bg-white p-4 sm:p-6 rounded-lg max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Project"}),e.jsxs("div",{children:[e.jsxs(o,{children:["Project Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.title,onChange:a=>n("title",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Project Name"}),t.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.title})]}),e.jsxs("div",{children:[e.jsxs(o,{children:["Project Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",style:{height:"300px",overflowY:"auto"},children:e.jsx(M,{theme:"snow",value:s.description,onChange:a=>n("description",a),placeholder:"Enter description",style:{height:"300px",maxHeight:"300px"}})}),t.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Project Theme"}),e.jsxs("select",{value:s.project_theme,onChange:a=>n("project_theme",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Project Theme"}),e.jsx("option",{value:"Science & Technology",children:"Science & Technology"}),e.jsx("option",{value:"Social Science",children:"Social Science"})]}),t.project_theme&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.project_theme})]}),e.jsxs("div",{ref:m,children:[e.jsx(o,{children:"Purpose (Multiselect)"}),e.jsx(c,{isMulti:!0,options:x,value:x.filter(a=>s.purpose.includes(a.value)),onChange:k,isOptionDisabled:A,className:"mt-1 block w-full",classNamePrefix:"select",menuPortalTarget:document.body,styles:{menuPortal:a=>({...a,zIndex:9999})}}),t.purpose&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.purpose})]})]}),!s.purpose.includes("For Showcase")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Start Date"}),e.jsx("input",{type:"date",value:s.start_date,onChange:a=>n("start_date",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),t.start_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.start_date})]}),e.jsxs("div",{children:[e.jsx(o,{children:"End Date"}),e.jsx("input",{type:"date",value:s.end_date,min:s.start_date||"",onChange:a=>n("end_date",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),t.end_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.end_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Application Deadline"}),e.jsx("input",{type:"date",value:s.application_deadline,onChange:a=>n("application_deadline",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),t.application_deadline&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.application_deadline})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Duration (in months)"}),e.jsx("input",{type:"number",value:s.duration,onChange:a=>n("duration",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter grant duration"}),t.duration&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.duration})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Sponsored By"}),e.jsx("input",{type:"text",value:s.sponsored_by,onChange:a=>n("sponsored_by",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter sponsor"}),t.sponsored_by&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.sponsored_by})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:s.category,onChange:a=>n("category",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Category"}),e.jsx("option",{value:"Fundamental Research",children:"Fundamental Research"}),e.jsx("option",{value:"Applied Research",children:"Applied Research"}),e.jsx("option",{value:"Fundamental + Applied",children:"Fundamental + Applied"}),e.jsx("option",{value:"Knowledge Transfer Program (KTP)",children:"Knowledge Transfer Program (KTP)"}),e.jsx("option",{value:"CSR (Corporate Social Responsibility)",children:"CSR (Corporate Social Responsibility)"})]}),t.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.category})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[(s.category==="Fundamental Research"||s.category==="Applied Research"||s.category==="Fundamental + Applied")&&e.jsxs("div",{className:"w-full",children:[e.jsx(o,{children:"Field of Research Structure : Field of Research - Research Area - Niche Domain"}),e.jsx(c,{id:"field_of_research",isMulti:!0,options:h.map(a=>({value:`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`,label:`${a.field_of_research_name} - ${a.research_area_name} - ${a.niche_domain_name}`})),className:"mt-1",classNamePrefix:"select",value:(v=s.field_of_research)==null?void 0:v.map(a=>{const l=h.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===a);return{value:a,label:l?`${l.field_of_research_name} - ${l.research_area_name} - ${l.niche_domain_name}`:a}}),onChange:a=>{const l=a.map(i=>i.value);n("field_of_research",l)},placeholder:"Search and select fields of research..."}),t.field_of_research&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.field_of_research})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Project Supervisor / Project Leader"}),e.jsxs("select",{value:s.supervisor_category,onChange:a=>n("supervisor_category",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"Own Name",children:"Own Name"}),e.jsx("option",{value:"On Behalf",children:"On Behalf"})]}),t.supervisor_category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.supervisor_category})]})]}),s.supervisor_category==="On Behalf"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Supervisor / Project Leader Name"}),e.jsx("input",{type:"text",value:s.supervisor_name,onChange:a=>n("supervisor_name",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),t.supervisor_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.supervisor_name})]}),e.jsxs("div",{children:[e.jsx(o,{children:"University"}),e.jsxs("select",{id:"university",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:w||"",onChange:a=>{const l=a.target.value;S(l),n("university",l)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select your University"}),y.map(a=>e.jsx("option",{value:a.id,children:a.full_name},a.id))]}),t.university&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.university})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Email"}),e.jsx("input",{type:"email",value:s.email,onChange:a=>n("email",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter email"}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:s.email===u.email,onChange:a=>{a.target.checked?n("email",u.email):n("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsxs(o,{htmlFor:"usePersonalEmail",className:"ml-2",children:["Use personal email (",u.email,")"]})]})]}),e.jsxs("div",{children:[e.jsx(_,{title:"Project Origin Country",value:s.origin_country,onChange:a=>n("origin_country",a)}),t.origin_country&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.origin_country})]})]}),(s.purpose.includes("Seek for Postgraduate")||s.purpose.includes("Seek for Undergraduate"))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Please select the criteria for student"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(_,{title:"Student Nationality",value:s.student_nationality,isNotSpecify:!0,onChange:a=>n("student_nationality",a)}),t.student_nationality&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.student_nationality})]}),e.jsxs("div",{children:[e.jsx(o,{children:"This project is for?"}),e.jsx(c,{isMulti:!0,options:[...s.purpose.includes("Seek for Undergraduate")?[{value:"Undergraduate",label:"Undergraduate"}]:[],...s.purpose.includes("Seek for Postgraduate")?[{value:"Master",label:"Master"},{value:"Ph.D.",label:"Ph.D."}]:[]],value:((f=s.student_level)==null?void 0:f.map(a=>({value:a,label:a})))||[],onChange:a=>{n("student_level",a.map(l=>l.value))},className:"mt-1 block w-full",classNamePrefix:"select"}),t.student_level&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.student_level})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Mode of Study"}),e.jsx(c,{isMulti:!0,options:[...s.purpose.includes("Seek for Undergraduate")?[{value:"No Mode of Study (For Undergraduate)",label:"No Mode of Study (For Undergraduate)"}]:[],...s.purpose.includes("Seek for Postgraduate")?[{value:"Master - Full Research",label:"Master - Full Research"},{value:"Master - Coursework",label:"Master - Coursework"},{value:"Master - Mixed Mode",label:"Master - Mixed Mode"},{value:"Master - Full Research - ODL",label:"Master - Full Research - ODL"},{value:"Master - Coursework - ODL",label:"Master - Coursework - ODL"},{value:"Master - Mixed Mode - ODL",label:"Master - Mixed Mode - ODL"},{value:"PhD - Full Research",label:"PhD - Full Research"},{value:"PhD - Industry",label:"PhD - Industry"},{value:"Doctor of Business Administration",label:"Doctor of Business Administration"}]:[]],value:((j=s.student_mode_study)==null?void 0:j.map(a=>({value:a,label:a})))||[],onChange:a=>{n("student_mode_study",a.map(l=>l.value))},className:"mt-1 block w-full",classNamePrefix:"select"}),t.student_mode_study&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.student_mode_study})]}),s.purpose.includes("Seek for Postgraduate")&&e.jsxs("div",{children:[e.jsx(o,{children:"Appointment Type"}),e.jsxs("select",{value:s.appointment_type,onChange:a=>n("appointment_type",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Appointment Type"}),e.jsx("option",{value:"Research Assistant (RA)",children:"Research Assistant (RA)"}),e.jsx("option",{value:"Graduate Assistant (GA)",children:"Graduate Assistant (GA)"}),e.jsx("option",{value:"Teaching Assistant (TA)",children:"Teaching Assistant (TA)"}),e.jsx("option",{value:"Research Fellow (RF)",children:"Research Fellow (RF)"}),e.jsx("option",{value:"Project Assistant (PA)",children:"Project Assistant (PA)"}),e.jsx("option",{value:"Technical Assistant (TA)",children:"Technical Assistant (TA)"}),e.jsx("option",{value:"Graduate Research Assistant (GRA)",children:"Graduate Research Assistant (GRA)"}),e.jsx("option",{value:"Scholarship Recipient",children:"Scholarship Recipient"}),e.jsx("option",{value:"Intern",children:"Intern"})]}),t.appointment_type&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.appointment_type})]})]})]}),(s.purpose.includes("Seek for Academician Collaboration")||s.purpose.includes("Seek for Industrial Collaboration"))&&e.jsxs("div",{children:[e.jsx(o,{children:"Purpose of Collaboration"}),e.jsx("textarea",{value:s.purpose_of_collaboration,onChange:a=>n("purpose_of_collaboration",a.target.value||""),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Purpose of Collaboration"}),t.purpose_of_collaboration&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.purpose_of_collaboration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>n("image",a.target.files[0]),className:"w-full rounded-lg border-gray-200 py-2 text-sm"}),r.image&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Image:"," ",e.jsx("a",{href:`/storage/${r.image}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Image"})]}),t.image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.image})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:a=>n("attachment",a.target.files[0]),className:"w-full rounded-lg border-gray-200 py-2 text-sm"}),r.attachment&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Attachment:"," ",e.jsx("a",{href:`/storage/${r.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"})]}),t.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.attachment})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[s.purpose!=="Seek for Postgraduate"&&e.jsxs("div",{children:[e.jsx(o,{children:"Approved Project Amount"}),e.jsx("input",{type:"number",value:s.amount,onChange:a=>n("amount",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter amount (e.g., 5000.00)"}),t.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.amount})]}),!s.purpose.includes("For Showcase")&&e.jsxs("div",{children:[e.jsx(o,{className:"block text-gray-700 font-medium",children:"Application URL"}),e.jsx("input",{type:"url",value:s.application_url,onChange:a=>n("application_url",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter application URL"}),t.application_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.application_url})]})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:()=>g(),disabled:N,className:"w-full sm:w-auto inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"})})]})]})})}export{K as default};
