import{j as e,a as u}from"./app-CRunKGlS.js";import{M as k}from"./Modal-B6Xe6uPJ.js";import{B as f}from"./button-CvHeaofT.js";import{B as x}from"./badge-B1g_318y.js";import{A as y,a as _}from"./avatar-Ds4ln6o3.js";import{c as I}from"./index-BP2IIEZc.js";import{l as b}from"./logError-D4ezqrCx.js";import{g as B}from"./supervisionConstants-BuM5-H5X.js";import{a as A,I as M,b as R}from"./modalAnimations-CCENKliM.js";import{m as g}from"./proxy-hY7jBSjC.js";import{C as p}from"./circle-check-big-VEPsqubW.js";import{X as S}from"./x-D71_YNlz.js";import{A as L}from"./arrow-right-CtHlztEB.js";import{c as T}from"./createLucideIcon-Cn5nLR87.js";import{C as v}from"./circle-x-Cx5yCetz.js";import{C as $}from"./circle-alert-DX7nHMHh.js";import{L as N}from"./lightbulb-D2WPlEiv.js";import"./dialog-6F-BmcU5.js";import"./transition-Bs7yPu4Z.js";import"./utils-D-KgF5mV.js";import"./index-CGrAONsN.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],j=T("PartyPopper",F);function ne({type:l,data:s,isOpen:o,onClose:r,onNavigate:t}){const n=l==="response"?[...(s==null?void 0:s.acceptances)||[],...(s==null?void 0:s.rejections)||[]]:s||[],i=l==="response"?(s==null?void 0:s.acceptances)||[]:[],m=l==="response"?(s==null?void 0:s.rejections)||[]:[],c=q(l,n,i),w=async()=>{try{const a=n.map(d=>d.id);if(a.length===0){r==null||r();return}await u.post(c.acknowledgeRoute,{request_ids:a}),t==null||t(),r==null||r()}catch(a){b(a,`UnifiedNotificationModal ${l} acknowledge`),I.error(c.errorMessage)}},C=async()=>{try{const a=n.map(d=>d.id);a.length>0&&await u.post(c.acknowledgeRoute,{request_ids:a}),r==null||r()}catch(a){b(a,`UnifiedNotificationModal ${l} close`)}};return!o||n.length===0?null:e.jsx(k,{show:o,onClose:r,maxWidth:"xl",closeable:!1,children:e.jsxs(g.div,{...A,className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(g.div,{...c.animateIcon?M:{},className:`mx-auto flex items-center justify-center h-16 w-16 rounded-full ${c.iconBgColor} mb-4`,children:e.jsx(c.Icon,{className:`h-10 w-10 ${c.iconColor}`})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:c.title}),e.jsx("p",{className:"text-sm text-slate-600",children:c.description})]}),e.jsx("div",{className:"space-y-4 mb-6 max-h-[400px] overflow-y-auto",children:l==="response"?e.jsxs(e.Fragment,{children:[i.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-green-700 mb-3 flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),"Accepted Offers (",i.length,")"]}),e.jsx("div",{className:"space-y-2",children:i.map((a,d)=>e.jsx(h,{item:a,type:"acceptance",index:d},a.id))})]}),m.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"Declined Offers (",m.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.map((a,d)=>e.jsx(h,{item:a,type:"declined",index:i.length+d},a.id))})]})]}):e.jsx("div",{className:"space-y-3",children:n.map((a,d)=>e.jsx(h,{item:a,type:l,index:d},a.id))})}),c.showAlert&&c.alertContent,e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"outline",onClick:C,className:"flex-1",children:c.closeButtonLabel}),e.jsxs(f,{onClick:w,className:`flex-1 ${c.primaryButtonClass}`,children:[c.primaryButtonLabel,e.jsx(L,{className:"ml-2 h-4 w-4"})]})]})]})})}function h({item:l,type:s,index:o}){var t,n,i;const r=V(s,l);return e.jsx(g.div,{...R(o*.1),className:`p-4 rounded-lg border ${r.borderColor} ${r.bgColor}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"h-10 w-10",children:(t=r.person)!=null&&t.profile_picture?e.jsx("img",{src:`/storage/${r.person.profile_picture}`,alt:r.person.full_name,className:"h-full w-full object-cover"}):e.jsx(_,{className:`${r.avatarBgColor} ${r.avatarTextColor} text-xs`,children:((i=(n=r.person)==null?void 0:n.full_name)==null?void 0:i.split(" ").map(m=>m[0]).join("").slice(0,2))||r.fallbackInitials})}),e.jsx("div",{className:"flex-1 min-w-0",children:r.content})]})})}function q(l,s,o,r){const t=s.length;switch(l){case"rejection":{const n=s.some(i=>i.recommended_supervisors&&i.recommended_supervisors.length>0);return{Icon:v,iconColor:"text-red-600",iconBgColor:"bg-red-100",animateIcon:!1,title:"Supervision Request Update",description:t===1?"Your supervision request was not accepted":`${t} supervision requests were not accepted`,acknowledgeRoute:route("supervision.acknowledge.rejections"),errorMessage:"Failed to acknowledge rejections",closeButtonLabel:"Close",primaryButtonLabel:n?"View Recommendations":"View Status",primaryButtonClass:"bg-indigo-600 hover:bg-indigo-700",showAlert:n,alertContent:n?e.jsx("div",{className:"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"h-5 w-5 text-indigo-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-indigo-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Alternative Supervisors Available"}),e.jsx("p",{children:"Some supervisors have kindly recommended colleagues who might be a better fit for your research. View their suggestions in the Proposal Status tab."})]})]})}):null}}case"offer":return{Icon:j,iconColor:"text-green-600",iconBgColor:"bg-green-100",animateIcon:!0,title:"ðŸŽ‰ Great News!",description:t===1?"You have received a supervision offer":`You have received ${t} supervision offers`,acknowledgeRoute:route("supervision.acknowledge.offers"),errorMessage:"Failed to acknowledge offers",closeButtonLabel:"I'll Review Later",primaryButtonLabel:"View Offers & Make Decision",primaryButtonClass:"bg-green-600 hover:bg-green-700",showAlert:t>1,alertContent:t>1?e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-amber-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Important Notice"}),e.jsx("p",{children:"You have multiple offers. Accepting one will automatically cancel your other pending requests. Review each offer carefully before making your decision."})]})]})}):null};case"response":return{Icon:o.length>0?j:v,iconColor:o.length>0?"text-green-600":"text-slate-600",iconBgColor:o.length>0?"bg-green-100":"bg-slate-100",animateIcon:!0,title:"Student Response Updates",description:t===1?"You have 1 student response to your supervision offer":`You have ${t} student responses to your supervision offers`,acknowledgeRoute:route("supervision.acknowledge.student-responses"),errorMessage:"Failed to acknowledge notifications",closeButtonLabel:"I'll Review Later",primaryButtonLabel:o.length>0?"View My Students":"View Updates",primaryButtonClass:o.length>0?"bg-green-600 hover:bg-green-700":"bg-slate-700 hover:bg-slate-800",showAlert:o.length>0,alertContent:o.length>0?e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-green-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Supervision Relationships Active"}),e.jsx("p",{children:"Your new supervision relationships are now active. You can manage students, schedule meetings, and collaborate via NexLab."})]})]})}):null};default:return{}}}function V(l,s){var o,r,t,n,i,m;switch(l){case"rejection":return{person:s.academician,fallbackInitials:"SV",borderColor:"border-red-200",bgColor:"bg-red-50",avatarBgColor:"bg-red-100",avatarTextColor:"text-red-700",content:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:((o=s.academician)==null?void 0:o.full_name)||"Supervisor"}),e.jsxs("div",{className:"text-sm text-slate-700 mb-2",children:["Proposal: ",e.jsx("span",{className:"font-medium",children:s.proposal_title})]}),s.cancel_reason&&e.jsxs("div",{className:"text-xs text-slate-600 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Reason:"})," ",B(s.cancel_reason)]}),s.recommended_supervisors&&s.recommended_supervisors.length>0&&e.jsxs(x,{className:"bg-indigo-100 text-indigo-700 border-indigo-200",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),s.recommended_supervisors.length," supervisor(s) recommended"]})]})};case"offer":return{person:s.academician,fallbackInitials:"SV",borderColor:"border-green-200",bgColor:"bg-green-50",avatarBgColor:"bg-green-100",avatarTextColor:"text-green-700",content:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:((r=s.academician)==null?void 0:r.full_name)||"Supervisor"}),e.jsxs(x,{className:"bg-green-100 text-green-700 border-green-200",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),"Offer Available"]})]}),e.jsx("div",{className:"text-sm text-slate-700 mb-1",children:((t=s.academician)==null?void 0:t.department)&&e.jsx("div",{children:s.academician.department})}),e.jsxs("div",{className:"text-xs text-slate-600",children:["Proposal: ",e.jsx("span",{className:"font-medium",children:s.proposal_title})]}),((n=s.offer_details)==null?void 0:n.cohort_start_term)&&e.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Starting: ",s.offer_details.cohort_start_term]})]})};case"acceptance":return{person:s.student,fallbackInitials:"ST",borderColor:"border-green-200",bgColor:"bg-green-50",avatarBgColor:"bg-green-100",avatarTextColor:"text-green-700",content:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:((i=s.student)==null?void 0:i.full_name)||"Student"}),e.jsxs("div",{className:"text-sm text-slate-700",children:["Research: ",e.jsx("span",{className:"font-medium",children:s.proposal_title})]}),e.jsx(x,{className:"bg-green-100 text-green-700 border-green-200 mt-2",children:"âœ“ Supervision Active"})]})};case"declined":return{person:s.student,fallbackInitials:"ST",borderColor:"border-slate-200",bgColor:"bg-slate-50",avatarBgColor:"bg-slate-100",avatarTextColor:"text-slate-700",content:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:((m=s.student)==null?void 0:m.full_name)||"Student"}),e.jsxs("div",{className:"text-sm text-slate-700",children:["Research: ",e.jsx("span",{className:"font-medium",children:s.proposal_title})]}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"The student may have accepted another supervisor's offer"})]})};default:return{person:null,fallbackInitials:"N/A",borderColor:"border-slate-200",bgColor:"bg-slate-50",avatarBgColor:"bg-slate-100",avatarTextColor:"text-slate-700",content:e.jsx("div",{children:"Unknown notification type"})}}}export{ne as default};
