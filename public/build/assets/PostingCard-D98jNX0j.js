import{r as i,j as e,d as R}from"./app-_Pmd54av.js";const g=({label:c,options:d,selectedValues:a,setSelectedValues:l})=>{const[n,N]=i.useState(!1),h=t=>{const p=a.includes(t)?a.filter(m=>m!==t):[...a,t];l(p)};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:c}),e.jsx("div",{className:`relative mt-1 w-full rounded-lg border border-gray-200 p-4 text-sm cursor-pointer bg-white ${n?"shadow-lg":""}`,onClick:()=>N(!n),children:a&&a.length>0?a.join(", "):`Select ${c}`}),n&&e.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded shadow-lg",children:e.jsx("div",{className:"p-2 space-y-2",children:d.map((t,p)=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:t,checked:a.includes(t),onChange:m=>h(m.target.value),className:"mr-2"}),t]},p))})})]})},E=({data:c,title:d,isProject:a,isEvent:l,isGrant:n})=>{const[N,h]=i.useState(!1),[t,p]=i.useState(null),[m,T]=i.useState([]),[u,$]=i.useState([]),[j,D]=i.useState([]),[b,M]=i.useState([]),[y,A]=i.useState(1),f=9,F=[...new Set(c.map(s=>a?s.category:l?s.event_type:n?s.grant_type:null))].filter(Boolean),O=[...new Set(c.map(s=>a?s.origin_country:l||n?s.country:null))].filter(Boolean),I=s=>{p(s),h(!0)},_=()=>{h(!1),p(null)};function L(s,r,v){R.post("/click-tracking",{entity_type:s,entity_id:r,action:v}).then(x=>{console.log("Click tracked successfully:",x.data)}).catch(x=>{console.error("Error tracking click:",x)})}const V=[...new Set(c.flatMap(s=>a?s.project_theme||[]:l?s.event_theme||[]:n?s.grant_theme||[]:[]))].filter(Boolean),P=[...new Set(l?c.map(s=>s.event_mode).filter(Boolean):[])],k=c.filter(s=>{const r=m.length===0||m.some(o=>a?s.category===o:l?s.event_type===o:n?s.grant_type===o:!0),v=u.length===0||u.some(o=>a?s.origin_country===o:l||n?s.country===o:!0),x=j.length===0||j.some(o=>{var w,C,S;return a?(w=s.project_theme)==null?void 0:w.includes(o):l?(C=s.event_theme)==null?void 0:C.includes(o):n?(S=s.grant_theme)==null?void 0:S.includes(o):!0}),q=b.length===0||l&&b.includes(s.event_mode);return r&&v&&x&&q}),B=Math.ceil(k.length/f),H=k.slice((y-1)*f,y*f),W=s=>{A(s)};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"w-1/4 p-4 bg-gray-100 border-r",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(g,{label:a?"Purpose":l?"Event Type":"Grant Type",options:F,selectedValues:m,setSelectedValues:T}),l&&e.jsx(g,{label:"Event Mode",options:P,selectedValues:b,setSelectedValues:M}),e.jsx(g,{label:a?"Project Theme":l?"Event Theme":"Grant Theme",options:V,selectedValues:j,setSelectedValues:D}),e.jsx(g,{label:"Country",options:O,selectedValues:u,setSelectedValues:$})]})]}),e.jsxs("div",{className:"flex-1 px-8",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map((s,r)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden text-center pb-8",children:[e.jsx("img",{src:s.image!==null?`/storage/${s.image}`:"/storage/default.jpg",alt:s[d],className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 text-center truncate",style:{maxWidth:"100%"},title:s[d],children:s[d]}),e.jsx("p",{className:"text-gray-600 mt-4 text-center",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},dangerouslySetInnerHTML:{__html:s.description||"No description available."}})]}),e.jsx("button",{onClick:()=>{I(s),L(a?"project":l?"event":"grant",s.id,"view_details")},className:"inline-block rounded-full border border-gray-300 px-7 py-2 text-base font-medium text-body-color transition hover:border-primary hover:bg-primary hover:text-dark dark:border-dark-300 dark:text-dark-600",children:"View Details"})]},r))}),N&&t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-auto",onClick:_,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-4xl relative overflow-y-auto max-h-[90vh]",onClick:s=>s.stopPropagation(),children:[t.image&&e.jsx("img",{src:t.image!==null?`/storage/${t.image}`:"/storage/default.jpg",alt:t[d],className:"w-full h-48 object-cover rounded-t-lg mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:t[d]}),e.jsxs("div",{className:"space-y-4",children:[a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Description:"}),t.description?e.jsx("div",{className:"mt-2 text-sm",dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No description available."})]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Category:"})," ",t.category||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Project Theme:"})," ",t.project_theme||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Purpose:"})," ",Array.isArray(t.purpose)?t.purpose.join(", "):"No Purpose Specified"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Project Duration:"})," ",t.start_date?`${t.start_date} - ${t.end_date}`:"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Application Deadline:"})," ",t.application_deadline||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Contact Email:"})," ",t.email||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",t.attachment?e.jsx("a",{href:`/storage/${t.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"}):"No attachment available."]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Description:"}),t.description?e.jsx("div",{className:"mt-2 text-sm",dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No description available."})]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Event type:"})," ",t.event_type||"Not provided."]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Event Duration:"})," ",t.start_date?`${t.start_date} - ${t.end_date}`:"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Registration Link:"})," ",t.registration_url?e.jsx("a",{href:t.registration_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Click Here"}):"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Registration Deadline:"})," ",t.registration_deadline||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Contact Email:"})," ",t.contact_email||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",`${t.venue}, ${t.city}, ${t.country}`||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",t.attachment?e.jsx("a",{href:`/storage/${t.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"}):"No attachment available."]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Description:"}),t.description?e.jsx("div",{className:"mt-2 text-sm",dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No description available."})]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Grant Type:"})," ",t.grant_type||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Grant Theme:"})," ",Array.isArray(t.grant_theme)?t.grant_theme.join(", "):"No Grant Theme Specified"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Cycle:"})," ",t.cycle||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Grant Duration:"})," ",t.start_date?`${t.start_date} - ${t.end_date}`:"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Application Deadline:"})," ",t.application_deadline||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Sponsored by:"})," ",t.sponsored_by||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Website / Link:"})," ",t.website||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Contact Email:"})," ",t.email||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",t.attachment?e.jsx("a",{href:`/storage/${t.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"}):"No attachment available."]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:_,className:"px-6 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})}),e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:B},(s,r)=>e.jsx("button",{onClick:()=>W(r+1),className:`px-4 py-2 border rounded ${y===r+1?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:r+1},r))})]})]})};export{E as P};
