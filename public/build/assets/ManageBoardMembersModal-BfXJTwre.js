import{c as se}from"./createLucideIcon-DuVmJdM5.js";import{r as l,R as d,j as o,a as le,y as oe}from"./app-DlrLkdql.js";import{M as ie}from"./Modal-Cu2styYL.js";import{P as ce}from"./PrimaryButton-jNMHCCwm.js";import{S as ue}from"./SecondaryButton-COLypBy8.js";import{c as N}from"./index-B_EXF9H_.js";import{a as $}from"./utils-CBfrqCZ4.js";import{Q as de,K as fe,u as me,b as he,$ as pe,a as ge,w as xe,e as ye,r as be}from"./InlineEdit-OxGvm1XF.js";import{o as S,p as I,m as ve,K as je,L,y as Se,_ as Ne}from"./transition-CrpKBowS.js";import{d as U,s as R,H as $e,w as we,c as ke,U as Ee,o as D}from"./dialog-C4T7sENw.js";import{r as Pe}from"./index-BPUO_Du-.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],at=se("LayoutGrid",Ce);function Te(t,r,e){let[n,s]=l.useState(e),i=t!==void 0,u=l.useRef(i),c=l.useRef(!1),f=l.useRef(!1);return i&&!u.current&&!c.current?(c.current=!0,u.current=i,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!i&&u.current&&!f.current&&(f.current=!0,u.current=i,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[i?t:n,S(h=>(i||s(h),r?.(h)))]}function Fe(t){let[r]=l.useState(t);return r}function _(t={},r=null,e=[]){for(let[n,s]of Object.entries(t))B(e,A(r,n),s);return e}function A(t,r){return t?t+"["+r+"]":r}function B(t,r,e){if(Array.isArray(e))for(let[n,s]of e.entries())B(t,A(r,n.toString()),s);else e instanceof Date?t.push([r,e.toISOString()]):typeof e=="boolean"?t.push([r,e?"1":"0"]):typeof e=="string"?t.push([r,e]):typeof e=="number"?t.push([r,`${e}`]):e==null?t.push([r,""]):_(e,r,t)}function Me(t){var r,e;let n=(r=t?.form)!=null?r:t.closest("form");if(n){for(let s of n.elements)if(s!==t&&(s.tagName==="INPUT"&&s.type==="submit"||s.tagName==="BUTTON"&&s.type==="submit"||s.nodeName==="INPUT"&&s.type==="image")){s.click();return}(e=n.requestSubmit)==null||e.call(n)}}let De=l.createContext(null);function Ie({children:t}){let r=l.useContext(De);if(!r)return d.createElement(d.Fragment,null,t);let{target:e}=r;return e?Pe.createPortal(d.createElement(d.Fragment,null,t),e):null}function Le({data:t,form:r,disabled:e,onReset:n,overrides:s}){let[i,u]=l.useState(null),c=I();return l.useEffect(()=>{if(n&&i)return c.addEventListener(i,"reset",n)},[i,r,n]),d.createElement(Ie,null,d.createElement(Ue,{setForm:u,formId:r}),_(t).map(([f,h])=>d.createElement(U,{features:R.Hidden,...ve({key:f,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,disabled:e,name:f,value:h,...s})})))}function Ue({setForm:t,formId:r}){return l.useEffect(()=>{if(r){let e=document.getElementById(r);e&&t(e)}},[t,r]),r?null:d.createElement(U,{features:R.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:e=>{if(!e)return;let n=e.closest("form");n&&t(n)}})}let w=l.createContext(null);w.displayName="GroupContext";let Re=l.Fragment;function _e(t){var r;let[e,n]=l.useState(null),[s,i]=fe(),[u,c]=we(),f=l.useMemo(()=>({switch:e,setSwitch:n}),[e,n]),h={},x=t,y=L();return d.createElement(c,{name:"Switch.Description",value:u},d.createElement(i,{name:"Switch.Label",value:s,props:{htmlFor:(r=f.switch)==null?void 0:r.id,onClick(a){e&&(a.currentTarget instanceof HTMLLabelElement&&a.preventDefault(),e.click(),e.focus({preventScroll:!0}))}}},d.createElement(w.Provider,{value:f},y({ourProps:h,theirProps:x,slot:{},defaultTag:Re,name:"Switch.Group"}))))}let Ae="button";function Be(t,r){var e;let n=l.useId(),s=me(),i=ke(),{id:u=s||`headlessui-switch-${n}`,disabled:c=i||!1,checked:f,defaultChecked:h,onChange:x,name:y,value:a,form:m,autoFocus:g=!1,...O}=t,k=l.useContext(w),[G,H]=l.useState(null),K=l.useRef(null),q=Se(K,r,k===null?null:k.setSwitch,H),b=Fe(h),[v,j]=Te(f,x,b??!1),V=I(),[E,P]=l.useState(!1),C=S(()=>{P(!0),j?.(!v),V.nextFrame(()=>{P(!1)})}),W=S(p=>{if(be(p.currentTarget))return p.preventDefault();p.preventDefault(),C()}),z=S(p=>{p.key===D.Space?(p.preventDefault(),C()):p.key===D.Enter&&Me(p.currentTarget)}),J=S(p=>p.preventDefault()),Q=he(),X=Ee(),{isFocusVisible:T,focusProps:Y}=pe({autoFocus:g}),{isHovered:F,hoverProps:Z}=ge({isDisabled:c}),{pressed:M,pressProps:ee}=xe({disabled:c}),te=l.useMemo(()=>({checked:v,disabled:c,hover:F,focus:T,active:M,autofocus:g,changing:E}),[v,F,T,M,c,E,g]),re=Ne({id:u,ref:q,role:"switch",type:ye(t,G),tabIndex:t.tabIndex===-1?0:(e=t.tabIndex)!=null?e:0,"aria-checked":v,"aria-labelledby":Q,"aria-describedby":X,disabled:c||void 0,autoFocus:g,onClick:W,onKeyUp:z,onKeyPress:J},Y,Z,ee),ae=l.useCallback(()=>{if(b!==void 0)return j?.(b)},[j,b]),ne=L();return d.createElement(d.Fragment,null,y!=null&&d.createElement(Le,{disabled:c,data:{[y]:a||"on"},overrides:{type:"checkbox",checked:v},form:m,onReset:ae}),ne({ourProps:re,theirProps:O,slot:te,defaultTag:Ae,name:"Switch"}))}let Oe=je(Be),Ge=_e,He=de,Ke=$e,qe=Object.assign(Oe,{Group:Ge,Label:He,Description:Ke});function nt({show:t,onClose:r,board:e,workspaceMembers:n}){const[s,i]=l.useState([]),[u,c]=l.useState(!1);l.useEffect(()=>{t&&e&&e.members&&i(e.members.map(a=>a.id))},[t,e]);const f=a=>{i(m=>m.includes(a)?m.filter(g=>g!==a):[...m,a])},h=a=>{a.preventDefault(),c(!0),le.post(route("project-hub.boards.sync-members",e.id),{user_ids:s}).then(m=>{N.success("Board access updated successfully"),oe.reload({preserveScroll:!0,onSuccess:()=>{r()},onError:()=>{r(),N.error("Changes saved but page refresh failed. Please reload the page.")}})}).catch(m=>{const g=m.response?.data?.message||"Failed to update board access";N.error(g),c(!1)})},x=a=>a?(a.academician||a.postgraduate||a.undergraduate)?.full_name||a.name:"Unknown User",y=a=>{if(!a)return null;const m=a.academician?.profile_picture||a.postgraduate?.profile_picture||a.undergraduate?.profile_picture;return m?`/storage/${m}`:null};return o.jsx(ie,{show:t,onClose:r,maxWidth:"md",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Manage Board Access"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1 mb-4",children:"Use the toggle to grant or revoke board access for each member."}),o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsx("div",{className:"bg-gray-50 rounded-lg p-2 max-h-80 overflow-y-auto",children:n&&n.length>0?o.jsx("div",{className:"space-y-3",children:n.map(a=>o.jsxs("div",{className:$("flex justify-between items-center p-3 rounded-lg transition-colors duration-200",s.includes(a.id)?"bg-indigo-50 border border-indigo-200":"bg-white border border-gray-100"),children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:y(a)?o.jsx("img",{src:y(a),alt:x(a),className:"h-full w-full object-cover"}):o.jsx("span",{className:"text-gray-500 text-sm",children:x(a).charAt(0)})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:x(a)}),o.jsx("p",{className:"text-xs text-gray-500",children:(a.pivot?.role||"Member").charAt(0).toUpperCase()+(a.pivot?.role||"Member").slice(1)})]})]}),o.jsx(qe,{checked:s.includes(a.id),onChange:()=>f(a.id),disabled:u,className:$("relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",s.includes(a.id)?"bg-indigo-600":"bg-gray-200"),children:o.jsx("span",{"aria-hidden":"true",className:$("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.includes(a.id)?"translate-x-5":"translate-x-0")})})]},a.id))}):o.jsx("div",{className:"text-center p-4",children:o.jsx("p",{className:"text-gray-500",children:"No members available to manage."})})}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(ue,{onClick:r,disabled:u,children:"Cancel"}),o.jsx(ce,{type:"submit",disabled:u,children:u?"Saving...":"Save Changes"})]})]})]})})}export{at as L,nt as M};
