import{r as n,j as e,a as h,b as ee}from"./app-DtwGMIw6.js";import{M as te}from"./MainLayout-BK5sRUfP.js";import{a as se,r as ae,s as re,t as ie,u as ne,F as le,v as ce,q as oe}from"./index-B-tsYz2y.js";import{R as de}from"./RecommendationModal-QJV0bfb7.js";import{R as me}from"./RecommendationDisplay-CzaDRBNh.js";import{F as M}from"./FilterDropdown-wg4oi9tF.js";import{B as xe}from"./BookmarkButton-DpCe66Aj.js";import{u as ue}from"./useRoles-Dkvi5R8k.js";import"./analytics-B60H_cQS.js";import"./react-select.esm-DgFzKhvI.js";import"./index-BGyYozAA.js";const he=({profilesData:c,universitiesList:o,faculties:k,users:g,researchOptions:d,searchQuery:S})=>{var L;const[A,l]=n.useState(!1),[a,m]=n.useState(null),[C,f]=n.useState(!1),[P,E]=n.useState(null),[B,b]=n.useState(!1),[j,I]=n.useState([]),[v,q]=n.useState([]),[p,z]=n.useState(""),[y,F]=n.useState(1),[x,_]=n.useState(!1),N=9,w=n.useRef(null);n.useEffect(()=>{function t(s){w.current&&!w.current.contains(s.target)&&x&&_(!1)}return x&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[x]);const V=t=>{b(!0),ee.get(route("academicians.quick-info",t.academician_id)).then(s=>{s.data&&s.data.academician?(m({...t,...s.data.academician,projects_count:s.data.projects_count||0,grants_count:s.data.grants_count||0,publications_count:s.data.publications_count||0}),l(!0)):(m(t),l(!0)),b(!1)}).catch(s=>{console.error("Error fetching academician detail:",s),m(t),l(!0),b(!1)})},W=t=>{const s=o.find(r=>r.id===t);return s?s.full_name:"Unknown University"},G=()=>(a==null?void 0:a.grants_count)||0,O=()=>(a==null?void 0:a.projects_count)||0,T=()=>(a==null?void 0:a.publications_count)||0,D=(t,s)=>{s.preventDefault(),E(t),f(!0)},Q=()=>{f(!1)},H=(()=>{const t=new Set;return c.forEach(s=>{Array.isArray(s.research_expertise)&&s.research_expertise.forEach(r=>{t.add(r)})}),Array.from(t).map(s=>{const r=d.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===s);return r?{value:s,label:`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`}:{value:s,label:`${s}`}})})(),Y=Array.from(new Set(c.map(t=>t.university))).map(t=>{const s=o.find(r=>r.id===t);return{value:t?t.toString():"",label:s?s.short_name:"Unknown University"}}),J=t=>t===null?"0":t===!0||t==="1"||t===1?"1":t===!1||t==="0"||t===0?"0":"",R=c.filter(t=>{if(!t)return!1;const s=t.university?t.university.toString():"";let r=!0;j.length>0&&(r=Array.isArray(t.research_expertise)&&t.research_expertise.some(Z=>j.includes(Z)));const i=v.length===0||v.includes(s),u=t.availability_as_supervisor,X=J(u);return r&&i&&(p===""||X===p)}),$=Math.ceil(R.length/N),U=R.slice((y-1)*N,y*N),K=t=>{F(t)};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx("div",{className:"fixed top-20 right-4 z-50 flex items-center space-x-4 lg:hidden",children:e.jsx("button",{onClick:()=>_(!x),className:"bg-blue-600 text-white p-2 rounded-full shadow-lg",children:e.jsx(se,{className:"text-xl"})})}),e.jsxs("div",{ref:w,className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${x?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",e.jsx("button",{onClick:()=>_(!1),className:"text-gray-600 lg:hidden",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{label:"Research Expertise",options:H,selectedValues:j,setSelectedValues:I}),e.jsx(M,{label:"University",options:Y,selectedValues:v,setSelectedValues:q}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Available As Supervisor"}),e.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full pl-4",value:p,onChange:t=>{z(t.target.value),F(1)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]})]})]}),e.jsxs("div",{className:"flex-1 py-6 sm:py-4 lg:py-0 px-4",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:U.map(t=>{var s;return e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-[10px] font-semibold px-2.5 py-0.5 rounded-full",children:((s=o.find(r=>r.id===t.university))==null?void 0:s.short_name)||"Unknown University"}),e.jsx("div",{className:"h-32",children:e.jsx("img",{src:t.background_image!==null?`/storage/${t.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Banner",className:"object-cover w-full h-full"})}),e.jsx("div",{className:"flex justify-center -mt-12",children:e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg",children:e.jsx("img",{src:t.profile_picture!==null?`/storage/${t.profile_picture}`:"/storage/profile_pictures/default.jpg",alt:"Profile",className:"w-full h-full object-cover"})}),t.verified===1&&e.jsxs("div",{className:"absolute bottom-0 right-0 p-1 rounded-full group cursor-pointer",children:[e.jsx("div",{className:"flex items-center justify-center w-7 h-7 bg-blue-500 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"absolute bottom-8 right-0 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-3 py-2 shadow-lg z-10 w-48",children:["This account is verified by ",W(t.university)]})]})]})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("h2",{className:"text-lg font-semibold truncate px-6",children:t.full_name}),e.jsx("p",{className:"text-gray-500 text-sm px-6",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"2.5rem"},children:Array.isArray(t.research_expertise)&&t.research_expertise.length>0?(()=>{const r=t.research_expertise[0],i=d.find(u=>`${u.field_of_research_id}-${u.research_area_id}-${u.niche_domain_id}`===r);return i?`${i.field_of_research_name} - ${i.research_area_name} - ${i.niche_domain_name}`:"Unknown"})():"No Field of Research or Expertise"}),e.jsx("p",{className:"text-gray-500 text-sm",children:t.current_position?t.current_position:"No Position"}),e.jsxs("div",{className:"mt-2 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>V(t),className:"bg-blue-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-blue-600",children:"Quick Info"}),e.jsx(h,{href:route("academicians.show",t.url),className:"bg-green-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-green-600",children:"Full Profile"})]})]}),e.jsxs("div",{className:"flex justify-around items-center mt-6 py-4 border-t px-10",children:[e.jsx("a",{href:"#",className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",title:"Add Friend",children:e.jsx(ae,{className:"text-xl"})}),e.jsx("a",{href:"#",className:"text-gray-500 text-lg hover:text-green-700",title:"Share",children:e.jsx(re,{className:"text-xl"})}),e.jsx("a",{href:"#",onClick:r=>D(t,r),className:"text-gray-500 text-lg hover:text-yellow-500",title:"Recommend",children:e.jsx(ie,{className:"text-xl"})}),e.jsx(xe,{bookmarkableType:"academician",bookmarkableId:t.id,category:"Academicians",iconSize:"text-xl",tooltipPosition:"top"})]})]},t.id)})}),$>1&&e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:$},(t,s)=>e.jsx("button",{onClick:()=>K(s+1),className:`px-4 py-2 border rounded ${y===s+1?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:s+1},s))}),U.length===0&&e.jsx("div",{className:"flex justify-center items-center h-48 w-full",children:e.jsxs("div",{className:"text-center p-6 bg-gray-100 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Matching Academicians"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or search criteria to find academicians."})]})}),A&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>l(!1),children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg relative max-h-[80vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[B?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading academician information..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 ",children:a.full_name}),e.jsx("hr",{className:"border-t border-gray-800 mb-4"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Short Bio"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:a.bio||"Not Provided"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Research Interest"}),e.jsx("div",{className:"",children:(()=>{let t=a.research_expertise||[];if(Array.isArray(t)&&t.length>0){const s=t[0],r=d.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===s);if(r)return e.jsxs("p",{className:"text-gray-600",children:[r.field_of_research_name," - ",r.research_area_name," - ",r.niche_domain_name]})}return e.jsx("p",{className:"text-gray-600",children:"Not Provided"})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Style of Supervision"}),e.jsxs("p",{className:"text-gray-600",children:[a.style_of_supervision||"Not Specified",a.style_of_supervision==="Independent"&&" - Students work autonomously with minimal guidance.",a.style_of_supervision==="Collaborative"&&" - Supervisor and student work together as partners.",a.style_of_supervision==="Structured"&&" - Clear objectives, regular meetings, and defined milestones.",a.style_of_supervision==="Hands-off"&&" - Limited intervention, student-driven research.",a.style_of_supervision==="Hands-on"&&" - Close guidance and detailed feedback at every stage."]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Supervised Student"}),e.jsx("p",{className:"text-gray-600",children:a.supervised_students_count||"Not Provided"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Available Grant and Project"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-600",children:[G()+O()," Projects/Grants"]}),e.jsxs(h,{href:route("academicians.projects",a.url),className:"mt-2 self-start text-xs px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200 flex items-center",children:[e.jsx("span",{children:"View Projects"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Publication"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-600",children:[T()," Publications"]}),e.jsxs(h,{href:route("academicians.publications",a.url),className:"mt-2 self-start text-xs px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200 flex items-center",children:[e.jsx("span",{children:"View Publications"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Recommendation by Others"}),e.jsx(me,{academicianId:a.academician_id})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Connect via"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(h,{href:route("email.compose",{to:(L=g.find(t=>t.unique_id===a.academician_id))==null?void 0:L.email}),className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",title:"Send Email",children:e.jsx(ne,{})}),e.jsx("a",{href:a.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-red-700",title:"Google Scholar",children:e.jsx(le,{})}),e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-green-700",title:"Website",children:e.jsx(ce,{})}),e.jsx("a",{href:a.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-blue-800",title:"LinkedIn",children:e.jsx(oe,{})})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>l(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]}),C&&P&&e.jsx(de,{academician:P,onClose:()=>f(!1),onSuccess:Q})]})},Ce=({academicians:c,universities:o,faculties:k,users:g,researchOptions:d,searchQuery:S})=>{const{isAdmin:A,isPostgraduate:l,isUndergraduate:a,isFacultyAdmin:m,isAcademician:C}=ue();return e.jsx(te,{title:"Academician",isPostgraduate:l,isUndergraduate:a,isFacultyAdmin:m,children:e.jsx(he,{profilesData:c,universitiesList:o,faculties:k,users:g,researchOptions:d,searchQuery:S||""})})};export{Ce as default};
