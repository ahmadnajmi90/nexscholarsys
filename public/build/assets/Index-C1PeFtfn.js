import{r as j,j as e,Y as k,a as y}from"./app-6KcAPae7.js";import{M as C}from"./MainLayout--yDNTBjU.js";import{f as L,n as m}from"./index-Ce5Il87X.js";import{V as b}from"./index-DjCDrVl_.js";import"./tooltip-B6pzDCUw.js";import"./purify.es-9JUW7zMc.js";import"./house-MPKGRuPU.js";import"./createLucideIcon-Dg0NKHwN.js";import"./zap-Dc37O7Yf.js";import"./users-BAT0uBt8.js";import"./folder-open-BOmTEEi1.js";import"./settings-nBn8_I0z.js";import"./useRoles-TTN5TAPq.js";import"./chevron-left-Dg3HzLsn.js";import"./proxy-6rU6RlCr.js";import"./user-round-Gn5hLxMS.js";import"./clipboard-list-CkK1RN7u.js";import"./dollar-sign-DG-1hJGs.js";import"./calendar-CKvWh2Fc.js";import"./file-text-CldtH22C.js";import"./message-square-DOAr_Oao.js";import"./graduation-cap-DsZZvawH.js";import"./building-BAo4hBJ-.js";import"./Dropdown-D9Vn_Uo-.js";import"./transition-CSwR4vyx.js";import"./sparkles-CxsEXFgy.js";import"./bookmark-CKOvIcZS.js";import"./folder-kanban-WJg5ri3Z.js";import"./building-2-BOmvfrGU.js";import"./database-CHeJJryD.js";import"./shield-Di9h5Q6c.js";import"./index-DaBARm37.js";import"./analytics-BQ374C1C.js";import"./iconBase-n0Q-2a7D.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-CBfrqCZ4.js";import"./ThreadPane-DyCNvQZd.js";import"./Modal-CJvMaQW5.js";import"./dialog-CwJFq24I.js";import"./index-JAD3o4sP.js";import"./scroll-area-CgKTi-4v.js";import"./index-C3-aQ1HP.js";import"./index-C_9bpbuH.js";import"./index-Kc-fmclX.js";import"./index-uYzWXxXP.js";import"./index-BdQq_4o_.js";import"./format-BOijCLBA.js";import"./en-US-DIdCsyf3.js";import"./button-CrdDRXAu.js";import"./download-BwAogcNS.js";import"./x-RVcZvC1Z.js";import"./isSameDay-BHs4V-zU.js";import"./constructNow-6bIQB1GK.js";import"./addDays-KHeCUDUr.js";import"./PrimaryButton-BDNKdwtj.js";import"./SecondaryButton-BMSD-Ano.js";import"./search-KJO1iUQT.js";import"./circle-check-big-DONTGj_Q.js";import"./chevron-right-BAu-tXgn.js";import"./index-Chjiymov.js";import"./dialog-RPNwQkV0.js";import"./index-BT3GCukP.js";import"./index-4gt4wYEX.js";import"./index-CANaiMod.js";import"./index-Cxfb7wM5.js";import"./index-D5o-Dx5T.js";import"./briefcase-SOOxWO71.js";import"./user-CAcetcbZ.js";import"./index-CNVNpKw3.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-CSjGVC7d.js";import"./index-Bby0leWS.js";const x=({text:l,maxLength:o=100,className:a})=>{if(!l)return e.jsx("p",{className:a,children:"No content available"});const s=l.replace(/<[^>]*>/g,""),c=s.length>o?s.substring(0,o)+"...":s;return e.jsx("p",{className:a,children:c})},_=({bookmark:l,onRemove:o})=>{const a=()=>{const{bookmarkable:s,bookmarkable_type:c}=l;if(!s)return e.jsx("div",{className:"p-4 bg-red-100 rounded-md",children:e.jsx("p",{className:"text-red-600",children:"This item is no longer available"})});switch(c){case"App\\Models\\Academician":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:s.profile_picture?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3 object-cover",alt:s.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.current_position})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("academicians.show",s.url),className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\Undergraduate":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:s.profile_picture?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3 object-cover",alt:s.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Undergraduate Student"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("undergraduates.show",s.url),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\Postgraduate":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{src:s.profile_picture?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",className:"w-12 h-12 rounded-full mr-3 object-cover",alt:s.full_name}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Postgraduate Student"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("a",{href:route("postgraduates.show",s.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Profile"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostGrant":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium mr-2",children:"Grant"})}),e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.title}),e.jsx(x,{text:s.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("funding.show.grant",s.url),className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition",children:"View Grant"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostScholarship":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full font-medium mr-2",children:"Scholarship"})}),e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.title}),e.jsx(x,{text:s.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("funding.show.scholarship",s.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Scholarship"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostProject":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.title}),e.jsx(x,{text:s.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("projects.show",s.url),className:"px-3 py-1 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition",children:"View Project"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\PostEvent":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.event_name}),e.jsx(x,{text:s.description,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("events.show",s.url),className:"px-3 py-1 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600 transition",children:"View Event"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});case"App\\Models\\CreatePost":return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.title}),e.jsx(x,{text:s.content,className:"text-sm text-gray-600 line-clamp-2"}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("a",{href:route("posts.show",s.url),className:"px-3 py-1 bg-indigo-500 text-white text-sm rounded hover:bg-indigo-600 transition",children:"View Post"}),e.jsx("button",{onClick:()=>o(l.id),className:"text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})]});default:return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("p",{className:"text-gray-600",children:"Unknown bookmark type"}),e.jsx("button",{onClick:()=>o(l.id),className:"mt-2 text-red-500 hover:text-red-700","aria-label":"Remove bookmark",children:e.jsx(m,{})})]})}};return e.jsx("div",{className:"mb-4",children:a()})};function ze({auth:l,bookmarks:o}){const[a,s]=j.useState(o),[c,f]=j.useState("all"),[n,w]=j.useState(""),v=(()=>{const t={...a};return t.Funding&&t.Grants&&(t.Funding=[...t.Funding,...t.Grants],delete t.Grants),Object.keys(t).sort()})(),N=async t=>{try{await y.delete(route("bookmarks.destroy",t));const i={...a};Object.keys(i).forEach(r=>{i[r]=i[r].filter(u=>u.id!==t),i[r].length===0&&delete i[r]}),s(i),b.success("Bookmark removed successfully")}catch(i){console.error("Error removing bookmark:",i),b.error("Failed to remove bookmark")}},p=(()=>{if(n===""&&c==="all"){const r={...a};return r.Funding&&r.Grants&&(r.Funding=[...r.Funding,...r.Grants],delete r.Grants),r}const t={};return(c==="all"?Object.keys(a):[c]).forEach(r=>{a[r]&&(n===""?t[r]=a[r]:(t[r]=a[r].filter(u=>{const d=u.bookmarkable;if(!d)return!1;switch(u.bookmarkable_type){case"App\\Models\\Academician":return d.full_name.toLowerCase().includes(n.toLowerCase())||d.current_position&&d.current_position.toLowerCase().includes(n.toLowerCase());case"App\\Models\\Undergraduate":case"App\\Models\\Postgraduate":return d.full_name.toLowerCase().includes(n.toLowerCase());case"App\\Models\\PostGrant":case"App\\Models\\PostScholarship":case"App\\Models\\PostProject":return d.title.toLowerCase().includes(n.toLowerCase())||d.description.toLowerCase().includes(n.toLowerCase());case"App\\Models\\PostEvent":return d.event_name.toLowerCase().includes(n.toLowerCase())||d.description.toLowerCase().includes(n.toLowerCase());case"App\\Models\\CreatePost":return d.title.toLowerCase().includes(n.toLowerCase())||d.content.toLowerCase().includes(n.toLowerCase());default:return!1}}),t[r].length===0&&delete t[r]))}),t.Funding&&t.Grants&&(t.Funding=[...t.Funding,...t.Grants],delete t.Grants),t})(),h=Object.values(a).reduce((t,i)=>t+i.length,0),g=Object.values(p).reduce((t,i)=>t+i.length,0);return e.jsxs(C,{auth:l,title:"My Bookmarks",children:[e.jsx(k,{title:"My Bookmarks"}),e.jsx("div",{children:e.jsx("div",{className:"max-w-7xl mx-auto ",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm",children:e.jsxs("div",{className:"p-6 md:p-6 lg:p-0 lg:pr-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"Filter by:"}),e.jsx(L,{className:"text-gray-500 mr-2"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5",value:c,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),v.map(t=>{let i=0;return t==="Funding"?i=(a.Funding||[]).length+(a.Grants||[]).length:i=a[t]?.length||0,e.jsxs("option",{value:t,children:[t," (",i,")"]},t)})]})]}),e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("input",{type:"text",className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 pl-10",placeholder:"Search bookmarks...",value:n,onChange:t=>w(t.target.value)}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})})]})]}),e.jsx("div",{className:"mb-6 text-gray-600",children:g===h?e.jsxs("p",{children:["Showing all ",h," bookmarks"]}):e.jsxs("p",{children:["Showing ",g," of ",h," bookmarks"]})}),Object.keys(p).length===0?e.jsxs("div",{className:"py-10 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bookmarks found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n||c!=="all"?"Try adjusting your filters or search term":"Start adding bookmarks by clicking the bookmark icon on profiles, posts, events, projects, or grants."})]}):Object.keys(p).sort().map(t=>{let i=p[t].length;return t==="Funding"&&(i=p[t].length),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 pb-2 border-b",children:[t," (",i,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p[t].map(r=>e.jsx(_,{bookmark:r,onRemove:N},r.id))})]},t)})]})})})})]})}export{ze as default};
