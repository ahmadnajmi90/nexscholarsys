import{r as s,j as t,Y as C,a as d}from"./app-BfGWvB7w.js";import{M as E}from"./MainLayout-4268IGPQ.js";import{T as U,a as V,b as u,c}from"./tabs-CRJsscDC.js";import{c as y}from"./index-BJH3I2kF.js";import{l as A}from"./logError-D4ezqrCx.js";import F from"./PotentialSupervisorList-rJBKlMv_.js";import Y from"./RequestStatusList-Bij3kNqo.js";import k from"./RequestDetailCard-pKHqHKzv.js";import z from"./ManageSupervisorPanel-B_fsDHoh.js";import B from"./ProposalModal-BQsXy9O5.js";import G from"./RelationshipDetailModal-CChWAvT1.js";import"./house-NZyoQ2Gd.js";import"./createLucideIcon-Czp2GFly.js";import"./zap-Cw9F8qzn.js";import"./users-ZGU2Nc7F.js";import"./folder-open-D5Fqauh0.js";import"./settings-Brw_LBzQ.js";import"./useRoles-DTgiufjA.js";import"./chevron-left-CA2Vc_Fb.js";import"./proxy-BK-7vKaj.js";import"./user-round-RE_N2eX7.js";import"./clipboard-list-BYkGs1br.js";import"./dollar-sign-D41u08oN.js";import"./calendar-CbxFMwGp.js";import"./file-text-kQD_s7cs.js";import"./message-square-D2KqPL-R.js";import"./graduation-cap-Di4TbpZt.js";import"./building-MPGUl8Te.js";import"./Dropdown-CjvO5Ia5.js";import"./transition-Da2sQ5nr.js";import"./sparkles-DqVAnQpQ.js";import"./building-2-B342a_fD.js";import"./database-BK3F8EUr.js";import"./shield-ykj2ZmOn.js";import"./index-D0QXYS-s.js";import"./analytics-BQ374C1C.js";import"./Modal-DFFVucdS.js";import"./dialog-CgKOv2f-.js";import"./PrimaryButton-DpeW9_ss.js";import"./SecondaryButton-h1KnshBt.js";import"./x-D1Znm3Ot.js";import"./briefcase-CMlBsN0j.js";import"./user-B0PU8Qxt.js";import"./index-ateNRHzS.js";import"./index-YHrrFQIB.js";import"./index-0yfP_vfc.js";import"./index-DtFdHnhw.js";import"./index-KEiRbh2J.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";import"./card-D-wjmK2K.js";import"./button-Cq3fupve.js";import"./formatDistanceToNow-GKXiLTrL.js";import"./constructNow-DtVD-0hX.js";import"./en-US-DNUEYIb-.js";import"./book-open-D4-ULN8R.js";import"./folder-kanban-D3d7krQB.js";import"./user-plus-dYTN4oLN.js";import"./loader-circle-DpHWmCNd.js";import"./trash-2-CDx9I4PU.js";import"./badge-CZPp8yh3.js";import"./index-Dp3B9jqt.js";import"./avatar-DBW4jV_K.js";import"./separator-BtMPuOoi.js";import"./clock-3-dZD22k7L.js";import"./message-circle-CqMKxsYR.js";import"./circle-x-D2tUwjYy.js";import"./circle-check-CnmNGI3n.js";import"./AttachmentPreviewModal-BiCcSrvb.js";import"./scroll-area-DKiTudyr.js";import"./ThreadPane-C6vXaian.js";import"./AcceptSupervisorOfferModal-Ck9r6dvP.js";import"./dialog-7Smu-saY.js";import"./index-Dm_a-pHP.js";import"./Combination-dxNIfu4q.js";import"./tslib.es6-CmEaCU22.js";import"./label-Bp8WiQ9s.js";import"./checkbox-D8L0p47e.js";import"./index-CHD9kPCG.js";import"./check-BlTRIq3i.js";import"./alert-D8ZQ_e9E.js";import"./circle-alert-BWui1FBz.js";import"./video-Bu4bIDXU.js";import"./calendar-clock-DZUDxLpr.js";import"./external-link-3EsMfOIN.js";import"./input-B-f-1RUn.js";import"./textarea-D8NeQnrM.js";import"./lightbulb-CQ0SCZKL.js";import"./cloud-upload-CEFOJ4bN.js";import"./paperclip-syelXQtU.js";import"./history-Bc5xRMrp.js";function Me(){const[R,x]=s.useState(()=>sessionStorage.getItem("openRequestId")?"status":"potential"),[q,b]=s.useState([]),[v,N]=s.useState([]),[g,w]=s.useState([]),[a,h]=s.useState(!0),[I,p]=s.useState(!1),[M,n]=s.useState(null),[l,o]=s.useState(null),[m,r]=s.useState(null),[f,P]=s.useState(()=>{const e=sessionStorage.getItem("openRequestId");return e?(sessionStorage.removeItem("openRequestId"),e):null}),i=async()=>{h(!0);try{const[e,L,T]=await Promise.all([d.get(route("supervision.shortlist.index")),d.get(route("supervision.requests.index")),d.get(route("supervision.relationships.index"))]),S=L.data.data||[];if(b(e.data.data||[]),N(S),w(T.data.data||[]),f){const j=S.find(O=>String(O.id)===String(f));j&&o(j),P(null)}}catch(e){A(e,"Supervision loadData"),y.error("Failed to load supervision data")}finally{h(!1)}};s.useEffect(()=>{i()},[]);const D=g.some(e=>e.status==="active");return t.jsxs(E,{title:"My Supervisor",children:[t.jsx(C,{title:"My Supervisor"}),t.jsxs("div",{className:"max-w-7xl mx-auto pb-6",children:[D?t.jsx(z,{relationships:g,reload:i,onOpenDetail:e=>{r(e),o(null)},onOpenMeetings:e=>{r(e),o(null)}}):t.jsxs(U,{value:R,onValueChange:x,className:"w-full space-y-4",children:[t.jsxs(V,{className:"grid w-full grid-cols-2 md:grid-cols-3 bg-gray-100 p-1 rounded-lg h-12",children:[t.jsx(u,{value:"potential",className:"data-[state=active]:bg-white data-[state=active]:text-gray-900 data-[state=active]:shadow-sm data-[state=inactive]:text-gray-600 rounded-md transition-all py-2",children:"Potential Supervisors"}),t.jsx(u,{value:"status",className:"data-[state=active]:bg-white data-[state=active]:text-gray-900 data-[state=active]:shadow-sm data-[state=inactive]:text-gray-600 rounded-md transition-all py-2",children:"Proposal Status"}),t.jsx(u,{value:"manage",disabled:!0,className:"data-[state=active]:bg-white data-[state=active]:text-gray-900 data-[state=active]:shadow-sm data-[state=inactive]:text-gray-400 rounded-md transition-all py-2",children:"Manage Supervisor"})]}),t.jsx(c,{value:"potential",children:a?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Loading potential supervisors..."})]})}):t.jsx(F,{shortlist:q,requests:v,reload:i,isLoading:a,onRequestSupervisor:e=>{n(e),p(!0)},onViewRequest:e=>{o(e),r(null),x("status")},onRemoveSuccess:()=>y.success("Removed from potential supervisors")})}),t.jsx(c,{value:"status",children:a?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Loading your requests..."})]})}):t.jsx(Y,{requests:v,reload:i,onOpenDetail:e=>{o(e),r(null)}})}),t.jsx(c,{value:"manage",children:t.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center text-gray-500",children:"No supervisors yet."})})]}),t.jsx(B,{isOpen:I,onClose:()=>{p(!1),n(null)},supervisor:M,onSubmitted:()=>{p(!1),n(null),i()}}),l&&!m&&t.jsx(k,{request:l,onClose:()=>{o(null)},onUpdated:i}),m&&t.jsx(G,{request:l,relationship:m,onClose:()=>{o(null),r(null)},onUpdated:i})]})]})}export{Me as default};
