import{W as _,r as p,j as e}from"./app-TDCK3Dw0.js";import{M as C}from"./MainLayout-CUyFbL4l.js";import"./index-BCI782Or.js";function S({postGrant:l,auth:c,isPostgraduate:h}){var u,x,g;const{data:a,setData:s,post:b,processing:j,errors:n}=_({title:l.title||"",description:l.description||"",image:l.image||null,post_status:l.post_status||"draft",grant_status:l.grant_status||"open",category:l.category||"",tags:l.tags?JSON.parse(l.tags):[],sponsored_by:l.sponsored_by||"",location:l.location||"",email:l.email||"",contact_number:l.contact_number||"",purpose:l.purpose||"find_pgstudent",start_date:l.start_date||"",end_date:l.end_date||"",budget:l.budget||"",eligibility_criteria:l.eligibility_criteria||"",is_featured:l.is_featured||!1,application_url:l.application_url||"",attachment:l.attachment||null}),[o,f]=p.useState(!1),[d,m]=p.useState(""),y=()=>{var t;d.trim()!==""&&!((t=a.tags)!=null&&t.includes(d))&&(s("tags",[...a.tags||[],d]),m(""))},v=t=>{var i;s("tags",(i=a.tags)==null?void 0:i.filter(r=>r!==t))},N=async t=>{t.preventDefault();const i=new FormData;Object.keys(a).forEach(r=>{r==="image"||r==="attachment"?(a[r]instanceof File||typeof a[r]=="string")&&i.append(r,a[r]):Array.isArray(a[r])?i.append(r,JSON.stringify(a[r])):i.append(r,a[r])}),console.log("Form Data Contents:");for(let r of i.entries())console.log(r[0]+": "+r[1]);b(route("post-grants.update",l.id),{data:i,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Grant updated successfully!")},onError:r=>{console.error("Error updating grant:",r),alert("Failed to update the grant. Please try again.")}})};return e.jsx(C,{title:"",isPostgraduate:h,children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:N,className:"bg-white p-6 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Edit Grant"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:t=>s("title",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter grant title"}),n.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a.description,onChange:t=>s("description",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter description"}),n.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Post Status"}),e.jsxs("select",{value:a.post_status,onChange:t=>s("post_status",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Grant Status"}),e.jsxs("select",{value:a.grant_status,onChange:t=>s("grant_status",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Start Date"}),e.jsx("input",{type:"date",value:a.start_date,onChange:t=>s("start_date",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"End Date"}),e.jsx("input",{type:"date",value:a.end_date,onChange:t=>s("end_date",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Sponsored By"}),e.jsx("input",{type:"text",value:a.sponsored_by,onChange:t=>s("sponsored_by",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter sponsor"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 font-medium",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:a.category,onChange:t=>s("category",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Category"}),e.jsx("option",{value:"Fundamental Research",children:"Fundamental Research"}),e.jsx("option",{value:"Applied Research",children:"Applied Research"}),e.jsx("option",{value:"Fundamental + Applied",children:"Fundamental + Applied"}),e.jsx("option",{value:"Knowledge Transfer Program (KTP)",children:"Knowledge Transfer Program (KTP)"}),e.jsx("option",{value:"CSR (Corporate Social Responsibility)",children:"CSR (Corporate Social Responsibility)"})]}),n.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.category})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Purpose"}),e.jsxs("select",{value:a.purpose,onChange:t=>s("purpose",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"find_pgstudent",children:"Find Postgraduate Student"}),e.jsx("option",{value:"find_collaboration",children:"Find Collaboration"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Location"}),e.jsx("input",{type:"text",value:a.location,onChange:t=>s("location",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter location"}),n.location&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.location})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Email"}),e.jsx("input",{type:"email",value:a.email,onChange:t=>s("email",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter email"}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:a.email===c.email,onChange:t=>{t.target.checked?s("email",c.email):s("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsxs("label",{htmlFor:"usePersonalEmail",className:"ml-2 text-gray-700",children:["Use personal email (",c.email,")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Contact Number"}),e.jsx("input",{type:"text",value:a.contact_number,onChange:t=>s("contact_number",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter contact number"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>s("image",t.target.files[0]),className:"w-full rounded-lg border-gray-200 p-2 text-sm"}),l.image&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Image:"," ",e.jsx("a",{href:`/storage/${l.image}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Image"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:t=>s("attachment",t.target.files[0]),className:"w-full rounded-lg border-gray-200 p-2 text-sm"}),l.attachment&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Attachment:"," ",e.jsx("a",{href:`/storage/${l.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Budget"}),e.jsx("input",{type:"number",value:a.budget,onChange:t=>s("budget",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter budget (e.g., 5000.00)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Eligibility Criteria"}),e.jsx("textarea",{value:a.eligibility_criteria,onChange:t=>s("eligibility_criteria",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter eligibility criteria"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Application URL"}),e.jsx("input",{type:"url",value:a.application_url,onChange:t=>s("application_url",t.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter application URL"}),n.application_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.application_url})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"tags",className:"block text-gray-700 font-medium",children:"Tags"}),e.jsx("button",{type:"button",className:"w-full text-left border rounded-lg p-4 mt-2 text-sm bg-white",onClick:()=>f(!o),children:"Select or Add Tags"}),o&&e.jsxs("div",{className:"absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col p-2 max-h-40 overflow-y-auto",children:[e.jsxs("label",{className:"inline-flex items-center py-1",children:[e.jsx("input",{type:"checkbox",name:"tags",value:"Artificial Intelligence",checked:(u=a.tags)==null?void 0:u.includes("Artificial Intelligence"),onChange:t=>{const i=t.target.value;s("tags",t.target.checked?[...a.tags||[],i]:a.tags.filter(r=>r!==i))},className:"form-checkbox rounded text-blue-500"}),e.jsx("span",{className:"ml-2",children:"Artificial Intelligence"})]}),e.jsxs("label",{className:"inline-flex items-center py-1",children:[e.jsx("input",{type:"checkbox",name:"tags",value:"Quantum Computing",checked:(x=a.tags)==null?void 0:x.includes("Quantum Computing"),onChange:t=>{const i=t.target.value;s("tags",t.target.checked?[...a.tags||[],i]:a.tags.filter(r=>r!==i))},className:"form-checkbox rounded text-blue-500"}),e.jsx("span",{className:"ml-2",children:"Quantum Computing"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 p-2 mt-2",children:[e.jsx("input",{type:"text",value:d,onChange:t=>m(t.target.value),placeholder:"Add custom tag",className:"w-full p-2 border rounded-md text-sm"}),e.jsx("button",{type:"button",onClick:y,className:"mt-2 w-full bg-blue-500 text-white p-2 rounded-md text-sm hover:bg-blue-600",children:"Add Tag"})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(g=a.tags)==null?void 0:g.map(t=>e.jsxs("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[t,e.jsx("button",{type:"button",onClick:()=>v(t),className:"text-red-500 hover:text-red-700",children:"×"})]},t))}),n.tags&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:n.tags})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Featured Grant"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"is_featured",value:"true",checked:a.is_featured===1,onChange:()=>s("is_featured",1),className:"form-radio h-5 w-5 text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Yes"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"is_featured",value:"false",checked:a.is_featured===0,onChange:()=>s("is_featured",0),className:"form-radio h-5 w-5 text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-700",children:"No"})]})]}),n.is_featured&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.is_featured})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"inline-block rounded-lg bg-gray-200 px-5 py-3 text-sm font-medium text-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j,className:"inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Save"})]})]})})})}export{S as default};
