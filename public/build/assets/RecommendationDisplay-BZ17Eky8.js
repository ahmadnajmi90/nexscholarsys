import{r as a,a as N,j as t}from"./app-BmIvASSa.js";import{E as y,G as v,a as w,H as C}from"./index-Jy5108Fp.js";function R({academicianId:n}){const[i,c]=a.useState([]),[d,r]=a.useState(!0),[l,x]=a.useState(null),[s,u]=a.useState(null),[o,g]=a.useState({averages:{},counts:{}});if(a.useEffect(()=>{n&&(r(!0),N.get(route("academicians.recommendations.get",n)).then(e=>{e.data&&e.data.recommendations?c(e.data.recommendations):c([]),e.data&&e.data.ratings&&g(e.data.ratings),r(!1)}).catch(e=>{console.error("Error fetching recommendations:",e),x("Failed to load recommendations"),r(!1)}))},[n]),d)return t.jsx("div",{className:"flex justify-center py-4",children:t.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})});if(l)return t.jsx("p",{className:"text-red-500 text-sm",children:l});if(!i||i.length===0)return t.jsx("p",{className:"text-gray-600",children:"No recommendations yet"});const h=[{id:"communication",icon:t.jsx(y,{size:28,className:"text-blue-500"})},{id:"support",icon:t.jsx(v,{size:28,className:"text-pink-500"})},{id:"expertise",icon:t.jsx(w,{size:28,className:"text-yellow-500"})},{id:"responsiveness",icon:t.jsx(C,{size:28,className:"text-red-500"})}],f=e=>o.counts&&o.counts[e]?o.counts[e]:0,p=e=>{u(s===e?null:e)},m=s?i.filter(e=>e[`${s}_comment`]&&e[`${s}_comment`].trim()!==""):[];return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-start gap-6 w-full",children:h.map(e=>t.jsxs("div",{onClick:()=>p(e.id),className:"flex items-center cursor-pointer transition-transform duration-200 hover:scale-105",children:[t.jsx("div",{className:`p-1 rounded-full ${s===e.id?"bg-gray-100":""}`,children:e.icon}),t.jsx("span",{className:"text-gray-700 text-lg font-medium ml-1",children:f(e.id)})]},e.id))}),s&&t.jsx("div",{className:"mt-4 transition-all duration-300",children:m.length>0?t.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto px-0 py-2",children:m.map((e,j)=>t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:[t.jsx("p",{className:"text-gray-700",children:e[`${s}_comment`]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.created_at).toLocaleDateString()})]},j))}):t.jsx("p",{className:"text-gray-500 text-sm italic p-2 text-center",children:"No comments yet for this category"})})]})}export{R};
