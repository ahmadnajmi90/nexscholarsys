import{q as U,W as $,r as c,j as e,y as j}from"./app-DycluJDi.js";import{M as D}from"./MainLayout-B6p5qXtx.js";import{u as R}from"./useRoles-Ex28E3oj.js";import"./house-DuQe23QT.js";import"./createLucideIcon-D0KJwFBT.js";import"./zap-DV9Acmiq.js";import"./users-B5watpD6.js";import"./folder-open-Bgm5Yl-Q.js";import"./settings-CcnxK-77.js";import"./chevron-left-CCTwwUf3.js";import"./proxy-BQWTDGOX.js";import"./user-round-D0HJxKcP.js";import"./clipboard-list-BHEDK9c8.js";import"./dollar-sign-DggTktnR.js";import"./calendar-B99WzEhS.js";import"./file-text-CM_fgsBl.js";import"./message-square-DJV6gM-2.js";import"./graduation-cap-D5C30QRj.js";import"./building-0UgdvqyI.js";import"./Dropdown-YylP5fBo.js";import"./transition-CPF_n0Aj.js";import"./sparkles-BmXWKRKa.js";import"./bookmark-DgZoxyTC.js";import"./folder-kanban-DWpojK_X.js";import"./building-2-D0BlUxRJ.js";import"./database-Bdq9zUMP.js";import"./shield-CJ75fCXR.js";import"./index-D2lR-Ixd.js";import"./analytics-BQ374C1C.js";import"./index-CRoFkAwq.js";import"./index-B8HlzDGM.js";import"./iconBase--qfUO0jU.js";import"./supervisionConstants-BuM5-H5X.js";import"./button-DrpbBg5w.js";import"./utils-D-KgF5mV.js";import"./Modal-B5RxEfWL.js";import"./dialog-BhLoydV6.js";import"./PrimaryButton-BmPLB8rg.js";import"./SecondaryButton-BMDFl-bS.js";import"./x-DMdqOVgw.js";import"./chevron-right-Ccsl5LyU.js";import"./search-B-v2ubcP.js";import"./circle-check-big-CCdWVaOD.js";import"./tooltip-Bjh7jqzi.js";import"./index-CQUljECt.js";import"./index-Cyyfgiou.js";import"./index-CjkJyM6P.js";import"./index-TfP-1Own.js";import"./index-DhTYVmtt.js";import"./index-MS7JGIS8.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-DygBQkXJ.js";import"./index-C_G9iF1W.js";import"./index-Bf3MYqwD.js";import"./briefcase-B4GBZk0m.js";import"./user-gMN38dzl.js";const Me=()=>{const{academicians:i,flash:n,universities:v,faculties:N,researchOptions:b}=U().props;R();const{post:O,processing:w}=$(),[S,k]=c.useState({}),[a,h]=c.useState({}),[o,u]=c.useState(!1),[l,d]=c.useState(!1);c.useEffect(()=>{const t={};i.forEach(s=>{t[s.id]=o}),h(t)},[i,o]);const _=t=>{j.post(route("faculty-admin.verify-academician",t),{},{onStart:()=>{console.log(`Starting verification for academician ID: ${t}`)},onSuccess:s=>{console.log(`Successfully verified academician ID: ${t}`),s.props.flash&&s.props.flash.success?alert(s.props.flash.success):alert("Academician verified successfully!")},onError:s=>{console.error(`Failed to verify academician ID: ${t}`,s),alert("Failed to verify academician.")}})},A=()=>{const t=Object.keys(a).filter(s=>a[s]).map(s=>parseInt(s,10));if(t.length===0){alert("Please select at least one academician to verify.");return}d(!0),console.log("Sending verification request for IDs:",t),j.post(route("faculty-admin.verify-academicians-batch"),{academician_ids:t},{onStart:()=>(console.log("Starting batch verification request"),!0),onSuccess:s=>{console.log("Verification success response:",s),s.props.flash&&s.props.flash.success?alert(s.props.flash.success):alert("Academicians verified successfully!"),h({}),u(!1),d(!1)},onError:s=>{console.error("Verification error:",s),d(!1),alert("Failed to verify academicians: "+(Object.values(s)[0]||"Unknown error"))},onFinish:()=>{console.log("Verification request finished"),d(!1)}})},I=t=>{const s={...a};s[t]=!a[t],h(s);const r=i.every(m=>s[m.id]===!0);u(r)},C=()=>{u(!o)},f=()=>Object.values(a).filter(Boolean).length,V=t=>{const s=v.find(r=>r.id===t);return s?s.full_name:"Unknown University"},E=t=>{const s=N.find(r=>r.id===t);return s?s.name:"Unknown Faculty"},B=t=>{k(s=>({...s,[t]:!s[t]}))},F=t=>t?e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Verified"}):e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Not Verified"});return e.jsx(D,{title:"",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-2 px-4",children:[e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Academicians"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Review and verify academicians in your faculty."})]}),i.length>0&&e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[f()," selected"]}),e.jsx("button",{className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${f()>0?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-300 cursor-not-allowed"}`,onClick:A,disabled:f()===0||l,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Selected"})]})]}),(n==null?void 0:n.success)&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-700",children:n.success})})]})}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:i.length===0?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No academicians pending verification in your faculty."})}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:o,onChange:C,disabled:l}),e.jsx("span",{className:"ml-2",children:"Select All"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academician"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"University & Faculty"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department & Position"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Expertise"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>{var m;const s=S[t.id]||!1,r=a[t.id]||!1;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:r||!1,onChange:()=>I(t.id),disabled:l})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.full_name||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((m=t.user)==null?void 0:m.email)||"N/A"})]})})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:V(t.university)}),e.jsx("div",{className:"text-sm text-gray-500",children:E(t.faculty)})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.department||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:t.current_position||"N/A"})]}),e.jsx("td",{className:"px-6 py-4",children:t.research_expertise&&t.research_expertise.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[t.research_expertise.length," area",t.research_expertise.length!==1?"s":""]}),e.jsx("button",{onClick:()=>B(t.id),className:"text-blue-600 hover:text-blue-800 text-sm",children:s?"Hide details":"Show details"})]}),s&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.research_expertise.map((g,x)=>{const p=b.find(y=>`${y.field_of_research_id}-${y.research_area_id}-${y.niche_domain_id}`===g);return p?e.jsxs("p",{className:"text-sm text-gray-700",children:[x+1,". ",p.field_of_research_name," - ",p.research_area_name," - ",p.niche_domain_name]},x):e.jsxs("p",{className:"text-sm text-gray-700",children:[x+1,". Unknown expertise (ID: ",g,")"]},x)})})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No research expertise specified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F(t.verified)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!t.verified&&e.jsx("button",{className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>_(t.id),disabled:w||l,children:"Verify"})})]},t.id)})})]})})})]})})};export{Me as default};
