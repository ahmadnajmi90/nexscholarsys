import{q as E,W as A,r as b,j as e}from"./app-D7ftwUUd.js";import{T as c,I as d}from"./TextInput-Cdz6q-Mm.js";import{I as n}from"./InputLabel-DAd3wPmZ.js";import{P as M}from"./PrimaryButton-CtvUzs5M.js";import{S as q}from"./react-select.esm-DCRfDQpm.js";import{z as L}from"./transition-CjKl_5ia.js";function J({className:y="",researchOptions:h}){var j,w,N;const s=E().props.academician,{data:l,setData:o,post:g,errors:i,processing:k,recentlySuccessful:C}=A({phone_number:(s==null?void 0:s.phone_number)||"",full_name:(s==null?void 0:s.full_name)||"",profile_picture:(s==null?void 0:s.profile_picture)||"",research_expertise:typeof(s==null?void 0:s.research_expertise)=="string"?JSON.parse(s==null?void 0:s.research_expertise):s==null?void 0:s.research_expertise,field_of_study:(s==null?void 0:s.field_of_study)||"",highest_degree:(s==null?void 0:s.highest_degree)||"",website:(s==null?void 0:s.website)||"",linkedin:(s==null?void 0:s.linkedin)||"",google_scholar:(s==null?void 0:s.google_scholar)||"",researchgate:(s==null?void 0:s.researchgate)||"",bio:(s==null?void 0:s.bio)||"",current_position:(s==null?void 0:s.current_position)||"",department:(s==null?void 0:s.department)||"",availability_as_supervisor:(s==null?void 0:s.availability_as_supervisor)||!1,background_image:(s==null?void 0:s.background_image)||""}),P=r=>{if(r.preventDefault(),!l.profile_picture){alert("Please select a profile picture.");return}const t=new FormData;t.append("profile_picture",l.profile_picture),g(route("role.updateProfilePicture"),{data:t,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile picture updated successfully."),_(),window.location.reload()},onError:a=>{console.error("Error updating profile picture:",a),alert("Failed to update the profile picture. Please try again.")}})},S=r=>{if(r.preventDefault(),!l.background_image){alert("Please select a background image.");return}const t=new FormData;t.append("background_image",l.background_image),g(route("role.updateBackgroundImage"),{data:t,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Background image updated successfully."),p(!1),window.location.reload()},onError:a=>{console.error("Error updating background image:",a),alert("Failed to update the background image. Please try again.")}})},F=r=>{r.preventDefault();const t=new FormData;Object.keys(l).forEach(a=>{a!=="profile_picture"&&(a==="research_expertise"?t.append(a,JSON.stringify(l[a])):a==="availability_as_supervisor"?t.append(a,l[a]===!0?1:0):Array.isArray(l[a])?t.append(a,JSON.stringify(l[a])):t.append(a,l[a]))});for(let[a,u]of t.entries())console.log(`${a}: ${u}`),console.log(`${a}: ${typeof u}`);g(route("role.update"),{data:t,onSuccess:()=>{alert("Profile updated successfully.")},onError:a=>{console.error("Error updating profile:",a),alert("Failed to update the profile. Please try again.")}})},[$,v]=b.useState(!1),D=()=>v(!0),_=()=>v(!1),[I,p]=b.useState(!1),[x,B]=b.useState("profiles");return e.jsxs("div",{className:"pb-8",children:[e.jsxs("div",{className:"w-full bg-white pb-12 shadow-md relative mb-4",children:[e.jsxs("div",{className:"relative w-full h-48 overflow-hidden",children:[e.jsx("img",{src:`/storage/${l.background_image||"default-background.jpg"}`,alt:"Background",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>p(!0),className:"absolute top-4 right-4 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Background Image",children:"✏️"})]}),e.jsxs("div",{className:"relative flex flex-col items-center -mt-16 z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/${l.profile_picture||"default-profile.jpg"}`,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"}),e.jsx("button",{onClick:D,className:"absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Profile Picture",children:"✏️"})]}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:l.full_name}),e.jsxs("p",{className:"text-gray-500",children:[l.highest_degree," in"," ",((w=(j=l.research_expertise)==null?void 0:j.map(r=>{const[t,a,u]=r.split("-"),m=h.find(f=>f.field_of_research_id===parseInt(t)&&f.research_area_id===parseInt(a)&&f.niche_domain_id===parseInt(u));return m?`${m.field_of_research_name} - ${m.research_area_name} - ${m.niche_domain_name}`:"Unknown Field"}))==null?void 0:w.join(", "))||"No Field of Study"]}),e.jsx("p",{className:"text-gray-500",children:l.current_position})]})]})]}),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Background Image"}),e.jsxs("form",{onSubmit:S,children:[e.jsx("input",{type:"file",accept:"image/*",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",onChange:r=>o("background_image",r.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 mr-2",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Profile Picture"}),e.jsxs("form",{onSubmit:P,children:[e.jsx("input",{type:"file",accept:"image/*",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",onChange:r=>o("profile_picture",r.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 mr-2",children:"Save"}),e.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-6xl mx-auto flex space-x-8 px-4 sm:px-6",children:["Profiles","Projects","Works","Teams","Network","Activity","More"].map(r=>e.jsx("button",{className:`py-4 px-3 font-medium text-sm ${x.toLowerCase()===r.toLowerCase()?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>B(r.toLowerCase()),children:r},r))})}),e.jsxs("div",{className:"w-full px-4 py-8",children:[x==="profiles"&&e.jsxs("section",{className:y,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your personal information."})]}),e.jsxs("form",{onSubmit:F,className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"full_name",value:"Full Name (Without Salutation)",required:!0}),e.jsx(c,{id:"full_name",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.full_name,onChange:r=>o("full_name",r.target.value),required:!0,isFocused:!0,autoComplete:"full_name"}),e.jsx(d,{className:"mt-2",message:i.full_name})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"phone_number",value:"Phone Number",required:!0}),e.jsx(c,{id:"phone_number",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.phone_number,onChange:r=>o("phone_number",r.target.value),autoComplete:"tel"}),e.jsx(d,{className:"mt-2",message:i.phone_number})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"highest_degree",value:"Highest Degree",required:!0}),e.jsxs("select",{id:"highest_degree",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.highest_degree||"",onChange:r=>o("highest_degree",r.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select your Highest Degree"}),e.jsx("option",{value:"Certificate",children:"Certificate"}),e.jsx("option",{value:"Diploma",children:"Diploma"}),e.jsx("option",{value:"Bachelor's Degree",children:"Bachelor's Degree"}),e.jsx("option",{value:"Master's Degree",children:"Master's Degree"}),e.jsx("option",{value:"Ph.D.",children:"Ph.D."}),e.jsx("option",{value:"Postdoctoral",children:"Postdoctoral"})]}),e.jsx(d,{className:"mt-2",message:i.highest_degree})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"field_of_study",value:"Field of Study",required:!0}),e.jsx(c,{id:"field_of_study",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.field_of_study,onChange:r=>o("field_of_study",r.target.value)}),e.jsx(d,{className:"mt-2",message:i.field_of_study})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"bio",value:"Short Bio"}),e.jsx("textarea",{id:"bio",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.bio,onChange:r=>o("bio",r.target.value),rows:4}),e.jsx(d,{className:"mt-2",message:i.bio})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"research_expertise",className:"block text-sm font-medium text-gray-700",children:"Field of Research (Multiple Selection) Structure : Field of Research - Research Area - Niche Domain"}),e.jsx(q,{id:"research_expertise",isMulti:!0,options:h.map(r=>({value:`${r.field_of_research_id}-${r.research_area_id}-${r.niche_domain_id}`,label:`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",classNamePrefix:"select",value:(N=l.research_expertise)==null?void 0:N.map(r=>{const t=h.find(a=>`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`===r);return{value:r,label:t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:r}}),onChange:r=>{const t=r.map(a=>a.value);o("research_expertise",t)},placeholder:"Select field of research..."})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"current_position",value:"Current Position",required:!0}),e.jsxs("select",{id:"current_position",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.current_position,onChange:r=>o("current_position",r.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Position"}),e.jsx("option",{value:"Lecturer",children:"Lecturer"}),e.jsx("option",{value:"Senior Lecturer",children:"Senior Lecturer"}),e.jsx("option",{value:"Assoc. Prof.",children:"Associate Professor"}),e.jsx("option",{value:"Professor",children:"Professor"}),e.jsx("option",{value:"Postdoctoral Researcher",children:"Postdoctoral Researcher"}),e.jsx("option",{value:"Researcher",children:"Researcher"})]}),e.jsx(d,{className:"mt-2",message:i.current_position})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"department",value:"Department",required:!0}),e.jsx(c,{id:"department",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.department,onChange:r=>o("department",r.target.value)}),e.jsx(d,{className:"mt-2",message:i.department})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"availability_as_supervisor",value:"Availability as Supervisor",required:!0}),e.jsxs("select",{id:"availability_as_supervisor",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.availability_as_supervisor,onChange:r=>o("availability_as_supervisor",r.target.value==="true"),children:[e.jsx("option",{value:"true",children:"Available"}),e.jsx("option",{value:"false",children:"Not Available"})]}),e.jsx(d,{className:"mt-2",message:i.availability_as_supervisor})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"website",value:"Website (Personal or Work)"}),e.jsx(c,{id:"website",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.website,onChange:r=>o("website",r.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:i.website})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"linkedin",value:"LinkedIn"}),e.jsx(c,{id:"linkedin",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.linkedin,onChange:r=>o("linkedin",r.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:i.linkedin})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"google_scholar",value:"Google Scholar"}),e.jsx(c,{id:"google_scholar",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.google_scholar,onChange:r=>o("google_scholar",r.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:i.google_scholar})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"researchgate",value:"ResearchGate"}),e.jsx(c,{id:"researchgate",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:l.researchgate,onChange:r=>o("researchgate",r.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:i.researchgate})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{disabled:k,children:"Save"}),e.jsx(L,{show:C,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]}),x==="projects"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"})]})]})}export{J as default};
