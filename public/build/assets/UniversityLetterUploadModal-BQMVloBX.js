import{r as c,j as e,a as N}from"./app-6KcAPae7.js";import{M as D}from"./Modal-CJvMaQW5.js";import{B as m}from"./button-CrdDRXAu.js";import{L as F}from"./label-CB_vtBTU.js";import{A as U,a as C}from"./alert-Bq8V-QnM.js";import{c as l}from"./index-DjCDrVl_.js";import{l as w}from"./logError-BloCzXDJ.js";import{U as x}from"./upload-DO-YeTbW.js";import{C as M}from"./circle-alert-BWCsOQ_7.js";import{F as L}from"./file-text-CldtH22C.js";import{X as P}from"./x-RVcZvC1Z.js";import{L as z}from"./loader-circle-BGO5wi-L.js";import"./dialog-CwJFq24I.js";import"./transition-CSwR4vyx.js";import"./index-JAD3o4sP.js";import"./utils-CBfrqCZ4.js";import"./index-C3-aQ1HP.js";import"./index-CdJFUDDL.js";import"./createLucideIcon-Dg0NKHwN.js";function Y({isOpen:u,relationship:f,onClose:h,onUploaded:j}){const[a,i]=c.useState(null),[r,p]=c.useState(!1),[b,o]=c.useState(!1),g=s=>{const t=s.target.files?.[0];if(t){if(t.type!=="application/pdf"){l.error("Please upload a PDF file");return}if(t.size>10*1024*1024){l.error("File size must be less than 10MB");return}i(t)}},n=s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?o(!0):s.type==="dragleave"&&o(!1)},v=s=>{s.preventDefault(),s.stopPropagation(),o(!1);const t=s.dataTransfer.files?.[0];if(t){if(t.type!=="application/pdf"){l.error("Please upload a PDF file");return}if(t.size>10*1024*1024){l.error("File size must be less than 10MB");return}i(t)}},y=async()=>{if(!(!a||r)){p(!0);try{const s=new FormData;s.append("letter",a),(await N.post(route("supervision.relationships.university-letter.upload",f.id),s,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(l.success("University letter uploaded successfully"),j?.(),d())}catch(s){w(s,"UniversityLetterUploadModal handleUpload");const t=s?.response?.data?.message||"Failed to upload university letter";l.error(t)}finally{p(!1)}}},d=()=>{r||(i(null),h?.())};return e.jsx(D,{show:u,onClose:d,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(x,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Upload University Letter"})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"Upload your official university offer or appointment letter to complete the validation process."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(U,{className:"bg-blue-50 border-blue-200",children:[e.jsx(M,{className:"h-4 w-4 text-blue-600"}),e.jsxs(C,{className:"text-sm text-blue-900",children:[e.jsx("strong",{className:"font-semibold",children:"Required Document:"}),e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1 text-xs",children:[e.jsx("li",{children:"Official university offer letter or appointment letter"}),e.jsx("li",{children:"Must be in PDF format"}),e.jsx("li",{children:"Maximum file size: 10MB"}),e.jsx("li",{children:"Document should clearly show your supervisor assignment"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{htmlFor:"letter-upload",children:"Upload Document"}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${b?"border-blue-500 bg-blue-50":a?"border-green-500 bg-green-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:n,onDragLeave:n,onDragOver:n,onDrop:v,children:[e.jsx("input",{id:"letter-upload",type:"file",className:"hidden",accept:"application/pdf",onChange:g,disabled:r}),a?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(L,{className:"h-10 w-10 text-green-600"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-green-900",children:a.name}),e.jsxs("p",{className:"text-sm text-green-700",children:[(a.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>i(null),disabled:r,className:"hover:bg-green-100",children:e.jsx(P,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{className:"h-12 w-12 text-slate-400 mx-auto"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:["Drop your PDF file here, or"," ",e.jsx("label",{htmlFor:"letter-upload",className:"text-blue-600 hover:text-blue-700 cursor-pointer underline",children:"browse"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"PDF only, max 10MB"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t flex items-center justify-end gap-3",children:[e.jsx(m,{variant:"outline",onClick:d,disabled:r,children:"Cancel"}),e.jsxs(m,{onClick:y,disabled:!a||r,className:"bg-blue-600 hover:bg-blue-700",children:[r&&e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Uploading...":"Upload Letter"]})]})]})})}export{Y as default};
