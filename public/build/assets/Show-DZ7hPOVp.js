import{r as y,t as Ua,R as Ne,j as c,a as ke,y as J,q as ts,W as Bt,b as Ga}from"./app-6KcAPae7.js";import{M as Wa}from"./MainLayout--yDNTBjU.js";import{B as rn}from"./button-CrdDRXAu.js";import{C as gt}from"./calendar-CKvWh2Fc.js";import{C as fo}from"./clock-BOVlrk4Y.js";import{U as qa}from"./users-BAT0uBt8.js";import{c as Vn}from"./createLucideIcon-Dg0NKHwN.js";import{E as Qa}from"./external-link-Dxmreb74.js";import{X as Dt}from"./x-RVcZvC1Z.js";import{f as Ve}from"./format-BOijCLBA.js";import{c as xe,V}from"./index-DjCDrVl_.js";import{l as Ht}from"./logError-BloCzXDJ.js";import{u as Ya,a as Za,b as go,c as ho,d as Xa,e as Ja,C as ns,i as Ka,g as ec,K as sn,f as tc,h as nc,D as rc,j as sc,k as ic,P as oc}from"./core.esm-CgHPs-sn.js";import{a as pe}from"./utils-CBfrqCZ4.js";import{B as _t}from"./book-open-bONUnm5c.js";import{t as zs}from"./en-US-DIdCsyf3.js";import{i as lc,a as ac}from"./isTomorrow-BmoHjX9b.js";import{r as cc,$ as dc,a as uc,w as fc,e as gc,K as po,P as hc,I as mo}from"./InlineEdit-Bkq3Fzkf.js";import{r as Pe}from"./index-JAD3o4sP.js";import{n as Fe,o as ce,p as vo,K as mt,y as $n,_ as yo,L as vt,c as pc,x as mc,i as En,R as vc,a as yc,e as bc,u as bo,O as Us,z as We}from"./transition-CSwR4vyx.js";import{u as xc,o as he,n as wc,m as Sc,f as Cc,a as Ec,b as _c,F as Gs,G as xo,r as Ac,w as Rc,R as Dc,A as Tc,_ as kc,h as Nc,y as rs,D as ss,j as is,Y as os}from"./dialog-CwJFq24I.js";import{i as on,e as Ic,g as rr,m as sr,r as Mc,j as jc,a as Pc}from"./floating-ui.dom-D5EC_49c.js";import{u as Fc,o as wo,s as Oc,f as Hc,b as Lc}from"./index-CNVNpKw3.js";import{E as So}from"./ellipsis-vertical-llPGbETr.js";import{T as qt}from"./trash-2-B4CrugC8.js";import{M as Co}from"./message-square-DOAr_Oao.js";import{P as Eo}from"./paperclip-CHupZKCg.js";import{P as Mr}from"./plus-TSWFZJVg.js";import{M as _o}from"./Modal-CJvMaQW5.js";import{P as Bc}from"./Pagination-BbSK2vVE.js";import{a as Ws,b as qs,c as Qs,T as Vc}from"./tooltip-B6pzDCUw.js";import{C as $c}from"./clipboard-list-CkK1RN7u.js";import{S as zc}from"./search-KJO1iUQT.js";import{C as Uc}from"./chevron-down-ByZMo2lZ.js";import{C as Gc}from"./chevron-up-BOXEedZS.js";import{S as _n}from"./react-select.esm-Caq7p8aY.js";import{C as Qt}from"./ConfirmationModal-B03nOwCE.js";import{a as Wc}from"./ThreadPane-DyCNvQZd.js";import{G as qc}from"./globe-CppXJV4g.js";import{T as Qc}from"./trending-up-oyD9hNM0.js";import{U as jr}from"./user-CAcetcbZ.js";import{F as ls}from"./file-text-CldtH22C.js";import{E as Yc}from"./eye-BtQ8twi4.js";import{S as Zc}from"./send-DRbsJxNe.js";import{U as Xc}from"./upload-DO-YeTbW.js";import{S as Jc}from"./square-check-big-DnoKwz9k.js";import{C as Kc}from"./chevron-left-Dg3HzLsn.js";import{K as ed,T as td}from"./table-ByFmjgUx.js";import{L as nd}from"./list-TPrHi4nm.js";import"./house-MPKGRuPU.js";import"./zap-Dc37O7Yf.js";import"./folder-open-BOmTEEi1.js";import"./settings-nBn8_I0z.js";import"./useRoles-TTN5TAPq.js";import"./proxy-6rU6RlCr.js";import"./user-round-Gn5hLxMS.js";import"./dollar-sign-DG-1hJGs.js";import"./graduation-cap-DsZZvawH.js";import"./building-BAo4hBJ-.js";import"./Dropdown-D9Vn_Uo-.js";import"./sparkles-CxsEXFgy.js";import"./bookmark-CKOvIcZS.js";import"./folder-kanban-WJg5ri3Z.js";import"./building-2-BOmvfrGU.js";import"./database-CHeJJryD.js";import"./shield-Di9h5Q6c.js";import"./index-DaBARm37.js";import"./analytics-BQ374C1C.js";import"./iconBase-n0Q-2a7D.js";import"./index-Ce5Il87X.js";import"./supervisionConstants-BuM5-H5X.js";import"./isSameDay-BHs4V-zU.js";import"./constructNow-6bIQB1GK.js";import"./addDays-KHeCUDUr.js";import"./PrimaryButton-BDNKdwtj.js";import"./SecondaryButton-BMSD-Ano.js";import"./circle-check-big-DONTGj_Q.js";import"./chevron-right-BAu-tXgn.js";import"./index-Chjiymov.js";import"./dialog-RPNwQkV0.js";import"./index-BT3GCukP.js";import"./index-C_9bpbuH.js";import"./index-C3-aQ1HP.js";import"./index-4gt4wYEX.js";import"./index-CANaiMod.js";import"./index-Cxfb7wM5.js";import"./index-Kc-fmclX.js";import"./index-D5o-Dx5T.js";import"./briefcase-SOOxWO71.js";import"./check-yEdCv6kj.js";import"./index-CSjGVC7d.js";import"./index-Bby0leWS.js";import"./triangle-alert-BSO9t9M4.js";import"./scroll-area-CgKTi-4v.js";import"./index-uYzWXxXP.js";import"./index-BdQq_4o_.js";import"./download-BwAogcNS.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],as=Vn("Archive",rd);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]],id=Vn("FileType",sd);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],ld=Vn("Flag",od);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],cd=Vn("GripHorizontal",ad);function dd(e,t){return+zs(e)>+zs(t)}function ud(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function fd(e,t=!1){let[n,r]=y.useReducer(()=>({}),{}),s=y.useMemo(()=>ud(e),[e,n]);return Fe(()=>{if(!e)return;let i=new ResizeObserver(r);return i.observe(e),()=>{i.disconnect()}},[e]),t?{width:`${s.width}px`,height:`${s.height}px`}:s}function Ys(e){return[e.screenX,e.screenY]}function gd(){let e=y.useRef([-1,-1]);return{wasMoved(t){let n=Ys(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=Ys(t)}}}function hd(e,{container:t,accept:n,walk:r}){let s=y.useRef(n),i=y.useRef(r);y.useEffect(()=>{s.current=n,i.current=r},[n,r]),Fe(()=>{if(!t||!e)return;let o=xc(t);if(!o)return;let l=s.current,a=i.current,d=Object.assign(h=>l(h),{acceptNode:l}),u=o.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,d,!1);for(;u.nextNode();)a(u.currentNode)},[t,e,s,i])}function pd(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const Ao={...Ua},md=Ao.useInsertionEffect,vd=md||(e=>e());function Ro(e){const t=y.useRef(()=>{});return vd(()=>{t.current=e}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var Pr=typeof document<"u"?y.useLayoutEffect:y.useEffect;let Zs=!1,yd=0;const Xs=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+yd++;function bd(){const[e,t]=y.useState(()=>Zs?Xs():void 0);return Pr(()=>{e==null&&t(Xs())},[]),y.useEffect(()=>{Zs=!0},[]),e}const xd=Ao.useId,wd=xd||bd;function Sd(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const Cd=y.createContext(null),Ed=y.createContext(null),_d=()=>{var e;return((e=y.useContext(Cd))==null?void 0:e.id)||null},Ad=()=>y.useContext(Ed),Rd="data-floating-ui-focusable";function Dd(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=wd(),i=y.useRef({}),[o]=y.useState(()=>Sd()),l=_d()!=null,[a,d]=y.useState(r.reference),u=Ro((f,p,m)=>{i.current.openEvent=f?p:void 0,o.emit("openchange",{open:f,event:p,reason:m,nested:l}),n?.(f,p,m)}),h=y.useMemo(()=>({setPositionReference:d}),[]),g=y.useMemo(()=>({reference:a||r.reference||null,floating:r.floating||null,domReference:r.reference}),[a,r.reference,r.floating]);return y.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:g,events:o,floatingId:s,refs:h}),[t,u,g,o,s,h])}function Td(e){e===void 0&&(e={});const{nodeId:t}=e,n=Dd({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=y.useState(null),[l,a]=y.useState(null),u=s?.domReference||i,h=y.useRef(null),g=Ad();Pr(()=>{u&&(h.current=u)},[u]);const f=Fc({...e,elements:{...s,...l&&{reference:l}}}),p=y.useCallback(x=>{const D=on(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;a(D),f.refs.setReference(D)},[f.refs]),m=y.useCallback(x=>{(on(x)||x===null)&&(h.current=x,o(x)),(on(f.refs.reference.current)||f.refs.reference.current===null||x!==null&&!on(x))&&f.refs.setReference(x)},[f.refs]),v=y.useMemo(()=>({...f.refs,setReference:m,setPositionReference:p,domReference:h}),[f.refs,m,p]),b=y.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),E=y.useMemo(()=>({...f,...r,refs:v,elements:b,nodeId:t}),[f,v,b,t,r]);return Pr(()=>{r.dataRef.current.floatingContext=E;const x=g?.nodesRef.current.find(D=>D.id===t);x&&(x.context=E)}),y.useMemo(()=>({...f,context:E,refs:v,elements:b}),[f,v,b,E])}const Js="active",Ks="selected";function ir(e,t,n){const r=new Map,s=n==="item";let i=e;if(s&&e){const{[Js]:o,[Ks]:l,...a}=e;i=a}return{...n==="floating"&&{tabIndex:-1,[Rd]:""},...i,...t.map(o=>{const l=o?o[n]:null;return typeof l=="function"?e?l(e):null:l}).concat(e).reduce((o,l)=>(l&&Object.entries(l).forEach(a=>{let[d,u]=a;if(!(s&&[Js,Ks].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof u=="function"){var h;(h=r.get(d))==null||h.push(u),o[d]=function(){for(var g,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(g=r.get(d))==null?void 0:g.map(v=>v(...p)).find(v=>v!==void 0)}}}else o[d]=u}),o),{})}}function kd(e){e===void 0&&(e=[]);const t=e.map(l=>l?.reference),n=e.map(l=>l?.floating),r=e.map(l=>l?.item),s=y.useCallback(l=>ir(l,e,"reference"),t),i=y.useCallback(l=>ir(l,e,"floating"),n),o=y.useCallback(l=>ir(l,e,"item"),r);return y.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}function ei(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Nd=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:s,offset:i=0,index:o=0,minItemsVisible:l=4,referenceOverflowThreshold:a=0,scrollRef:d,...u}=Ic(e,t),{rects:h,elements:{floating:g}}=t,f=n.current[o],p=d?.current||g,m=g.clientTop||p.clientTop,v=g.clientTop!==0,b=p.clientTop!==0,E=g===p;if(!f)return{};const x={...t,...await wo(-f.offsetTop-g.clientTop-h.reference.height/2-f.offsetHeight/2-i).fn(t)},D=await rr(ei(x,p.scrollHeight+m+g.clientTop),u),A=await rr(x,{...u,elementContext:"reference"}),j=sr(0,D.top),M=x.y+j,C=(p.scrollHeight>p.clientHeight?N=>N:Mc)(sr(0,p.scrollHeight+(v&&E||b?m*2:0)-j-sr(0,D.bottom)));if(p.style.maxHeight=C+"px",p.scrollTop=j,s){const N=p.offsetHeight<f.offsetHeight*jc(l,n.current.length)-1||A.top>=-a||A.bottom>=-a;Pe.flushSync(()=>s(N))}return r&&(r.current=await rr(ei({...x,y:M},p.offsetHeight+m+g.clientTop),u)),{y:M}}});function Id(e,t){const{open:n,elements:r}=e,{enabled:s=!0,overflowRef:i,scrollRef:o,onChange:l}=t,a=Ro(l),d=y.useRef(!1),u=y.useRef(null),h=y.useRef(null);y.useEffect(()=>{if(!s)return;function f(m){if(m.ctrlKey||!p||i.current==null)return;const v=m.deltaY,b=i.current.top>=-.5,E=i.current.bottom>=-.5,x=p.scrollHeight-p.clientHeight,D=v<0?-1:1,A=v<0?"max":"min";p.scrollHeight<=p.clientHeight||(!b&&v>0||!E&&v<0?(m.preventDefault(),Pe.flushSync(()=>{a(j=>j+Math[A](v,x*D))})):/firefox/i.test(pd())&&(p.scrollTop+=v))}const p=o?.current||r.floating;if(n&&p)return p.addEventListener("wheel",f),requestAnimationFrame(()=>{u.current=p.scrollTop,i.current!=null&&(h.current={...i.current})}),()=>{u.current=null,h.current=null,p.removeEventListener("wheel",f)}},[s,n,r.floating,i,o,a]);const g=y.useMemo(()=>({onKeyDown(){d.current=!0},onWheel(){d.current=!1},onPointerMove(){d.current=!1},onScroll(){const f=o?.current||r.floating;if(!(!i.current||!f||!d.current)){if(u.current!==null){const p=f.scrollTop-u.current;(i.current.bottom<-.5&&p<-1||i.current.top<-.5&&p>1)&&Pe.flushSync(()=>a(m=>m+p))}requestAnimationFrame(()=>{u.current=f.scrollTop})}}}),[r.floating,a,i,o]);return y.useMemo(()=>s?{floating:g}:{},[s,g])}let It=y.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});It.displayName="FloatingContext";let cs=y.createContext(null);cs.displayName="PlacementContext";function Md(e){return y.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function jd(){return y.useContext(It).setReference}function Pd(){return y.useContext(It).getReferenceProps}function Fd(){let{getFloatingProps:e,slot:t}=y.useContext(It);return y.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function Od(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=y.useContext(cs),n=y.useMemo(()=>e,[JSON.stringify(e,(s,i)=>{var o;return(o=i?.outerHTML)!=null?o:i})]);Fe(()=>{t?.(n??null)},[t,n]);let r=y.useContext(It);return y.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let ti=4;function Hd({children:e,enabled:t=!0}){let[n,r]=y.useState(null),[s,i]=y.useState(0),o=y.useRef(null),[l,a]=y.useState(null);Ld(l);let d=t&&n!==null&&l!==null,{to:u="bottom",gap:h=0,offset:g=0,padding:f=0,inner:p}=Bd(n,l),[m,v="center"]=u.split(" ");Fe(()=>{d&&i(0)},[d]);let{refs:b,floatingStyles:E,context:x}=Td({open:d,placement:m==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${m}`:`${m}-${v}`,strategy:"absolute",transform:!1,middleware:[wo({mainAxis:m==="selection"?0:h,crossAxis:g}),Oc({padding:f}),m!=="selection"&&Hc({padding:f}),m==="selection"&&p?Nd({...p,padding:f,overflowRef:o,offset:s,minItemsVisible:ti,referenceOverflowThreshold:f,onFallbackChange(N){var Q,we;if(!N)return;let re=x.elements.floating;if(!re)return;let Ie=parseFloat(getComputedStyle(re).scrollPaddingBottom)||0,le=Math.min(ti,re.childElementCount),de=0,B=0;for(let ue of(we=(Q=x.elements.floating)==null?void 0:Q.childNodes)!=null?we:[])if(ue instanceof HTMLElement){let ae=ue.offsetTop,Se=ae+ue.clientHeight+Ie,fe=re.scrollTop,X=fe+re.clientHeight;if(ae>=fe&&Se<=X)le--;else{B=Math.max(0,Math.min(Se,X)-Math.max(ae,fe)),de=ue.clientHeight;break}}le>=1&&i(ue=>{let ae=de*le-B+Ie;return ue>=ae?ue:ae})}}):null,Lc({padding:f,apply({availableWidth:N,availableHeight:Q,elements:we}){Object.assign(we.floating.style,{overflow:"auto",maxWidth:`${N}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${Q}px)`})}})].filter(Boolean),whileElementsMounted:Pc}),[D=m,A=v]=x.placement.split("-");m==="selection"&&(D="selection");let j=y.useMemo(()=>({anchor:[D,A].filter(Boolean).join(" ")}),[D,A]),M=Id(x,{overflowRef:o,onChange:i}),{getReferenceProps:T,getFloatingProps:_}=kd([M]),C=ce(N=>{a(N),b.setFloating(N)});return y.createElement(cs.Provider,{value:r},y.createElement(It.Provider,{value:{setFloating:C,setReference:b.setReference,styles:E,getReferenceProps:T,getFloatingProps:_,slot:j}},e))}function Ld(e){Fe(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let s=parseInt(n);isNaN(s)||r!==s&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function Bd(e,t){var n,r,s;let i=or((n=e?.gap)!=null?n:"var(--anchor-gap, 0)",t),o=or((r=e?.offset)!=null?r:"var(--anchor-offset, 0)",t),l=or((s=e?.padding)!=null?s:"var(--anchor-padding, 0)",t);return{...e,gap:i,offset:o,padding:l}}function or(e,t,n=void 0){let r=vo(),s=ce((a,d)=>{if(a==null)return[n,null];if(typeof a=="number")return[a,null];if(typeof a=="string"){if(!d)return[n,null];let u=ni(a,d);return[u,h=>{let g=Do(a);{let f=g.map(p=>window.getComputedStyle(d).getPropertyValue(p));r.requestAnimationFrame(function p(){r.nextFrame(p);let m=!1;for(let[b,E]of g.entries()){let x=window.getComputedStyle(d).getPropertyValue(E);if(f[b]!==x){f[b]=x,m=!0;break}}if(!m)return;let v=ni(a,d);u!==v&&(h(v),u=v)})}return r.dispose}]}return[n,null]}),i=y.useMemo(()=>s(e,t)[0],[e,t]),[o=i,l]=y.useState();return Fe(()=>{let[a,d]=s(e,t);if(l(a),!!d)return d(l)},[e,t]),o}function Do(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),s=t[1].slice(n+1).trim();return s?[r,...Do(s)]:[r]}return[]}function ni(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}function Vd(e){throw new Error("Unexpected object: "+e)}var me=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(me||{});function lr(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),s=r??-1;switch(e.focus){case 0:{for(let i=0;i<n.length;++i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 1:{s===-1&&(s=n.length);for(let i=s-1;i>=0;--i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 2:{for(let i=s+1;i<n.length;++i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 3:{for(let i=n.length-1;i>=0;--i)if(!t.resolveDisabled(n[i],i,n))return i;return r}case 4:{for(let i=0;i<n.length;++i)if(t.resolveId(n[i],i,n)===e.id)return i;return r}case 5:return null;default:Vd(e)}}function $d(e,t){let n=y.useRef({left:0,top:0});if(Fe(()=>{if(!t)return;let s=t.getBoundingClientRect();s&&(n.current=s)},[e,t]),t==null||!e||t===document.activeElement)return!1;let r=t.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let ri=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function si(e){var t,n;let r=(t=e.innerText)!=null?t:"",s=e.cloneNode(!0);if(!(s instanceof HTMLElement))return r;let i=!1;for(let l of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),i=!0;let o=i?(n=s.innerText)!=null?n:"":r;return ri.test(o)&&(o=o.replace(ri,"")),o}function zd(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(s=>{let i=document.getElementById(s);if(i){let o=i.getAttribute("aria-label");return typeof o=="string"?o.trim():si(i).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return si(e).trim()}function Ud(e){let t=y.useRef(""),n=y.useRef("");return ce(()=>{let r=e.current;if(!r)return"";let s=r.innerText;if(t.current===s)return n.current;let i=zd(r).trim().toLowerCase();return t.current=s,n.current=i,i})}var Gd=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Gd||{}),Wd=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Wd||{}),qd=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(qd||{});function ar(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=kc(t(e.items.slice()),i=>i.dataRef.current.domRef.current),s=n?r.indexOf(n):null;return s===-1&&(s=null),{items:r,activeItemIndex:s}}let Qd={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var n,r,s,i,o;if(e.menuState===1)return e;let l={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===me.Nothing)return{...l,activeItemIndex:null};if(t.focus===me.Specific)return{...l,activeItemIndex:e.items.findIndex(u=>u.id===t.id)};if(t.focus===me.Previous){let u=e.activeItemIndex;if(u!==null){let h=e.items[u].dataRef.current.domRef,g=lr(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});if(g!==null){let f=e.items[g].dataRef.current.domRef;if(((r=h.current)==null?void 0:r.previousElementSibling)===f.current||((s=f.current)==null?void 0:s.previousElementSibling)===null)return{...l,activeItemIndex:g}}}}else if(t.focus===me.Next){let u=e.activeItemIndex;if(u!==null){let h=e.items[u].dataRef.current.domRef,g=lr(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});if(g!==null){let f=e.items[g].dataRef.current.domRef;if(((i=h.current)==null?void 0:i.nextElementSibling)===f.current||((o=f.current)==null?void 0:o.nextElementSibling)===null)return{...l,activeItemIndex:g}}}}let a=ar(e),d=lr(t,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...l,...a,activeItemIndex:d}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),s=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(o=>{var l;return((l=o.dataRef.current.textValue)==null?void 0:l.startsWith(r))&&!o.dataRef.current.disabled}),i=s?e.items.indexOf(s):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:i,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=ar(e,r=>[...r,{id:t.id,dataRef:t.dataRef}]);return{...e,...n}},6:(e,t)=>{let n=ar(e,r=>{let s=r.findIndex(i=>i.id===t.id);return s!==-1&&r.splice(s,1),r});return{...e,...n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},ds=y.createContext(null);ds.displayName="MenuContext";function zn(e){let t=y.useContext(ds);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,zn),n}return t}function Yd(e,t){return bo(t.type,Qd,e,t)}let Zd=y.Fragment;function Xd(e,t){let{__demoMode:n=!1,...r}=e,s=y.useReducer(Yd,{__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:i,itemsElement:o,buttonElement:l},a]=s,d=$n(t);Dc(i===0,[l,o],(p,m)=>{a({type:1}),Tc(m,Nc.Loose)||(p.preventDefault(),l?.focus())});let u=ce(()=>{a({type:1})}),h=y.useMemo(()=>({open:i===0,close:u}),[i,u]),g={ref:d},f=vt();return Ne.createElement(Hd,null,Ne.createElement(ds.Provider,{value:s},Ne.createElement(bc,{value:bo(i,{0:En.Open,1:En.Closed})},f({ourProps:g,theirProps:r,slot:h,defaultTag:Zd,name:"Menu"}))))}let Jd="button";function Kd(e,t){var n;let r=y.useId(),{id:s=`headlessui-menu-button-${r}`,disabled:i=!1,autoFocus:o=!1,...l}=e,[a,d]=zn("Menu.Button"),u=Pd(),h=$n(t,jd(),ce(M=>d({type:7,element:M}))),g=ce(M=>{switch(M.key){case he.Space:case he.Enter:case he.ArrowDown:M.preventDefault(),M.stopPropagation(),Pe.flushSync(()=>d({type:0})),d({type:2,focus:me.First});break;case he.ArrowUp:M.preventDefault(),M.stopPropagation(),Pe.flushSync(()=>d({type:0})),d({type:2,focus:me.Last});break}}),f=ce(M=>{switch(M.key){case he.Space:M.preventDefault();break}}),p=ce(M=>{var T;if(cc(M.currentTarget))return M.preventDefault();i||(a.menuState===0?(Pe.flushSync(()=>d({type:1})),(T=a.buttonElement)==null||T.focus({preventScroll:!0})):(M.preventDefault(),d({type:0})))}),{isFocusVisible:m,focusProps:v}=dc({autoFocus:o}),{isHovered:b,hoverProps:E}=uc({isDisabled:i}),{pressed:x,pressProps:D}=fc({disabled:i}),A=y.useMemo(()=>({open:a.menuState===0,active:x||a.menuState===0,disabled:i,hover:b,focus:m,autofocus:o}),[a,b,m,x,i,o]),j=yo(u(),{ref:h,id:s,type:gc(e,a.buttonElement),"aria-haspopup":"menu","aria-controls":(n=a.itemsElement)==null?void 0:n.id,"aria-expanded":a.menuState===0,disabled:i||void 0,autoFocus:o,onKeyDown:g,onKeyUp:f,onClick:p},v,E,D);return vt()({ourProps:j,theirProps:l,slot:A,defaultTag:Jd,name:"Menu.Button"})}let eu="div",tu=Us.RenderStrategy|Us.Static;function nu(e,t){var n,r;let s=y.useId(),{id:i=`headlessui-menu-items-${s}`,anchor:o,portal:l=!1,modal:a=!0,transition:d=!1,...u}=e,h=Md(o),[g,f]=zn("Menu.Items"),[p,m]=Od(h),v=Fd(),[b,E]=y.useState(null),x=$n(t,h?p:null,ce(B=>f({type:8,element:B})),E),D=wc(g.itemsElement);h&&(l=!0);let A=pc(),[j,M]=mc(d,b,A!==null?(A&En.Open)===En.Open:g.menuState===0);Sc(j,g.buttonElement,()=>{f({type:1})});let T=g.__demoMode?!1:a&&g.menuState===0;Cc(T,D);let _=g.__demoMode?!1:a&&g.menuState===0;Ec(_,{allowed:y.useCallback(()=>[g.buttonElement,g.itemsElement],[g.buttonElement,g.itemsElement])});let C=g.menuState!==0,N=$d(C,g.buttonElement)?!1:j;y.useEffect(()=>{let B=g.itemsElement;B&&g.menuState===0&&B!==D?.activeElement&&B.focus({preventScroll:!0})},[g.menuState,g.itemsElement,D]),hd(g.menuState===0,{container:g.itemsElement,accept(B){return B.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:B.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(B){B.setAttribute("role","none")}});let Q=vo(),we=ce(B=>{var ue,ae,Se;switch(Q.dispose(),B.key){case he.Space:if(g.searchQuery!=="")return B.preventDefault(),B.stopPropagation(),f({type:3,value:B.key});case he.Enter:if(B.preventDefault(),B.stopPropagation(),f({type:1}),g.activeItemIndex!==null){let{dataRef:fe}=g.items[g.activeItemIndex];(ae=(ue=fe.current)==null?void 0:ue.domRef.current)==null||ae.click()}xo(g.buttonElement);break;case he.ArrowDown:return B.preventDefault(),B.stopPropagation(),f({type:2,focus:me.Next});case he.ArrowUp:return B.preventDefault(),B.stopPropagation(),f({type:2,focus:me.Previous});case he.Home:case he.PageUp:return B.preventDefault(),B.stopPropagation(),f({type:2,focus:me.First});case he.End:case he.PageDown:return B.preventDefault(),B.stopPropagation(),f({type:2,focus:me.Last});case he.Escape:B.preventDefault(),B.stopPropagation(),Pe.flushSync(()=>f({type:1})),(Se=g.buttonElement)==null||Se.focus({preventScroll:!0});break;case he.Tab:B.preventDefault(),B.stopPropagation(),Pe.flushSync(()=>f({type:1})),_c(g.buttonElement,B.shiftKey?Gs.Previous:Gs.Next);break;default:B.key.length===1&&(f({type:3,value:B.key}),Q.setTimeout(()=>f({type:4}),350));break}}),re=ce(B=>{switch(B.key){case he.Space:B.preventDefault();break}}),Ie=y.useMemo(()=>({open:g.menuState===0}),[g.menuState]),le=yo(h?v():{},{"aria-activedescendant":g.activeItemIndex===null||(n=g.items[g.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=g.buttonElement)==null?void 0:r.id,id:i,onKeyDown:we,onKeyUp:re,role:"menu",tabIndex:g.menuState===0?0:void 0,ref:x,style:{...u.style,...m,"--button-width":fd(g.buttonElement,!0).width},...vc(M)}),de=vt();return Ne.createElement(Ac,{enabled:l?e.static||j:!1},de({ourProps:le,theirProps:u,slot:Ie,defaultTag:eu,features:tu,visible:N,name:"Menu.Items"}))}let ru=y.Fragment;function su(e,t){let n=y.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:s=!1,...i}=e,[o,l]=zn("Menu.Item"),a=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===r:!1,d=y.useRef(null),u=$n(t,d);Fe(()=>{if(!o.__demoMode&&o.menuState===0&&a&&o.activationTrigger!==0)return yc().requestAnimationFrame(()=>{var N,Q;(Q=(N=d.current)==null?void 0:N.scrollIntoView)==null||Q.call(N,{block:"nearest"})})},[o.__demoMode,d,a,o.menuState,o.activationTrigger,o.activeItemIndex]);let h=Ud(d),g=y.useRef({disabled:s,domRef:d,get textValue(){return h()}});Fe(()=>{g.current.disabled=s},[g,s]),Fe(()=>(l({type:5,id:r,dataRef:g}),()=>l({type:6,id:r})),[g,r]);let f=ce(()=>{l({type:1})}),p=ce(N=>{if(s)return N.preventDefault();l({type:1}),xo(o.buttonElement)}),m=ce(()=>{if(s)return l({type:2,focus:me.Nothing});l({type:2,focus:me.Specific,id:r})}),v=gd(),b=ce(N=>{v.update(N),!s&&(a||l({type:2,focus:me.Specific,id:r,trigger:0}))}),E=ce(N=>{v.wasMoved(N)&&(s||a||l({type:2,focus:me.Specific,id:r,trigger:0}))}),x=ce(N=>{v.wasMoved(N)&&(s||a&&l({type:2,focus:me.Nothing}))}),[D,A]=po(),[j,M]=Rc(),T=y.useMemo(()=>({active:a,focus:a,disabled:s,close:f}),[a,s,f]),_={id:r,ref:u,role:"menuitem",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-labelledby":D,"aria-describedby":j,disabled:void 0,onClick:p,onFocus:m,onPointerEnter:b,onMouseEnter:b,onPointerMove:E,onMouseMove:E,onPointerLeave:x,onMouseLeave:x},C=vt();return Ne.createElement(A,null,Ne.createElement(M,null,C({ourProps:_,theirProps:i,slot:T,defaultTag:ru,name:"Menu.Item"})))}let iu="div";function ou(e,t){let[n,r]=po(),s=e,i={ref:t,"aria-labelledby":n,role:"group"},o=vt();return Ne.createElement(r,null,o({ourProps:i,theirProps:s,slot:{},defaultTag:iu,name:"Menu.Section"}))}let lu="header";function au(e,t){let n=y.useId(),{id:r=`headlessui-menu-heading-${n}`,...s}=e,i=hc();Fe(()=>i.register(r),[r,i.register]);let o={id:r,ref:t,role:"presentation",...i.props};return vt()({ourProps:o,theirProps:s,slot:{},defaultTag:lu,name:"Menu.Heading"})}let cu="div";function du(e,t){let n=e,r={ref:t,role:"separator"};return vt()({ourProps:r,theirProps:n,slot:{},defaultTag:cu,name:"Menu.Separator"})}let uu=mt(Xd),To=mt(Kd),ko=mt(nu),Fr=mt(su),fu=mt(ou),gu=mt(au),hu=mt(du),pu=Object.assign(uu,{Button:To,Items:ko,Item:Fr,Section:fu,Heading:gu,Separator:hu});function us({task:e,promptData:t,onYes:n,onNo:r,visible:s=!0}){if(!s)return null;const{user_connected:i,assignees_connected:o,total_assignees:l,connected_assignees:a}=t||{},d=i,u=o,h=()=>{let f=e.title;return e.priority&&e.priority!=="Medium"&&(f+=` (${e.priority})`),f},g=()=>l===0?"No assignees":a===0?`${l} assignee${l>1?"s":""} (none connected to calendar)`:a===l?`${l} assignee${l>1?"s":""} (all connected)`:`${l} assignee${l>1?"s":""} (${a} connected)`;return c.jsx("div",{className:"bg-white rounded-lg shadow-xl border border-gray-200 p-4 max-w-md w-full",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx(gt,{className:"w-5 h-5 text-blue-600"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Add task to Google Calendar?"}),c.jsxs("div",{className:"text-sm text-gray-600 mb-3 space-y-1",children:[c.jsx("p",{className:"font-medium text-gray-900 line-clamp-2",children:h()}),c.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[c.jsx(fo,{className:"w-3 h-3 mr-1"}),c.jsxs("span",{children:["Due: ",e.due_date?Ve(new Date(e.due_date),"PPp"):"No due date"]})]}),l>0&&c.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[c.jsx(qa,{className:"w-3 h-3 mr-1"}),c.jsx("span",{children:g()})]}),e.priority&&e.priority!=="Medium"&&c.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[c.jsx(ld,{className:"w-3 h-3 mr-1"}),c.jsxs("span",{children:["Priority: ",e.priority]})]})]}),d?u?c.jsx("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded text-xs text-green-700",children:c.jsx("p",{children:"âœ“ You and some assignees have Google Calendar connected"})}):l>0?c.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:c.jsx("p",{children:"You have Google Calendar connected. Assignees can add this task from their side if they connect their calendar."})}):c.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:c.jsx("p",{children:"âœ“ Your Google Calendar is connected"})}):c.jsxs("div",{className:"mb-3 p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-800",children:[c.jsx("p",{className:"font-medium mb-1",children:"Google Calendar not connected"}),c.jsx("p",{children:"Connect your Google Calendar in Profile Settings to enable sync."})]}),c.jsx("div",{className:"flex items-center gap-2",children:d?c.jsxs(c.Fragment,{children:[c.jsxs(rn,{size:"sm",onClick:n,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[c.jsx(gt,{className:"w-3.5 h-3.5 mr-1.5"}),"Add to Calendar"]}),c.jsx(rn,{size:"sm",variant:"outline",onClick:r,className:"flex-1",children:"Not Now"})]}):c.jsxs(c.Fragment,{children:[c.jsx(rn,{size:"sm",asChild:!0,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:c.jsxs("a",{href:"/profile#calendar",onClick:f=>{r()},children:[c.jsx(Qa,{className:"w-3.5 h-3.5 mr-1.5"}),"Connect Calendar"]})}),c.jsx(rn,{size:"sm",variant:"outline",onClick:r,children:c.jsx(Dt,{className:"w-3.5 h-3.5"})})]})})]}),c.jsx("button",{onClick:r,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(Dt,{className:"w-4 h-4"})})]})})}function fs(){const[e,t]=y.useState(!1),[n,r]=y.useState(!1),[s,i]=y.useState(!0),[o,l]=y.useState(null),a=y.useCallback(async()=>{try{i(!0);const f=await ke.get(route("supervision.tasks.google-calendar.status")),{connected:p,enabled:m,token_expires_at:v}=f.data;t(p),r(m),l(v)}catch(f){Ht(f,"useTaskGoogleCalendar checkStatus"),t(!1),r(!1)}finally{i(!1)}},[]),d=y.useCallback(async()=>{try{const f=await ke.get(route("supervision.google-calendar.auth-url")),{auth_url:p,debug:m}=f.data;if(m&&(console.log("ðŸ” Google Calendar Debug Info:"),console.log("  Redirect URI:",m.redirect_uri),console.log("  App URL:",m.app_url),console.log("  Auth URL:",p)),!p)throw new Error("No authorization URL received");const v=600,b=700,E=window.screen.width/2-v/2,x=window.screen.height/2-b/2,D=window.open(p,"Google Calendar Authorization",`width=${v},height=${b},left=${E},top=${x},scrollbars=yes,resizable=yes`);if(!D){xe.error("Please allow popups to connect Google Calendar");return}const A=M=>{M.origin===window.location.origin&&M.data&&M.data.type==="google-calendar-oauth-complete"&&(window.removeEventListener("message",A),M.data.status==="success"?xe.success(M.data.message||"Google Calendar connected successfully!"):xe.error(M.data.message||"Failed to connect Google Calendar"),a())};window.addEventListener("message",A);const j=setInterval(()=>{D.closed&&(clearInterval(j),window.removeEventListener("message",A),setTimeout(()=>{a()},500))},500);return D}catch(f){Ht(f,"useTaskGoogleCalendar connect"),xe.error("Failed to connect Google Calendar")}},[a]),u=y.useCallback(async()=>{try{await ke.post(route("supervision.google-calendar.disconnect")),t(!1),r(!1),l(null),xe.success("Google Calendar disconnected")}catch(f){Ht(f,"useTaskGoogleCalendar disconnect"),xe.error("Failed to disconnect Google Calendar")}},[]),h=y.useCallback(async f=>{try{const p=await ke.post(route("supervision.tasks.google-calendar.add",{task:f}));if(p.data.success)return xe.success("Task added to Google Calendar"),{success:!0,task:p.data.task};if(p.data.needs_connection)return xe.error("Please connect Google Calendar first"),{success:!1};throw new Error(p.data.message||"Failed to add task")}catch(p){if(p.response?.status===403)xe.error("You do not have permission to add this task");else{if(p.response?.data?.already_exists)return xe("This task is already in your Google Calendar",{icon:"â„¹ï¸",duration:3e3}),{success:!1,alreadyExists:!0,task:p.response.data.task};p.response?.data?.needs_connection?xe.error("Please connect Google Calendar first"):(Ht(p,"useTaskGoogleCalendar addTaskToCalendar"),xe.error("Failed to add task to Google Calendar"))}return{success:!1}}},[]),g=y.useCallback(async f=>{try{const p=await ke.delete(route("supervision.tasks.google-calendar.remove",{task:f}));if(p.data.success)return xe.success("Task removed from Google Calendar"),{success:!0,task:p.data.task};throw new Error(p.data.message||"Failed to remove task")}catch(p){return p.response?.status===403?xe.error("You do not have permission to remove this task"):(Ht(p,"useTaskGoogleCalendar removeTaskFromCalendar"),xe.error("Failed to remove task from Google Calendar")),{success:!1}}},[]);return y.useEffect(()=>{a()},[a]),{isConnected:e,isEnabled:n,isLoading:s,tokenExpiresAt:o,checkStatus:a,connect:d,disconnect:u,addTaskToCalendar:h,removeTaskFromCalendar:g}}function An(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function mu(e,t){return e.reduce((n,r,s)=>{const i=t.get(r);return i&&(n[s]=i),n},Array(e.length))}function ln(e){return e!==null&&e>=0}function vu(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function yu(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const No=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const i=An(t,r,n),o=t[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},an={scaleX:1,scaleY:1},Io=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=e;const l=(t=i[n])!=null?t:r;if(!l)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(l.top+l.height):d.top-l.top,...an}:null}const a=bu(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-a,...an}:s<n&&s>=o?{x:0,y:l.height+a,...an}:{x:0,y:0,...an}};function bu(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return r?n<t?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Mo="Sortable",jo=Ne.createContext({activeIndex:-1,containerId:Mo,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:No,disabled:{draggable:!1,droppable:!1}});function Po(e){let{children:t,id:n,items:r,strategy:s=No,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:a,over:d,measureDroppableContainers:u}=Ya(),h=Za(Mo,n),g=l.rect!==null,f=y.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),p=o!=null,m=o?f.indexOf(o.id):-1,v=d?f.indexOf(d.id):-1,b=y.useRef(f),E=!vu(f,b.current),x=v!==-1&&m===-1||E,D=yu(i);go(()=>{E&&p&&u(f)},[E,f,p,u]),y.useEffect(()=>{b.current=f},[f]);const A=y.useMemo(()=>({activeIndex:m,containerId:h,disabled:D,disableTransforms:x,items:f,overIndex:v,useDragOverlay:g,sortedRects:mu(f,a),strategy:s}),[m,h,D.draggable,D.droppable,x,f,v,a,g,s]);return Ne.createElement(jo.Provider,{value:A},t)}const xu=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return An(n,r,s).indexOf(t)},wu=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:a,transition:d}=e;return!d||!r||l!==i&&s===o?!1:n?!0:o!==s&&t===a},Su={duration:200,easing:"ease"},Fo="transform",Cu=ns.Transition.toString({property:Fo,duration:0,easing:"linear"}),Eu={roleDescription:"sortable"};function _u(e){let{disabled:t,index:n,node:r,rect:s}=e;const[i,o]=y.useState(null),l=y.useRef(n);return go(()=>{if(!t&&n!==l.current&&r.current){const a=s.current;if(a){const d=ec(r.current,{ignoreTransform:!0}),u={x:a.left-d.left,y:a.top-d.top,scaleX:a.width/d.width,scaleY:a.height/d.height};(u.x||u.y)&&o(u)}}n!==l.current&&(l.current=n)},[t,n,r,s]),y.useEffect(()=>{i&&o(null)},[i]),i}function Oo(e){let{animateLayoutChanges:t=wu,attributes:n,disabled:r,data:s,getNewIndex:i=xu,id:o,strategy:l,resizeObserverConfig:a,transition:d=Su}=e;const{items:u,containerId:h,activeIndex:g,disabled:f,disableTransforms:p,sortedRects:m,overIndex:v,useDragOverlay:b,strategy:E}=y.useContext(jo),x=Au(r,f),D=u.indexOf(o),A=y.useMemo(()=>({sortable:{containerId:h,index:D,items:u},...s}),[h,s,D,u]),j=y.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:M,node:T,isOver:_,setNodeRef:C}=ho({id:o,data:A,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...a}}),{active:N,activatorEvent:Q,activeNodeRect:we,attributes:re,setNodeRef:Ie,listeners:le,isDragging:de,over:B,setActivatorNodeRef:ue,transform:ae}=Xa({id:o,data:A,attributes:{...Eu,...n},disabled:x.draggable}),Se=Ja(C,Ie),fe=!!N,X=fe&&!p&&ln(g)&&ln(v),R=!b&&de,z=R&&X?ae:null,Re=X?z??(l??E)({rects:m,activeNodeRect:we,activeIndex:g,overIndex:v,index:D}):null,ze=ln(g)&&ln(v)?i({id:o,items:u,activeIndex:g,overIndex:v}):D,Ye=N?.id,se=y.useRef({activeId:Ye,items:u,newIndex:ze,containerId:h}),er=u!==se.current.items,nn=t({active:N,containerId:h,isDragging:de,isSorting:fe,id:o,index:D,items:u,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),Pt=_u({disabled:!nn,index:D,node:T,rect:M});return y.useEffect(()=>{fe&&se.current.newIndex!==ze&&(se.current.newIndex=ze),h!==se.current.containerId&&(se.current.containerId=h),u!==se.current.items&&(se.current.items=u)},[fe,ze,h,u]),y.useEffect(()=>{if(Ye===se.current.activeId)return;if(Ye!=null&&se.current.activeId==null){se.current.activeId=Ye;return}const nr=setTimeout(()=>{se.current.activeId=Ye},50);return()=>clearTimeout(nr)},[Ye]),{active:N,activeIndex:g,attributes:re,data:A,rect:M,index:D,newIndex:ze,items:u,isOver:_,isSorting:fe,isDragging:de,listeners:le,node:T,overIndex:v,over:B,setNodeRef:Se,setActivatorNodeRef:ue,setDroppableNodeRef:C,setDraggableNodeRef:Ie,transform:Pt??Re,transition:tr()};function tr(){if(Pt||er&&se.current.newIndex===D)return Cu;if(!(R&&!Ka(Q)||!d)&&(fe||nn))return ns.Transition.toString({...d,property:Fo})}}function Au(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}sn.Down,sn.Right,sn.Up,sn.Left;function Ho(){return c.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:[c.jsx(_t,{className:"w-3 h-3 mr-1"}),"Paper"]})}function ne(e){return e?!!(e.paper_writing_task?.progress==="Completed"||e.paper_writing_task?.progress==="Published"||e.completed_at):!1}const Lo=({task:e,isRecentlyUpdated:t=!1,onDelete:n,onClick:r})=>{const[s,i]=y.useState(!1),[o,l]=y.useState(!1),{attributes:a,listeners:d,setNodeRef:u,transform:h,transition:g,isDragging:f}=Oo({id:`task-${e.id}`,data:{type:"Task",task:e}}),p={transition:g,transform:ns.Transform.toString(h),opacity:f?.5:1},m=A=>A?A.split(" ").map(j=>j.charAt(0)).join("").toUpperCase().slice(0,2):"??",v=y.useMemo(()=>{if(!e.due_date)return null;try{const A=new Date(e.due_date),M=dd(new Date,A);let T;return lc(A)?T=`Today at ${Ve(A,"p")}`:ac(A)?T=`Tomorrow at ${Ve(A,"p")}`:M?T=Ve(A,"MMM d, p"):T=Ve(A,"MMM d, p"),{text:T,isOverdue:M}}catch(A){return console.error("Error formatting date:",A),null}},[e.due_date]),b=A=>{A.preventDefault(),A.stopPropagation(),n&&n(e)},E=A=>{A.preventDefault(),A.stopPropagation(),J.post(route("project-hub.tasks.archive",e.id),{},{preserveScroll:!0,onSuccess:()=>{V.success("Task archived!"),J.reload({only:["initialBoardData"]})},onError:()=>V.error("Failed to archive task.")})},x=A=>{r&&!A.target.closest("button")&&!A.target.closest('input[type="checkbox"]')&&(A.preventDefault(),A.stopPropagation(),r(e))},D=async A=>{if(A.preventDefault(),A.stopPropagation(),!o){l(!0);try{await ke.post(route("project-hub.tasks.toggle-completion",e.id)),V.success("Task status updated!"),J.reload({only:["initialBoardData"]})}catch(j){console.error("Error toggling task completion:",j),V.error("Failed to update task status.")}finally{l(!1)}}};return c.jsxs("div",{ref:u,style:p,...a,...d,className:pe("relative bg-white rounded-md shadow-sm border border-gray-200 p-3 mb-2 cursor-pointer hover:shadow-md transition-all duration-200",{"ring-2 ring-indigo-500 ring-opacity-50":t,"opacity-60":ne(e)}),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:x,children:[s&&c.jsx("div",{className:"absolute top-1 right-1 z-10",onClick:A=>A.stopPropagation(),children:c.jsxs(pu,{as:"div",className:"relative",children:[c.jsx(To,{className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:c.jsx(So,{className:"w-4 h-4"})}),c.jsx(ko,{anchor:"bottom end",className:"w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:c.jsxs("div",{className:"py-1",children:[ne(e)&&!e.archived_at&&c.jsx(Fr,{children:c.jsxs("button",{onClick:E,className:"group flex w-full items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[c.jsx(as,{className:"mr-2 h-4 w-4 text-gray-500"}),"Archive"]})}),n&&c.jsx(Fr,{children:c.jsxs("button",{onClick:b,className:"group flex w-full items-center px-3 py-2 text-sm text-red-700 hover:bg-red-50",children:[c.jsx(qt,{className:"mr-2 h-4 w-4 text-red-500"}),"Delete"]})})]})})]})}),e.labels&&e.labels.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:e.labels.map((A,j)=>c.jsx("span",{className:`
                                text-xs px-2 py-0.5 rounded-full
                                ${A.color||"bg-gray-200 text-gray-800"}
                            `,children:A.name},j))}),c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("input",{type:"checkbox",checked:ne(e),disabled:o,onChange:D,className:pe("w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 focus:ring-2",{"opacity-50 cursor-not-allowed":o})}),c.jsx("h3",{className:pe("font-medium line-clamp-2 pr-5 flex-1",{"text-gray-500 line-through":ne(e),"text-gray-900":!ne(e)}),children:e.title}),e.paper_writing_task&&c.jsx(Ho,{})]}),e.description&&c.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),e.priority&&c.jsx("div",{className:"mb-2",children:c.jsx("span",{className:`
                        text-xs px-2 py-1 rounded-full font-medium
                        ${e.priority==="Low"?"bg-blue-100 text-blue-800":""}
                        ${e.priority==="Medium"?"bg-yellow-100 text-yellow-800":""}
                        ${e.priority==="High"?"bg-orange-100 text-orange-800":""}
                        ${e.priority==="Urgent"?"bg-red-100 text-red-800":""}
                    `,children:e.priority})}),c.jsxs("div",{className:"flex items-center justify-between mt-2",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[v&&c.jsxs("div",{className:`flex items-center ${v.isOverdue?"text-red-600 font-medium":""}`,children:[c.jsx(gt,{className:`w-3.5 h-3.5 mr-1 ${v.isOverdue?"text-red-600":""}`}),c.jsx("span",{children:v.text})]}),e.comments_count>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(Co,{className:"w-3.5 h-3.5 mr-1"}),c.jsx("span",{children:e.comments_count})]}),e.attachments&&e.attachments.length>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(Eo,{className:"w-3.5 h-3.5 mr-1"}),c.jsx("span",{children:e.attachments.length})]})]}),e.assignees&&e.assignees.length>0&&c.jsxs("div",{className:"flex -space-x-2",children:[e.assignees.slice(0,3).map((A,j)=>c.jsx("div",{className:"w-6 h-6 rounded-full ring-2 ring-white overflow-hidden bg-gray-200 flex items-center justify-center",title:A.full_name||"Unnamed user",children:A.avatar_url?c.jsx("img",{src:A.avatar_url!==null?`/storage/${A.avatar_url}`:"/storage/profile_pictures/default.jpg",alt:A.full_name,className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs font-medium text-gray-600",children:A.full_name?m(A.full_name):"??"})},j)),e.assignees.length>3&&c.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-xs ring-2 ring-white text-gray-500",children:["+",e.assignees.length-3]})]})]})]})};function ii({list:e,tasks:t,onDeleteList:n,onDeleteTask:r,onTaskClick:s,onAddTask:i,className:o="",isDragging:l=!1,isOverlay:a=!1}){const{attributes:d,listeners:u,setNodeRef:h,transform:g,transition:f,isDragging:p}=Oo({id:`list-${e.id}`,data:{type:"List",list:e},disabled:a}),{setNodeRef:m,isOver:v}=ho({id:`list-${e.id}`,data:{type:"List",list:e},disabled:a}),b=C=>{a||(h(C),m(C))},[E,x]=y.useState(!1),D=async C=>{try{await J.put(route("project-hub.lists.update",e.id),{name:C},{preserveScroll:!0,onSuccess:()=>{V.success("List renamed successfully.")},onError:N=>{V.error("Failed to rename list."),console.error("Error renaming list:",N)}})}catch(N){V.error("An unexpected error occurred."),console.error("Error renaming list:",N)}},A=t.map(C=>`task-${C.id}`),j=t.map(C=>({...C,list_id:e.id})),M=a?{}:{transform:g?`translate3d(${g.x}px, ${g.y}px, 0)`:void 0,transition:f},T=pe("board-column","flex flex-col","lg:w-full w-20","md:mx-1","md:flex-shrink-0","rounded-md","mb-4 md:mb-0","transition-transform duration-300 ease-in-out",o,{"border-2 border-dashed border-blue-400 bg-blue-50/50":l,"shadow bg-gray-100":!l,"z-50 shadow-xl scale-[1.02]":a}),_=l?"invisible":"visible";return c.jsxs("div",{ref:a?void 0:b,style:M,className:T,...a?{}:d,children:[c.jsxs("div",{className:pe("p-3 md:p-3 border-b bg-white rounded-t-md flex justify-between items-center cursor-grab lg:w-full w-[24.5rem]",_),...a?{}:u,children:[c.jsxs("div",{className:"flex items-center flex-1 min-w-0 mr-2",children:[c.jsx(cd,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx(mo,{value:e.name,onSave:D,canEdit:e.can&&e.can.update,className:"font-semibold text-gray-800 text-base md:text-base line-clamp-2",inputClassName:"text-base md:text-base font-semibold",placeholder:"List name",showPencilOnHover:!1})})]}),!a&&c.jsxs("div",{className:"relative flex items-center flex-shrink-0",children:[c.jsxs("div",{className:"text-xs text-gray-500 mr-2 whitespace-nowrap",children:[t.length," ",t.length===1?"task":"tasks"]}),c.jsx("button",{type:"button",className:"p-2 md:p-1 text-gray-400 hover:text-gray-600 rounded-full touch-manipulation",onClick:()=>x(!E),children:c.jsx(So,{className:"w-4 h-4"})}),E&&c.jsx("div",{className:"absolute right-0 top-full z-10 mt-1 w-36 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:c.jsxs("button",{type:"button",className:"flex w-full items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 touch-manipulation",onClick:()=>{x(!1),n&&n()},children:[c.jsx(qt,{className:"w-4 h-4 mr-2 text-gray-500"}),"Delete List"]})})]})]}),c.jsxs("div",{className:pe("flex-1 p-2 min-h-[250px] lg:w-full w-[24.5rem] board-column-tasks",_,{"bg-blue-50":v&&!a}),children:[c.jsx(Po,{items:A,strategy:Io,children:j.map(C=>c.jsx(Lo,{task:C,onDelete:a?void 0:r,onClick:a?void 0:s},C.id))}),t.length===0&&c.jsx("div",{className:"flex items-center justify-center h-[200px] text-gray-400 text-sm md:text-sm italic",children:v&&!a?"Drop task here":"No tasks yet"})]}),!a&&c.jsx("div",{className:pe("p-2 border-t bg-gray-50 rounded-b-md lg:w-full w-[24.5rem]",_),children:c.jsxs("button",{type:"button",onClick:()=>i&&i(e.id),className:"lg:w-full w-[24.5rem] text-left text-gray-600 text-sm py-2 md:py-1 px-2 rounded hover:bg-gray-200 transition-colors flex items-center touch-manipulation",children:[c.jsx(Mr,{className:"h-4 w-4 mr-1"}),"Add a task"]})}),l&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"text-blue-500 font-medium",children:"Drop here"})})]})}var Un,O,Bo,Vo,Tt,dt,oi,$o,zo,Rn={},Uo=[],Ru=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ze(e,t){for(var n in t)e[n]=t[n];return e}function Go(e){var t=e.parentNode;t&&t.removeChild(e)}function S(e,t,n){var r,s,i,o={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?Un.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return xn(e,o,r,s,null)}function xn(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++Bo};return s==null&&O.vnode!=null&&O.vnode(i),i}function qe(){return{current:null}}function ee(e){return e.children}function Du(e,t,n,r,s){var i;for(i in n)i==="children"||i==="key"||i in t||Dn(e,i,null,n[i],r);for(i in t)s&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===t[i]||Dn(e,i,t[i],n[i],r)}function li(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ru.test(t)?n:n+"px"}function Dn(e,t,n,r,s){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||li(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||li(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?ci:ai,i):e.removeEventListener(t,i?ci:ai,i);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,n))}}function ai(e){Tt=!0;try{return this.l[e.type+!1](O.event?O.event(e):e)}finally{Tt=!1}}function ci(e){Tt=!0;try{return this.l[e.type+!0](O.event?O.event(e):e)}finally{Tt=!1}}function _e(e,t){this.props=e,this.context=t}function Yt(e,t){if(t==null)return e.__?Yt(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Yt(e):null}function Wo(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Wo(e)}}function Tu(e){Tt?setTimeout(e):$o(e)}function Or(e){(!e.__d&&(e.__d=!0)&&dt.push(e)&&!Tn.__r++||oi!==O.debounceRendering)&&((oi=O.debounceRendering)||Tu)(Tn)}function Tn(){var e,t,n,r,s,i,o,l;for(dt.sort(function(a,d){return a.__v.__b-d.__v.__b});e=dt.shift();)e.__d&&(t=dt.length,r=void 0,s=void 0,o=(i=(n=e).__v).__e,(l=n.__P)&&(r=[],(s=Ze({},i)).__v=i.__v+1,gs(l,i,s,n.__n,l.ownerSVGElement!==void 0,i.__h!=null?[o]:null,r,o??Yt(i),i.__h),Xo(r,i),i.__e!=o&&Wo(i)),dt.length>t&&dt.sort(function(a,d){return a.__v.__b-d.__v.__b}));Tn.__r=0}function qo(e,t,n,r,s,i,o,l,a,d){var u,h,g,f,p,m,v,b=r&&r.__k||Uo,E=b.length;for(n.__k=[],u=0;u<t.length;u++)if((f=n.__k[u]=(f=t[u])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?xn(null,f,null,null,f):Array.isArray(f)?xn(ee,{children:f},null,null,null):f.__b>0?xn(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)!=null){if(f.__=n,f.__b=n.__b+1,(g=b[u])===null||g&&f.key==g.key&&f.type===g.type)b[u]=void 0;else for(h=0;h<E;h++){if((g=b[h])&&f.key==g.key&&f.type===g.type){b[h]=void 0;break}g=null}gs(e,f,g=g||Rn,s,i,o,l,a,d),p=f.__e,(h=f.ref)&&g.ref!=h&&(v||(v=[]),g.ref&&v.push(g.ref,null,f),v.push(h,f.__c||p,f)),p!=null?(m==null&&(m=p),typeof f.type=="function"&&f.__k===g.__k?f.__d=a=Qo(f,a,e):a=Yo(e,f,g,b,p,a),typeof n.type=="function"&&(n.__d=a)):a&&g.__e==a&&a.parentNode!=e&&(a=Yt(g))}for(n.__e=m,u=E;u--;)b[u]!=null&&(typeof n.type=="function"&&b[u].__e!=null&&b[u].__e==n.__d&&(n.__d=Zo(r).nextSibling),Ko(b[u],b[u]));if(v)for(u=0;u<v.length;u++)Jo(v[u],v[++u],v[++u])}function Qo(e,t,n){for(var r,s=e.__k,i=0;s&&i<s.length;i++)(r=s[i])&&(r.__=e,t=typeof r.type=="function"?Qo(r,t,n):Yo(n,r,r,s,r.__e,t));return t}function kn(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(n){kn(n,t)}):t.push(e)),t}function Yo(e,t,n,r,s,i){var o,l,a;if(t.__d!==void 0)o=t.__d,t.__d=void 0;else if(n==null||s!=i||s.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(s),o=null;else{for(l=i,a=0;(l=l.nextSibling)&&a<r.length;a+=1)if(l==s)break e;e.insertBefore(s,i),o=i}return o!==void 0?o:s.nextSibling}function Zo(e){var t,n,r;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=Zo(n)))return r}return null}function gs(e,t,n,r,s,i,o,l,a){var d,u,h,g,f,p,m,v,b,E,x,D,A,j,M,T=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(a=n.__h,l=t.__e=n.__e,t.__h=null,i=[l]),(d=O.__b)&&d(t);try{e:if(typeof T=="function"){if(v=t.props,b=(d=T.contextType)&&r[d.__c],E=d?b?b.props.value:d.__:r,n.__c?m=(u=t.__c=n.__c).__=u.__E:("prototype"in T&&T.prototype.render?t.__c=u=new T(v,E):(t.__c=u=new _e(v,E),u.constructor=T,u.render=Nu),b&&b.sub(u),u.props=v,u.state||(u.state={}),u.context=E,u.__n=r,h=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),T.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Ze({},u.__s)),Ze(u.__s,T.getDerivedStateFromProps(v,u.__s))),g=u.props,f=u.state,u.__v=t,h)T.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(T.getDerivedStateFromProps==null&&v!==g&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,E),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,E)===!1||t.__v===n.__v){for(t.__v!==n.__v&&(u.props=v,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(_){_&&(_.__=t)}),x=0;x<u._sb.length;x++)u.__h.push(u._sb[x]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,E),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(g,f,p)})}if(u.context=E,u.props=v,u.__P=e,D=O.__r,A=0,"prototype"in T&&T.prototype.render){for(u.state=u.__s,u.__d=!1,D&&D(t),d=u.render(u.props,u.state,u.context),j=0;j<u._sb.length;j++)u.__h.push(u._sb[j]);u._sb=[]}else do u.__d=!1,D&&D(t),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++A<25);u.state=u.__s,u.getChildContext!=null&&(r=Ze(Ze({},r),u.getChildContext())),h||u.getSnapshotBeforeUpdate==null||(p=u.getSnapshotBeforeUpdate(g,f)),M=d!=null&&d.type===ee&&d.key==null?d.props.children:d,qo(e,Array.isArray(M)?M:[M],t,n,r,s,i,o,l,a),u.base=t.__e,t.__h=null,u.__h.length&&o.push(u),m&&(u.__E=u.__=null),u.__e=!1}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ku(n.__e,t,n,r,s,i,o,a);(d=O.diffed)&&d(t)}catch(_){t.__v=null,(a||i!=null)&&(t.__e=l,t.__h=!!a,i[i.indexOf(l)]=null),O.__e(_,t,n)}}function Xo(e,t){O.__c&&O.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){O.__e(r,n.__v)}})}function ku(e,t,n,r,s,i,o,l){var a,d,u,h=n.props,g=t.props,f=t.type,p=0;if(f==="svg"&&(s=!0),i!=null){for(;p<i.length;p++)if((a=i[p])&&"setAttribute"in a==!!f&&(f?a.localName===f:a.nodeType===3)){e=a,i[p]=null;break}}if(e==null){if(f===null)return document.createTextNode(g);e=s?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,g.is&&g),i=null,l=!1}if(f===null)h===g||l&&e.data===g||(e.data=g);else{if(i=i&&Un.call(e.childNodes),d=(h=n.props||Rn).dangerouslySetInnerHTML,u=g.dangerouslySetInnerHTML,!l){if(i!=null)for(h={},p=0;p<e.attributes.length;p++)h[e.attributes[p].name]=e.attributes[p].value;(u||d)&&(u&&(d&&u.__html==d.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(Du(e,g,h,s,l),u)t.__k=[];else if(p=t.props.children,qo(e,Array.isArray(p)?p:[p],t,n,r,s&&f!=="foreignObject",i,o,i?i[0]:n.__k&&Yt(n,0),l),i!=null)for(p=i.length;p--;)i[p]!=null&&Go(i[p]);l||("value"in g&&(p=g.value)!==void 0&&(p!==e.value||f==="progress"&&!p||f==="option"&&p!==h.value)&&Dn(e,"value",p,h.value,!1),"checked"in g&&(p=g.checked)!==void 0&&p!==e.checked&&Dn(e,"checked",p,h.checked,!1))}return e}function Jo(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){O.__e(r,n)}}function Ko(e,t,n){var r,s;if(O.unmount&&O.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Jo(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){O.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&Ko(r[s],t,n||typeof e.type!="function");n||e.__e==null||Go(e.__e),e.__=e.__e=e.__d=void 0}function Nu(e,t,n){return this.constructor(e,n)}function Zt(e,t,n){var r,s,i;O.__&&O.__(e,t),s=(r=!1)?null:t.__k,i=[],gs(t,e=t.__k=S(ee,null,[e]),s||Rn,Rn,t.ownerSVGElement!==void 0,s?null:t.firstChild?Un.call(t.childNodes):null,i,s?s.__e:t.firstChild,r),Xo(i,e)}function Iu(e,t){var n={__c:t="__cC"+zo++,__:e,Consumer:function(r,s){return r.children(s)},Provider:function(r){var s,i;return this.getChildContext||(s=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.some(function(l){l.__e=!0,Or(l)})},this.sub=function(o){s.push(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){s.splice(s.indexOf(o),1),l&&l.call(o)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}Un=Uo.slice,O={__e:function(e,t,n,r){for(var s,i,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),o=s.__d),o)return s.__E=s}catch(l){e=l}throw e}},Bo=0,Vo=function(e){return e!=null&&e.constructor===void 0},Tt=!1,_e.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ze({},this.state),typeof e=="function"&&(e=e(Ze({},n),this.props)),e&&Ze(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Or(this))},_e.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Or(this))},_e.prototype.render=ee,dt=[],$o=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Tn.__r=0,zo=0;var Be,cr,di,el=[],dr=[],ui=O.__b,fi=O.__r,gi=O.diffed,hi=O.__c,pi=O.unmount;function Mu(){for(var e;e=el.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(wn),e.__H.__h.forEach(Hr),e.__H.__h=[]}catch(t){e.__H.__h=[],O.__e(t,e.__v)}}O.__b=function(e){Be=null,ui&&ui(e)},O.__r=function(e){fi&&fi(e);var t=(Be=e.__c).__H;t&&(cr===Be?(t.__h=[],Be.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=dr,n.__N=n.i=void 0})):(t.__h.forEach(wn),t.__h.forEach(Hr),t.__h=[])),cr=Be},O.diffed=function(e){gi&&gi(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(el.push(t)!==1&&di===O.requestAnimationFrame||((di=O.requestAnimationFrame)||ju)(Mu)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==dr&&(n.__=n.__V),n.i=void 0,n.__V=dr})),cr=Be=null},O.__c=function(e,t){t.some(function(n){try{n.__h.forEach(wn),n.__h=n.__h.filter(function(r){return!r.__||Hr(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],O.__e(r,n.__v)}}),hi&&hi(e,t)},O.unmount=function(e){pi&&pi(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{wn(r)}catch(s){t=s}}),n.__H=void 0,t&&O.__e(t,n.__v))};var mi=typeof requestAnimationFrame=="function";function ju(e){var t,n=function(){clearTimeout(r),mi&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);mi&&(t=requestAnimationFrame(n))}function wn(e){var t=Be,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Be=t}function Hr(e){var t=Be;e.__c=e.__(),Be=t}function Pu(e,t){for(var n in t)e[n]=t[n];return e}function vi(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function yi(e){this.props=e}(yi.prototype=new _e).isPureReactComponent=!0,yi.prototype.shouldComponentUpdate=function(e,t){return vi(this.props,e)||vi(this.state,t)};var bi=O.__b;O.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),bi&&bi(e)};var Fu=O.__e;O.__e=function(e,t,n,r){if(e.then){for(var s,i=t;i=i.__;)if((s=i.__c)&&s.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),s.__c(e,t)}Fu(e,t,n,r)};var xi=O.unmount;function tl(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=Pu({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return tl(r,t,n)})),e}function nl(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return nl(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function ur(){this.__u=0,this.t=null,this.__b=null}function rl(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function cn(){this.u=null,this.o=null}O.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),xi&&xi(e)},(ur.prototype=new _e).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var s=rl(r.__v),i=!1,o=function(){i||(i=!0,n.__R=null,s?s(l):l())};n.__R=o;var l=function(){if(!--r.__u){if(r.state.__a){var d=r.state.__a;r.__v.__k[0]=nl(d,d.__c.__P,d.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.t.pop();)u.forceUpdate()}},a=t.__h===!0;r.__u++||a||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},ur.prototype.componentWillUnmount=function(){this.t=[]},ur.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=tl(this.__b,n,r.__O=r.__P)}this.__b=null}var s=t.__a&&S(ee,null,e.fallback);return s&&(s.__h=null),[S(ee,null,t.__a?null:e.children),s]};var wi=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Ou(e){return this.getChildContext=function(){return e.context},e.children}function Hu(e){var t=this,n=e.i;t.componentWillUnmount=function(){Zt(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,s){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),Zt(S(Ou,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Lu(e,t){var n=S(Hu,{__v:e,i:t});return n.containerInfo=t,n}(cn.prototype=new _e).__a=function(e){var t=this,n=rl(t.__v),r=t.o.get(e);return r[0]++,function(s){var i=function(){t.props.revealOrder?(r.push(s),wi(t,e,r)):s()};n?n(i):i()}},cn.prototype.render=function(e){this.u=null,this.o=new Map;var t=kn(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},cn.prototype.componentDidUpdate=cn.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){wi(e,n,t)})};var Bu=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Vu=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,$u=typeof document<"u",zu=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};_e.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(_e.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Si=O.event;function Uu(){}function Gu(){return this.cancelBubble}function Wu(){return this.defaultPrevented}O.event=function(e){return Si&&(e=Si(e)),e.persist=Uu,e.isPropagationStopped=Gu,e.isDefaultPrevented=Wu,e.nativeEvent=e};var Ci={configurable:!0,get:function(){return this.class}},Ei=O.vnode;O.vnode=function(e){var t=e.type,n=e.props,r=n;if(typeof t=="string"){var s=t.indexOf("-")===-1;for(var i in r={},n){var o=n[i];$u&&i==="children"&&t==="noscript"||i==="value"&&"defaultValue"in n&&o==null||(i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&o===!0?o="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!zu(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():s&&Vu.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),r[i]&&(i="oninputCapture")),r[i]=o)}t=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=kn(n.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),t=="select"&&r.defaultValue!=null&&(r.value=kn(n.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),e.props=r,n.class!=n.className&&(Ci.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",Ci))}e.$$typeof=Bu,Ei&&Ei(e)};var _i=O.__r;O.__r=function(e){_i&&_i(e),e.__c};const sl=[],Lr=new Map;function il(e){sl.push(e),Lr.forEach(t=>{ll(t,e)})}function qu(e){e.isConnected&&e.getRootNode&&ol(e.getRootNode())}function ol(e){let t=Lr.get(e);if(!t||!t.isConnected){if(t=e.querySelector("style[data-fullcalendar]"),!t){t=document.createElement("style"),t.setAttribute("data-fullcalendar","");const n=Yu();n&&(t.nonce=n);const r=e===document?document.head:e,s=e===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(t,s)}Lr.set(e,t),Qu(t)}}function Qu(e){for(const t of sl)ll(e,t)}function ll(e,t){const{sheet:n}=e,r=n.cssRules.length;t.split("}").forEach((s,i)=>{s=s.trim(),s&&n.insertRule(s+"}",r+i)})}let fr;function Yu(){return fr===void 0&&(fr=Zu()),fr}function Zu(){const e=document.querySelector('meta[name="csp-nonce"]');if(e&&e.hasAttribute("content"))return e.getAttribute("content");const t=document.querySelector("script[nonce]");return t&&t.nonce||""}typeof document<"u"&&ol(document);var Xu=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';il(Xu);class hs{constructor(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),t==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))}pause(t=""){let{pauseDepths:n}=this;n[t]=(n[t]||0)+1,this.clearTimeout()}resume(t="",n){let{pauseDepths:r}=this;t in r&&(n?delete r[t]:(r[t]-=1,r[t]<=0&&delete r[t]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function ps(e){e.parentNode&&e.parentNode.removeChild(e)}function ve(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(Ju(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}function Ju(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector).call(e,t)}function Ku(e,t){let n=e instanceof HTMLElement?[e]:e,r=[];for(let s=0;s<n.length;s+=1){let i=n[s].querySelectorAll(t);for(let o=0;o<i.length;o+=1)r.push(i[o])}return r}const ef=/(top|left|right|bottom|width|height)$/i;function Vt(e,t){for(let n in t)al(e,n,t[n])}function al(e,t,n){n==null?e.style[t]="":typeof n=="number"&&ef.test(t)?e.style[t]=`${n}px`:e.style[t]=n}function cl(e){var t,n;return(n=(t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])!==null&&n!==void 0?n:e.target}let Ai=0;function Gn(){return Ai+=1,"fc-dom-"+Ai}function Wn(e){e.preventDefault()}function tf(e,t){return n=>{let r=ve(n.target,e);r&&t.call(r,n,r)}}function dl(e,t,n,r){let s=tf(n,r);return e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}}function nf(e,t,n,r){let s;return dl(e,"mouseover",t,(i,o)=>{if(o!==s){s=o,n(i,o);let l=a=>{s=null,r(a,o),o.removeEventListener("mouseleave",l)};o.addEventListener("mouseleave",l)}})}const Ri=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function rf(e,t){let n=r=>{t(r),Ri.forEach(s=>{e.removeEventListener(s,n)})};Ri.forEach(r=>{e.addEventListener(r,n)})}function ul(e){return Object.assign({onClick:e},fl(e))}function fl(e){return{tabIndex:0,onKeyDown(t){(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault())}}}let Di=0;function yt(){return Di+=1,String(Di)}function ms(){document.body.classList.add("fc-not-allowed")}function vs(){document.body.classList.remove("fc-not-allowed")}function sf(e){e.style.userSelect="none",e.style.webkitUserSelect="none",e.addEventListener("selectstart",Wn)}function of(e){e.style.userSelect="",e.style.webkitUserSelect="",e.removeEventListener("selectstart",Wn)}function lf(e){e.addEventListener("contextmenu",Wn)}function af(e){e.removeEventListener("contextmenu",Wn)}function cf(e){let t=[],n=[],r,s;for(typeof e=="string"?n=e.split(/\s*,\s*/):typeof e=="function"?n=[e]:Array.isArray(e)&&(n=e),r=0;r<n.length;r+=1)s=n[r],typeof s=="string"?t.push(s.charAt(0)==="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&t.push({func:s});return t}function df(e,t,n){let r,s;for(r=0;r<n.length;r+=1)if(s=uf(e,t,n[r]),s)return s;return 0}function uf(e,t,n){return n.func?n.func(e,t):ff(e[n.field],t[n.field])*(n.order||1)}function ff(e,t){return!e&&!t?0:t==null?-1:e==null?1:typeof e=="string"||typeof t=="string"?String(e).localeCompare(String(t)):e-t}function gr(e,t){let n=String(e);return"000".substr(0,t-n.length)+n}function $t(e,t,n){return typeof e=="function"?e(...t):typeof e=="string"?t.reduce((r,s,i)=>r.replace("$"+i,s||""),e):n}function gf(e,t){return e-t}function hr(e){return e%1===0}function hf(e){let t=e.querySelector(".fc-scrollgrid-shrink-frame"),n=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+n.getBoundingClientRect().width}const pf=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function q(e,t){return typeof e=="string"?mf(e):typeof e=="object"&&e?Ti(e):typeof e=="number"?Ti({[t||"milliseconds"]:e}):null}function mf(e){let t=pf.exec(e);if(t){let n=t[1]?-1:1;return{years:0,months:0,days:n*(t[2]?parseInt(t[2],10):0),milliseconds:n*((t[3]?parseInt(t[3],10):0)*60*60*1e3+(t[4]?parseInt(t[4],10):0)*60*1e3+(t[5]?parseInt(t[5],10):0)*1e3+(t[6]?parseInt(t[6],10):0))}}return null}function Ti(e){let t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:(e.hours||e.hour||0)*60*60*1e3+(e.minutes||e.minute||0)*60*1e3+(e.seconds||e.second||0)*1e3+(e.milliseconds||e.millisecond||e.ms||0)},n=e.weeks||e.week;return n&&(t.days+=n*7,t.specifiedWeeks=!0),t}function vf(e,t){return e.years===t.years&&e.months===t.months&&e.days===t.days&&e.milliseconds===t.milliseconds}function yf(e,t){return{years:e.years-t.years,months:e.months-t.months,days:e.days-t.days,milliseconds:e.milliseconds-t.milliseconds}}function bf(e){return At(e)/365}function xf(e){return At(e)/30}function At(e){return Xt(e)/864e5}function Xt(e){return e.years*(365*864e5)+e.months*(30*864e5)+e.days*864e5+e.milliseconds}function Br(e){let t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%(1e3*60)!==0)return{unit:"second",value:t/1e3};if(t%(1e3*60*60)!==0)return{unit:"minute",value:t/(1e3*60)};if(t)return{unit:"hour",value:t/(1e3*60*60)}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function tt(e,t,n){if(e===t)return!0;let r=e.length,s;if(r!==t.length)return!1;for(s=0;s<r;s+=1)if(!(n?n(e[s],t[s]):e[s]===t[s]))return!1;return!0}const wf=["sun","mon","tue","wed","thu","fri","sat"];function ki(e,t){let n=Xe(e);return n[2]+=t*7,Ce(n)}function oe(e,t){let n=Xe(e);return n[2]+=t,Ce(n)}function nt(e,t){let n=Xe(e);return n[6]+=t,Ce(n)}function Sf(e,t){return Mt(e,t)/7}function Mt(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60*24)}function Cf(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60)}function Ef(e,t){return(t.valueOf()-e.valueOf())/(1e3*60)}function _f(e,t){return(t.valueOf()-e.valueOf())/1e3}function Af(e,t){let n=Y(e),r=Y(t);return{years:0,months:0,days:Math.round(Mt(n,r)),milliseconds:t.valueOf()-r.valueOf()-(e.valueOf()-n.valueOf())}}function Rf(e,t){let n=Nn(e,t);return n!==null&&n%7===0?n/7:null}function Nn(e,t){return Je(e)===Je(t)?Math.round(Mt(e,t)):null}function Y(e){return Ce([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function Df(e){return Ce([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}function Tf(e){return Ce([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}function kf(e){return Ce([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}function Nf(e,t,n){let r=e.getUTCFullYear(),s=pr(e,r,t,n);if(s<1)return pr(e,r-1,t,n);let i=pr(e,r+1,t,n);return i>=1?Math.min(s,i):s}function pr(e,t,n,r){let s=Ce([t,0,1+If(t,n,r)]),i=Y(e),o=Math.round(Mt(s,i));return Math.floor(o/7)+1}function If(e,t,n){let r=7+t-n;return-((7+Ce([e,0,r]).getUTCDay()-t)%7)+r-1}function Ni(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function Ii(e){return new Date(e[0],e[1]||0,e[2]==null?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function Xe(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function Ce(e){return e.length===1&&(e=e.concat([0])),new Date(Date.UTC(...e))}function gl(e){return!isNaN(e.valueOf())}function Je(e){return e.getUTCHours()*1e3*60*60+e.getUTCMinutes()*1e3*60+e.getUTCSeconds()*1e3+e.getUTCMilliseconds()}function Mf(e,t,n=!1){let r=e.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(t==null?r=r.replace("Z",""):t!==0&&(r=r.replace("Z",bs(t,!0)))),r}function ys(e){return e.toISOString().replace(/T.*$/,"")}function jf(e){return e.toISOString().match(/^\d{4}-\d{2}/)[0]}function bs(e,t=!1){let n=e<0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),i=Math.round(r%60);return t?`${n+gr(s,2)}:${gr(i,2)}`:`GMT${n}${s}${i?`:${gr(i,2)}`:""}`}function W(e,t,n){let r,s;return function(...i){if(!r)s=e.apply(this,i);else if(!tt(r,i)){let o=e.apply(this,i);(!t||!t(o,s))&&(s=o)}return r=i,s}}function Sn(e,t,n){let r,s;return i=>(r?Le(r,i)||(s=e.call(this,i)):s=e.call(this,i),r=i,s)}const mr={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},In={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},dn=/\s*([ap])\.?m\.?/i,Pf=/,/g,Ff=/\s+/g,Of=/\u200e/g,Hf=/UTC|GMT/;class Lf{constructor(t){let n={},r={},s=9;for(let i in t)i in mr?(r[i]=t[i],mr[i]<9&&(s=Math.min(mr[i],s))):(n[i]=t[i],i in In&&(s=Math.min(In[i],s)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=s,this.buildFormattingFunc=W(Mi)}format(t,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(t)}formatRange(t,n,r,s){let{standardDateProps:i,extendedSettings:o}=this,l=Gf(t.marker,n.marker,r.calendarSystem);if(!l)return this.format(t,r);let a=l;a>1&&(i.year==="numeric"||i.year==="2-digit")&&(i.month==="numeric"||i.month==="2-digit")&&(i.day==="numeric"||i.day==="2-digit")&&(a=1);let d=this.format(t,r),u=this.format(n,r);if(d===u)return d;let h=Wf(i,a),g=Mi(h,o,r),f=g(t),p=g(n),m=qf(d,f,u,p),v=o.separator||s||r.defaultSeparator||"";return m?m.before+f+v+p+m.after:d+v+u}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Mi(e,t,n){let r=Object.keys(e).length;return r===1&&e.timeZoneName==="short"?s=>bs(s.timeZoneOffset):r===0&&t.week?s=>Uf(n.computeWeekNumber(s.marker),n.weekText,n.weekTextLong,n.locale,t.week):Bf(e,t,n)}function Bf(e,t,n){e=Object.assign({},e),t=Object.assign({},t),Vf(e,t),e.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,e),s;if(t.omitZeroMinute){let i=Object.assign({},e);delete i.minute,s=new Intl.DateTimeFormat(n.locale.codes,i)}return i=>{let{marker:o}=i,l;s&&!o.getUTCMinutes()?l=s:l=r;let a=l.format(o);return $f(a,i,e,t,n)}}function Vf(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit")),e.timeZoneName==="long"&&(e.timeZoneName="short"),t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}function $f(e,t,n,r,s){return e=e.replace(Of,""),n.timeZoneName==="short"&&(e=zf(e,s.timeZone==="UTC"||t.timeZoneOffset==null?"UTC":bs(t.timeZoneOffset))),r.omitCommas&&(e=e.replace(Pf,"").trim()),r.omitZeroMinute&&(e=e.replace(":00","")),r.meridiem===!1?e=e.replace(dn,"").trim():r.meridiem==="narrow"?e=e.replace(dn,(i,o)=>o.toLocaleLowerCase()):r.meridiem==="short"?e=e.replace(dn,(i,o)=>`${o.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(e=e.replace(dn,i=>i.toLocaleLowerCase())),e=e.replace(Ff," "),e=e.trim(),e}function zf(e,t){let n=!1;return e=e.replace(Hf,()=>(n=!0,t)),n||(e+=` ${t}`),e}function Uf(e,t,n,r,s){let i=[];return s==="long"?i.push(n):(s==="short"||s==="narrow")&&i.push(t),(s==="long"||s==="short")&&i.push(" "),i.push(r.simpleNumberFormat.format(e)),r.options.direction==="rtl"&&i.reverse(),i.join("")}function Gf(e,t,n){return n.getMarkerYear(e)!==n.getMarkerYear(t)?5:n.getMarkerMonth(e)!==n.getMarkerMonth(t)?4:n.getMarkerDay(e)!==n.getMarkerDay(t)?2:Je(e)!==Je(t)?1:0}function Wf(e,t){let n={};for(let r in e)(!(r in In)||In[r]<=t)&&(n[r]=e[r]);return n}function qf(e,t,n,r){let s=0;for(;s<e.length;){let i=e.indexOf(t,s);if(i===-1)break;let o=e.substr(0,i);s=i+t.length;let l=e.substr(s),a=0;for(;a<n.length;){let d=n.indexOf(r,a);if(d===-1)break;let u=n.substr(0,d);a=d+r.length;let h=n.substr(a);if(o===u&&l===h)return{before:o,after:l}}}return null}function ji(e,t){let n=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Mn(e,t,n,r){let s=ji(e,n.calendarSystem),i=t?ji(t,n.calendarSystem):null;return{date:s,start:s,end:i,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class Qf{constructor(t){this.cmdStr=t}format(t,n,r){return n.cmdFormatter(this.cmdStr,Mn(t,null,n,r))}formatRange(t,n,r,s){return r.cmdFormatter(this.cmdStr,Mn(t,n,r,s))}}class Yf{constructor(t){this.func=t}format(t,n,r){return this.func(Mn(t,null,n,r))}formatRange(t,n,r,s){return this.func(Mn(t,n,r,s))}}function ie(e){return typeof e=="object"&&e?new Lf(e):typeof e=="string"?new Qf(e):typeof e=="function"?new Yf(e):null}const Pi={navLinkDayClick:w,navLinkWeekClick:w,duration:q,bootstrapFontAwesome:w,buttonIcons:w,customButtons:w,defaultAllDayEventDuration:q,defaultTimedEventDuration:q,nextDayThreshold:q,scrollTime:q,scrollTimeReset:Boolean,slotMinTime:q,slotMaxTime:q,dayPopoverFormat:ie,slotDuration:q,snapDuration:q,headerToolbar:w,footerToolbar:w,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:ie,dayHeaderClassNames:w,dayHeaderContent:w,dayHeaderDidMount:w,dayHeaderWillUnmount:w,dayCellClassNames:w,dayCellContent:w,dayCellDidMount:w,dayCellWillUnmount:w,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:w,weekNumbers:Boolean,weekNumberClassNames:w,weekNumberContent:w,weekNumberDidMount:w,weekNumberWillUnmount:w,editable:Boolean,viewClassNames:w,viewDidMount:w,viewWillUnmount:w,nowIndicator:Boolean,nowIndicatorSnap:w,nowIndicatorClassNames:w,nowIndicatorContent:w,nowIndicatorDidMount:w,nowIndicatorWillUnmount:w,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:w,locale:w,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:w,eventOrder:cf,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:w,contentHeight:w,direction:String,weekNumberFormat:ie,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:w,initialDate:w,now:w,eventDataTransform:w,stickyHeaderDates:w,stickyFooterScrollbar:w,viewHeight:w,defaultAllDay:Boolean,eventSourceFailure:w,eventSourceSuccess:w,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:w,eventConstraint:w,eventAllow:w,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:w,eventContent:w,eventDidMount:w,eventWillUnmount:w,selectConstraint:w,selectOverlap:w,selectAllow:w,droppable:Boolean,unselectCancel:String,slotLabelFormat:w,slotLaneClassNames:w,slotLaneContent:w,slotLaneDidMount:w,slotLaneWillUnmount:w,slotLabelClassNames:w,slotLabelContent:w,slotLabelDidMount:w,slotLabelWillUnmount:w,dayMaxEvents:w,dayMaxEventRows:w,dayMinWidth:Number,slotLabelInterval:q,allDayText:String,allDayClassNames:w,allDayContent:w,allDayDidMount:w,allDayWillUnmount:w,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:ie,rerenderDelay:Number,moreLinkText:w,moreLinkHint:w,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:w,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:q,hiddenDays:w,fixedWeekCount:Boolean,validRange:w,visibleRange:w,titleFormat:w,eventInteractive:Boolean,noEventsText:String,viewHint:w,navLinkHint:w,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:w,moreLinkClassNames:w,moreLinkContent:w,moreLinkDidMount:w,moreLinkWillUnmount:w,monthStartFormat:ie,handleCustomRendering:w,customRenderingMetaMap:w,customRenderingReplaces:Boolean},zt={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" â€“ ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},Fi={datesSet:w,eventsSet:w,eventAdd:w,eventChange:w,eventRemove:w,windowResize:w,eventClick:w,eventMouseEnter:w,eventMouseLeave:w,select:w,unselect:w,loading:w,_unmount:w,_beforeprint:w,_afterprint:w,_noEventDrop:w,_noEventResize:w,_resize:w,_scrollRequest:w},Oi={buttonText:w,buttonHints:w,views:w,plugins:w,initialEvents:w,events:w,eventSources:w},at={headerToolbar:ct,footerToolbar:ct,buttonText:ct,buttonHints:ct,buttonIcons:ct,dateIncrement:ct,plugins:un,events:un,eventSources:un,resources:un};function ct(e,t){return typeof e=="object"&&typeof t=="object"&&e&&t?Le(e,t):e===t}function un(e,t){return Array.isArray(e)&&Array.isArray(t)?tt(e,t):e===t}const Zf={type:String,component:w,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:w,usesMinMaxTime:Boolean,classNames:w,content:w,didMount:w,willUnmount:w};function vr(e){return ws(e,at)}function xs(e,t){let n={},r={};for(let s in t)s in e&&(n[s]=t[s](e[s]));for(let s in e)s in t||(r[s]=e[s]);return{refined:n,extra:r}}function w(e){return e}const{hasOwnProperty:jn}=Object.prototype;function ws(e,t){let n={};if(t){for(let r in t)if(t[r]===ct){let s=[];for(let i=e.length-1;i>=0;i-=1){let o=e[i][r];if(typeof o=="object"&&o)s.unshift(o);else if(o!==void 0){n[r]=o;break}}s.length&&(n[r]=ws(s))}}for(let r=e.length-1;r>=0;r-=1){let s=e[r];for(let i in s)i in n||(n[i]=s[i])}return n}function ht(e,t){let n={};for(let r in e)t(e[r],r)&&(n[r]=e[r]);return n}function bt(e,t){let n={};for(let r in e)n[r]=t(e[r],r);return n}function hl(e){let t={};for(let n of e)t[n]=!0;return t}function Ss(e){let t=[];for(let n in e)t.push(e[n]);return t}function Le(e,t){if(e===t)return!0;for(let n in e)if(jn.call(e,n)&&!(n in t))return!1;for(let n in t)if(jn.call(t,n)&&e[n]!==t[n])return!1;return!0}const Xf=/^on[A-Z]/;function Jf(e,t){const n=Kf(e,t);for(let r of n)if(!Xf.test(r))return!1;return!0}function Kf(e,t){let n=[];for(let r in e)jn.call(e,r)&&(r in t||n.push(r));for(let r in t)jn.call(t,r)&&e[r]!==t[r]&&n.push(r);return n}function yr(e,t,n={}){if(e===t)return!0;for(let r in t)if(!(r in e&&eg(e[r],t[r],n[r])))return!1;for(let r in e)if(!(r in t))return!1;return!0}function eg(e,t,n){return e===t||n===!0?!0:n?n(e,t):!1}function tg(e,t=0,n,r=1){let s=[];n==null&&(n=Object.keys(e).length);for(let i=t;i<n;i+=r){let o=e[i];o!==void 0&&s.push(o)}return s}let pl={};function ng(e,t){pl[e]=t}function rg(e){return new pl[e]}class sg{getMarkerYear(t){return t.getUTCFullYear()}getMarkerMonth(t){return t.getUTCMonth()}getMarkerDay(t){return t.getUTCDate()}arrayToMarker(t){return Ce(t)}markerToArray(t){return Xe(t)}}ng("gregory",sg);const ig=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function og(e){let t=ig.exec(e);if(t){let n=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?+`0.${t[12]}`*1e3:0));if(gl(n)){let r=null;return t[13]&&(r=(t[15]==="-"?-1:1)*(Number(t[16]||0)*60+Number(t[18]||0))),{marker:n,isTimeUnspecified:!t[6],timeZoneOffset:r}}}return null}class lg{constructor(t){let n=this.timeZone=t.timeZone,r=n!=="local"&&n!=="UTC";t.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=rg(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,t.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof t.firstDay=="number"&&(this.weekDow=t.firstDay),typeof t.weekNumberCalculation=="function"&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=t.weekText!=null?t.weekText:t.locale.options.weekText,this.weekTextLong=(t.weekTextLong!=null?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}createMarker(t){let n=this.createMarkerMeta(t);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Ce(Ni(new Date))}createMarkerMeta(t){if(typeof t=="string")return this.parse(t);let n=null;return typeof t=="number"?n=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(n=this.timestampToMarker(t))):Array.isArray(t)&&(n=Ce(t)),n===null||!gl(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(t){let n=og(t);if(n===null)return null;let{marker:r}=n,s=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):s=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:s}}getYear(t){return this.calendarSystem.getMarkerYear(t)}getMonth(t){return this.calendarSystem.getMarkerMonth(t)}getDay(t){return this.calendarSystem.getMarkerDay(t)}add(t,n){let r=this.calendarSystem.markerToArray(t);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(t,n){let r=this.calendarSystem.markerToArray(t);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(t,n){let r=this.calendarSystem.markerToArray(t);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(t,n){let r=this.calendarSystem.markerToArray(t);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(t,n){let{calendarSystem:r}=this;return Je(t)===Je(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)&&r.getMarkerMonth(t)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(t):null}diffWholeMonths(t,n){let{calendarSystem:r}=this;return Je(t)===Je(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(t)+(r.getMarkerYear(n)-r.getMarkerYear(t))*12:null}greatestWholeUnit(t,n){let r=this.diffWholeYears(t,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(t,n),r!==null?{unit:"month",value:r}:(r=Rf(t,n),r!==null?{unit:"week",value:r}:(r=Nn(t,n),r!==null?{unit:"day",value:r}:(r=Cf(t,n),hr(r)?{unit:"hour",value:r}:(r=Ef(t,n),hr(r)?{unit:"minute",value:r}:(r=_f(t,n),hr(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-t.valueOf()}))))))}countDurationsBetween(t,n,r){let s;return r.years&&(s=this.diffWholeYears(t,n),s!==null)?s/bf(r):r.months&&(s=this.diffWholeMonths(t,n),s!==null)?s/xf(r):r.days&&(s=Nn(t,n),s!==null)?s/At(r):(n.valueOf()-t.valueOf())/Xt(r)}startOf(t,n){return n==="year"?this.startOfYear(t):n==="month"?this.startOfMonth(t):n==="week"?this.startOfWeek(t):n==="day"?Y(t):n==="hour"?Df(t):n==="minute"?Tf(t):n==="second"?kf(t):null}startOfYear(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])}startOfMonth(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])}startOfWeek(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):Nf(t,this.weekDow,this.weekDoy)}format(t,n,r={}){return n.format({marker:t,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(t)},this)}formatRange(t,n,r,s={}){return s.isEndExclusive&&(n=nt(n,-1)),r.formatRange({marker:t,timeZoneOffset:s.forcedStartTzo!=null?s.forcedStartTzo:this.offsetForMarker(t)},{marker:n,timeZoneOffset:s.forcedEndTzo!=null?s.forcedEndTzo:this.offsetForMarker(n)},this,s.defaultSeparator)}formatIso(t,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(t)),Mf(t,r,n.omitTime)}timestampToMarker(t){return this.timeZone==="local"?Ce(Ni(new Date(t))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(t):Ce(this.namedTimeZoneImpl.timestampToArray(t))}offsetForMarker(t){return this.timeZone==="local"?-Ii(Xe(t)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Xe(t)):null}toDate(t,n){return this.timeZone==="local"?Ii(Xe(t)):this.timeZone==="UTC"?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-this.namedTimeZoneImpl.offsetForArray(Xe(t))*1e3*60):new Date(t.valueOf()-(n||0))}}class Kt{constructor(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}setIconOverride(t){let n,r;if(typeof t=="object"&&t){n=Object.assign({},this.iconClasses);for(r in t)n[r]=this.applyIconOverridePrefix(t[r]);this.iconClasses=n}else t===!1&&(this.iconClasses={})}applyIconOverridePrefix(t){let n=this.iconOverridePrefix;return n&&t.indexOf(n)!==0&&(t=n+t),t}getClass(t){return this.classes[t]||""}getIconClass(t,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[t]||this.iconClasses[t]:r=this.iconClasses[t],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(t){let n;return this.iconOverrideCustomButtonOption&&(n=t[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}Kt.prototype.classes={};Kt.prototype.iconClasses={};Kt.prototype.baseIconClass="";Kt.prototype.iconOverridePrefix="";function Pn(e){e();let t=O.debounceRendering,n=[];function r(s){n.push(s)}for(O.debounceRendering=r,Zt(S(ag,{}),document.createElement("div"));n.length;)n.shift()();O.debounceRendering=t}class ag extends _e{render(){return S("div",{})}componentDidMount(){this.setState({})}}function ml(e){let t=Iu(e),n=t.Provider;return t.Provider=function(){let r=!this.getChildContext,s=n.apply(this,arguments);if(r){let i=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&i.forEach(l=>{l.context=o.value,l.forceUpdate()})},this.sub=o=>{i.push(o);let l=o.componentWillUnmount;o.componentWillUnmount=()=>{i.splice(i.indexOf(o),1),l&&l.call(o)}}}return s},t}class cg{constructor(t,n,r,s){this.execFunc=t,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=s,this.handleScrollRequest=i=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},i),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const xt=ml({});function dg(e,t,n,r,s,i,o,l,a,d,u,h,g,f){return{dateEnv:s,nowManager:i,options:n,pluginHooks:l,emitter:u,dispatch:a,getCurrentData:d,calendarApi:h,viewSpec:e,viewApi:t,dateProfileGenerator:r,theme:o,isRtl:n.direction==="rtl",addResizeHandler(p){u.on("_resize",p)},removeResizeHandler(p){u.off("_resize",p)},createScrollResponder(p){return new cg(p,u,q(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:g,unregisterInteractiveComponent:f}}class wt extends _e{shouldComponentUpdate(t,n){return!yr(this.props,t,this.propEquality)||!yr(this.state,n,this.stateEquality)}safeSetState(t){yr(this.state,Object.assign(Object.assign({},this.state),t),this.stateEquality)||this.setState(t)}}wt.addPropsEquality=ug;wt.addStateEquality=fg;wt.contextType=xt;wt.prototype.propEquality={};wt.prototype.stateEquality={};class K extends wt{}K.contextType=xt;function ug(e){let t=Object.create(this.prototype.propEquality);Object.assign(t,e),this.prototype.propEquality=t}function fg(e){let t=Object.create(this.prototype.stateEquality);Object.assign(t,e),this.prototype.stateEquality=t}function $e(e,t){typeof e=="function"?e(t):e&&(e.current=t)}class Cs extends K{constructor(){super(...arguments),this.id=yt(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=t=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!Vr(r,n))&&this.updateElRef(t)},this.updateElRef=t=>{this.props.elRef&&$e(this.props.elRef,t)}}render(){const{props:t,context:n}=this,{options:r}=n,{customGenerator:s,defaultGenerator:i,renderProps:o}=t,l=vl(t,[],this.handleEl);let a=!1,d,u=[],h;if(s!=null){const g=typeof s=="function"?s(o,S):s;if(g===!0)a=!0;else{const f=g&&typeof g=="object";f&&"html"in g?l.dangerouslySetInnerHTML={__html:g.html}:f&&"domNodes"in g?u=Array.prototype.slice.call(g.domNodes):(f?Vo(g):typeof g!="function")?d=g:h=g}}else a=!Vr(t.generatorName,r);return a&&i&&(d=i(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=h,S(t.elTag,l,d)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(t){var n;const{props:r,context:s}=this,{handleCustomRendering:i,customRenderingMetaMap:o}=s.options;if(i){const l=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:o?.[r.generatorName];l&&i(Object.assign(Object.assign({id:this.id,isActive:t,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},r),{elClasses:(r.elClasses||[]).filter(gg)}))}}applyQueueudDomNodes(){const{queuedDomNodes:t,currentDomNodes:n}=this,r=this.base;if(!tt(t,n)){n.forEach(ps);for(let s of t)r.appendChild(s);this.currentDomNodes=t}}}Cs.addPropsEquality({elClasses:tt,elStyle:Le,elAttrs:Jf,renderProps:Le});function Vr(e,t){var n;return!!(t.handleCustomRendering&&e&&(!((n=t.customRenderingMetaMap)===null||n===void 0)&&n[e]))}function vl(e,t,n){const r=Object.assign(Object.assign({},e.elAttrs),{ref:n});return(e.elClasses||t)&&(r.className=(e.elClasses||[]).concat(t||[]).concat(r.className||[]).filter(Boolean).join(" ")),e.elStyle&&(r.style=e.elStyle),r}function gg(e){return!!e}const yl=ml(0);class Qe extends _e{constructor(){super(...arguments),this.InnerContent=hg.bind(void 0,this),this.handleEl=t=>{this.el=t,this.props.elRef&&($e(this.props.elRef,t),t&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:t}=this,n=pg(t.classNameGenerator,t.renderProps);if(t.children){const r=vl(t,n,this.handleEl),s=t.children(this.InnerContent,t.renderProps,r);return t.elTag?S(t.elTag,r,s):s}else return S(Cs,Object.assign(Object.assign({},t),{elRef:this.handleEl,elTag:t.elTag||"div",elClasses:(t.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var t,n;this.el?(n=(t=this.props).didMount)===null||n===void 0||n.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var t,n;(n=(t=this.props).willUnmount)===null||n===void 0||n.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Qe.contextType=yl;function hg(e,t){const n=e.props;return S(Cs,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:e.context},t))}function pg(e,t){const n=typeof e=="function"?e(t):e||[];return typeof n=="string"?[n]:n}class Hi extends K{render(){let{props:t,context:n}=this,{options:r}=n,s={view:n.viewApi};return S(Qe,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:[...bl(t.viewSpec),...t.elClasses||[]],elStyle:t.elStyle,renderProps:s,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>t.children)}}function bl(e){return[`fc-${e.type}-view`,"fc-view"]}function mg(e,t){let n=null,r=null;return e.start&&(n=t.createMarker(e.start)),e.end&&(r=t.createMarker(e.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function Li(e,t){let n=[],{start:r}=t,s,i;for(e.sort(vg),s=0;s<e.length;s+=1)i=e[s],i.start>r&&n.push({start:r,end:i.start}),i.end>r&&(r=i.end);return r<t.end&&n.push({start:r,end:t.end}),n}function vg(e,t){return e.start.valueOf()-t.start.valueOf()}function kt(e,t){let{start:n,end:r}=e,s=null;return t.start!==null&&(n===null?n=t.start:n=new Date(Math.max(n.valueOf(),t.start.valueOf()))),t.end!=null&&(r===null?r=t.end:r=new Date(Math.min(r.valueOf(),t.end.valueOf()))),(n===null||r===null||n<r)&&(s={start:n,end:r}),s}function yg(e,t){return(e.start===null?null:e.start.valueOf())===(t.start===null?null:t.start.valueOf())&&(e.end===null?null:e.end.valueOf())===(t.end===null?null:t.end.valueOf())}function Es(e,t){return(e.end===null||t.start===null||e.end>t.start)&&(e.start===null||t.end===null||e.start<t.end)}function qn(e,t){return(e.start===null||t.start!==null&&t.start>=e.start)&&(e.end===null||t.end!==null&&t.end<=e.end)}function et(e,t){return(e.start===null||t>=e.start)&&(e.end===null||t<e.end)}function bg(e,t){return t.start!=null&&e<t.start?t.start:t.end!=null&&e>=t.end?new Date(t.end.valueOf()-1):e}function xl(e){let t=Math.floor(Mt(e.start,e.end))||1,n=Y(e.start),r=oe(n,t);return{start:n,end:r}}function wl(e,t=q(0)){let n=null,r=null;if(e.end){r=Y(e.end);let s=e.end.valueOf()-r.valueOf();s&&s>=Xt(t)&&(r=oe(r,1))}return e.start&&(n=Y(e.start),r&&r<=n&&(r=oe(n,1))),{start:n,end:r}}function Et(e,t,n,r){return r==="year"?q(n.diffWholeYears(e,t),"year"):r==="month"?q(n.diffWholeMonths(e,t),"month"):Af(e,t)}class Sl{constructor(t){this.props=t,this.initHiddenDays()}buildPrev(t,n,r){let{dateEnv:s}=this.props,i=s.subtract(s.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(i,-1,r)}buildNext(t,n,r){let{dateEnv:s}=this.props,i=s.add(s.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(i,1,r)}build(t,n,r=!0){let{props:s}=this,i,o,l,a,d,u;return i=this.buildValidRange(),i=this.trimHiddenDays(i),r&&(t=bg(t,i)),o=this.buildCurrentRangeInfo(t,n),l=/^(year|month|week|day)$/.test(o.unit),a=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,l),a=this.trimHiddenDays(a),d=a,s.showNonCurrentDates||(d=kt(d,o.range)),d=this.adjustActiveRange(d),d=kt(d,i),u=Es(o.range,i),et(a,t)||(t=a.start),{currentDate:t,validRange:i,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:l,activeRange:d,renderRange:a,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let t=this.props.validRangeInput,n=typeof t=="function"?t.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):t;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(t,n){let{props:r}=this,s=null,i=null,o=null,l;return r.duration?(s=r.duration,i=r.durationUnit,o=this.buildRangeFromDuration(t,n,s,i)):(l=this.props.dayCount)?(i="day",o=this.buildRangeFromDayCount(t,n,l)):(o=this.buildCustomVisibleRange(t))?i=r.dateEnv.greatestWholeUnit(o.start,o.end).unit:(s=this.getFallbackDuration(),i=Br(s).unit,o=this.buildRangeFromDuration(t,n,s,i)),{duration:s,unit:i,range:o}}getFallbackDuration(){return q({day:1})}adjustActiveRange(t){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:s,slotMaxTime:i}=this.props,{start:o,end:l}=t;return r&&(At(s)<0&&(o=Y(o),o=n.add(o,s)),At(i)>1&&(l=Y(l),l=oe(l,-1),l=n.add(l,i))),{start:o,end:l}}buildRangeFromDuration(t,n,r,s){let{dateEnv:i,dateAlignment:o}=this.props,l,a,d;if(!o){let{dateIncrement:h}=this.props;h&&Xt(h)<Xt(r)?o=Br(h).unit:o=s}At(r)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,n),l=Y(l));function u(){l=i.startOf(t,o),a=i.add(l,r),d={start:l,end:a}}return u(),this.trimHiddenDays(d)||(t=this.skipHiddenDays(t,n),u()),d}buildRangeFromDayCount(t,n,r){let{dateEnv:s,dateAlignment:i}=this.props,o=0,l=t,a;i&&(l=s.startOf(l,i)),l=Y(l),l=this.skipHiddenDays(l,n),a=l;do a=oe(a,1),this.isHiddenDay(a)||(o+=1);while(o<r);return{start:l,end:a}}buildCustomVisibleRange(t){let{props:n}=this,r=n.visibleRangeInput,s=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(t)):r,i=this.refineRange(s);return i&&(i.start==null||i.end==null)?null:i}buildRenderRange(t,n,r){return t}buildDateIncrement(t){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?q(1,r):t||q({days:1}))}refineRange(t){if(t){let n=mg(t,this.props.dateEnv);return n&&(n=wl(n)),n}return null}initHiddenDays(){let t=this.props.hiddenDays||[],n=[],r=0,s;for(this.props.weekends===!1&&t.push(0,6),s=0;s<7;s+=1)(n[s]=t.indexOf(s)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(t){let{start:n,end:r}=t;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]}skipHiddenDays(t,n=1,r=!1){for(;this.isHiddenDayHash[(t.getUTCDay()+(r?n:0)+7)%7];)t=oe(t,n);return t}}function _s(e,t,n,r){return{instanceId:yt(),defId:e,range:t,forcedStartTzo:n??null,forcedEndTzo:r??null}}function xg(e,t,n,r){for(let s=0;s<r.length;s+=1){let i=r[s].parse(e,n);if(i){let{allDay:o}=e;return o==null&&(o=t,o==null&&(o=i.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:i.duration,typeData:i.typeData,typeId:s}}}return null}function pt(e,t,n){let{dateEnv:r,pluginHooks:s,options:i}=n,{defs:o,instances:l}=e;l=ht(l,a=>!o[a.defId].recurringDef);for(let a in o){let d=o[a];if(d.recurringDef){let{duration:u}=d.recurringDef;u||(u=d.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration);let h=wg(d,u,t,r,s.recurringTypes);for(let g of h){let f=_s(a,{start:g,end:r.add(g,u)});l[f.instanceId]=f}}}return{defs:o,instances:l}}function wg(e,t,n,r,s){let o=s[e.recurringDef.typeId].expand(e.recurringDef.typeData,{start:r.subtract(n.start,t),end:n.end},r);return e.allDay&&(o=o.map(Y)),o}const Cn={id:String,groupId:String,title:String,url:String,interactive:Boolean},Cl={start:w,end:w,date:w,allDay:Boolean},Sg=Object.assign(Object.assign(Object.assign({},Cn),Cl),{extendedProps:w});function El(e,t,n,r,s=As(n),i,o){let{refined:l,extra:a}=_l(e,n,s),d=Eg(t,n),u=xg(l,d,n.dateEnv,n.pluginHooks.recurringTypes);if(u){let g=$r(l,a,t?t.sourceId:"",u.allDay,!!u.duration,n,i);return g.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:g,instance:null}}let h=Cg(l,d,n,r);if(h){let g=$r(l,a,t?t.sourceId:"",h.allDay,h.hasEnd,n,i),f=_s(g.defId,h.range,h.forcedStartTzo,h.forcedEndTzo);return o&&g.publicId&&o[g.publicId]&&(f.instanceId=o[g.publicId]),{def:g,instance:f}}return null}function _l(e,t,n=As(t)){return xs(e,n)}function As(e){return Object.assign(Object.assign(Object.assign({},Fn),Sg),e.pluginHooks.eventRefiners)}function $r(e,t,n,r,s,i,o){let l={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:(o&&e.id?o[e.id]:"")||yt(),sourceId:n,allDay:r,hasEnd:s,interactive:e.interactive,ui:On(e,i),extendedProps:Object.assign(Object.assign({},e.extendedProps||{}),t)};for(let a of i.pluginHooks.eventDefMemberAdders)Object.assign(l,a(e));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function Cg(e,t,n,r){let{allDay:s}=e,i,o=null,l=!1,a,d=null,u=e.start!=null?e.start:e.date;if(i=n.dateEnv.createMarkerMeta(u),i)o=i.marker;else if(!r)return null;return e.end!=null&&(a=n.dateEnv.createMarkerMeta(e.end)),s==null&&(t!=null?s=t:s=(!i||i.isTimeUnspecified)&&(!a||a.isTimeUnspecified)),s&&o&&(o=Y(o)),a&&(d=a.marker,s&&(d=Y(d)),o&&d<=o&&(d=null)),d?l=!0:r||(l=n.options.forceEventDuration||!1,d=n.dateEnv.add(o,s?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:s,hasEnd:l,range:{start:o,end:d},forcedStartTzo:i?i.forcedTzo:null,forcedEndTzo:a?a.forcedTzo:null}}function Eg(e,t){let n=null;return e&&(n=e.defaultAllDay),n==null&&(n=t.options.defaultAllDay),n}function Jt(e,t,n,r,s,i){let o=Oe(),l=As(n);for(let a of e){let d=El(a,t,n,r,l,s,i);d&&zr(d,o)}return o}function zr(e,t=Oe()){return t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function Rs(e,t){let n=e.instances[t];if(n){let r=e.defs[n.defId],s=Qn(e,i=>_g(r,i));return s.defs[r.defId]=r,s.instances[n.instanceId]=n,s}return Oe()}function _g(e,t){return!!(e.groupId&&e.groupId===t.groupId)}function Oe(){return{defs:{},instances:{}}}function Ds(e,t){return{defs:Object.assign(Object.assign({},e.defs),t.defs),instances:Object.assign(Object.assign({},e.instances),t.instances)}}function Qn(e,t){let n=ht(e.defs,t),r=ht(e.instances,s=>n[s.defId]);return{defs:n,instances:r}}function Ag(e,t){let{defs:n,instances:r}=e,s={},i={};for(let o in n)t.defs[o]||(s[o]=n[o]);for(let o in r)!t.instances[o]&&s[r[o].defId]&&(i[o]=r[o]);return{defs:s,instances:i}}function Rg(e,t){return Array.isArray(e)?Jt(e,null,t,!0):typeof e=="object"&&e?Jt([e],null,t,!0):e!=null?String(e):null}function Bi(e){return Array.isArray(e)?e:typeof e=="string"?e.split(/\s+/):[]}const Fn={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:w,overlap:w,allow:w,className:Bi,classNames:Bi,color:String,backgroundColor:String,borderColor:String,textColor:String},Dg={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function On(e,t){let n=Rg(e.constraint,t);return{display:e.display||null,startEditable:e.startEditable!=null?e.startEditable:e.editable,durationEditable:e.durationEditable!=null?e.durationEditable:e.editable,constraints:n!=null?[n]:[],overlap:e.overlap!=null?e.overlap:null,allows:e.allow!=null?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function Tg(e){return e.reduce(kg,Dg)}function kg(e,t){return{display:t.display!=null?t.display:e.display,startEditable:t.startEditable!=null?t.startEditable:e.startEditable,durationEditable:t.durationEditable!=null?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:typeof t.overlap=="boolean"?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}const Ng={id:String,defaultAllDay:Boolean,url:String,format:String,events:w,eventDataTransform:w,success:w,failure:w};function Al(e,t,n=Rl(t)){let r;if(typeof e=="string"?r={url:e}:typeof e=="function"||Array.isArray(e)?r={events:e}:typeof e=="object"&&e&&(r=e),r){let{refined:s,extra:i}=xs(r,n),o=Ig(s,t);if(o)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:yt(),sourceDefId:o.sourceDefId,meta:o.meta,ui:On(s,t),extendedProps:i}}return null}function Rl(e){return Object.assign(Object.assign(Object.assign({},Fn),Ng),e.pluginHooks.eventSourceRefiners)}function Ig(e,t){let n=t.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let i=n[r].parseMeta(e);if(i)return{sourceDefId:r,meta:i}}return null}function Mg(e,t,n,r,s){switch(t.type){case"RECEIVE_EVENTS":return jg(e,n[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,s);case"RESET_RAW_EVENTS":return Pg(e,n[t.sourceId],t.rawEvents,r.activeRange,s);case"ADD_EVENTS":return Fg(e,t.eventStore,r?r.activeRange:null,s);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return Ds(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?pt(e,r.activeRange,s):e;case"REMOVE_EVENTS":return Ag(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return Tl(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Qn(e,i=>!i.sourceId);case"REMOVE_ALL_EVENTS":return Oe();default:return e}}function jg(e,t,n,r,s,i){if(t&&n===t.latestFetchId){let o=Jt(Dl(s,t,i),t,i);return r&&(o=pt(o,r,i)),Ds(Tl(e,t.sourceId),o)}return e}function Pg(e,t,n,r,s){const{defIdMap:i,instanceIdMap:o}=Hg(e);let l=Jt(Dl(n,t,s),t,s,!1,i,o);return pt(l,r,s)}function Dl(e,t,n){let r=n.options.eventDataTransform,s=t?t.eventDataTransform:null;return s&&(e=Vi(e,s)),r&&(e=Vi(e,r)),e}function Vi(e,t){let n;if(!t)n=e;else{n=[];for(let r of e){let s=t(r);s?n.push(s):s==null&&n.push(r)}}return n}function Fg(e,t,n,r){return n&&(t=pt(t,n,r)),Ds(e,t)}function $i(e,t,n){let{defs:r}=e,s=bt(e.instances,i=>r[i.defId].allDay?i:Object.assign(Object.assign({},i),{range:{start:n.createMarker(t.toDate(i.range.start,i.forcedStartTzo)),end:n.createMarker(t.toDate(i.range.end,i.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:i.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:i.forcedEndTzo}));return{defs:r,instances:s}}function Tl(e,t){return Qn(e,n=>n.sourceId!==t)}function Og(e,t){return{defs:e.defs,instances:ht(e.instances,n=>!t[n.instanceId])}}function Hg(e){const{defs:t,instances:n}=e,r={},s={};for(let i in t){const o=t[i],{publicId:l}=o;l&&(r[l]=i)}for(let i in n){const o=n[i],l=t[o.defId],{publicId:a}=l;a&&(s[a]=i)}return{defIdMap:r,instanceIdMap:s}}class Yn{constructor(){this.handlers={},this.thisContext=null}setThisContext(t){this.thisContext=t}setOptions(t){this.options=t}on(t,n){Lg(this.handlers,t,n)}off(t,n){Bg(this.handlers,t,n)}trigger(t,...n){let r=this.handlers[t]||[],s=this.options&&this.options[t],i=[].concat(s||[],r);for(let o of i)o.apply(this.thisContext,n)}hasHandlers(t){return!!(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])}}function Lg(e,t,n){(e[t]||(e[t]=[])).push(n)}function Bg(e,t,n){n?e[t]&&(e[t]=e[t].filter(r=>r!==n)):delete e[t]}const Vg={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function $g(e,t){return Jt(zg(e),null,t)}function zg(e){let t;return e===!0?t=[{}]:Array.isArray(e)?t=e.filter(n=>n.daysOfWeek):typeof e=="object"&&e?t=[e]:t=[],t=t.map(n=>Object.assign(Object.assign({},Vg),n)),t}function kl(e,t,n){n.emitter.trigger("select",Object.assign(Object.assign({},Ts(e,n)),{jsEvent:t?t.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function Ug(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}function Ts(e,t){let n={};for(let r of t.pluginHooks.dateSpanTransforms)Object.assign(n,r(e,t));return Object.assign(n,ih(e,t.dateEnv)),n}function zi(e,t,n){let{dateEnv:r,options:s}=n,i=t;return e?(i=Y(i),i=r.add(i,s.defaultAllDayEventDuration)):i=r.add(i,s.defaultTimedEventDuration),i}function ks(e,t,n,r){let s=Hn(e.defs,t),i=Oe();for(let o in e.defs){let l=e.defs[o];i.defs[o]=Gg(l,s[o],n,r)}for(let o in e.instances){let l=e.instances[o],a=i.defs[l.defId];i.instances[o]=Wg(l,a,s[l.defId],n,r)}return i}function Gg(e,t,n,r){let s=n.standardProps||{};s.hasEnd==null&&t.durationEditable&&(n.startDelta||n.endDelta)&&(s.hasEnd=!0);let i=Object.assign(Object.assign(Object.assign({},e),s),{ui:Object.assign(Object.assign({},e.ui),s.ui)});n.extendedProps&&(i.extendedProps=Object.assign(Object.assign({},i.extendedProps),n.extendedProps));for(let o of r.pluginHooks.eventDefMutationAppliers)o(i,n,r);return!i.hasEnd&&r.options.forceEventDuration&&(i.hasEnd=!0),i}function Wg(e,t,n,r,s){let{dateEnv:i}=s,o=r.standardProps&&r.standardProps.allDay===!0,l=r.standardProps&&r.standardProps.hasEnd===!1,a=Object.assign({},e);return o&&(a.range=xl(a.range)),r.datesDelta&&n.startEditable&&(a.range={start:i.add(a.range.start,r.datesDelta),end:i.add(a.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(a.range={start:i.add(a.range.start,r.startDelta),end:a.range.end}),r.endDelta&&n.durationEditable&&(a.range={start:a.range.start,end:i.add(a.range.end,r.endDelta)}),l&&(a.range={start:a.range.start,end:zi(t.allDay,a.range.start,s)}),t.allDay&&(a.range={start:Y(a.range.start),end:Y(a.range.end)}),a.range.end<a.range.start&&(a.range.end=zi(t.allDay,a.range.start,s)),a}class Ct{constructor(t,n){this.context=t,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Z{constructor(t,n,r){this._context=t,this._def=n,this._instance=r||null}setProp(t,n){if(t in Cl)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(t==="id")n=Cn[t](n),this.mutate({standardProps:{publicId:n}});else if(t in Cn)n=Cn[t](n),this.mutate({standardProps:{[t]:n}});else if(t in Fn){let r=Fn[t](n);t==="color"?r={backgroundColor:n,borderColor:n}:t==="editable"?r={startEditable:n,durationEditable:n}:r={[t]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${t}'. Use setExtendedProp instead.`)}setExtendedProp(t,n){this.mutate({extendedProps:{[t]:n}})}setStart(t,n={}){let{dateEnv:r}=this._context,s=r.createMarker(t);if(s&&this._instance){let i=this._instance.range,o=Et(i.start,s,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(t,n={}){let{dateEnv:r}=this._context,s;if(!(t!=null&&(s=r.createMarker(t),!s))&&this._instance)if(s){let i=Et(this._instance.range.end,s,r,n.granularity);this.mutate({endDelta:i})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(t,n,r={}){let{dateEnv:s}=this._context,i={allDay:r.allDay},o=s.createMarker(t),l;if(o&&!(n!=null&&(l=s.createMarker(n),!l))&&this._instance){let a=this._instance.range;r.allDay===!0&&(a=xl(a));let d=Et(a.start,o,s,r.granularity);if(l){let u=Et(a.end,l,s,r.granularity);vf(d,u)?this.mutate({datesDelta:d,standardProps:i}):this.mutate({startDelta:d,endDelta:u,standardProps:i})}else i.hasEnd=!1,this.mutate({datesDelta:d,standardProps:i})}}moveStart(t){let n=q(t);n&&this.mutate({startDelta:n})}moveEnd(t){let n=q(t);n&&this.mutate({endDelta:n})}moveDates(t){let n=q(t);n&&this.mutate({datesDelta:n})}setAllDay(t,n={}){let r={allDay:t},{maintainDuration:s}=n;s==null&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(r.hasEnd=s),this.mutate({standardProps:r})}formatRange(t){let{dateEnv:n}=this._context,r=this._instance,s=ie(t);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,s,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,s,{forcedTzo:r.forcedStartTzo})}mutate(t){let n=this._instance;if(n){let r=this._def,s=this._context,{eventStore:i}=s.getCurrentData(),o=Rs(i,n.instanceId);o=ks(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},t,s);let a=new Z(s,r,n);this._def=o.defs[r.defId],this._instance=o.instances[n.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:o}),s.emitter.trigger("eventChange",{oldEvent:a,event:this,relatedEvents:ft(o,s,n),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:i})}})}}remove(){let t=this._context,n=Nl(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:n}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:t}=this._def;return t?new Ct(this._context,this._context.getCurrentData().eventSources[t]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""}get endStr(){let t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(t={}){let n=this._def,{ui:r}=n,{startStr:s,endStr:i}=this,o={allDay:n.allDay};return n.title&&(o.title=n.title),s&&(o.start=s),i&&(o.end=i),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),r.display&&r.display!=="auto"&&(o.display=r.display),t.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?o.color=r.backgroundColor:(r.backgroundColor&&(o.backgroundColor=r.backgroundColor),r.borderColor&&(o.borderColor=r.borderColor)),r.textColor&&(o.textColor=r.textColor),r.classNames.length&&(o.classNames=r.classNames),Object.keys(n.extendedProps).length&&(t.collapseExtendedProps?Object.assign(o,n.extendedProps):o.extendedProps=n.extendedProps),o}toJSON(){return this.toPlainObject()}}function Nl(e){let t=e._def,n=e._instance;return{defs:{[t.defId]:t},instances:n?{[n.instanceId]:n}:{}}}function ft(e,t,n){let{defs:r,instances:s}=e,i=[],o=n?n.instanceId:"";for(let l in s){let a=s[l],d=r[a.defId];a.instanceId!==o&&i.push(new Z(t,d,a))}return i}function Ui(e,t,n,r){let s={},i={},o={},l=[],a=[],d=Hn(e.defs,t);for(let u in e.defs){let h=e.defs[u];d[h.defId].display==="inverse-background"&&(h.groupId?(s[h.groupId]=[],o[h.groupId]||(o[h.groupId]=h)):i[u]=[])}for(let u in e.instances){let h=e.instances[u],g=e.defs[h.defId],f=d[g.defId],p=h.range,m=!g.allDay&&r?wl(p,r):p,v=kt(m,n);v&&(f.display==="inverse-background"?g.groupId?s[g.groupId].push(v):i[h.defId].push(v):f.display!=="none"&&(f.display==="background"?l:a).push({def:g,ui:f,instance:h,range:v,isStart:m.start&&m.start.valueOf()===v.start.valueOf(),isEnd:m.end&&m.end.valueOf()===v.end.valueOf()}))}for(let u in s){let h=s[u],g=Li(h,n);for(let f of g){let p=o[u],m=d[p.defId];l.push({def:p,ui:m,instance:null,range:f,isStart:!1,isEnd:!1})}}for(let u in i){let h=i[u],g=Li(h,n);for(let f of g)l.push({def:e.defs[u],ui:d[u],instance:null,range:f,isStart:!1,isEnd:!1})}return{bg:l,fg:a}}function Gi(e,t){e.fcSeg=t}function Nt(e){return e.fcSeg||e.parentNode.fcSeg||null}function Hn(e,t){return bt(e,n=>Il(n,t))}function Il(e,t){let n=[];return t[""]&&n.push(t[""]),t[e.defId]&&n.push(t[e.defId]),n.push(e.ui),Tg(n)}function qg(e,t){let n=e.map(Qg);return n.sort((r,s)=>df(r,s,t)),n.map(r=>r._seg)}function Qg(e){let{eventRange:t}=e,n=t.def,r=t.instance?t.instance.range:t.range,s=r.start?r.start.valueOf():0,i=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:s,end:i,duration:i-s,allDay:Number(n.allDay),_seg:e})}function Yg(e,t){let{pluginHooks:n}=t,r=n.isDraggableTransformers,{def:s,ui:i}=e.eventRange,o=i.startEditable;for(let l of r)o=l(o,s,i,t);return o}function Zg(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function Xg(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function Ml(e,t,n,r,s,i,o){let{dateEnv:l,options:a}=n,{displayEventTime:d,displayEventEnd:u}=a,h=e.eventRange.def,g=e.eventRange.instance;d==null&&(d=r!==!1),u==null&&(u=s!==!1);let f=g.range.start,p=g.range.end,m=e.start||e.eventRange.range.start,v=e.end||e.eventRange.range.end,b=Y(f).valueOf()===Y(m).valueOf(),E=Y(nt(p,-1)).valueOf()===Y(nt(v,-1)).valueOf();return d&&!h.allDay&&(b||E)?(m=b?f:m,v=E?p:v,u&&h.hasEnd?l.formatRange(m,v,t,{forcedStartTzo:g.forcedStartTzo,forcedEndTzo:g.forcedEndTzo}):l.format(m,t,{forcedTzo:g.forcedStartTzo})):""}function Ut(e,t,n){let r=e.eventRange.range;return{isPast:r.end<=t.start,isFuture:r.start>=t.end,isToday:t&&et(t,r.start)}}function Jg(e){let t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function Kg(e){return e.instance?e.instance.instanceId:`${e.def.defId}:${e.range.start.toISOString()}`}function jl(e,t){let{def:n,instance:r}=e.eventRange,{url:s}=n;if(s)return{href:s};let{emitter:i,options:o}=t,{eventInteractive:l}=o;return l==null&&(l=n.interactive,l==null&&(l=!!i.hasHandlers("eventClick"))),l?fl(a=>{i.trigger("eventClick",{el:a.target,event:new Z(t,n,r),jsEvent:a,view:t.viewApi})}):{}}const eh={start:w,end:w,allDay:Boolean};function th(e,t,n){let r=nh(e,t),{range:s}=r;if(!s.start)return null;if(!s.end){if(n==null)return null;s.end=t.add(s.start,n)}return r}function nh(e,t){let{refined:n,extra:r}=xs(e,eh),s=n.start?t.createMarkerMeta(n.start):null,i=n.end?t.createMarkerMeta(n.end):null,{allDay:o}=n;return o==null&&(o=s&&s.isTimeUnspecified&&(!i||i.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:i?i.marker:null},allDay:o},r)}function rh(e,t){return yg(e.range,t.range)&&e.allDay===t.allDay&&sh(e,t)}function sh(e,t){for(let n in t)if(n!=="range"&&n!=="allDay"&&e[n]!==t[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}function ih(e,t){return Object.assign(Object.assign({},Fl(e.range,t,e.allDay)),{allDay:e.allDay})}function Pl(e,t,n){return Object.assign(Object.assign({},Fl(e,t,n)),{timeZone:t.timeZone})}function Fl(e,t,n){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:n}),endStr:t.formatIso(e.end,{omitTime:n})}}function oh(e,t,n){let r=_l({editable:!1},n),s=$r(r.refined,r.extra,"",e.allDay,!0,n);return{def:s,ui:Il(s,t),instance:_s(s.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function lh(e,t,n){let r=!1,s=function(l){r||(r=!0,t(l))},i=function(l){r||(r=!0,n(l))},o=e(s,i);o&&typeof o.then=="function"&&o.then(s,i)}class Wi extends Error{constructor(t,n){super(t),this.response=n}}function ah(e,t,n){e=e.toUpperCase();const r={method:e};return e==="GET"?t+=(t.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(t,r).then(s=>{if(s.ok)return s.json().then(i=>[i,s],()=>{throw new Wi("Failure parsing JSON",s)});throw new Wi("Request failed",s)})}let br;function Ol(){return br==null&&(br=ch()),br}function ch(){if(typeof document>"u")return!0;let e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);let n=e.querySelector("div").offsetHeight>0;return document.body.removeChild(e),n}class dh extends K{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Pn(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Pn(()=>{this.setState({forPrint:!1})})}}render(){let{props:t}=this,{options:n}=t,{forPrint:r}=this.state,s=r||n.height==="auto"||n.contentHeight==="auto",i=!s&&n.height!=null?n.height:"",o=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,t.theme.getClass("root")];return Ol()||o.push("fc-liquid-hack"),t.children(o,i,s,r)}componentDidMount(){let{emitter:t}=this.props;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:t}=this.props;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)}}class jt{constructor(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}destroy(){}}function uh(e,t){return{component:e,el:t.el,useEventCenter:t.useEventCenter!=null?t.useEventCenter:!0,isHitComboAllowed:t.isHitComboAllowed||null}}function Ns(e){return{[e.component.uid]:e}}const Ur={};class Zn extends _e{constructor(t,n){super(t,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:t,state:n}=this;return t.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:t,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:s}=n.options;s==="auto"&&(s=/year|month|week|day/.test(t.unit)||(t.unitValue||1)===1);let i,o;return s?(i=n.dateEnv.startOf(r,t.unit),o=n.dateEnv.add(i,q(1,t.unit)).valueOf()-r.valueOf()):(i=r,o=1e3*60),o=Math.min(1e3*60*60*24,o),{state:{nowDate:i,todayRange:fh(i)},waitMs:o}}setTimeout(t=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},t)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Zn.contextType=xt;function fh(e){let t=Y(e),n=oe(t,1);return{start:t,end:n}}class gh{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(t){this.currentDataManager.dispatch(t)}get view(){return this.getCurrentData().viewApi}batchRendering(t){t()}updateSize(){this.trigger("_resize",!0)}setOption(t,n){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:n})}getOption(t){return this.currentDataManager.currentCalendarOptionsInput[t]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(t,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[t]?r.emitter.on(t,n):console.warn(`Unknown listener name '${t}'`)}off(t,n){this.currentDataManager.emitter.off(t,n)}trigger(t,...n){this.currentDataManager.emitter.trigger(t,...n)}changeView(t,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})}zoomTo(t,n){let r=this.getCurrentData(),s;n=n||"day",s=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),s?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})}getUnitViewSpec(t){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),s=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),i,o;for(let l in n)s.push(l);for(i=0;i<s.length;i+=1)if(o=n[s[i]],o&&o.singleUnit===t)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})}nextYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})}today(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.nowManager.getDateMarker()})}gotoDate(t){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(t)})}incrementDate(t){let n=this.getCurrentData(),r=q(t);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)}formatDate(t,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(t),ie(n))}formatRange(t,n,r){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(t),s.createMarker(n),ie(r),r)}formatIso(t,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(t),{omitTime:n})}select(t,n){let r;n==null?t.start!=null?r=t:r={start:t,end:null}:r={start:t,end:n};let s=this.getCurrentData(),i=th(r,s.dateEnv,q({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),kl(i,null,s))}unselect(t){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),Ug(t,n))}addEvent(t,n){if(t instanceof Z){let o=t._def,l=t._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:zr({def:o,instance:l})}),this.triggerEventAdd(t)),t}let r=this.getCurrentData(),s;if(n instanceof Ct)s=n.internalEventSource;else if(typeof n=="boolean")n&&([s]=Ss(r.eventSources));else if(n!=null){let o=this.getEventSourceById(n);if(!o)return console.warn(`Could not find an event source with ID "${n}"`),null;s=o.internalEventSource}let i=El(t,s,r,!1);if(i){let o=new Z(r,i.def,i.def.recurringDef?null:i.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:zr(i)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(t){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:t,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:Nl(t)})}})}getEventById(t){let n=this.getCurrentData(),{defs:r,instances:s}=n.eventStore;t=String(t);for(let i in r){let o=r[i];if(o.publicId===t){if(o.recurringDef)return new Z(n,o,null);for(let l in s){let a=s[l];if(a.defId===o.defId)return new Z(n,o,a)}}}return null}getEvents(){let t=this.getCurrentData();return ft(t.eventStore,t)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let t=this.getCurrentData(),n=t.eventSources,r=[];for(let s in n)r.push(new Ct(t,n[s]));return r}getEventSourceById(t){let n=this.getCurrentData(),r=n.eventSources;t=String(t);for(let s in r)if(r[s].publicId===t)return new Ct(n,r[s]);return null}addEventSource(t){let n=this.getCurrentData();if(t instanceof Ct)return n.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;let r=Al(t,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Ct(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(t){let n=q(t);n&&this.trigger("_scrollRequest",{time:n})}}function hh(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function Hl(e,t){let n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function ph(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function mh(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function vh(e,t){return{left:e.left-t.left,top:e.top-t.top}}function Ll(e,t,n,r){return{dow:e.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!et(r.activeRange,e))),isOther:!!(r&&!et(r.currentRange,e)),isToday:!!(t&&et(t,e)),isPast:!!(t&&e<t.start),isFuture:!!(t&&e>=t.end)}}function Is(e,t){let n=["fc-day",`fc-day-${wf[e.dow]}`];return e.isDisabled?n.push("fc-day-disabled"):(e.isToday&&(n.push("fc-day-today"),n.push(t.getClass("today"))),e.isPast&&n.push("fc-day-past"),e.isFuture&&n.push("fc-day-future"),e.isOther&&n.push("fc-day-other")),n}const yh=ie({year:"numeric",month:"long",day:"numeric"}),bh=ie({week:"long"});function Gr(e,t,n="day",r=!0){const{dateEnv:s,options:i,calendarApi:o}=e;let l=s.format(t,n==="week"?bh:yh);if(i.navLinks){let a=s.toDate(t);const d=u=>{let h=n==="day"?i.navLinkDayClick:n==="week"?i.navLinkWeekClick:null;typeof h=="function"?h.call(o,s.toDate(t),u):(typeof h=="string"&&(n=h),o.zoomTo(t,n))};return Object.assign({title:$t(i.navLinkHint,[l,a],l),"data-navlink":""},r?ul(d):{onClick:d})}return{"aria-label":l}}let xr=null;function xh(){return xr===null&&(xr=wh()),xr}function wh(){let e=document.createElement("div");Vt(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);let n=e.firstChild.getBoundingClientRect().left>e.getBoundingClientRect().left;return ps(e),n}let wr;function Sh(){return wr||(wr=Ch()),wr}function Ch(){let e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);let t=Bl(e);return document.body.removeChild(e),t}function Bl(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function Eh(e,t=!1){let n=window.getComputedStyle(e),r=parseInt(n.borderLeftWidth,10)||0,s=parseInt(n.borderRightWidth,10)||0,i=parseInt(n.borderTopWidth,10)||0,o=parseInt(n.borderBottomWidth,10)||0,l=Bl(e),a=l.y-r-s,d=l.x-i-o,u={borderLeft:r,borderRight:s,borderTop:i,borderBottom:o,scrollbarBottom:d,scrollbarLeft:0,scrollbarRight:0};return xh()&&n.direction==="rtl"?u.scrollbarLeft=a:u.scrollbarRight=a,t&&(u.paddingLeft=parseInt(n.paddingLeft,10)||0,u.paddingRight=parseInt(n.paddingRight,10)||0,u.paddingTop=parseInt(n.paddingTop,10)||0,u.paddingBottom=parseInt(n.paddingBottom,10)||0),u}function _h(e,t=!1,n){let r=Ms(e),s=Eh(e,t),i={left:r.left+s.borderLeft+s.scrollbarLeft,right:r.right-s.borderRight-s.scrollbarRight,top:r.top+s.borderTop,bottom:r.bottom-s.borderBottom-s.scrollbarBottom};return t&&(i.left+=s.paddingLeft,i.right-=s.paddingRight,i.top+=s.paddingTop,i.bottom-=s.paddingBottom),i}function Ms(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY}}function Ah(e){let t=Vl(e),n=e.getBoundingClientRect();for(let r of t){let s=Hl(n,r.getBoundingClientRect());if(s)n=s;else return null}return n}function Vl(e){let t=[];for(;e instanceof HTMLElement;){let n=window.getComputedStyle(e);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&t.push(e),e=e.parentNode}return t}class Ln{constructor(t,n,r,s){this.els=n;let i=this.originClientRect=t.getBoundingClientRect();r&&this.buildElHorizontals(i.left),s&&this.buildElVerticals(i.top)}buildElHorizontals(t){let n=[],r=[];for(let s of this.els){let i=s.getBoundingClientRect();n.push(i.left-t),r.push(i.right-t)}this.lefts=n,this.rights=r}buildElVerticals(t){let n=[],r=[];for(let s of this.els){let i=s.getBoundingClientRect();n.push(i.top-t),r.push(i.bottom-t)}this.tops=n,this.bottoms=r}leftToIndex(t){let{lefts:n,rights:r}=this,s=n.length,i;for(i=0;i<s;i+=1)if(t>=n[i]&&t<r[i])return i}topToIndex(t){let{tops:n,bottoms:r}=this,s=n.length,i;for(i=0;i<s;i+=1)if(t>=n[i]&&t<r[i])return i}getWidth(t){return this.rights[t]-this.lefts[t]}getHeight(t){return this.bottoms[t]-this.tops[t]}similarTo(t){return fn(this.tops||[],t.tops||[])&&fn(this.bottoms||[],t.bottoms||[])&&fn(this.lefts||[],t.lefts||[])&&fn(this.rights||[],t.rights||[])}}function fn(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(Math.round(e[r])!==Math.round(t[r]))return!1;return!0}class js{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class Rh extends js{constructor(t){super(),this.el=t}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(t){this.el.scrollTop=t}setScrollLeft(t){this.el.scrollLeft=t}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Dh extends js{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(t){window.scroll(window.scrollX,t)}setScrollLeft(t){window.scroll(t,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class St extends K{constructor(){super(...arguments),this.uid=yt()}prepareHits(){}queryHit(t,n,r,s){return null}isValidSegDownEl(t){return!this.props.eventDrag&&!this.props.eventResize&&!ve(t,".fc-event-mirror")}isValidDateDownEl(t){return!ve(t,".fc-event:not(.fc-bg-event)")&&!ve(t,".fc-more-link")&&!ve(t,"a[data-navlink]")&&!ve(t,".fc-popover")}}class Th{constructor(t=n=>n.thickness||1){this.getEntryThickness=t,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(t){let n=[];for(let r of t)this.insertEntry(r,n);return n}insertEntry(t,n){let r=this.findInsertion(t);this.isInsertionValid(r,t)?this.insertEntryAt(t,r):this.handleInvalidInsertion(r,t,n)}isInsertionValid(t,n){return(this.maxCoord===-1||t.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||t.stackCnt<this.maxStackCnt)}handleInvalidInsertion(t,n,r){if(this.allowReslicing&&t.touchingEntry){const s=Object.assign(Object.assign({},n),{span:$l(n.span,t.touchingEntry.span)});r.push(s),this.splitEntry(n,t.touchingEntry,r)}else r.push(n)}splitEntry(t,n,r){let s=t.span,i=n.span;s.start<i.start&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:s.start,end:i.start}},r),s.end>i.end&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:i.end,end:s.end}},r)}insertEntryAt(t,n){let{entriesByLevel:r,levelCoords:s}=this;n.lateral===-1?(Sr(s,n.level,n.levelCoord),Sr(r,n.level,[t])):Sr(r[n.level],n.lateral,t),this.stackCnts[Gt(t)]=n.stackCnt}findInsertion(t){let{levelCoords:n,entriesByLevel:r,strictOrder:s,stackCnts:i}=this,o=n.length,l=0,a=-1,d=-1,u=null,h=0;for(let p=0;p<o;p+=1){const m=n[p];if(!s&&m>=l+this.getEntryThickness(t))break;let v=r[p],b,E=Qi(v,t.span.start,qi),x=E[0]+E[1];for(;(b=v[x])&&b.span.start<t.span.end;){let D=m+this.getEntryThickness(b);D>l&&(l=D,u=b,a=p,d=x),D===l&&(h=Math.max(h,i[Gt(b)]+1)),x+=1}}let g=0;if(u)for(g=a+1;g<o&&n[g]<l;)g+=1;let f=-1;return g<o&&n[g]===l&&(f=Qi(r[g],t.span.end,qi)[0]),{touchingLevel:a,touchingLateral:d,touchingEntry:u,stackCnt:h,levelCoord:l,level:g,lateral:f}}toRects(){let{entriesByLevel:t,levelCoords:n}=this,r=t.length,s=[];for(let i=0;i<r;i+=1){let o=t[i],l=n[i];for(let a of o)s.push(Object.assign(Object.assign({},a),{thickness:this.getEntryThickness(a),levelCoord:l}))}return s}}function qi(e){return e.span.end}function Gt(e){return e.index+":"+e.span.start}function $l(e,t){let n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return n<r?{start:n,end:r}:null}function Sr(e,t,n){e.splice(t,0,n)}function Qi(e,t,n){let r=0,s=e.length;if(!s||t<n(e[r]))return[0,0];if(t>n(e[s-1]))return[s,0];for(;r<s;){let i=Math.floor(r+(s-r)/2),o=n(e[i]);if(t<o)s=i;else if(t>o)r=i+1;else return[i,1]}return[r,0]}class kh{constructor(t,n){this.emitter=new Yn}destroy(){}setMirrorIsVisible(t){}setMirrorNeedsRevert(t){}setAutoScrollEnabled(t){}}const Ps={};function Nh(e,t){return!e||t>10?ie({weekday:"short"}):t>1?ie({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):ie({weekday:"long"})}const zl="fc-col-header-cell";function Ul(e){return e.text}class Ih extends K{render(){let{dateEnv:t,options:n,theme:r,viewApi:s}=this.context,{props:i}=this,{date:o,dateProfile:l}=i,a=Ll(o,i.todayRange,null,l),d=[zl].concat(Is(a,r)),u=t.format(o,i.dayHeaderFormat),h=!a.isDisabled&&i.colCnt>1?Gr(this.context,o):{},g=t.toDate(o);t.namedTimeZoneImpl&&(g=nt(g,36e5));let f=Object.assign(Object.assign(Object.assign({date:g,view:s},i.extraRenderProps),{text:u}),a);return S(Qe,{elTag:"th",elClasses:d,elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan,"data-date":a.isDisabled?void 0:ys(o)},i.extraDataAttrs),renderProps:f,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:Ul,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},p=>S("div",{className:"fc-scrollgrid-sync-inner"},!a.isDisabled&&S(p,{elTag:"a",elAttrs:h,elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"]})))}}const Mh=ie({weekday:"long"});class jh extends K{render(){let{props:t}=this,{dateEnv:n,theme:r,viewApi:s,options:i}=this.context,o=oe(new Date(2592e5),t.dow),l={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},a=n.format(o,t.dayHeaderFormat),d=Object.assign(Object.assign(Object.assign(Object.assign({date:o},l),{view:s}),t.extraRenderProps),{text:a});return S(Qe,{elTag:"th",elClasses:[zl,...Is(l,r),...t.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:t.colSpan},t.extraDataAttrs),renderProps:d,generatorName:"dayHeaderContent",customGenerator:i.dayHeaderContent,defaultGenerator:Ul,classNameGenerator:i.dayHeaderClassNames,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},u=>S("div",{className:"fc-scrollgrid-sync-inner"},S(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",t.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(o,Mh)}})))}}class Ph extends K{constructor(){super(...arguments),this.createDayHeaderFormatter=W(Fh)}render(){let{context:t}=this,{dates:n,dateProfile:r,datesRepDistinctDays:s,renderIntro:i}=this.props,o=this.createDayHeaderFormatter(t.options.dayHeaderFormat,s,n.length);return S(Zn,{unit:"day"},(l,a)=>S("tr",{role:"row"},i&&i("day"),n.map(d=>s?S(Ih,{key:d.toISOString(),date:d,dateProfile:r,todayRange:a,colCnt:n.length,dayHeaderFormat:o}):S(jh,{key:d.getUTCDay(),dow:d.getUTCDay(),dayHeaderFormat:o}))))}}function Fh(e,t,n){return e||Nh(t,n)}class Oh{constructor(t,n){let r=t.start,{end:s}=t,i=[],o=[],l=-1;for(;r<s;)n.isHiddenDay(r)?i.push(l+.5):(l+=1,i.push(l),o.push(r)),r=oe(r,1);this.dates=o,this.indices=i,this.cnt=o.length}sliceRange(t){let n=this.getDateDayIndex(t.start),r=this.getDateDayIndex(oe(t.end,-1)),s=Math.max(0,n),i=Math.min(this.cnt-1,r);return s=Math.ceil(s),i=Math.floor(i),s<=i?{firstIndex:s,lastIndex:i,isStart:n===s,isEnd:r===i}:null}getDateDayIndex(t){let{indices:n}=this,r=Math.floor(Mt(this.dates[0],t));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class Hh{constructor(t,n){let{dates:r}=t,s,i,o;if(n){for(i=r[0].getUTCDay(),s=1;s<r.length&&r[s].getUTCDay()!==i;s+=1);o=Math.ceil(r.length/s)}else o=1,s=r.length;this.rowCnt=o,this.colCnt=s,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let t=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let s=0;s<this.colCnt;s+=1)r.push(this.buildCell(n,s));t.push(r)}return t}buildCell(t,n){let r=this.daySeries.dates[t*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let t=[];for(let n=0;n<this.colCnt;n+=1)t.push(this.cells[0][n].date);return t}sliceRange(t){let{colCnt:n}=this,r=this.daySeries.sliceRange(t),s=[];if(r){let{firstIndex:i,lastIndex:o}=r,l=i;for(;l<=o;){let a=Math.floor(l/n),d=Math.min((a+1)*n,o+1);s.push({row:a,firstCol:l%n,lastCol:(d-1)%n,isStart:r.isStart&&l===i,isEnd:r.isEnd&&d-1===o}),l=d}}return s}}class Lh{constructor(){this.sliceBusinessHours=W(this._sliceBusinessHours),this.sliceDateSelection=W(this._sliceDateSpan),this.sliceEventStore=W(this._sliceEventStore),this.sliceEventDrag=W(this._sliceInteraction),this.sliceEventResize=W(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(t,n,r,s,...i){let{eventUiBases:o}=t,l=this.sliceEventStore(t.eventStore,o,n,r,...i);return{dateSelectionSegs:this.sliceDateSelection(t.dateSelection,n,r,o,s,...i),businessHourSegs:this.sliceBusinessHours(t.businessHours,n,r,s,...i),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(t.eventDrag,o,n,r,...i),eventResize:this.sliceEventResize(t.eventResize,o,n,r,...i),eventSelection:t.eventSelection}}sliceNowDate(t,n,r,s,...i){return this._sliceDateSpan({range:{start:t,end:nt(t,1)},allDay:!1},n,r,{},s,...i)}_sliceBusinessHours(t,n,r,s,...i){return t?this._sliceEventStore(pt(t,gn(n,!!r),s),{},n,r,...i).bg:[]}_sliceEventStore(t,n,r,s,...i){if(t){let o=Ui(t,n,gn(r,!!s),s);return{bg:this.sliceEventRanges(o.bg,i),fg:this.sliceEventRanges(o.fg,i)}}return{bg:[],fg:[]}}_sliceInteraction(t,n,r,s,...i){if(!t)return null;let o=Ui(t.mutatedEvents,n,gn(r,!!s),s);return{segs:this.sliceEventRanges(o.fg,i),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}}_sliceDateSpan(t,n,r,s,i,...o){if(!t)return[];let l=gn(n,!!r),a=kt(t.range,l);if(a){t=Object.assign(Object.assign({},t),{range:a});let d=oh(t,s,i),u=this.sliceRange(t.range,...o);for(let h of u)h.eventRange=d;return u}return[]}sliceEventRanges(t,n){let r=[];for(let s of t)r.push(...this.sliceEventRange(s,n));return r}sliceEventRange(t,n){let r=t.range;this.forceDayIfListItem&&t.ui.display==="list-item"&&(r={start:r.start,end:oe(r.start,1)});let s=this.sliceRange(r,...n);for(let i of s)i.eventRange=t,i.isStart=t.isStart&&i.isStart,i.isEnd=t.isEnd&&i.isEnd;return s}}function gn(e,t){let n=e.activeRange;return t?n:{start:nt(n.start,e.slotMinTime.milliseconds),end:nt(n.end,e.slotMaxTime.milliseconds-864e5)}}function Gl(e,t,n){let{instances:r}=e.mutatedEvents;for(let s in r)if(!qn(t.validRange,r[s].range))return!1;return Wl({eventDrag:e},n)}function Bh(e,t,n){return qn(t.validRange,e.range)?Wl({dateSelection:e},n):!1}function Wl(e,t){let n=t.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||Vh)(r,t)}function Vh(e,t,n={},r){return!(e.eventDrag&&!$h(e,t,n,r)||e.dateSelection&&!zh(e,t,n,r))}function $h(e,t,n,r){let s=t.getCurrentData(),i=e.eventDrag,o=i.mutatedEvents,l=o.defs,a=o.instances,d=Hn(l,i.isEvent?e.eventUiBases:{"":s.selectionConfig});r&&(d=bt(d,r));let u=Og(e.eventStore,i.affectedEvents.instances),h=u.defs,g=u.instances,f=Hn(h,e.eventUiBases);for(let p in a){let m=a[p],v=m.range,b=d[m.defId],E=l[m.defId];if(!ql(b.constraints,v,u,e.businessHours,t))return!1;let{eventOverlap:x}=t.options,D=typeof x=="function"?x:null;for(let j in g){let M=g[j];if(Es(v,M.range)&&(f[M.defId].overlap===!1&&i.isEvent||b.overlap===!1||D&&!D(new Z(t,h[M.defId],M),new Z(t,E,m))))return!1}let A=s.eventStore;for(let j of b.allows){let M=Object.assign(Object.assign({},n),{range:m.range,allDay:E.allDay}),T=A.defs[E.defId],_=A.instances[p],C;if(T?C=new Z(t,T,_):C=new Z(t,E),!j(Ts(M,t),C))return!1}}return!0}function zh(e,t,n,r){let s=e.eventStore,i=s.defs,o=s.instances,l=e.dateSelection,a=l.range,{selectionConfig:d}=t.getCurrentData();if(r&&(d=r(d)),!ql(d.constraints,a,s,e.businessHours,t))return!1;let{selectOverlap:u}=t.options,h=typeof u=="function"?u:null;for(let g in o){let f=o[g];if(Es(a,f.range)&&(d.overlap===!1||h&&!h(new Z(t,i[f.defId],f),null)))return!1}for(let g of d.allows){let f=Object.assign(Object.assign({},n),l);if(!g(Ts(f,t),null))return!1}return!0}function ql(e,t,n,r,s){for(let i of e)if(!Gh(Uh(i,t,n,r,s),t))return!1;return!0}function Uh(e,t,n,r,s){return e==="businessHours"?Cr(pt(r,t,s)):typeof e=="string"?Cr(Qn(n,i=>i.groupId===e)):typeof e=="object"&&e?Cr(pt(e,t,s)):[]}function Cr(e){let{instances:t}=e,n=[];for(let r in t)n.push(t[r].range);return n}function Gh(e,t){for(let n of e)if(qn(n,t))return!0;return!1}const hn=/^(visible|hidden)$/;class Wh extends K{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,$e(this.props.elRef,t)}}render(){let{props:t}=this,{liquid:n,liquidIsAbsolute:r}=t,s=n&&r,i=["fc-scroller"];return n&&(r?i.push("fc-scroller-liquid-absolute"):i.push("fc-scroller-liquid")),S("div",{ref:this.handleEl,className:i.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:s&&-(t.overcomeLeft||0)||"",right:s&&-(t.overcomeRight||0)||"",bottom:s&&-(t.overcomeBottom||0)||"",marginLeft:!s&&-(t.overcomeLeft||0)||"",marginRight:!s&&-(t.overcomeRight||0)||"",marginBottom:!s&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)}needsXScrolling(){if(hn.test(this.props.overflowX))return!1;let{el:t}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=t;for(let s=0;s<r.length;s+=1)if(r[s].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(hn.test(this.props.overflowY))return!1;let{el:t}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=t;for(let s=0;s<r.length;s+=1)if(r[s].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return hn.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return hn.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class ut{constructor(t){this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:s,currentMap:i}=this,o=!1,l=!1;n!==null?(o=r in i,i[r]=n,s[r]=(s[r]||0)+1,l=!0):(s[r]-=1,s[r]||(delete i[r],delete this.callbackMap[r],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(r)),l&&this.masterCallback(n,String(r)))}}createRef(t){let n=this.callbackMap[t];return n||(n=this.callbackMap[t]=r=>{this.handleValue(r,String(t))}),n}collect(t,n,r){return tg(this.currentMap,t,n,r)}getAll(){return Ss(this.currentMap)}}function qh(e){let t=Ku(e,".fc-scrollgrid-shrink"),n=0;for(let r of t)n=Math.max(n,hf(r));return Math.ceil(n)}function Ql(e,t){return e.liquid&&t.liquid}function Qh(e,t){return t.maxHeight!=null||Ql(e,t)}function Yh(e,t,n,r){let{expandRows:s}=n;return typeof t.content=="function"?t.content(n):S("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:s?n.clientHeight:""}},n.tableColGroupNode,S(r?"thead":"tbody",{role:"presentation"},typeof t.rowContent=="function"?t.rowContent(n):t.rowContent))}function Zh(e,t){return tt(e,t,Le)}function Xh(e,t){let n=[];for(let r of e){let s=r.span||1;for(let i=0;i<s;i+=1)n.push(S("col",{style:{width:r.width==="shrink"?Jh(t):r.width||"",minWidth:r.minWidth||""}}))}return S("colgroup",{},...n)}function Jh(e){return e??4}function Kh(e){for(let t of e)if(t.width==="shrink")return!0;return!1}function ep(e,t){let n=["fc-scrollgrid",t.theme.getClass("table")];return e&&n.push("fc-scrollgrid-liquid"),n}function tp(e,t){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${e.type}`,e.className];return t&&e.liquid&&e.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),e.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function np(e){return S("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function Yi(e){let{stickyHeaderDates:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}function rp(e){let{stickyFooterScrollbar:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}class Yl extends K{constructor(){super(...arguments),this.processCols=W(t=>t,Zh),this.renderMicroColGroup=W(Xh),this.scrollerRefs=new ut,this.scrollerElRefs=new ut(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:t,state:n,context:r}=this,s=t.sections||[],i=this.processCols(t.cols),o=this.renderMicroColGroup(i,n.shrinkWidth),l=ep(t.liquid,r);t.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let a=s.length,d=0,u,h=[],g=[],f=[];for(;d<a&&(u=s[d]).type==="header";)h.push(this.renderSection(u,o,!0)),d+=1;for(;d<a&&(u=s[d]).type==="body";)g.push(this.renderSection(u,o,!1)),d+=1;for(;d<a&&(u=s[d]).type==="footer";)f.push(this.renderSection(u,o,!0)),d+=1;let p=!Ol();const m={role:"rowgroup"};return S("table",{role:"grid",className:l.join(" "),style:{height:t.height}},!!(!p&&h.length)&&S("thead",m,...h),!!(!p&&g.length)&&S("tbody",m,...g),!!(!p&&f.length)&&S("tfoot",m,...f),p&&S("tbody",m,...h,...g,...f))}renderSection(t,n,r){return"outerContent"in t?S(ee,{key:t.key},t.outerContent):S("tr",{key:t.key,role:"presentation",className:tp(t,this.props.liquid).join(" ")},this.renderChunkTd(t,n,t.chunk,r))}renderChunkTd(t,n,r,s){if("outerContent"in r)return r.outerContent;let{props:i}=this,{forceYScrollbars:o,scrollerClientWidths:l,scrollerClientHeights:a}=this.state,d=Qh(i,t),u=Ql(i,t),h=i.liquid?o?"scroll":d?"auto":"hidden":"visible",g=t.key,f=Yh(t,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!i.collapsibleWidth&&l[g]!==void 0?l[g]:null,clientHeight:a[g]!==void 0?a[g]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return S(s?"th":"td",{ref:r.elRef,role:"presentation"},S("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},S(Wh,{ref:this.scrollerRefs.createRef(g),elRef:this.scrollerElRefs.createRef(g),overflowY:h,overflowX:i.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:u,liquidIsAbsolute:!0},f)))}_handleScrollerEl(t,n){let r=sp(this.props.sections,n);r&&$e(r.chunk.scrollerElRef,t)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return Kh(this.props.cols)?qh(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let t=Sh(),{scrollerRefs:n,scrollerElRefs:r}=this,s=!1,i={},o={};for(let l in n.currentMap){let a=n.currentMap[l];if(a&&a.needsYScrolling()){s=!0;break}}for(let l of this.props.sections){let a=l.key,d=r.currentMap[a];if(d){let u=d.parentNode;i[a]=Math.floor(u.getBoundingClientRect().width-(s?t.y:0)),o[a]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:i,scrollerClientHeights:o}}}Yl.addStateEquality({scrollerClientWidths:Le,scrollerClientHeights:Le});function sp(e,t){for(let n of e)if(n.key===t)return n;return null}class Fs extends K{constructor(){super(...arguments),this.buildPublicEvent=W((t,n,r)=>new Z(t,n,r)),this.handleEl=t=>{this.el=t,$e(this.props.elRef,t),t&&Gi(t,this.props.seg)}}render(){const{props:t,context:n}=this,{options:r}=n,{seg:s}=t,{eventRange:i}=s,{ui:o}=i,l={event:this.buildPublicEvent(n,i.def,i.instance),view:n.viewApi,timeText:t.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!t.disableDragging&&Yg(s,n),isStartResizable:!t.disableResizing&&Zg(s,n),isEndResizable:!t.disableResizing&&Xg(s),isMirror:!!(t.isDragging||t.isResizing||t.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!t.isPast,isFuture:!!t.isFuture,isToday:!!t.isToday,isSelected:!!t.isSelected,isDragging:!!t.isDragging,isResizing:!!t.isResizing};return S(Qe,{elRef:this.handleEl,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:[...Jg(l),...s.eventRange.ui.classNames,...t.elClasses||[]],elStyle:t.elStyle,renderProps:l,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:t.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},t.children)}componentDidUpdate(t){this.el&&this.props.seg!==t.seg&&Gi(this.el,this.props.seg)}}class Zl extends K{render(){let{props:t,context:n}=this,{options:r}=n,{seg:s}=t,{ui:i}=s.eventRange,o=r.eventTimeFormat||t.defaultTimeFormat,l=Ml(s,o,n,t.defaultDisplayEventTime,t.defaultDisplayEventEnd);return S(Fs,Object.assign({},t,{elTag:"a",elStyle:{borderColor:i.borderColor,backgroundColor:i.backgroundColor},elAttrs:jl(s,n),defaultGenerator:ip,timeText:l}),(a,d)=>S(ee,null,S(a,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:d.textColor}}),!!d.isStartResizable&&S("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!d.isEndResizable&&S("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Zl.addPropsEquality({seg:Le});function ip(e){return S("div",{className:"fc-event-main-frame"},e.timeText&&S("div",{className:"fc-event-time"},e.timeText),S("div",{className:"fc-event-title-container"},S("div",{className:"fc-event-title fc-sticky"},e.event.title||S(ee,null,"Â "))))}const op=ie({day:"numeric"});class Xl extends K{constructor(){super(...arguments),this.refineRenderProps=Sn(lp)}render(){let{props:t,context:n}=this,{options:r}=n,s=this.refineRenderProps({date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,isMonthStart:t.isMonthStart||!1,showDayNumber:t.showDayNumber,extraRenderProps:t.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return S(Qe,{elRef:t.elRef,elTag:t.elTag,elAttrs:Object.assign(Object.assign({},t.elAttrs),s.isDisabled?{}:{"data-date":ys(t.date)}),elClasses:[...Is(s,n.theme),...t.elClasses||[]],elStyle:t.elStyle,renderProps:s,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:t.defaultGenerator,classNameGenerator:s.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},t.children)}}function Jl(e){return!!(e.dayCellContent||Vr("dayCellContent",e))}function lp(e){let{date:t,dateEnv:n,dateProfile:r,isMonthStart:s}=e,i=Ll(t,e.todayRange,null,r),o=e.showDayNumber?n.format(t,s?e.monthStartFormat:op):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(t),view:e.viewApi},i),{isMonthStart:s,dayNumberText:o}),e.extraRenderProps)}class ap extends K{render(){let{props:t}=this,{seg:n}=t;return S(Fs,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:cp,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:t.isPast,isFuture:t.isFuture,isToday:t.isToday,disableDragging:!0,disableResizing:!0})}}function cp(e){let{title:t}=e.event;return t&&S("div",{className:"fc-event-title"},e.event.title)}function dp(e){return S("div",{className:`fc-${e}`})}const up=e=>S(xt.Consumer,null,t=>{let{dateEnv:n,options:r}=t,{date:s}=e,i=r.weekNumberFormat||e.defaultFormat,o=n.computeWeekNumber(s),l=n.format(s,i),a={num:o,text:l,date:s};return S(Qe,{elRef:e.elRef,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:e.elClasses,elStyle:e.elStyle,renderProps:a,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:fp,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},e.children)});function fp(e){return e.text}const Er=10;class gp extends K{constructor(){super(...arguments),this.state={titleId:Gn()},this.handleRootEl=t=>{this.rootEl=t,this.props.elRef&&$e(this.props.elRef,t)},this.handleDocumentMouseDown=t=>{const n=cl(t);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=t=>{t.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:t}=this.props;t&&t()}}render(){let{theme:t,options:n}=this.context,{props:r,state:s}=this,i=["fc-popover",t.getClass("popover")].concat(r.extraClassNames||[]);return Lu(S("div",Object.assign({},r.extraAttrs,{id:r.id,className:i.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),S("div",{className:"fc-popover-header "+t.getClass("popoverHeader")},S("span",{className:"fc-popover-title",id:s.titleId},r.title),S("span",{className:"fc-popover-close "+t.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),S("div",{className:"fc-popover-body "+t.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:t}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:s}=this,i=Ah(n);if(i){let o=s.getBoundingClientRect(),l=r?ve(n,".fc-scrollgrid").getBoundingClientRect().top:i.top,a=t?i.right-o.width:i.left;l=Math.max(l,Er),a=Math.min(a,document.documentElement.clientWidth-Er-o.width),a=Math.max(a,Er);let d=s.offsetParent.getBoundingClientRect();Vt(s,{top:l-d.top,left:a-d.left})}}}class hp extends St{constructor(){super(...arguments),this.handleRootEl=t=>{this.rootEl=t,t?this.context.registerInteractiveComponent(this,{el:t,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:t,dateEnv:n}=this.context,{props:r}=this,{startDate:s,todayRange:i,dateProfile:o}=r,l=n.format(s,t.dayPopoverFormat);return S(Xl,{elRef:this.handleRootEl,date:s,dateProfile:o,todayRange:i},(a,d,u)=>S(gp,{elRef:u.ref,id:r.id,title:l,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},Jl(t)&&S(a,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(t,n,r,s){let{rootEl:i,props:o}=this;return t>=0&&t<r&&n>=0&&n<s?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:i,rect:{left:0,top:0,right:r,bottom:s},layer:1}:null}}class pp extends K{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Gn()},this.handleLinkEl=t=>{this.linkEl=t,this.props.elRef&&$e(this.props.elRef,t)},this.handleClick=t=>{let{props:n,context:r}=this,{moreLinkClick:s}=r.options,i=Zi(n).start;function o(l){let{def:a,instance:d,range:u}=l.eventRange;return{event:new Z(r,a,d),start:r.dateEnv.toDate(u.start),end:r.dateEnv.toDate(u.end),isStart:l.isStart,isEnd:l.isEnd}}typeof s=="function"&&(s=s({date:i,allDay:!!n.allDayDate,allSegs:n.allSegs.map(o),hiddenSegs:n.hiddenSegs.map(o),jsEvent:t,view:r.viewApi})),!s||s==="popover"?this.setState({isPopoverOpen:!0}):typeof s=="string"&&r.calendarApi.zoomTo(i,s)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:t,state:n}=this;return S(xt.Consumer,null,r=>{let{viewApi:s,options:i,calendarApi:o}=r,{moreLinkText:l}=i,{moreCnt:a}=t,d=Zi(t),u=typeof l=="function"?l.call(o,a):`+${a} ${l}`,h=$t(i.moreLinkHint,[a],u),g={num:a,shortText:`+${a}`,text:u,view:s};return S(ee,null,!!t.moreCnt&&S(Qe,{elTag:t.elTag||"a",elRef:this.handleLinkEl,elClasses:[...t.elClasses||[],"fc-more-link"],elStyle:t.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},t.elAttrs),ul(this.handleClick)),{title:h,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:g,generatorName:"moreLinkContent",customGenerator:i.moreLinkContent,defaultGenerator:t.defaultGenerator||mp,classNameGenerator:i.moreLinkClassNames,didMount:i.moreLinkDidMount,willUnmount:i.moreLinkWillUnmount},t.children),n.isPopoverOpen&&S(hp,{id:n.popoverId,startDate:d.start,endDate:d.end,dateProfile:t.dateProfile,todayRange:t.todayRange,extraDateSpan:t.extraDateSpan,parentEl:this.parentEl,alignmentEl:t.alignmentElRef?t.alignmentElRef.current:this.linkEl,alignGridTop:t.alignGridTop,forceTimed:t.forceTimed,onClose:this.handlePopoverClose},t.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=ve(this.linkEl,".fc-view-harness"))}}function mp(e){return e.text}function Zi(e){if(e.allDayDate)return{start:e.allDayDate,end:oe(e.allDayDate,1)};let{hiddenSegs:t}=e;return{start:vp(t),end:bp(t)}}function vp(e){return e.reduce(yp).eventRange.range.start}function yp(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function bp(e){return e.reduce(xp).eventRange.range.end}function xp(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}class wp{constructor(){this.handlers=[]}set(t){this.currentValue=t;for(let n of this.handlers)n(t)}subscribe(t){this.handlers.push(t),this.currentValue!==void 0&&t(this.currentValue)}}class Sp extends wp{constructor(){super(...arguments),this.map=new Map}handle(t){const{map:n}=this;let r=!1;t.isActive?(n.set(t.id,t),r=!0):n.has(t.id)&&(n.delete(t.id),r=!0),r&&this.set(n)}}const Cp=[],Kl={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},ea=Object.assign(Object.assign({},Kl),{buttonHints:{prev:"Previous $0",next:"Next $0",today(e,t){return t==="day"?"Today":`This ${e}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(e){return`Show ${e} more event${e===1?"":"s"}`}});function Ep(e){let t=e.length>0?e[0].code:"en",n=Cp.concat(e),r={en:ea};for(let s of n)r[s.code]=s;return{map:r,defaultCode:t}}function ta(e,t){return typeof e=="object"&&!Array.isArray(e)?na(e.code,[e.code],e):_p(e,t)}function _p(e,t){let n=[].concat(e||[]),r=Ap(n,t)||ea;return na(e,n,r)}function Ap(e,t){for(let n=0;n<e.length;n+=1){let r=e[n].toLocaleLowerCase().split("-");for(let s=r.length;s>0;s-=1){let i=r.slice(0,s).join("-");if(t[i])return t[i]}}return null}function na(e,t,n){let r=ws([Kl,n],["buttonText"]);delete r.code;let{week:s}=r;return delete r.week,{codeArg:e,codes:t,week:s,simpleNumberFormat:new Intl.NumberFormat(e),options:r}}function st(e){return{id:yt(),name:e.name,premiumReleaseDate:e.premiumReleaseDate?new Date(e.premiumReleaseDate):void 0,deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function Rp(e,t){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(i){for(let o of i){const l=o.name,a=n[l];a===void 0?(n[l]=o.id,s(o.deps),r=Tp(r,o)):a!==o.id&&console.warn(`Duplicate plugin '${l}'`)}}return e&&s(e),s(t),r}function Dp(){let e=[],t=[],n;return(r,s)=>((!n||!tt(r,e)||!tt(s,t))&&(n=Rp(r,s)),e=r,t=s,n)}function Tp(e,t){return{premiumReleaseDate:kp(e.premiumReleaseDate,t.premiumReleaseDate),reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:Object.assign(Object.assign({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:Object.assign(Object.assign({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:Object.assign(Object.assign({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},e.listenerRefiners),t.listenerRefiners),optionRefiners:Object.assign(Object.assign({},e.optionRefiners),t.optionRefiners),propSetHandlers:Object.assign(Object.assign({},e.propSetHandlers),t.propSetHandlers)}}function kp(e,t){return e===void 0?t:t===void 0?e:new Date(Math.max(e.valueOf(),t.valueOf()))}class it extends Kt{}it.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};it.prototype.baseIconClass="fc-icon";it.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};it.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};it.prototype.iconOverrideOption="buttonIcons";it.prototype.iconOverrideCustomButtonOption="icon";it.prototype.iconOverridePrefix="fc-icon-";function Np(e,t){let n={},r;for(r in e)Wr(r,n,e,t);for(r in t)Wr(r,n,e,t);return n}function Wr(e,t,n,r){if(t[e])return t[e];let s=Ip(e,t,n,r);return s&&(t[e]=s),s}function Ip(e,t,n,r){let s=n[e],i=r[e],o=u=>s&&s[u]!==null?s[u]:i&&i[u]!==null?i[u]:null,l=o("component"),a=o("superType"),d=null;if(a){if(a===e)throw new Error("Can't have a custom view type that references itself");d=Wr(a,t,n,r)}return!l&&d&&(l=d.component),l?{type:e,component:l,defaults:Object.assign(Object.assign({},d?d.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},d?d.overrides:{}),i?i.rawOptions:{})}:null}function Xi(e){return bt(e,Mp)}function Mp(e){let t=typeof e=="function"?{component:e}:e,{component:n}=t;return t.content?n=Ji(t):n&&!(n.prototype instanceof K)&&(n=Ji(Object.assign(Object.assign({},t),{content:n}))),{superType:t.type,component:n,rawOptions:t}}function Ji(e){return t=>S(xt.Consumer,null,n=>S(Qe,{elTag:"div",elClasses:bl(n.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:e.content,classNameGenerator:e.classNames,didMount:e.didMount,willUnmount:e.willUnmount}))}function jp(e,t,n,r){let s=Xi(e),i=Xi(t.views),o=Np(s,i);return bt(o,l=>Pp(l,i,t,n,r))}function Pp(e,t,n,r,s){let i=e.overrides.duration||e.defaults.duration||r.duration||n.duration,o=null,l="",a="",d={};if(i&&(o=Fp(i),o)){let g=Br(o);l=g.unit,g.value===1&&(a=l,d=t[l]?t[l].rawOptions:{})}let u=g=>{let f=g.buttonText||{},p=e.defaults.buttonTextKey;return p!=null&&f[p]!=null?f[p]:f[e.type]!=null?f[e.type]:f[a]!=null?f[a]:null},h=g=>{let f=g.buttonHints||{},p=e.defaults.buttonTextKey;return p!=null&&f[p]!=null?f[p]:f[e.type]!=null?f[e.type]:f[a]!=null?f[a]:null};return{type:e.type,component:e.component,duration:o,durationUnit:l,singleUnit:a,optionDefaults:e.defaults,optionOverrides:Object.assign(Object.assign({},d),e.overrides),buttonTextOverride:u(r)||u(n)||e.overrides.buttonText,buttonTextDefault:u(s)||e.defaults.buttonText||u(zt)||e.type,buttonTitleOverride:h(r)||h(n)||e.overrides.buttonHint,buttonTitleDefault:h(s)||e.defaults.buttonHint||h(zt)}}let Ki={};function Fp(e){let t=JSON.stringify(e),n=Ki[t];return n===void 0&&(n=q(e),Ki[t]=n),n}function Op(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}function Hp(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}function Lp(e,t,n){let r=e.initialDate;return r!=null?t.createMarker(r):n.getDateMarker()}function Bp(e,t){switch(t.type){case"SET_OPTION":return Object.assign(Object.assign({},e),{[t.optionName]:t.rawOptionValue});default:return e}}function Vp(e,t,n,r){let s;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if(s=r.buildPrev(e,n),s.isValid)return s;break;case"NEXT":if(s=r.buildNext(e,n),s.isValid)return s;break}return e}function $p(e,t,n){let r=t?t.activeRange:null;return sa({},Yp(e,n),r,n)}function zp(e,t,n,r){let s=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return sa(e,t.sources,s,r);case"REMOVE_EVENT_SOURCE":return Gp(e,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?ia(e,s,r):e;case"FETCH_EVENT_SOURCES":return Os(e,t.sourceIds?hl(t.sourceIds):oa(e,r),s,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return Qp(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function Up(e,t,n){let r=t?t.activeRange:null;return Os(e,oa(e,n),r,!0,n)}function ra(e){for(let t in e)if(e[t].isFetching)return!0;return!1}function sa(e,t,n,r){let s={};for(let i of t)s[i.sourceId]=i;return n&&(s=ia(s,n,r)),Object.assign(Object.assign({},e),s)}function Gp(e,t){return ht(e,n=>n.sourceId!==t)}function ia(e,t,n){return Os(e,ht(e,r=>Wp(r,t,n)),t,!1,n)}function Wp(e,t,n){return la(e,n)?!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId}function Os(e,t,n,r,s){let i={};for(let o in e){let l=e[o];t[o]?i[o]=qp(l,n,r,s):i[o]=l}return i}function qp(e,t,n,r){let{options:s,calendarApi:i}=r,o=r.pluginHooks.eventSourceDefs[e.sourceDefId],l=yt();return o.fetch({eventSource:e,range:t,isRefetch:n,context:r},a=>{let{rawEvents:d}=a;s.eventSourceSuccess&&(d=s.eventSourceSuccess.call(i,d,a.response)||d),e.success&&(d=e.success.call(i,d,a.response)||d),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:l,fetchRange:t,rawEvents:d})},a=>{let d=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(i,a),d=!0),e.failure&&(e.failure(a),d=!0),d||console.warn(a.message,a),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:l,fetchRange:t,error:a})}),Object.assign(Object.assign({},e),{isFetching:!0,latestFetchId:l})}function Qp(e,t,n,r){let s=e[t];return s&&n===s.latestFetchId?Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:r})}):e}function oa(e,t){return ht(e,n=>la(n,t))}function Yp(e,t){let n=Rl(t),r=[].concat(e.eventSources||[]),s=[];e.initialEvents&&r.unshift(e.initialEvents),e.events&&r.unshift(e.events);for(let i of r){let o=Al(i,t,n);o&&s.push(o)}return s}function la(e,t){return!t.pluginHooks.eventSourceDefs[e.sourceDefId].ignoreRange}function Zp(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function Xp(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function Jp(e,t){let n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function Kp(e,t){let n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function em(e,t,n,r,s){let i=e.headerToolbar?eo(e.headerToolbar,e,t,n,r,s):null,o=e.footerToolbar?eo(e.footerToolbar,e,t,n,r,s):null;return{header:i,footer:o}}function eo(e,t,n,r,s,i){let o={},l=[],a=!1;for(let d in e){let u=e[d],h=tm(u,t,n,r,s,i);o[d]=h.widgets,l.push(...h.viewsWithButtons),a=a||h.hasTitle}return{sectionWidgets:o,viewsWithButtons:l,hasTitle:a}}function tm(e,t,n,r,s,i){let o=t.direction==="rtl",l=t.customButtons||{},a=n.buttonText||{},d=t.buttonText||{},u=n.buttonHints||{},h=t.buttonHints||{},g=e?e.split(" "):[],f=[],p=!1;return{widgets:g.map(v=>v.split(",").map(b=>{if(b==="title")return p=!0,{buttonName:b};let E,x,D,A,j,M;if(E=l[b])D=T=>{E.click&&E.click.call(T.target,T,T.target)},(A=r.getCustomButtonIconClass(E))||(A=r.getIconClass(b,o))||(j=E.text),M=E.hint||E.text;else if(x=s[b]){f.push(b),D=()=>{i.changeView(b)},(j=x.buttonTextOverride)||(A=r.getIconClass(b,o))||(j=x.buttonTextDefault);let T=x.buttonTextOverride||x.buttonTextDefault;M=$t(x.buttonTitleOverride||x.buttonTitleDefault||t.viewHint,[T,b],T)}else if(i[b])if(D=()=>{i[b]()},(j=a[b])||(A=r.getIconClass(b,o))||(j=d[b]),b==="prevYear"||b==="nextYear"){let T=b==="prevYear"?"prev":"next";M=$t(u[T]||h[T],[d.year||"year","year"],d[b])}else M=T=>$t(u[b]||h[b],[d[T]||T,T],d[b]);return{buttonName:b,buttonClick:D,buttonIcon:A,buttonText:j,buttonHint:M}})),viewsWithButtons:f,hasTitle:p}}class nm{constructor(t,n,r){this.type=t,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(t){return this.getCurrentData().options[t]}}let rm={ignoreRange:!0,parseMeta(e){return Array.isArray(e.events)?e.events:null},fetch(e,t){t({rawEvents:e.eventSource.meta})}};const sm=st({name:"array-event-source",eventSourceDefs:[rm]});let im={parseMeta(e){return typeof e.events=="function"?e.events:null},fetch(e,t,n){const{dateEnv:r}=e.context,s=e.eventSource.meta;lh(s.bind(null,Pl(e.range,r)),i=>t({rawEvents:i}),n)}};const om=st({name:"func-event-source",eventSourceDefs:[im]}),lm={method:String,extraParams:w,startParam:String,endParam:String,timeZoneParam:String};let am={parseMeta(e){return e.url&&(e.format==="json"||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null},fetch(e,t,n){const{meta:r}=e.eventSource,s=dm(r,e.range,e.context);ah(r.method,r.url,s).then(([i,o])=>{t({rawEvents:i,response:o})},n)}};const cm=st({name:"json-event-source",eventSourceRefiners:lm,eventSourceDefs:[am]});function dm(e,t,n){let{dateEnv:r,options:s}=n,i,o,l,a,d={};return i=e.startParam,i==null&&(i=s.startParam),o=e.endParam,o==null&&(o=s.endParam),l=e.timeZoneParam,l==null&&(l=s.timeZoneParam),typeof e.extraParams=="function"?a=e.extraParams():a=e.extraParams||{},Object.assign(d,a),d[i]=r.formatIso(t.start),d[o]=r.formatIso(t.end),r.timeZone!=="local"&&(d[l]=r.timeZone),d}const um={daysOfWeek:w,startTime:q,endTime:q,duration:q,startRecur:w,endRecur:w};let fm={parse(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){let n={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null,dateEnv:t},r;return e.duration&&(r=e.duration),!r&&e.startTime&&e.endTime&&(r=yf(e.endTime,e.startTime)),{allDayGuess:!e.startTime&&!e.endTime,duration:r,typeData:n}}return null},expand(e,t,n){let r=kt(t,{start:e.startRecur,end:e.endRecur});return r?hm(e.daysOfWeek,e.startTime,e.dateEnv,n,r):[]}};const gm=st({name:"simple-recurring-event",recurringTypes:[fm],eventRefiners:um});function hm(e,t,n,r,s){let i=e?hl(e):null,o=Y(s.start),l=s.end,a=[];for(t&&(t.milliseconds<0?l=oe(l,1):t.milliseconds>=1e3*60*60*24&&(o=oe(o,-1)));o<l;){let d;(!i||i[o.getUTCDay()])&&(t?d=r.add(o,t):d=o,a.push(r.createMarker(n.toDate(d)))),o=oe(o,1)}return a}const pm=st({name:"change-handler",optionChangeHandlers:{events(e,t){to([e],t)},eventSources:to}});function to(e,t){let n=Ss(t.getCurrentData().eventSources);if(n.length===1&&e.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(e[0])){t.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:e[0]});return}let r=[];for(let s of e){let i=!1;for(let o=0;o<n.length;o+=1)if(n[o]._raw===s){n.splice(o,1),i=!0;break}i||r.push(s)}for(let s of n)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of r)t.calendarApi.addEventSource(s)}function mm(e,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},Pl(e.activeRange,t.dateEnv)),{view:t.viewApi}))}function vm(e,t){let{emitter:n}=t;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",ft(e,t))}const ym=[sm,om,cm,gm,pm,st({name:"misc",isLoadingFuncs:[e=>ra(e.eventSources)],propSetHandlers:{dateProfile:mm,eventStore:vm}})];class bm{constructor(t,n){this.runTaskOption=t,this.drainedOption=n,this.queue=[],this.delayedRunner=new hs(this.drain.bind(this))}request(t,n){this.queue.push(t),this.delayedRunner.request(n)}pause(t){this.delayedRunner.pause(t)}resume(t,n){this.delayedRunner.resume(t,n)}drain(){let{queue:t}=this;for(;t.length;){let n=[],r;for(;r=t.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(t){this.runTaskOption&&this.runTaskOption(t)}drained(t){this.drainedOption&&this.drainedOption(t)}}function xm(e,t,n){let r;return/^(year|month)$/.test(e.currentRangeUnit)?r=e.currentRange:r=e.activeRange,n.formatRange(r.start,r.end,ie(t.titleFormat||wm(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}function wm(e){let{currentRangeUnit:t}=e;if(t==="year")return{year:"numeric"};if(t==="month")return{year:"numeric",month:"long"};let n=Nn(e.currentRange.start,e.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class no{constructor(){this.resetListeners=new Set}handleInput(t,n){const r=this.dateEnv;if(t!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=t.toDate(n?t.createMarker(n):t.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=t,r))for(const s of this.resetListeners.values())s()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(t){this.resetListeners.add(t)}removeResetListener(t){this.resetListeners.delete(t)}}class Sm{constructor(t){this.computeCurrentViewData=W(this._computeCurrentViewData),this.organizeRawLocales=W(Ep),this.buildLocale=W(ta),this.buildPluginHooks=Dp(),this.buildDateEnv=W(Cm),this.buildTheme=W(Em),this.parseToolbars=W(em),this.buildViewSpecs=W(jp),this.buildDateProfileGenerator=Sn(_m),this.buildViewApi=W(Am),this.buildViewUiProps=Sn(Tm),this.buildEventUiBySource=W(Rm,Le),this.buildEventUiBases=W(Dm),this.parseContextBusinessHours=Sn(km),this.buildTitle=W(xm),this.nowManager=new no,this.emitter=new Yn,this.actionRunner=new bm(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=g=>{this.actionRunner.request(g)},this.props=t,this.actionRunner.pause(),this.nowManager=new no;let n={},r=this.computeOptionsData(t.optionOverrides,n,t.calendarApi),s=r.calendarOptions.initialView||r.pluginHooks.initialView,i=this.computeCurrentViewData(s,r,t.optionOverrides,n);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(i.options);let o={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=Lp(r.calendarOptions,r.dateEnv,this.nowManager),a=i.dateProfileGenerator.build(l);et(a.activeRange,l)||(l=a.currentRange.start);for(let g of r.pluginHooks.contextInit)g(o);let d=$p(r.calendarOptions,a,o),u={dynamicOptionOverrides:n,currentViewType:s,currentDate:l,dateProfile:a,businessHours:this.parseContextBusinessHours(o),eventSources:d,eventUiBases:{},eventStore:Oe(),renderableEventStore:Oe(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},h=Object.assign(Object.assign({},o),u);for(let g of r.pluginHooks.reducers)Object.assign(u,g(null,null,h));_r(u,o)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(t,n){let{props:r}=this;n===void 0?r.optionOverrides=t:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),t),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(t){let{props:n,state:r,emitter:s}=this,i=Bp(r.dynamicOptionOverrides,t),o=this.computeOptionsData(n.optionOverrides,i,n.calendarApi),l=Op(r.currentViewType,t),a=this.computeCurrentViewData(l,o,n.optionOverrides,i);n.calendarApi.currentDataManager=this,s.setThisContext(n.calendarApi),s.setOptions(a.options);let d={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:h}=r;this.data&&this.data.dateProfileGenerator!==a.dateProfileGenerator&&(h=a.dateProfileGenerator.build(u)),u=Hp(u,t),h=Vp(h,t,u,a.dateProfileGenerator),(t.type==="PREV"||t.type==="NEXT"||!et(h.currentRange,u))&&(u=h.currentRange.start);let g=zp(r.eventSources,t,h,d),f=Mg(r.eventStore,t,g,h,d),m=ra(g)&&!a.options.progressiveEventRendering&&r.renderableEventStore||f,{eventUiSingleBase:v,selectionConfig:b}=this.buildViewUiProps(d),E=this.buildEventUiBySource(g),x=this.buildEventUiBases(m.defs,v,E),D={dynamicOptionOverrides:i,currentViewType:l,currentDate:u,dateProfile:h,eventSources:g,eventStore:f,renderableEventStore:m,selectionConfig:b,eventUiBases:x,businessHours:this.parseContextBusinessHours(d),dateSelection:Zp(r.dateSelection,t),eventSelection:Xp(r.eventSelection,t),eventDrag:Jp(r.eventDrag,t),eventResize:Kp(r.eventResize,t)},A=Object.assign(Object.assign({},d),D);for(let T of o.pluginHooks.reducers)Object.assign(D,T(r,t,A));let j=_r(r,d),M=_r(D,d);!j&&M?s.trigger("loading",!0):j&&!M&&s.trigger("loading",!1),this.state=D,n.onAction&&n.onAction(t)}updateData(){let{props:t,state:n}=this,r=this.data,s=this.computeOptionsData(t.optionOverrides,n.dynamicOptionOverrides,t.calendarApi),i=this.computeCurrentViewData(n.currentViewType,s,t.optionOverrides,n.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,i.options,s.dateEnv),calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),i),n),l=s.pluginHooks.optionChangeHandlers,a=r&&r.calendarOptions,d=s.calendarOptions;if(a&&a!==d){a.timeZone!==d.timeZone&&(n.eventSources=o.eventSources=Up(o.eventSources,n.dateProfile,o),n.eventStore=o.eventStore=$i(o.eventStore,r.dateEnv,o.dateEnv),n.renderableEventStore=o.renderableEventStore=$i(o.renderableEventStore,r.dateEnv,o.dateEnv));for(let u in l)(this.optionsForHandling.indexOf(u)!==-1||a[u]!==d[u])&&l[u](d[u],o)}this.optionsForHandling=[],t.onData&&t.onData(o)}computeOptionsData(t,n,r){if(!this.optionsForRefining.length&&t===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:i,localeDefaults:o,availableLocaleData:l,extra:a}=this.processRawCalendarOptions(t,n);ro(a);let d=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,i,l,s.defaultRangeSeparator),u=this.buildViewSpecs(i.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),h=this.buildTheme(s,i),g=this.parseToolbars(s,this.stableOptionOverrides,h,u,r);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:i,dateEnv:d,viewSpecs:u,theme:h,toolbarConfig:g,localeDefaults:o,availableRawLocales:l.map}}processRawCalendarOptions(t,n){let{locales:r,locale:s}=vr([zt,t,n]),i=this.organizeRawLocales(r),o=i.map,l=this.buildLocale(s||i.defaultCode,o).options,a=this.buildPluginHooks(t.plugins||[],ym),d=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Pi),Fi),Oi),a.listenerRefiners),a.optionRefiners),u={},h=vr([zt,l,t,n]),g={},f=this.currentCalendarOptionsInput,p=this.currentCalendarOptionsRefined,m=!1;for(let v in h)this.optionsForRefining.indexOf(v)===-1&&(h[v]===f[v]||at[v]&&v in f&&at[v](f[v],h[v]))?g[v]=p[v]:d[v]?(g[v]=d[v](h[v]),m=!0):u[v]=f[v];return m&&(this.currentCalendarOptionsInput=h,this.currentCalendarOptionsRefined=g,this.stableOptionOverrides=t,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:a,availableLocaleData:i,localeDefaults:l,extra:u}}_computeCurrentViewData(t,n,r,s){let i=n.viewSpecs[t];if(!i)throw new Error(`viewType "${t}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:l}=this.processRawViewOptions(i,n.pluginHooks,n.localeDefaults,r,s);ro(l),this.nowManager.handleInput(n.dateEnv,o.now);let a=this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),d=this.buildViewApi(t,this.getCurrentData,n.dateEnv);return{viewSpec:i,options:o,dateProfileGenerator:a,viewApi:d}}processRawViewOptions(t,n,r,s,i){let o=vr([zt,t.optionDefaults,r,s,t.optionOverrides,i]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Pi),Fi),Oi),Zf),n.listenerRefiners),n.optionRefiners),a={},d=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,h=!1,g={};for(let f in o)o[f]===d[f]||at[f]&&at[f](o[f],d[f])?a[f]=u[f]:(o[f]===this.currentCalendarOptionsInput[f]||at[f]&&at[f](o[f],this.currentCalendarOptionsInput[f])?f in this.currentCalendarOptionsRefined&&(a[f]=this.currentCalendarOptionsRefined[f]):l[f]?a[f]=l[f](o[f]):g[f]=o[f],h=!0);return h&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=a),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:g}}}function Cm(e,t,n,r,s,i,o,l){let a=ta(t||o.defaultCode,o.map);return new lg({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:i.namedTimeZonedImpl,locale:a,weekNumberCalculation:n,firstDay:r,weekText:s,cmdFormatter:i.cmdFormatter,defaultSeparator:l})}function Em(e,t){let n=t.themeClasses[e.themeSystem]||it;return new n(e)}function _m(e){let t=e.dateProfileGeneratorClass||Sl;return new t(e)}function Am(e,t,n){return new nm(e,t,n)}function Rm(e){return bt(e,t=>t.ui)}function Dm(e,t,n){let r={"":t};for(let s in e){let i=e[s];i.sourceId&&n[i.sourceId]&&(r[s]=n[i.sourceId])}return r}function Tm(e){let{options:t}=e;return{eventUiSingleBase:On({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:typeof t.eventOverlap=="boolean"?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:On({constraint:t.selectConstraint,overlap:typeof t.selectOverlap=="boolean"?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function _r(e,t){for(let n of t.pluginHooks.isLoadingFuncs)if(n(e))return!0;return!1}function km(e){return $g(e.options.businessHours,e)}function ro(e,t){for(let n in e)console.warn(`Unknown option '${n}'`)}class Nm extends K{render(){let t=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return S("div",{className:"fc-toolbar-chunk"},...t)}renderWidgetGroup(t){let{props:n}=this,{theme:r}=this.context,s=[],i=!0;for(let o of t){let{buttonName:l,buttonClick:a,buttonText:d,buttonIcon:u,buttonHint:h}=o;if(l==="title")i=!1,s.push(S("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let g=l===n.activeButton,f=!n.isTodayEnabled&&l==="today"||!n.isPrevEnabled&&l==="prev"||!n.isNextEnabled&&l==="next",p=[`fc-${l}-button`,r.getClass("button")];g&&p.push(r.getClass("buttonActive")),s.push(S("button",{type:"button",title:typeof h=="function"?h(n.navUnit):h,disabled:f,"aria-pressed":g,className:p.join(" "),onClick:a},d||(u?S("span",{className:u,role:"img"}):"")))}}if(s.length>1){let o=i&&r.getClass("buttonGroup")||"";return S("div",{className:o},...s)}return s[0]}}class so extends K{render(){let{model:t,extraClassName:n}=this.props,r=!1,s,i,o=t.sectionWidgets,l=o.center;return o.left?(r=!0,s=o.left):s=o.start,o.right?(r=!0,i=o.right):i=o.end,S("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",l||[]),this.renderSection("end",i||[]))}renderSection(t,n){let{props:r}=this;return S(Nm,{key:t,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class Im extends K{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=t=>{this.el=t,$e(this.props.elRef,t),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:t,state:n}=this,{aspectRatio:r}=t,s=["fc-view-harness",r||t.liquid||t.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",o="";return r?n.availableWidth!==null?i=n.availableWidth/r:o=`${1/r*100}%`:i=t.height||"",S("div",{"aria-labelledby":t.labeledById,ref:this.handleEl,className:s.join(" "),style:{height:i,paddingBottom:o}},t.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class Mm extends jt{constructor(t){super(t),this.handleSegClick=(n,r)=>{let{component:s}=this,{context:i}=s,o=Nt(r);if(o&&s.isValidSegDownEl(n.target)){let l=ve(n.target,".fc-event-forced-url"),a=l?l.querySelector("a[href]").href:"";i.emitter.trigger("eventClick",{el:r,event:new Z(s.context,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:i.viewApi}),a&&!n.defaultPrevented&&(window.location.href=a)}},this.destroy=dl(t.el,"click",".fc-event",this.handleSegClick)}}class jm extends jt{constructor(t){super(t),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{Nt(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=nf(t.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(t,n,r){let{component:s}=this,{context:i}=s,o=Nt(r);(!n||s.isValidSegDownEl(n.target))&&i.emitter.trigger(t,{el:r,event:new Z(i,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:i.viewApi})}}class Pm extends wt{constructor(){super(...arguments),this.buildViewContext=W(dg),this.buildViewPropTransformers=W(Om),this.buildToolbarProps=W(Fm),this.headerRef=qe(),this.footerRef=qe(),this.interactionsStore={},this.state={viewLabelId:Gn()},this.registerInteractiveComponent=(t,n)=>{let r=uh(t,n),o=[Mm,jm].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(r));this.interactionsStore[t.uid]=o,Ur[t.uid]=r},this.unregisterInteractiveComponent=t=>{let n=this.interactionsStore[t.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[t.uid]}delete Ur[t.uid]},this.resizeRunner=new hs(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=t=>{let{options:n}=this.props;n.handleWindowResize&&t.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:t}=this,{toolbarConfig:n,options:r}=t,s=!1,i="",o;t.isHeightAuto||t.forPrint?i="":r.height!=null?s=!0:r.contentHeight!=null?i=r.contentHeight:o=Math.max(r.aspectRatio,.5);let l=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.nowManager,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),a=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return S(xt.Provider,{value:l},S(Zn,{unit:"day"},d=>{let u=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,d,t.viewTitle);return S(ee,null,n.header&&S(so,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:a},u)),S(Im,{liquid:s,height:i,aspectRatio:o,labeledById:a},this.renderView(t),this.buildAppendContent()),n.footer&&S(so,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},u)))}))}componentDidMount(){let{props:t}=this;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(r=>new r(t)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=t.pluginHooks;for(let r in n)n[r](t[r],t)}componentDidUpdate(t){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let s in r)n[s]!==t[s]&&r[s](n[s],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let t of this.calendarInteractions)t.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:t}=this,n=t.pluginHooks.viewContainerAppends.map(r=>r(t));return S(ee,{},...n)}renderView(t){let{pluginHooks:n}=t,{viewSpec:r}=t,s={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},i=this.buildViewPropTransformers(n.viewPropsTransformers);for(let l of i)Object.assign(s,l.transform(s,t));let o=r.component;return S(o,Object.assign({},s))}}function Fm(e,t,n,r,s,i){let o=n.build(s,void 0,!1),l=n.buildPrev(t,r,!1),a=n.buildNext(t,r,!1);return{title:i,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:o.isValid&&!et(t.currentRange,s),isPrevEnabled:l.isValid,isNextEnabled:a.isValid}}function Om(e){return e.map(t=>new t)}class Hm extends gh{constructor(t,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Pn(()=>{Zt(S(dh,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(s,i,o,l)=>(this.setClassNames(s),this.setHeight(i),S(yl.Provider,{value:this.customContentRenderId},S(Pm,Object.assign({isHeightAuto:o,forPrint:l},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Zt(null,this.el),this.setClassNames([]),this.setHeight(""))},qu(t),this.el=t,this.renderRunner=new hs(this.handleRenderRequest),new Sm({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Pn(()=>{super.updateSize()})}batchRendering(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(t,n){this.currentDataManager.resetOptions(t,n)}setClassNames(t){if(!tt(t,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of t)n.add(r);this.currentClassNames=t}}setHeight(t){al(this.el,"height",t)}}const Lm=parseInt(String(Ne.version).split(".")[0]),Bm=Lm<18;class aa extends y.Component{constructor(){super(...arguments),this.elRef=y.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const t=[];for(const n of this.state.customRenderingMap.values())t.push(Ne.createElement(Vm,{key:n.id,customRendering:n}));return Ne.createElement("div",{ref:this.elRef},t)}componentDidMount(){this.isUnmounting=!1;const t=new Sp;this.handleCustomRendering=t.handle.bind(t),this.calendar=new Hm(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Pe.flushSync(()=>{})});let n;t.subscribe(r=>{const s=Date.now(),i=!n;(Bm||i||this.isUpdating||this.isUnmounting||s-n<100?ca:Pe.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=s,i?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}aa.act=ca;class Vm extends y.PureComponent{render(){const{customRendering:t}=this.props,{generatorMeta:n}=t,r=typeof n=="function"?n(t.renderProps):n;return Pe.createPortal(r,t.containerEl)}}function ca(e){e()}let $m=class extends St{constructor(){super(...arguments),this.headerElRef=qe()}renderSimpleLayout(t,n){let{props:r,context:s}=this,i=[],o=Yi(s.options);return t&&i.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),S(Hi,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},S(Yl,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:i}))}renderHScrollLayout(t,n,r,s){let i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");let{props:o,context:l}=this,a=!o.forPrint&&Yi(l.options),d=!o.forPrint&&rp(l.options),u=[];return t&&u.push({type:"header",key:"header",isSticky:a,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),d&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:np}]}),S(Hi,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},S(i,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:r,minWidth:s}]}],sections:u}))}};function pn(e,t){let n=[];for(let r=0;r<t;r+=1)n[r]=[];for(let r of e)n[r.row].push(r);return n}function mn(e,t){let n=[];for(let r=0;r<t;r+=1)n[r]=[];for(let r of e)n[r.firstCol].push(r);return n}function io(e,t){let n=[];if(e){for(let r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let r of e.segs)n[r.row].segs.push(r)}else for(let r=0;r<t;r+=1)n[r]=null;return n}const da=ie({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function ua(e){let{display:t}=e.eventRange.ui;return t==="list-item"||t==="auto"&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class fa extends K{render(){let{props:t}=this;return S(Zl,Object.assign({},t,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:da,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))}}class ga extends K{render(){let{props:t,context:n}=this,{options:r}=n,{seg:s}=t,i=r.eventTimeFormat||da,o=Ml(s,i,n,!0,t.defaultDisplayEventEnd);return S(Fs,Object.assign({},t,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:jl(t.seg,n),defaultGenerator:zm,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function zm(e){return S(ee,null,S("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&S("div",{className:"fc-event-time"},e.timeText),S("div",{className:"fc-event-title"},e.event.title||S(ee,null,"Â ")))}class Um extends K{constructor(){super(...arguments),this.compileSegs=W(Gm)}render(){let{props:t}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(t.singlePlacements);return S(pp,{elClasses:["fc-daygrid-more-link"],dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:()=>{let s=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return S(ee,null,n.map(i=>{let o=i.eventRange.instance.instanceId;return S("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:s[o]?"hidden":""}},ua(i)?S(ga,Object.assign({seg:i,isDragging:!1,isSelected:o===t.eventSelection,defaultDisplayEventEnd:!1},Ut(i,t.todayRange))):S(fa,Object.assign({seg:i,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===t.eventSelection,defaultDisplayEventEnd:!1},Ut(i,t.todayRange))))}))}})}}function Gm(e){let t=[],n=[];for(let r of e)t.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:t,invisibleSegs:n}}const Wm=ie({week:"narrow"});class qm extends St{constructor(){super(...arguments),this.rootElRef=qe(),this.state={dayNumberId:Gn()},this.handleRootEl=t=>{$e(this.rootElRef,t),$e(this.props.elRef,t)}}render(){let{context:t,props:n,state:r,rootElRef:s}=this,{options:i,dateEnv:o}=t,{date:l,dateProfile:a}=n;const d=n.showDayNumber&&Ym(l,a.currentRange,o);return S(Xl,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Qm,date:l,dateProfile:a,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:d,extraRenderProps:n.extraRenderProps},(u,h)=>S("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&S(up,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Gr(t,l,"week"),date:l,defaultFormat:Wm}),!h.isDisabled&&(n.showDayNumber||Jl(i)||n.forceDayTop)?S("div",{className:"fc-daygrid-day-top"},S(u,{elTag:"a",elClasses:["fc-daygrid-day-number",d&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Gr(t,l)),{id:r.dayNumberId})})):n.showDayNumber?S("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},S("a",{className:"fc-daygrid-day-number"},"Â ")):void 0,S("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,S("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},S(Um,{allDayDate:l,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:s,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),S("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function Qm(e){return e.dayNumberText||S(ee,null,"Â ")}function Ym(e,t,n){const{start:r,end:s}=t,i=nt(s,-1),o=n.getYear(r),l=n.getMonth(r),a=n.getYear(i),d=n.getMonth(i);return!(o===a&&l===d)&&(e.valueOf()===r.valueOf()||n.getDay(e)===1&&e.valueOf()<s.valueOf())}function ha(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function pa(e){return ha(e)+":"+e.lastCol}function Zm(e,t,n,r,s,i,o){let l=new Km(b=>{let E=e[b.index].eventRange.instance.instanceId+":"+b.span.start+":"+(b.span.end-1);return s[E]||1});l.allowReslicing=!0,l.strictOrder=r,t===!0||n===!0?(l.maxCoord=i,l.hiddenConsumes=!0):typeof t=="number"?l.maxStackCnt=t:typeof n=="number"&&(l.maxStackCnt=n,l.hiddenConsumes=!0);let a=[],d=[];for(let b=0;b<e.length;b+=1){let E=e[b],x=pa(E);s[x]!=null?a.push({index:b,span:{start:E.firstCol,end:E.lastCol+1}}):d.push(E)}let u=l.addSegs(a),h=l.toRects(),{singleColPlacements:g,multiColPlacements:f,leftoverMargins:p}=Xm(h,e,o),m=[],v=[];for(let b of d){f[b.firstCol].push({seg:b,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let E=b.firstCol;E<=b.lastCol;E+=1)g[E].push({seg:Rt(b,E,E+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)m.push(0);for(let b of u){let E=e[b.index],x=b.span;f[x.start].push({seg:Rt(E,x.start,x.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let D=x.start;D<x.end;D+=1)m[D]+=1,g[D].push({seg:Rt(E,D,D+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)v.push(p[b]);return{singleColPlacements:g,multiColPlacements:f,moreCnts:m,moreMarginTops:v}}function Xm(e,t,n){let r=Jm(e,n.length),s=[],i=[],o=[];for(let l=0;l<n.length;l+=1){let a=r[l],d=[],u=0,h=0;for(let f of a){let p=t[f.index];d.push({seg:Rt(p,l,l+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:f.levelCoord-u}),u=f.levelCoord+f.thickness}let g=[];u=0,h=0;for(let f of a){let p=t[f.index],m=f.span.end-f.span.start>1,v=f.span.start===l;h+=f.levelCoord-u,u=f.levelCoord+f.thickness,m?(h+=f.thickness,v&&g.push({seg:Rt(p,f.span.start,f.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:f.levelCoord,marginTop:0})):v&&(g.push({seg:Rt(p,f.span.start,f.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:h}),h=0)}s.push(d),i.push(g),o.push(h)}return{singleColPlacements:s,multiColPlacements:i,leftoverMargins:o}}function Jm(e,t){let n=[];for(let r=0;r<t;r+=1)n.push([]);for(let r of e)for(let s=r.span.start;s<r.span.end;s+=1)n[s].push(r);return n}function Rt(e,t,n,r){if(e.firstCol===t&&e.lastCol===n-1)return e;let s=e.eventRange,i=s.range,o=kt(i,{start:r[t].date,end:oe(r[n-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:n-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:o},isStart:e.isStart&&o.start.valueOf()===i.start.valueOf(),isEnd:e.isEnd&&o.end.valueOf()===i.end.valueOf()})}class Km extends Th{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(t){const n=super.addSegs(t),{entriesByLevel:r}=this,s=i=>!this.forceHidden[Gt(i)];for(let i=0;i<r.length;i+=1)r[i]=r[i].filter(s);return n}handleInvalidInsertion(t,n,r){const{entriesByLevel:s,forceHidden:i}=this,{touchingEntry:o,touchingLevel:l,touchingLateral:a}=t;if(this.hiddenConsumes&&o){const d=Gt(o);if(!i[d])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:$l(o.span,n.span)}),h=Gt(u);i[h]=!0,s[l][a]=u,r.push(u),this.splitEntry(o,n,r)}else i[d]=!0,r.push(o)}super.handleInvalidInsertion(t,n,r)}}class ma extends St{constructor(){super(...arguments),this.cellElRefs=new ut,this.frameElRefs=new ut,this.fgElRefs=new ut,this.segHarnessRefs=new ut,this.rootElRef=qe(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=t=>{t&&this.updateSizing(!0)}}render(){let{props:t,state:n,context:r}=this,{options:s}=r,i=t.cells.length,o=mn(t.businessHourSegs,i),l=mn(t.bgEventSegs,i),a=mn(this.getHighlightSegs(),i),d=mn(this.getMirrorSegs(),i),{singleColPlacements:u,multiColPlacements:h,moreCnts:g,moreMarginTops:f}=Zm(qg(t.fgEventSegs,s.eventOrder),t.dayMaxEvents,t.dayMaxEventRows,s.eventOrderStrict,n.segHeights,n.maxContentHeight,t.cells),p=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{};return S("tr",{ref:this.rootElRef,role:"row"},t.renderIntro&&t.renderIntro(),t.cells.map((m,v)=>{let b=this.renderFgSegs(v,t.forPrint?u[v]:h[v],t.todayRange,p),E=this.renderFgSegs(v,ev(d[v],h),t.todayRange,{},!!t.eventDrag,!!t.eventResize,!1);return S(qm,{key:m.key,elRef:this.cellElRefs.createRef(m.key),innerElRef:this.frameElRefs.createRef(m.key),dateProfile:t.dateProfile,date:m.date,showDayNumber:t.showDayNumbers,showWeekNumber:t.showWeekNumbers&&v===0,forceDayTop:t.showWeekNumbers,todayRange:t.todayRange,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,moreCnt:g[v],moreMarginTop:f[v],singlePlacements:u[v],fgContentElRef:this.fgElRefs.createRef(m.key),fgContent:S(ee,null,S(ee,null,b),S(ee,null,E)),bgContent:S(ee,null,this.renderFillSegs(a[v],"highlight"),this.renderFillSegs(o[v],"non-business"),this.renderFillSegs(l[v],"bg-event")),minHeight:t.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(t,n){let r=this.props;this.updateSizing(!Le(t,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:t}=this;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs}getMirrorSegs(){let{props:t}=this;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]}renderFgSegs(t,n,r,s,i,o,l){let{context:a}=this,{eventSelection:d}=this.props,{framePositions:u}=this.state,h=this.props.cells.length===1,g=i||o||l,f=[];if(u)for(let p of n){let{seg:m}=p,{instanceId:v}=m.eventRange.instance,b=p.isVisible&&!s[v],E=p.isAbsolute,x="",D="";E&&(a.isRtl?(D=0,x=u.lefts[m.lastCol]-u.lefts[m.firstCol]):(x=0,D=u.rights[m.firstCol]-u.rights[m.lastCol])),f.push(S("div",{className:"fc-daygrid-event-harness"+(E?" fc-daygrid-event-harness-abs":""),key:ha(m),ref:g?null:this.segHarnessRefs.createRef(pa(m)),style:{visibility:b?"":"hidden",marginTop:E?"":p.marginTop,top:E?p.absoluteTop:"",left:x,right:D}},ua(m)?S(ga,Object.assign({seg:m,isDragging:i,isSelected:v===d,defaultDisplayEventEnd:h},Ut(m,r))):S(fa,Object.assign({seg:m,isDragging:i,isResizing:o,isDateSelecting:l,isSelected:v===d,defaultDisplayEventEnd:h},Ut(m,r)))))}return f}renderFillSegs(t,n){let{isRtl:r}=this.context,{todayRange:s}=this.props,{framePositions:i}=this.state,o=[];if(i)for(let l of t){let a=r?{right:0,left:i.lefts[l.lastCol]-i.lefts[l.firstCol]}:{left:0,right:i.rights[l.firstCol]-i.rights[l.lastCol]};o.push(S("div",{key:Kg(l.eventRange),className:"fc-daygrid-bg-harness",style:a},n==="bg-event"?S(ap,Object.assign({seg:l},Ut(l,s))):dp(n)))}return S(ee,{},...o)}updateSizing(t){let{props:n,state:r,frameElRefs:s}=this;if(!n.forPrint&&n.clientWidth!==null){if(t){let a=n.cells.map(d=>s.currentMap[d.key]);if(a.length){let d=this.rootElRef.current,u=new Ln(d,a,!0,!1);(!r.framePositions||!r.framePositions.similarTo(u))&&this.setState({framePositions:new Ln(d,a,!0,!1)})}}const i=this.state.segHeights,o=this.querySegHeights(),l=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},i),o),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let t=this.segHarnessRefs.currentMap,n={};for(let r in t){let s=Math.round(t[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,s)}return n}computeMaxContentHeight(){let t=this.props.cells[0].key,n=this.cellElRefs.currentMap[t],r=this.fgElRefs.currentMap[t];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let t=this.cellElRefs.currentMap;return this.props.cells.map(n=>t[n.key])}}ma.addStateEquality({segHeights:Le});function ev(e,t){if(!e.length)return[];let n=tv(t);return e.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function tv(e){let t={};for(let n of e)for(let r of n)t[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return t}class nv extends St{constructor(){super(...arguments),this.splitBusinessHourSegs=W(pn),this.splitBgEventSegs=W(pn),this.splitFgEventSegs=W(pn),this.splitDateSelectionSegs=W(pn),this.splitEventDrag=W(io),this.splitEventResize=W(io),this.rowRefs=new ut}render(){let{props:t,context:n}=this,r=t.cells.length,s=this.splitBusinessHourSegs(t.businessHourSegs,r),i=this.splitBgEventSegs(t.bgEventSegs,r),o=this.splitFgEventSegs(t.fgEventSegs,r),l=this.splitDateSelectionSegs(t.dateSelectionSegs,r),a=this.splitEventDrag(t.eventDrag,r),d=this.splitEventResize(t.eventResize,r),u=r>=7&&t.clientWidth?t.clientWidth/n.options.aspectRatio/6:null;return S(Zn,{unit:"day"},(h,g)=>S(ee,null,t.cells.map((f,p)=>S(ma,{ref:this.rowRefs.createRef(p),key:f.length?f[0].date.toISOString():p,showDayNumbers:r>1,showWeekNumbers:t.showWeekNumbers,todayRange:g,dateProfile:t.dateProfile,cells:f,renderIntro:t.renderRowIntro,businessHourSegs:s[p],eventSelection:t.eventSelection,bgEventSegs:i[p].filter(rv),fgEventSegs:o[p],dateSelectionSegs:l[p],eventDrag:a[p],eventResize:d[p],dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,clientWidth:t.clientWidth,clientHeight:t.clientHeight,cellMinHeight:u,forPrint:t.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const t=this.rowRefs.currentMap[0].getCellEls()[0],n=t?t.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Ln(this.rootEl,this.rowRefs.collect().map(t=>t.getCellEls()[0]),!1,!0),this.colPositions=new Ln(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(t,n){let{colPositions:r,rowPositions:s}=this,i=r.leftToIndex(t),o=s.topToIndex(n);if(o!=null&&i!=null){let l=this.props.cells[o][i];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,i),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(o,i),rect:{left:r.lefts[i],right:r.rights[i],top:s.tops[o],bottom:s.bottoms[o]},layer:0}}return null}getCellEl(t,n){return this.rowRefs.currentMap[t].getCellEls()[n]}getCellRange(t,n){let r=this.props.cells[t][n].date,s=oe(r,1);return{start:r,end:s}}}function rv(e){return e.eventRange.def.allDay}class sv extends St{constructor(){super(...arguments),this.elRef=qe(),this.needsScrollReset=!1}render(){let{props:t}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:s}=t,i=r===!0||n===!0;i&&!s&&(i=!1,n=null,r=null);let o=["fc-daygrid-body",i?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return S("div",{ref:this.elRef,className:o.join(" "),style:{width:t.clientWidth,minWidth:t.tableMinWidth}},S("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:t.clientWidth,minWidth:t.tableMinWidth,height:s?t.clientHeight:""}},t.colGroupNode,S("tbody",{role:"presentation"},S(nv,{dateProfile:t.dateProfile,cells:t.cells,renderRowIntro:t.renderRowIntro,showWeekNumbers:t.showWeekNumbers,clientWidth:t.clientWidth,clientHeight:t.clientHeight,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:t.forPrint,isHitComboAllowed:t.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(t){t.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const t=iv(this.elRef.current,this.props.dateProfile);if(t){const n=t.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),s=t.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}function iv(e,t){let n;return t.currentRangeUnit.match(/year|month/)&&(n=e.querySelector(`[data-date="${jf(t.currentDate)}-01"]`)),n||(n=e.querySelector(`[data-date="${ys(t.currentDate)}"]`)),n}class ov extends Lh{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(t,n){return n.sliceRange(t)}}class lv extends St{constructor(){super(...arguments),this.slicer=new ov,this.tableRef=qe()}render(){let{props:t,context:n}=this;return S(sv,Object.assign({ref:this.tableRef},this.slicer.sliceProps(t,t.dateProfile,t.nextDayThreshold,n,t.dayTableModel),{dateProfile:t.dateProfile,cells:t.dayTableModel.cells,colGroupNode:t.colGroupNode,tableMinWidth:t.tableMinWidth,renderRowIntro:t.renderRowIntro,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.showWeekNumbers,expandRows:t.expandRows,headerAlignElRef:t.headerAlignElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:t.forPrint}))}}class av extends $m{constructor(){super(...arguments),this.buildDayTableModel=W(cv),this.headerRef=qe(),this.tableRef=qe()}render(){let{options:t,dateProfileGenerator:n}=this.context,{props:r}=this,s=this.buildDayTableModel(r.dateProfile,n),i=t.dayHeaders&&S(Ph,{ref:this.headerRef,dateProfile:r.dateProfile,dates:s.headerDates,datesRepDistinctDays:s.rowCnt===1}),o=l=>S(lv,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:s,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:t.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:r.forPrint});return t.dayMinWidth?this.renderHScrollLayout(i,o,s.colCnt,t.dayMinWidth):this.renderSimpleLayout(i,o)}}function cv(e,t){let n=new Oh(e.renderRange,t);return new Hh(n,/year|month|week/.test(e.currentRangeUnit))}class dv extends Sl{buildRenderRange(t,n,r){let s=super.buildRenderRange(t,n,r),{props:i}=this;return uv({currentRange:s,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:i.fixedWeekCount,dateEnv:i.dateEnv})}}function uv(e){let{dateEnv:t,currentRange:n}=e,{start:r,end:s}=n,i;if(e.snapToWeek&&(r=t.startOfWeek(r),i=t.startOfWeek(s),i.valueOf()!==s.valueOf()&&(s=ki(i,1))),e.fixedWeekCount){let o=t.startOfWeek(t.startOfMonth(oe(n.end,-1))),l=Math.ceil(Sf(o,s));s=ki(s,6-l)}return{start:r,end:s}}var fv=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';il(fv);var gv=st({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:av,dateProfileGeneratorClass:dv},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});Ps.touchMouseIgnoreWait=500;let qr=0,Bn=0,Qr=!1;class va{constructor(t){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&hv(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let s=n.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,pv()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:s,deltaX:r-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=t,this.emitter=new Yn,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),mv()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),vv()}tryStart(t){let n=this.querySubjectEl(t),r=t.target;return n&&(!this.handleSelector||ve(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Qr=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(t){return this.selector?ve(t.target,this.selector):this.containerEl}shouldIgnoreMouse(){return qr||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Qr=!0)}initScrollWatch(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(t,n){let r=0,s=0;return n?(this.origPageX=t.pageX,this.origPageY=t.pageY):(r=t.pageX-this.origPageX,s=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:r,deltaY:s}}createEventFromTouch(t,n){let r=t.touches,s,i,o=0,l=0;return r&&r.length?(s=r[0].pageX,i=r[0].pageY):(s=t.pageX,i=t.pageY),n?(this.origPageX=s,this.origPageY=i):(o=s-this.origPageX,l=i-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:i,deltaX:o,deltaY:l}}}function hv(e){return e.button===0&&!e.ctrlKey}function pv(){qr+=1,setTimeout(()=>{qr-=1},Ps.touchMouseIgnoreWait)}function mv(){Bn+=1,Bn===1&&window.addEventListener("touchmove",ya,{passive:!1})}function vv(){Bn-=1,Bn||window.removeEventListener("touchmove",ya,{passive:!1})}function ya(e){Qr&&e.preventDefault()}class yv{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(t,n,r){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(t,n){this.deltaX=t-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)}stop(t,n){let r=()=>{this.cleanup(),n()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(t,n){let r=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",Vt(r,{left:s.left,top:s.top}),rf(r,()=>{r.style.transition="",t()})}cleanup(){this.mirrorEl&&(ps(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Vt(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let t=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),Vt(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class ba extends js{constructor(t,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=t,this.doesListening=n,this.scrollTop=this.origScrollTop=t.getScrollTop(),this.scrollLeft=this.origScrollLeft=t.getScrollLeft(),this.scrollWidth=t.getScrollWidth(),this.scrollHeight=t.getScrollHeight(),this.clientWidth=t.getClientWidth(),this.clientHeight=t.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class xa extends ba{constructor(t,n){super(new Rh(t),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return _h(this.scrollController.el)}}class bv extends ba{constructor(t){super(new Dh,t)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const oo=typeof performance=="function"?performance.now:Date.now;class xv{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let t=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(t){let n=oo();this.handleSide(t,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(t,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,n))}handleMove(t,n){if(this.isEnabled){let r=t-window.scrollX,s=n-window.scrollY,i=this.pointerScreenY===null?0:s-this.pointerScreenY,o=this.pointerScreenX===null?0:r-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(oo()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let t of this.scrollCaches)t.destroy();this.scrollCaches=null}}requestAnimation(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)}handleSide(t,n){let{scrollCache:r}=t,{edgeThreshold:s}=this,i=s-t.distance,o=i*i/(s*s)*this.maxVelocity*n,l=1;switch(t.name){case"left":l=-1;case"right":r.setScrollLeft(r.getScrollLeft()+o*l);break;case"top":l=-1;case"bottom":r.setScrollTop(r.getScrollTop()+o*l);break}}computeBestEdge(t,n){let{edgeThreshold:r}=this,s=null,i=this.scrollCaches||[];for(let o of i){let l=o.clientRect,a=t-l.left,d=l.right-t,u=n-l.top,h=l.bottom-n;a>=0&&d>=0&&u>=0&&h>=0&&(u<=r&&this.everMovedUp&&o.canScrollUp()&&(!s||s.distance>u)&&(s={scrollCache:o,name:"top",distance:u}),h<=r&&this.everMovedDown&&o.canScrollDown()&&(!s||s.distance>h)&&(s={scrollCache:o,name:"bottom",distance:h}),a<=r&&this.everMovedLeft&&o.canScrollLeft()&&(!s||s.distance>a)&&(s={scrollCache:o,name:"left",distance:a}),d<=r&&this.everMovedRight&&o.canScrollRight()&&(!s||s.distance>d)&&(s={scrollCache:o,name:"right",distance:d}))}return s}buildCaches(t){return this.queryScrollEls(t).map(n=>n===window?new bv(!1):new xa(n,!1))}queryScrollEls(t){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(t.getRootNode().querySelectorAll(r)));return n}}class en extends kh{constructor(t,n){super(t),this.containerEl=t,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,sf(document.body),lf(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let i=this.minDistance,o,{deltaX:l,deltaY:a}=s;o=l*l+a*a,o>=i*i&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,of(document.body),af(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new va(t);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new yv,this.autoScroller=new xv}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(t){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)}handleDelayEnd(t){this.isDelayEnded=!0,this.tryStartDrag(t)}handleDistanceSurpassed(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)}tryStartDrag(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))}stopDrag(t){this.isDragging=!1,this.emitter.trigger("dragend",t)}setIgnoreMove(t){this.pointer.shouldIgnoreMove=t}setMirrorIsVisible(t){this.mirror.setIsVisible(t)}setMirrorNeedsRevert(t){this.mirrorNeedsRevert=t}setAutoScrollEnabled(t){this.autoScroller.isEnabled=t}}class wv{constructor(t){this.el=t,this.origRect=Ms(t),this.scrollCaches=Vl(t).map(n=>new xa(n,!0))}destroy(){for(let t of this.scrollCaches)t.destroy()}computeLeft(){let t=this.origRect.left;for(let n of this.scrollCaches)t+=n.origScrollLeft-n.getScrollLeft();return t}computeTop(){let t=this.origRect.top;for(let n of this.scrollCaches)t+=n.origScrollTop-n.getScrollTop();return t}isWithinClipping(t,n){let r={left:t,top:n};for(let s of this.scrollCaches)if(!Sv(s.getEventTarget())&&!hh(r,s.clientRect))return!1;return!0}}function Sv(e){let t=e.tagName;return t==="HTML"||t==="BODY"}class Xn{constructor(t,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):s.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new Yn}processFirstCoord(t){let n={left:t.pageX,top:t.pageY},r=n,s=t.subjectEl,i;s instanceof HTMLElement&&(i=Ms(s),r=ph(r,i));let o=this.initialHit=this.queryHitForOffset(r.left,r.top);if(o){if(this.useSubjectCenter&&i){let l=Hl(i,o.rect);l&&(r=mh(l))}this.coordAdjust=vh(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(t,n){let r=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(n||!Jn(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,t))}prepareHits(){this.offsetTrackers=bt(this.droppableStore,t=>(t.component.prepareHits(),new wv(t.el)))}releaseHits(){let{offsetTrackers:t}=this;for(let n in t)t[n].destroy();this.offsetTrackers={}}queryHitForOffset(t,n){let{droppableStore:r,offsetTrackers:s}=this,i=null;for(let o in r){let l=r[o].component,a=s[o];if(a&&a.isWithinClipping(t,n)){let d=a.computeLeft(),u=a.computeTop(),h=t-d,g=n-u,{origRect:f}=a,p=f.right-f.left,m=f.bottom-f.top;if(h>=0&&h<p&&g>=0&&g<m){let v=l.queryHit(h,g,p,m);v&&qn(v.dateProfile.activeRange,v.dateSpan.range)&&(this.disablePointCheck||a.el.contains(a.el.getRootNode().elementFromPoint(h+d-window.scrollX,g+u-window.scrollY)))&&(!i||v.layer>i.layer)&&(v.componentId=o,v.context=l.context,v.rect.left+=d,v.rect.right+=d,v.rect.top+=u,v.rect.bottom+=u,i=v)}}}return i}}function Jn(e,t){return!e&&!t?!0:!!e!=!!t?!1:rh(e.dateSpan,t.dateSpan)}function wa(e,t){let n={};for(let r of t.pluginHooks.datePointTransforms)Object.assign(n,r(e,t));return Object.assign(n,Cv(e,t.dateEnv)),n}function Cv(e,t){return{date:t.toDate(e.range.start),dateStr:t.formatIso(e.range.start,{omitTime:e.allDay}),allDay:e.allDay}}class Ev extends jt{constructor(t){super(t),this.handlePointerDown=r=>{let{dragging:s}=this,i=r.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(i))},this.handleDragEnd=r=>{let{component:s}=this,{pointer:i}=this.dragging;if(!i.wasTouchScroll){let{initialHit:o,finalHit:l}=this.hitDragging;if(o&&l&&Jn(o,l)){let{context:a}=s,d=Object.assign(Object.assign({},wa(o.dateSpan,a)),{dayEl:o.dayEl,jsEvent:r.origEvent,view:a.viewApi||a.calendarApi.view});a.emitter.trigger("dateClick",d)}}},this.dragging=new en(t.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new Xn(this.dragging,Ns(t));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class _v extends jt{constructor(t){super(t),this.dragSelection=null,this.handlePointerDown=o=>{let{component:l,dragging:a}=this,{options:d}=l.context,u=d.selectable&&l.isValidDateDownEl(o.origEvent.target);a.setIgnoreMove(!u),a.delay=o.isTouch?Av(l):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,l)=>{let{context:a}=this.component,d=null,u=!1;if(o){let h=this.hitDragging.initialHit;o.componentId===h.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(h,o)||(d=Rv(h,o,a.pluginHooks.dateSelectionTransformers)),(!d||!Bh(d,o.dateProfile,a))&&(u=!0,d=null)}d?a.dispatch({type:"SELECT_DATES",selection:d}):l||a.dispatch({type:"UNSELECT_DATES"}),u?ms():vs(),l||(this.dragSelection=d)},this.handlePointerUp=o=>{this.dragSelection&&(kl(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:n}=t,{options:r}=n.context,s=this.dragging=new en(t.el);s.touchScrollAllowed=!1,s.minDistance=r.selectMinDistance||0,s.autoScroller.isEnabled=r.dragScroll;let i=this.hitDragging=new Xn(this.dragging,Ns(t));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function Av(e){let{options:t}=e.context,n=t.selectLongPressDelay;return n==null&&(n=t.longPressDelay),n}function Rv(e,t,n){let r=e.dateSpan,s=t.dateSpan,i=[r.range.start,r.range.end,s.range.start,s.range.end];i.sort(gf);let o={};for(let l of n){let a=l(e,t);if(a===!1)return null;a&&Object.assign(o,a)}return o.range={start:i[0],end:i[3]},o.allDay=r.allDay,o}class tn extends jt{constructor(t){super(t),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let l=o.origEvent.target,{component:a,dragging:d}=this,{mirror:u}=d,{options:h}=a.context,g=a.context;this.subjectEl=o.subjectEl;let f=this.subjectSeg=Nt(o.subjectEl),m=(this.eventRange=f.eventRange).instance.instanceId;this.relevantEvents=Rs(g.getCurrentData().eventStore,m),d.minDistance=o.isTouch?0:h.eventDragMinDistance,d.delay=o.isTouch&&m!==a.props.eventSelection?Tv(a):null,h.fixedMirrorParent?u.parentNode=h.fixedMirrorParent:u.parentNode=ve(l,".fc"),u.revertDuration=h.dragRevertDuration;let v=a.isValidSegDownEl(l)&&!ve(l,".fc-event-resizer");d.setIgnoreMove(!v),this.isDragging=v&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let l=this.component.context,a=this.eventRange,d=a.instance.instanceId;o.isTouch?d!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:d}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(o),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Z(l,a.def,a.instance),jsEvent:o.origEvent,view:l.viewApi}))},this.handleHitUpdate=(o,l)=>{if(!this.isDragging)return;let a=this.relevantEvents,d=this.hitDragging.initialHit,u=this.component.context,h=null,g=null,f=null,p=!1,m={affectedEvents:a,mutatedEvents:Oe(),isEvent:!0};if(o){h=o.context;let v=h.options;u===h||v.editable&&v.droppable?(g=Dv(d,o,this.eventRange.instance.range.start,h.getCurrentData().pluginHooks.eventDragMutationMassagers),g&&(f=ks(a,h.getCurrentData().eventUiBases,g,h),m.mutatedEvents=f,Gl(m,o.dateProfile,h)||(p=!0,g=null,f=null,m.mutatedEvents=Oe()))):h=null}this.displayDrag(h,m),p?ms():vs(),l||(u===h&&Jn(d,o)&&(g=null),this.dragging.setMirrorNeedsRevert(!g),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=h,this.validMutation=g,this.mutatedRelevantEvents=f)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let l=this.component.context,a=l.viewApi,{receivingContext:d,validMutation:u}=this,h=this.eventRange.def,g=this.eventRange.instance,f=new Z(l,h,g),p=this.relevantEvents,m=this.mutatedRelevantEvents,{finalHit:v}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:f,jsEvent:o.origEvent,view:a}),u){if(d===l){let b=new Z(l,m.defs[h.defId],g?m.instances[g.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:m});let E={oldEvent:f,event:b,relatedEvents:ft(m,l,g),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:p})}},x={};for(let D of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(x,D(u,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},E),x),{el:o.subjectEl,delta:u.datesDelta,jsEvent:o.origEvent,view:a})),l.emitter.trigger("eventChange",E)}else if(d){let b={event:f,relatedEvents:ft(p,l,g),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:p})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},b),{draggedEl:o.subjectEl,view:a})),l.dispatch({type:"REMOVE_EVENTS",eventStore:p}),l.emitter.trigger("eventRemove",b);let E=m.defs[h.defId],x=m.instances[g.instanceId],D=new Z(d,E,x);d.dispatch({type:"MERGE_EVENTS",eventStore:m});let A={event:D,relatedEvents:ft(m,d,x),revert(){d.dispatch({type:"REMOVE_EVENTS",eventStore:m})}};d.emitter.trigger("eventAdd",A),o.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:g.instanceId}),d.emitter.trigger("drop",Object.assign(Object.assign({},wa(v.dateSpan,d)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:v.context.viewApi})),d.emitter.trigger("eventReceive",Object.assign(Object.assign({},A),{draggedEl:o.subjectEl,view:v.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,s=this.dragging=new en(t.el);s.pointer.selector=tn.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=r.dragScroll;let i=this.hitDragging=new Xn(this.dragging,Ur);i.useSubjectCenter=t.useEventCenter,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(t,n){let r=this.component.context,s=this.receivingContext;s&&s!==t&&(s===r?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:Oe(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let t=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),t!==n&&t.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}tn.SELECTOR=".fc-event-draggable, .fc-event-resizable";function Dv(e,t,n,r){let s=e.dateSpan,i=t.dateSpan,o=s.range.start,l=i.range.start,a={};s.allDay!==i.allDay&&(a.allDay=i.allDay,a.hasEnd=t.context.options.allDayMaintainDuration,i.allDay?o=Y(n):o=n);let d=Et(o,l,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);d.milliseconds&&(a.allDay=!1);let u={datesDelta:d,standardProps:a};for(let h of r)h(u,e,t);return u}function Tv(e){let{options:t}=e.context,n=t.eventLongPressDelay;return n==null&&(n=t.longPressDelay),n}class kv extends jt{constructor(t){super(t),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=i=>{let{component:o}=this,l=this.querySegEl(i),a=Nt(l),d=this.eventRange=a.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(i.origEvent.target)||i.isTouch&&this.component.props.eventSelection!==d.instance.instanceId)},this.handleDragStart=i=>{let{context:o}=this.component,l=this.eventRange;this.relevantEvents=Rs(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let a=this.querySegEl(i);this.draggingSegEl=a,this.draggingSeg=Nt(a),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:a,event:new Z(o,l.def,l.instance),jsEvent:i.origEvent,view:o.viewApi})},this.handleHitUpdate=(i,o,l)=>{let{context:a}=this.component,d=this.relevantEvents,u=this.hitDragging.initialHit,h=this.eventRange.instance,g=null,f=null,p=!1,m={affectedEvents:d,mutatedEvents:Oe(),isEvent:!0};i&&(i.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,i)||(g=Nv(u,i,l.subjectEl.classList.contains("fc-event-resizer-start"),h.range))),g&&(f=ks(d,a.getCurrentData().eventUiBases,g,a),m.mutatedEvents=f,Gl(m,i.dateProfile,a)||(p=!0,g=null,f=null,m.mutatedEvents=null)),f?a.dispatch({type:"SET_EVENT_RESIZE",state:m}):a.dispatch({type:"UNSET_EVENT_RESIZE"}),p?ms():vs(),o||(g&&Jn(u,i)&&(g=null),this.validMutation=g,this.mutatedRelevantEvents=f)},this.handleDragEnd=i=>{let{context:o}=this.component,l=this.eventRange.def,a=this.eventRange.instance,d=new Z(o,l,a),u=this.relevantEvents,h=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:d,jsEvent:i.origEvent,view:o.viewApi}),this.validMutation){let g=new Z(o,h.defs[l.defId],a?h.instances[a.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:h});let f={oldEvent:d,event:g,relatedEvents:ft(h,o,a),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:u})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},f),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||q(0),endDelta:this.validMutation.endDelta||q(0),jsEvent:i.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",f)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=t,r=this.dragging=new en(t.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let s=this.hitDragging=new Xn(this.dragging,Ns(t));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(t){return ve(t.subjectEl,".fc-event")}}function Nv(e,t,n,r){let s=e.context.dateEnv,i=e.dateSpan.range.start,o=t.dateSpan.range.start,l=Et(i,o,s,e.largeUnit);if(n){if(s.add(r.start,l)<r.end)return{startDelta:l}}else if(s.add(r.end,l)>r.start)return{endDelta:l};return null}class Iv{constructor(t){this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let s=this.context.options.unselectCancel,i=cl(r.origEvent);this.matchesCancel=!!ve(i,s),this.matchesEvent=!!ve(i,tn.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:s}=this,{documentPointer:i}=this,o=s.getCurrentData();if(!i.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let l=s.options.unselectAuto;l&&(!l||!this.matchesCancel)&&s.calendarApi.unselect(r)}o.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new va(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const Mv={fixedMirrorParent:w},jv={dateClick:w,eventDragStart:w,eventDragStop:w,eventDrop:w,eventResizeStart:w,eventResizeStop:w,eventResize:w,drop:w,eventReceive:w,eventLeave:w};Ps.dataAttrPrefix="";var Pv=st({name:"@fullcalendar/interaction",componentInteractions:[Ev,_v,tn,kv],calendarInteractions:[Iv],elementDraggingImpl:en,optionRefiners:Mv,listenerRefiners:jv});function Fv({tasks:e}){const[t,n]=y.useState(null),[r,s]=y.useState(!1),i=y.useMemo(()=>e.filter(d=>d.due_date).map(d=>{const u=ne(d),h=o(d.priority);return{id:`task-${d.id}`,title:`${d.paper_writing_task?"ðŸ“– ":""}${d.title}`,start:d.due_date,end:d.due_date,allDay:!1,display:"list-item",backgroundColor:u?"rgba(107, 114, 128, 0.6)":h,borderColor:u?"rgba(107, 114, 128, 0.6)":h,textColor:"#fff",className:u?"task-completed":"",extendedProps:{taskObject:d,isCompleted:u}}}),[e]);function o(d){switch(d){case"Urgent":return"#dc2626";case"High":return"#ea580c";case"Medium":return"#f59e0b";case"Low":return"#3b82f6";default:return"#6b7280"}}const l=d=>{const u=d.event.extendedProps.taskObject;n(u),s(!0)},a=()=>{s(!1)};return c.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[c.jsx(aa,{plugins:[gv,Pv],initialView:"dayGridMonth",events:i,eventClick:l,displayEventTime:!1,height:"auto",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek"},buttonText:{today:"Today",month:"Month",week:"Week"},aspectRatio:window.innerWidth<768?1.2:1.35,eventMaxStack:2,moreLinkClick:"popover",dayMaxEvents:3,eventDisplay:"block",eventClassNames:"touch-manipulation"}),c.jsx(_o,{show:r,onClose:a,maxWidth:window.innerWidth<768?"sm":"md",children:t&&c.jsxs("div",{className:"p-4 md:p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 pr-4",children:[c.jsx("h2",{className:pe("text-lg md:text-xl font-bold break-words",{"text-gray-500 line-through":ne(t),"text-gray-900":!ne(t)}),children:t.title}),t.paper_writing_task&&c.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full flex-shrink-0",children:[c.jsx(_t,{className:"w-3 h-3 mr-1"}),"Paper"]})]}),c.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-500 p-1 touch-manipulation flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 md:h-6 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.description&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("p",{className:"text-gray-600 text-sm md:text-base break-words",children:t.description})]}),c.jsxs("div",{className:"space-y-4 md:space-y-0 md:grid md:grid-cols-2 md:gap-4 mb-4",children:[t.due_date&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),c.jsx("p",{className:"text-gray-600 text-sm",children:Ve(new Date(t.due_date),"MMM d, yyyy 'at' h:mm a")})]}),t.priority&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Priority"}),c.jsx("span",{className:`
                                        px-2 py-1 text-xs font-medium rounded-full
                                        ${t.priority==="Urgent"?"bg-red-100 text-red-800":""}
                                        ${t.priority==="High"?"bg-orange-100 text-orange-800":""}
                                        ${t.priority==="Medium"?"bg-yellow-100 text-yellow-800":""}
                                        ${t.priority==="Low"?"bg-blue-100 text-blue-800":""}
                                        ${t.priority?"":"bg-gray-100 text-gray-800"}
                                    `,children:t.priority||"None"})]}),t.list_name&&c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"List"}),c.jsx("p",{className:"text-gray-600 text-sm",children:t.list_name})]})]}),t.assignees&&t.assignees.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assignees"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:t.assignees.map(d=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-md px-2 py-1",children:[c.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-200 flex items-center justify-center text-xs overflow-hidden",children:d.avatar?c.jsx("img",{src:d.avatar,alt:d.name,className:"h-full w-full object-cover"}):d.name.charAt(0)}),c.jsx("span",{className:"text-sm text-gray-700",children:d.name})]},d.id))})]})]})})]})}function Ov({board:e,onTaskClick:t}){const[n,r]=y.useState(!1),[s,i]=y.useState(new Set),o=d=>d?Ve(new Date(d),"MMM d, yyyy 'at' h:mm a"):null,l=async(d,u)=>{if(u.preventDefault(),u.stopPropagation(),!s.has(d.id)){i(h=>new Set(h).add(d.id));try{await ke.post(route("project-hub.tasks.toggle-completion",d.id)),V.success("Task status updated!"),J.reload({only:["initialBoardData"]})}catch(h){console.error("Error toggling task completion:",h),V.error("Failed to update task status.")}finally{i(h=>{const g=new Set(h);return g.delete(d.id),g})}}};if(!e)return c.jsx("div",{className:"list-view-container bg-white rounded-lg shadow p-4",children:c.jsx("div",{className:"text-center text-gray-500",children:"No board data available"})});const a=Array.isArray(e.lists)?e.lists:[];return c.jsxs("div",{className:"list-view-container bg-white rounded-lg shadow",children:[c.jsx("div",{className:"px-3 md:px-4 py-3 border-b bg-gray-50",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"show-completed",checked:n,onChange:d=>r(d.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 focus:ring-2"}),c.jsx("label",{htmlFor:"show-completed",className:"ml-2 text-sm font-medium text-gray-700",children:"Show Completed Tasks"})]})}),a.length===0?c.jsx("div",{className:"p-4 text-center text-gray-500",children:"No lists available"}):a.map(d=>{const u=Array.isArray(d.tasks)?d.tasks:[],h=u.filter(g=>n?!0:!ne(g));return c.jsxs("div",{className:"mb-4 md:mb-6",children:[c.jsxs("h3",{className:"px-3 md:px-4 py-3 text-sm md:text-md font-semibold text-gray-800 bg-gray-50 border-b",children:[d.name," (",h.length,")"]}),c.jsx("div",{className:"divide-y",children:h.length===0?c.jsx("div",{className:"px-3 md:px-4 py-4 text-sm text-gray-500 italic",children:n||u.length===0?"No tasks in this list":"No active tasks in this list"}):h.map(g=>c.jsx("div",{className:pe("px-3 md:px-4 py-3 md:py-3 hover:bg-gray-50 cursor-pointer touch-manipulation",{"opacity-60":ne(g)}),onClick:()=>t(g),children:c.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between space-y-3 md:space-y-0",children:[c.jsxs("div",{className:"flex items-start gap-3 flex-grow min-w-0",children:[c.jsx("input",{type:"checkbox",checked:ne(g),disabled:s.has(g.id),onChange:f=>l(g,f),className:pe("w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 focus:ring-2 mt-0.5 flex-shrink-0 touch-manipulation",{"opacity-50 cursor-not-allowed":s.has(g.id)})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:pe("text-sm md:text-sm font-medium truncate",{"text-gray-500 line-through":ne(g),"text-gray-900":!ne(g)}),children:g.title}),g.paper_writing_task&&c.jsx(Ho,{})]}),g.description&&c.jsx("p",{className:"mt-1 text-xs text-gray-600 line-clamp-2 md:line-clamp-1",children:g.description}),g.assignees&&g.assignees.length>0&&c.jsxs("div",{className:"mt-2 flex items-center md:hidden",children:[c.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"Assignees:"}),c.jsx("div",{className:"flex -space-x-1",children:g.assignees.map(f=>c.jsx("div",{className:"h-5 w-5 rounded-full bg-gray-200 flex items-center justify-center text-xs overflow-hidden border border-white",title:f.full_name,children:f.avatar_url?c.jsx("img",{src:f.avatar_url!==null?`/storage/${f.avatar_url}`:"/storage/profile_pictures/default.jpg",alt:f.full_name,className:"h-full w-full object-cover"}):f.full_name.charAt(0)},f.id))})]})]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-3 md:ml-4 flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-2",children:[g.priority&&c.jsx("span",{className:`
                                                                px-2 py-1 text-xs font-medium rounded-full self-start md:self-auto
                                                                ${g.priority==="Low"?"bg-blue-100 text-blue-800":""}
                                                                ${g.priority==="Medium"?"bg-yellow-100 text-yellow-800":""}
                                                                ${g.priority==="High"?"bg-orange-100 text-orange-800":""}
                                                                ${g.priority==="Urgent"?"bg-red-100 text-red-800":""}
                                                            `,children:g.priority}),g.due_date&&c.jsx("span",{className:"text-xs text-gray-500",children:o(g.due_date)})]}),g.assignees&&g.assignees.length>0&&c.jsxs("div",{className:"hidden md:flex items-center",children:[c.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"Assignees:"}),c.jsx("div",{className:"flex -space-x-1",children:g.assignees.map(f=>c.jsx("div",{className:"h-5 w-5 rounded-full bg-gray-200 flex items-center justify-center text-xs overflow-hidden border border-white",title:f.full_name,children:f.avatar_url?c.jsx("img",{src:f.avatar_url!==null?`/storage/${f.avatar_url}`:"/storage/profile_pictures/default.jpg",alt:f.full_name,className:"h-full w-full object-cover"}):f.full_name.charAt(0)},f.id))})]})]})]})},g.id))})]},d.id)})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Hv(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Ke(e,t){return typeof e=="function"?e(t):e}function Ae(e,t){return n=>{t.setState(r=>({...r,[e]:Ke(n,r[e])}))}}function Kn(e){return e instanceof Function}function Lv(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Bv(e,t){const n=[],r=s=>{s.forEach(i=>{n.push(i);const o=t(i);o!=null&&o.length&&r(o)})};return r(e),n}function H(e,t,n){let r=[],s;return i=>{let o;n.key&&n.debug&&(o=Date.now());const l=e(i);if(!(l.length!==r.length||l.some((u,h)=>r[h]!==u)))return s;r=l;let d;if(n.key&&n.debug&&(d=Date.now()),s=t(...l),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,h=Math.round((Date.now()-d)*100)/100,g=h/16,f=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%câ± ${f(h,5)} /${f(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return s}}function L(e,t,n,r){return{debug:()=>{var s;return(s=e?.debugAll)!=null?s:e[t]},key:!1,onChange:r}}function Vv(e,t,n,r){const s=()=>{var o;return(o=i.getValue())!=null?o:e.options.renderFallbackValue},i={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:s,getContext:H(()=>[e,n,t,i],(o,l,a,d)=>({table:o,column:l,row:a,cell:d,getValue:d.getValue,renderValue:d.renderValue}),L(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(i,n,t,e)},{}),i}function $v(e,t,n,r){var s,i;const l={...e._getDefaultColumnDef(),...t},a=l.accessorKey;let d=(s=(i=l.id)!=null?i:a?typeof String.prototype.replaceAll=="function"?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)!=null?s:typeof l.header=="string"?l.header:void 0,u;if(l.accessorFn?u=l.accessorFn:a&&(a.includes(".")?u=g=>{let f=g;for(const m of a.split(".")){var p;f=(p=f)==null?void 0:p[m]}return f}:u=g=>g[l.accessorKey]),!d)throw new Error;let h={id:`${String(d)}`,accessorFn:u,parent:r,depth:n,columnDef:l,columns:[],getFlatColumns:H(()=>[!0],()=>{var g;return[h,...(g=h.columns)==null?void 0:g.flatMap(f=>f.getFlatColumns())]},L(e.options,"debugColumns")),getLeafColumns:H(()=>[e._getOrderColumnsFn()],g=>{var f;if((f=h.columns)!=null&&f.length){let p=h.columns.flatMap(m=>m.getLeafColumns());return g(p)}return[h]},L(e.options,"debugColumns"))};for(const g of e._features)g.createColumn==null||g.createColumn(h,e);return h}const ge="debugHeaders";function lo(e,t,n){var r;let i={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],l=a=>{a.subHeaders&&a.subHeaders.length&&a.subHeaders.map(l),o.push(a)};return l(i),o},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(i,e)}),i}const zv={createTable:e=>{e.getHeaderGroups=H(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>{var i,o;const l=(i=r?.map(h=>n.find(g=>g.id===h)).filter(Boolean))!=null?i:[],a=(o=s?.map(h=>n.find(g=>g.id===h)).filter(Boolean))!=null?o:[],d=n.filter(h=>!(r!=null&&r.includes(h.id))&&!(s!=null&&s.includes(h.id)));return vn(t,[...l,...d,...a],e)},L(e.options,ge)),e.getCenterHeaderGroups=H(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(s!=null&&s.includes(i.id))),vn(t,n,e,"center")),L(e.options,ge)),e.getLeftHeaderGroups=H(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var s;const i=(s=r?.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?s:[];return vn(t,i,e,"left")},L(e.options,ge)),e.getRightHeaderGroups=H(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var s;const i=(s=r?.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?s:[];return vn(t,i,e,"right")},L(e.options,ge)),e.getFooterGroups=H(()=>[e.getHeaderGroups()],t=>[...t].reverse(),L(e.options,ge)),e.getLeftFooterGroups=H(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),L(e.options,ge)),e.getCenterFooterGroups=H(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),L(e.options,ge)),e.getRightFooterGroups=H(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),L(e.options,ge)),e.getFlatHeaders=H(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),L(e.options,ge)),e.getLeftFlatHeaders=H(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),L(e.options,ge)),e.getCenterFlatHeaders=H(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),L(e.options,ge)),e.getRightFlatHeaders=H(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),L(e.options,ge)),e.getCenterLeafHeaders=H(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),L(e.options,ge)),e.getLeftLeafHeaders=H(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),L(e.options,ge)),e.getRightLeafHeaders=H(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),L(e.options,ge)),e.getLeafHeaders=H(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var s,i,o,l,a,d;return[...(s=(i=t[0])==null?void 0:i.headers)!=null?s:[],...(o=(l=n[0])==null?void 0:l.headers)!=null?o:[],...(a=(d=r[0])==null?void 0:d.headers)!=null?a:[]].map(u=>u.getLeafHeaders()).flat()},L(e.options,ge))}};function vn(e,t,n,r){var s,i;let o=0;const l=function(g,f){f===void 0&&(f=1),o=Math.max(o,f),g.filter(p=>p.getIsVisible()).forEach(p=>{var m;(m=p.columns)!=null&&m.length&&l(p.columns,f+1)},0)};l(e);let a=[];const d=(g,f)=>{const p={depth:f,id:[r,`${f}`].filter(Boolean).join("_"),headers:[]},m=[];g.forEach(v=>{const b=[...m].reverse()[0],E=v.column.depth===p.depth;let x,D=!1;if(E&&v.column.parent?x=v.column.parent:(x=v.column,D=!0),b&&b?.column===x)b.subHeaders.push(v);else{const A=lo(n,x,{id:[r,f,x.id,v?.id].filter(Boolean).join("_"),isPlaceholder:D,placeholderId:D?`${m.filter(j=>j.column===x).length}`:void 0,depth:f,index:m.length});A.subHeaders.push(v),m.push(A)}p.headers.push(v),v.headerGroup=p}),a.push(p),f>0&&d(m,f-1)},u=t.map((g,f)=>lo(n,g,{depth:o,index:f}));d(u,o-1),a.reverse();const h=g=>g.filter(p=>p.column.getIsVisible()).map(p=>{let m=0,v=0,b=[0];p.subHeaders&&p.subHeaders.length?(b=[],h(p.subHeaders).forEach(x=>{let{colSpan:D,rowSpan:A}=x;m+=D,b.push(A)})):m=1;const E=Math.min(...b);return v=v+E,p.colSpan=m,p.rowSpan=v,{colSpan:m,rowSpan:v}});return h((s=(i=a[0])==null?void 0:i.headers)!=null?s:[]),a}const Hs=(e,t,n,r,s,i,o)=>{let l={id:t,index:r,original:n,depth:s,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:a=>{if(l._valuesCache.hasOwnProperty(a))return l._valuesCache[a];const d=e.getColumn(a);if(d!=null&&d.accessorFn)return l._valuesCache[a]=d.accessorFn(l.original,r),l._valuesCache[a]},getUniqueValues:a=>{if(l._uniqueValuesCache.hasOwnProperty(a))return l._uniqueValuesCache[a];const d=e.getColumn(a);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(l._uniqueValuesCache[a]=d.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[a]):(l._uniqueValuesCache[a]=[l.getValue(a)],l._uniqueValuesCache[a])},renderValue:a=>{var d;return(d=l.getValue(a))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Bv(l.subRows,a=>a.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let a=[],d=l;for(;;){const u=d.getParentRow();if(!u)break;a.push(u),d=u}return a.reverse()},getAllCells:H(()=>[e.getAllLeafColumns()],a=>a.map(d=>Vv(e,l,d,d.id)),L(e.options,"debugRows")),_getAllCellsByColumnId:H(()=>[l.getAllCells()],a=>a.reduce((d,u)=>(d[u.column.id]=u,d),{}),L(e.options,"debugRows"))};for(let a=0;a<e._features.length;a++){const d=e._features[a];d==null||d.createRow==null||d.createRow(l,e)}return l},Uv={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Sa=(e,t,n)=>{var r,s;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=e.getValue(t))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(i))};Sa.autoRemove=e=>He(e);const Ca=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};Ca.autoRemove=e=>He(e);const Ea=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};Ea.autoRemove=e=>He(e);const _a=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};_a.autoRemove=e=>He(e);const Aa=(e,t,n)=>!n.some(r=>{var s;return!((s=e.getValue(t))!=null&&s.includes(r))});Aa.autoRemove=e=>He(e)||!(e!=null&&e.length);const Ra=(e,t,n)=>n.some(r=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(r)});Ra.autoRemove=e=>He(e)||!(e!=null&&e.length);const Da=(e,t,n)=>e.getValue(t)===n;Da.autoRemove=e=>He(e);const Ta=(e,t,n)=>e.getValue(t)==n;Ta.autoRemove=e=>He(e);const Ls=(e,t,n)=>{let[r,s]=n;const i=e.getValue(t);return i>=r&&i<=s};Ls.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,s=typeof n!="number"?parseFloat(n):n,i=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(s)?1/0:s;if(i>o){const l=i;i=o,o=l}return[i,o]};Ls.autoRemove=e=>He(e)||He(e[0])&&He(e[1]);const Ge={includesString:Sa,includesStringSensitive:Ca,equalsString:Ea,arrIncludes:_a,arrIncludesAll:Aa,arrIncludesSome:Ra,equals:Da,weakEquals:Ta,inNumberRange:Ls};function He(e){return e==null||e===""}const Gv={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:Ae("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n?.getValue(e.id);return typeof r=="string"?Ge.includesString:typeof r=="number"?Ge.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Ge.equals:Array.isArray(r)?Ge.arrIncludes:Ge.weakEquals},e.getFilterFn=()=>{var n,r;return Kn(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:Ge[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,s;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const s=e.getFilterFn(),i=r?.find(u=>u.id===e.id),o=Ke(n,i?i.value:void 0);if(ao(s,o,e)){var l;return(l=r?.filter(u=>u.id!==e.id))!=null?l:[]}const a={id:e.id,value:o};if(i){var d;return(d=r?.map(u=>u.id===e.id?a:u))!=null?d:[]}return r!=null&&r.length?[...r,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=s=>{var i;return(i=Ke(t,s))==null?void 0:i.filter(o=>{const l=n.find(a=>a.id===o.id);if(l){const a=l.getFilterFn();if(ao(a,o.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function ao(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Wv=(e,t,n)=>n.reduce((r,s)=>{const i=s.getValue(e);return r+(typeof i=="number"?i:0)},0),qv=(e,t,n)=>{let r;return n.forEach(s=>{const i=s.getValue(e);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},Qv=(e,t,n)=>{let r;return n.forEach(s=>{const i=s.getValue(e);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},Yv=(e,t,n)=>{let r,s;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r===void 0?o>=o&&(r=s=o):(r>o&&(r=o),s<o&&(s=o)))}),[r,s]},Zv=(e,t)=>{let n=0,r=0;if(t.forEach(s=>{let i=s.getValue(e);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},Xv=(e,t)=>{if(!t.length)return;const n=t.map(i=>i.getValue(e));if(!Lv(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((i,o)=>i-o);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},Jv=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Kv=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,ey=(e,t)=>t.length,Ar={sum:Wv,min:qv,max:Qv,extent:Yv,mean:Zv,median:Xv,unique:Jv,uniqueCount:Kv,count:ey},ty={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Ae("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n?.getValue(e.id);if(typeof r=="number")return Ar.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Ar.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return Kn(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:Ar[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function ny(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(i=>!t.includes(i.id));return n==="remove"?r:[...t.map(i=>e.find(o=>o.id===i)).filter(Boolean),...r]}const ry={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Ae("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=H(n=>[Wt(t,n)],n=>n.findIndex(r=>r.id===e.id),L(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=Wt(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const s=Wt(t,n);return((r=s[s.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=H(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>s=>{let i=[];if(!(t!=null&&t.length))i=s;else{const o=[...t],l=[...s];for(;l.length&&o.length;){const a=o.shift(),d=l.findIndex(u=>u.id===a);d>-1&&i.push(l.splice(d,1)[0])}i=[...i,...l]}return ny(i,n,r)},L(e.options,"debugTable"))}},Rr=()=>({left:[],right:[]}),sy={getInitialState:e=>({columnPinning:Rr(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Ae("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(s=>s.id).filter(Boolean);t.setColumnPinning(s=>{var i,o;if(n==="right"){var l,a;return{left:((l=s?.left)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((a=s?.right)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(n==="left"){var d,u;return{left:[...((d=s?.left)!=null?d:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((u=s?.right)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((i=s?.left)!=null?i:[]).filter(h=>!(r!=null&&r.includes(h))),right:((o=s?.right)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var s,i,o;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((i=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?i:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:r,right:s}=t.getState().columnPinning,i=n.some(l=>r?.includes(l)),o=n.some(l=>s?.includes(l));return i?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();return s?(n=(r=t.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=H(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,s)=>{const i=[...r??[],...s??[]];return n.filter(o=>!i.includes(o.column.id))},L(t.options,"debugRows")),e.getLeftVisibleCells=H(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),L(t.options,"debugRows")),e.getRightVisibleCells=H(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),L(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?Rr():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:Rr())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var s,i;return!!((s=r.left)!=null&&s.length||(i=r.right)!=null&&i.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=H(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(s=>s.id===r)).filter(Boolean),L(e.options,"debugColumns")),e.getRightLeafColumns=H(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(s=>s.id===r)).filter(Boolean),L(e.options,"debugColumns")),e.getCenterLeafColumns=H(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const s=[...n??[],...r??[]];return t.filter(i=>!s.includes(i.id))},L(e.options,"debugColumns"))}};function iy(e){return e||(typeof document<"u"?document:null)}const yn={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Dr=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),oy={getDefaultColumnDef:()=>yn,getInitialState:e=>({columnSizing:{},columnSizingInfo:Dr(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ae("columnSizing",e),onColumnSizingInfoChange:Ae("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,s;const i=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:yn.minSize,(r=i??e.columnDef.size)!=null?r:yn.size),(s=e.columnDef.maxSize)!=null?s:yn.maxSize)},e.getStart=H(n=>[n,Wt(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((s,i)=>s+i.getSize(),0),L(t.options,"debugColumns")),e.getAfter=H(n=>[n,Wt(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((s,i)=>s+i.getSize(),0),L(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...s}=n;return s})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var i;n+=(i=s.column.getSize())!=null?i:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),s=r?.getCanResize();return i=>{if(!r||!s||(i.persist==null||i.persist(),Tr(i)&&i.touches&&i.touches.length>1))return;const o=e.getSize(),l=e?e.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[r.id,r.getSize()]],a=Tr(i)?Math.round(i.touches[0].clientX):i.clientX,d={},u=(b,E)=>{typeof E=="number"&&(t.setColumnSizingInfo(x=>{var D,A;const j=t.options.columnResizeDirection==="rtl"?-1:1,M=(E-((D=x?.startOffset)!=null?D:0))*j,T=Math.max(M/((A=x?.startSize)!=null?A:0),-.999999);return x.columnSizingStart.forEach(_=>{let[C,N]=_;d[C]=Math.round(Math.max(N+N*T,0)*100)/100}),{...x,deltaOffset:M,deltaPercentage:T}}),(t.options.columnResizeMode==="onChange"||b==="end")&&t.setColumnSizing(x=>({...x,...d})))},h=b=>u("move",b),g=b=>{u("end",b),t.setColumnSizingInfo(E=>({...E,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},f=iy(n),p={moveHandler:b=>h(b.clientX),upHandler:b=>{f?.removeEventListener("mousemove",p.moveHandler),f?.removeEventListener("mouseup",p.upHandler),g(b.clientX)}},m={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),h(b.touches[0].clientX),!1),upHandler:b=>{var E;f?.removeEventListener("touchmove",m.moveHandler),f?.removeEventListener("touchend",m.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),g((E=b.touches[0])==null?void 0:E.clientX)}},v=ly()?{passive:!1}:!1;Tr(i)?(f?.addEventListener("touchmove",m.moveHandler,v),f?.addEventListener("touchend",m.upHandler,v)):(f?.addEventListener("mousemove",p.moveHandler,v),f?.addEventListener("mouseup",p.upHandler,v)),t.setColumnSizingInfo(b=>({...b,startOffset:a,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Dr():(n=e.initialState.columnSizingInfo)!=null?n:Dr())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0}}};let bn=null;function ly(){if(typeof bn=="boolean")return bn;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return bn=e,bn}function Tr(e){return e.type==="touchstart"}const ay={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Ae("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const s=e.columns;return(n=s.length?s.some(i=>i.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=H(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),L(t.options,"debugRows")),e.getVisibleCells=H(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],L(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>H(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),L(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Wt(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const cy={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},dy={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:Ae("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,s,i;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&((i=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?i:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Ge.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return Kn(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:Ge[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},uy={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Ae("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,s;if(!t){e._queue(()=>{t=!0});return}if((r=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var s,i;e.setExpanded(r?{}:(s=(i=e.initialState)==null?void 0:i.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(i=>{const o=i.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var s;const i=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{o[l]=!0}):o=r,n=(s=n)!=null?s:!i,!i&&n)return{...o,[e.id]:!0};if(i&&!n){const{[e.id]:l,...a}=o;return a}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r?.[e.id])},e.getCanExpand=()=>{var n,r,s;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Yr=0,Zr=10,kr=()=>({pageIndex:Yr,pageSize:Zr}),fy={getInitialState:e=>({...e,pagination:{...kr(),...e?.pagination}}),getDefaultOptions:e=>({onPaginationChange:Ae("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,s;if(!t){e._queue(()=>{t=!0});return}if((r=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const s=i=>Ke(r,i);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=r=>{var s;e.setPagination(r?kr():(s=e.initialState.pagination)!=null?s:kr())},e.setPageIndex=r=>{e.setPagination(s=>{let i=Ke(r,s.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return i=Math.max(0,Math.min(i,o)),{...s,pageIndex:i}})},e.resetPageIndex=r=>{var s,i;e.setPageIndex(r?Yr:(s=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:Yr)},e.resetPageSize=r=>{var s,i;e.setPageSize(r?Zr:(s=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:Zr)},e.setPageSize=r=>{e.setPagination(s=>{const i=Math.max(1,Ke(r,s.pageSize)),o=s.pageSize*s.pageIndex,l=Math.floor(o/i);return{...s,pageIndex:l,pageSize:i}})},e.setPageCount=r=>e.setPagination(s=>{var i;let o=Ke(r,(i=e.options.pageCount)!=null?i:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...s,pageCount:o}}),e.getPageOptions=H(()=>[e.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((i,o)=>o)),s},L(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:r<s-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},Nr=()=>({top:[],bottom:[]}),gy={getInitialState:e=>({rowPinning:Nr(),...e}),getDefaultOptions:e=>({onRowPinningChange:Ae("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,s)=>{const i=r?e.getLeafRows().map(a=>{let{id:d}=a;return d}):[],o=s?e.getParentRows().map(a=>{let{id:d}=a;return d}):[],l=new Set([...o,e.id,...i]);t.setRowPinning(a=>{var d,u;if(n==="bottom"){var h,g;return{top:((h=a?.top)!=null?h:[]).filter(m=>!(l!=null&&l.has(m))),bottom:[...((g=a?.bottom)!=null?g:[]).filter(m=>!(l!=null&&l.has(m))),...Array.from(l)]}}if(n==="top"){var f,p;return{top:[...((f=a?.top)!=null?f:[]).filter(m=>!(l!=null&&l.has(m))),...Array.from(l)],bottom:((p=a?.bottom)!=null?p:[]).filter(m=>!(l!=null&&l.has(m)))}}return{top:((d=a?.top)!=null?d:[]).filter(m=>!(l!=null&&l.has(m))),bottom:((u=a?.bottom)!=null?u:[]).filter(m=>!(l!=null&&l.has(m)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=t.options;return typeof r=="function"?r(e):(n=r??s)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:s}=t.getState().rowPinning,i=n.some(l=>r?.includes(l)),o=n.some(l=>s?.includes(l));return i?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();if(!s)return-1;const i=(n=s==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(o=>{let{id:l}=o;return l});return(r=i?.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?Nr():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:Nr())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var s,i;return!!((s=r.top)!=null&&s.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=(t,n,r)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(n??[]).map(o=>{const l=e.getRow(o,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(o=>t.find(l=>l.id===o))).filter(Boolean).map(o=>({...o,position:r}))},e.getTopRows=H(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),L(e.options,"debugRows")),e.getBottomRows=H(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),L(e.options,"debugRows")),e.getCenterRows=H(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const s=new Set([...n??[],...r??[]]);return t.filter(i=>!s.has(i.id))},L(e.options,"debugRows"))}},hy={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Ae("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},s=e.getPreGroupedRowModel().flatRows;return t?s.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):s.forEach(i=>{delete r[i.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),s={...n};return e.getRowModel().rows.forEach(i=>{Xr(s,i.id,r,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=H(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Ir(e,n):{rows:[],flatRows:[],rowsById:{}},L(e.options,"debugTable")),e.getFilteredSelectedRowModel=H(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Ir(e,n):{rows:[],flatRows:[],rowsById:{}},L(e.options,"debugTable")),e.getGroupedSelectedRowModel=H(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Ir(e,n):{rows:[],flatRows:[],rowsById:{}},L(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(s=>!n[s.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const s=e.getIsSelected();t.setRowSelection(i=>{var o;if(n=typeof n<"u"?n:!s,e.getCanSelect()&&s===n)return i;const l={...i};return Xr(l,e.id,n,(o=r?.selectChildren)!=null?o:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Bs(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return Jr(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return Jr(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var s;n&&e.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},Xr=(e,t,n,r,s)=>{var i;const o=s.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(l=>Xr(e,l.id,n,r,s))};function Ir(e,t){const n=e.getState().rowSelection,r=[],s={},i=function(o,l){return o.map(a=>{var d;const u=Bs(a,n);if(u&&(r.push(a),s[a.id]=a),(d=a.subRows)!=null&&d.length&&(a={...a,subRows:i(a.subRows)}),u)return a}).filter(Boolean)};return{rows:i(t.rows),flatRows:r,rowsById:s}}function Bs(e,t){var n;return(n=t[e.id])!=null?n:!1}function Jr(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let s=!0,i=!1;return e.subRows.forEach(o=>{if(!(i&&!s)&&(o.getCanSelect()&&(Bs(o,t)?i=!0:s=!1),o.subRows&&o.subRows.length)){const l=Jr(o,t);l==="all"?i=!0:(l==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const Kr=/([0-9]+)/gm,py=(e,t,n)=>ka(rt(e.getValue(n)).toLowerCase(),rt(t.getValue(n)).toLowerCase()),my=(e,t,n)=>ka(rt(e.getValue(n)),rt(t.getValue(n))),vy=(e,t,n)=>Vs(rt(e.getValue(n)).toLowerCase(),rt(t.getValue(n)).toLowerCase()),yy=(e,t,n)=>Vs(rt(e.getValue(n)),rt(t.getValue(n))),by=(e,t,n)=>{const r=e.getValue(n),s=t.getValue(n);return r>s?1:r<s?-1:0},xy=(e,t,n)=>Vs(e.getValue(n),t.getValue(n));function Vs(e,t){return e===t?0:e>t?1:-1}function rt(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function ka(e,t){const n=e.split(Kr).filter(Boolean),r=t.split(Kr).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),i=r.shift(),o=parseInt(s,10),l=parseInt(i,10),a=[o,l].sort();if(isNaN(a[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(a[1]))return isNaN(o)?-1:1;if(o>l)return 1;if(l>o)return-1}return n.length-r.length}const Lt={alphanumeric:py,alphanumericCaseSensitive:my,text:vy,textCaseSensitive:yy,datetime:by,basic:xy},wy={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Ae("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const i=s?.getValue(e.id);if(Object.prototype.toString.call(i)==="[object Date]")return Lt.datetime;if(typeof i=="string"&&(r=!0,i.split(Kr).length>1))return Lt.alphanumeric}return r?Lt.text:Lt.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof n?.getValue(e.id)=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return Kn(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:Lt[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const s=e.getNextSortingOrder(),i=typeof n<"u"&&n!==null;t.setSorting(o=>{const l=o?.find(f=>f.id===e.id),a=o?.findIndex(f=>f.id===e.id);let d=[],u,h=i?n:s==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?l?u="toggle":u="add":o!=null&&o.length&&a!==o.length-1?u="replace":l?u="toggle":u="replace",u==="toggle"&&(i||s||(u="remove")),u==="add"){var g;d=[...o,{id:e.id,desc:h}],d.splice(0,d.length-((g=t.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else u==="toggle"?d=o.map(f=>f.id===e.id?{...f,desc:h}:f):u==="remove"?d=o.filter(f=>f.id!==e.id):d=[{id:e.id,desc:h}];return d})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,s;const i=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==i&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(s=t.options.enableMultiRemove)!=null)||s)?!1:o==="desc"?"asc":"desc":i},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(s=>s.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(s=>s.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Sy=[zv,ay,ry,sy,Uv,Gv,cy,dy,wy,ty,uy,fy,gy,hy,oy];function Cy(e){var t,n;const r=[...Sy,...(t=e._features)!=null?t:[]];let s={_features:r};const i=s._features.reduce((g,f)=>Object.assign(g,f.getDefaultOptions==null?void 0:f.getDefaultOptions(s)),{}),o=g=>s.options.mergeOptions?s.options.mergeOptions(i,g):{...i,...g};let a={...{},...(n=e.initialState)!=null?n:{}};s._features.forEach(g=>{var f;a=(f=g.getInitialState==null?void 0:g.getInitialState(a))!=null?f:a});const d=[];let u=!1;const h={_features:r,options:{...i,...e},initialState:a,_queue:g=>{d.push(g),u||(u=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();u=!1}).catch(f=>setTimeout(()=>{throw f})))},reset:()=>{s.setState(s.initialState)},setOptions:g=>{const f=Ke(g,s.options);s.options=o(f)},getState:()=>s.options.state,setState:g=>{s.options.onStateChange==null||s.options.onStateChange(g)},_getRowId:(g,f,p)=>{var m;return(m=s.options.getRowId==null?void 0:s.options.getRowId(g,f,p))!=null?m:`${p?[p.id,f].join("."):f}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(g,f)=>{let p=(f?s.getPrePaginationRowModel():s.getRowModel()).rowsById[g];if(!p&&(p=s.getCoreRowModel().rowsById[g],!p))throw new Error;return p},_getDefaultColumnDef:H(()=>[s.options.defaultColumn],g=>{var f;return g=(f=g)!=null?f:{},{header:p=>{const m=p.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:p=>{var m,v;return(m=(v=p.renderValue())==null||v.toString==null?void 0:v.toString())!=null?m:null},...s._features.reduce((p,m)=>Object.assign(p,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...g}},L(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:H(()=>[s._getColumnDefs()],g=>{const f=function(p,m,v){return v===void 0&&(v=0),p.map(b=>{const E=$v(s,b,v,m),x=b;return E.columns=x.columns?f(x.columns,E,v+1):[],E})};return f(g)},L(e,"debugColumns")),getAllFlatColumns:H(()=>[s.getAllColumns()],g=>g.flatMap(f=>f.getFlatColumns()),L(e,"debugColumns")),_getAllFlatColumnsById:H(()=>[s.getAllFlatColumns()],g=>g.reduce((f,p)=>(f[p.id]=p,f),{}),L(e,"debugColumns")),getAllLeafColumns:H(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(g,f)=>{let p=g.flatMap(m=>m.getLeafColumns());return f(p)},L(e,"debugColumns")),getColumn:g=>s._getAllFlatColumnsById()[g]};Object.assign(s,h);for(let g=0;g<s._features.length;g++){const f=s._features[g];f==null||f.createTable==null||f.createTable(s)}return s}function Ey(){return e=>H(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,i,o){i===void 0&&(i=0);const l=[];for(let d=0;d<s.length;d++){const u=Hs(e,e._getRowId(s[d],d,o),s[d],d,i,void 0,o?.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,l.push(u),e.options.getSubRows){var a;u.originalSubRows=e.options.getSubRows(s[d],d),(a=u.originalSubRows)!=null&&a.length&&(u.subRows=r(u.originalSubRows,i+1,u))}}return l};return n.rows=r(t),n},L(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function _y(e,t,n){return n.options.filterFromLeafRows?Ay(e,t,n):Ry(e,t,n)}function Ay(e,t,n){var r;const s=[],i={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(a,d){d===void 0&&(d=0);const u=[];for(let g=0;g<a.length;g++){var h;let f=a[g];const p=Hs(n,f.id,f.original,f.index,f.depth,void 0,f.parentId);if(p.columnFilters=f.columnFilters,(h=f.subRows)!=null&&h.length&&d<o){if(p.subRows=l(f.subRows,d+1),f=p,t(f)&&!p.subRows.length){u.push(f),i[f.id]=f,s.push(f);continue}if(t(f)||p.subRows.length){u.push(f),i[f.id]=f,s.push(f);continue}}else f=p,t(f)&&(u.push(f),i[f.id]=f,s.push(f))}return u};return{rows:l(e),flatRows:s,rowsById:i}}function Ry(e,t,n){var r;const s=[],i={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(a,d){d===void 0&&(d=0);const u=[];for(let g=0;g<a.length;g++){let f=a[g];if(t(f)){var h;if((h=f.subRows)!=null&&h.length&&d<o){const m=Hs(n,f.id,f.original,f.index,f.depth,void 0,f.parentId);m.subRows=l(f.subRows,d+1),f=m}u.push(f),s.push(f),i[f.id]=f}}return u};return{rows:l(e),flatRows:s,rowsById:i}}function Dy(){return e=>H(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let g=0;g<t.flatRows.length;g++)t.flatRows[g].columnFilters={},t.flatRows[g].columnFiltersMeta={};return t}const s=[],i=[];(n??[]).forEach(g=>{var f;const p=e.getColumn(g.id);if(!p)return;const m=p.getFilterFn();m&&s.push({id:g.id,filterFn:m,resolvedValue:(f=m.resolveFilterValue==null?void 0:m.resolveFilterValue(g.value))!=null?f:g.value})});const o=(n??[]).map(g=>g.id),l=e.getGlobalFilterFn(),a=e.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());r&&l&&a.length&&(o.push("__global__"),a.forEach(g=>{var f;i.push({id:g.id,filterFn:l,resolvedValue:(f=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?f:r})}));let d,u;for(let g=0;g<t.flatRows.length;g++){const f=t.flatRows[g];if(f.columnFilters={},s.length)for(let p=0;p<s.length;p++){d=s[p];const m=d.id;f.columnFilters[m]=d.filterFn(f,m,d.resolvedValue,v=>{f.columnFiltersMeta[m]=v})}if(i.length){for(let p=0;p<i.length;p++){u=i[p];const m=u.id;if(u.filterFn(f,m,u.resolvedValue,v=>{f.columnFiltersMeta[m]=v})){f.columnFilters.__global__=!0;break}}f.columnFilters.__global__!==!0&&(f.columnFilters.__global__=!1)}}const h=g=>{for(let f=0;f<o.length;f++)if(g.columnFilters[o[f]]===!1)return!1;return!0};return _y(t.rows,h,e)},L(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Ty(){return e=>H(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,s=[],i=r.filter(a=>{var d;return(d=e.getColumn(a.id))==null?void 0:d.getCanSort()}),o={};i.forEach(a=>{const d=e.getColumn(a.id);d&&(o[a.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const l=a=>{const d=a.map(u=>({...u}));return d.sort((u,h)=>{for(let f=0;f<i.length;f+=1){var g;const p=i[f],m=o[p.id],v=m.sortUndefined,b=(g=p?.desc)!=null?g:!1;let E=0;if(v){const x=u.getValue(p.id),D=h.getValue(p.id),A=x===void 0,j=D===void 0;if(A||j){if(v==="first")return A?-1:1;if(v==="last")return A?1:-1;E=A&&j?0:A?v:-v}}if(E===0&&(E=m.sortingFn(u,h,p.id)),E!==0)return b&&(E*=-1),m.invertSorting&&(E*=-1),E}return u.index-h.index}),d.forEach(u=>{var h;s.push(u),(h=u.subRows)!=null&&h.length&&(u.subRows=l(u.subRows))}),d};return{rows:l(n.rows),flatRows:s,rowsById:n.rowsById}},L(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function co(e,t){return e?ky(e)?y.createElement(e,t):e:null}function ky(e){return Ny(e)||typeof e=="function"||Iy(e)}function Ny(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function Iy(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function My(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=y.useState(()=>({current:Cy(t)})),[r,s]=y.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...e,state:{...r,...e.state},onStateChange:o=>{s(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}function jy({board:e,onTaskClick:t}){const[n,r]=y.useState([]),[s,i]=y.useState(""),[o,l]=y.useState(1),[a]=y.useState(15),[d,u]=y.useState(!1),[h,g]=y.useState(new Set),f=y.useMemo(()=>!e||!e.lists?[]:(Array.isArray(e.lists)?e.lists:[]).flatMap(_=>(Array.isArray(_.tasks)?_.tasks:[]).map(N=>({...N,list_name:_.name,list_id:_.id}))),[e]),p=Hv(),m=async(T,_)=>{if(_.preventDefault(),_.stopPropagation(),!h.has(T.id)){g(C=>new Set(C).add(T.id));try{await ke.post(route("project-hub.tasks.toggle-completion",T.id)),V.success("Task status updated!"),J.reload({only:["initialBoardData"]})}catch(C){console.error("Error toggling task completion:",C),V.error("Failed to update task status.")}finally{g(C=>{const N=new Set(C);return N.delete(T.id),N})}}},v=y.useMemo(()=>[p.accessor("completed_at",{header:"",cell:T=>c.jsx("input",{type:"checkbox",checked:ne(T.row.original),disabled:h.has(T.row.original.id),onChange:_=>m(T.row.original,_),className:pe("w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 focus:ring-2 touch-manipulation",{"opacity-50 cursor-not-allowed":h.has(T.row.original.id)})}),enableSorting:!1,size:40}),p.accessor("title",{header:"Task",cell:T=>{const _=T.row.original;return c.jsxs("div",{className:pe("font-medium cursor-pointer group touch-manipulation",{"text-gray-500 line-through":ne(_)}),onClick:()=>t(_),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[_.paper_writing_task?c.jsxs(Ws,{children:[c.jsx(qs,{asChild:!0,children:c.jsx(_t,{className:"w-4 h-4 text-blue-600 flex-shrink-0"})}),c.jsx(Qs,{children:c.jsx("p",{children:"Paper Writing Task"})})]}):c.jsxs(Ws,{children:[c.jsx(qs,{asChild:!0,children:c.jsx($c,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})}),c.jsx(Qs,{children:c.jsx("p",{children:"Normal Task"})})]}),c.jsx("span",{className:pe("line-clamp-2",{"group-hover:text-indigo-800 text-indigo-600":!ne(_)}),children:T.getValue()})]}),c.jsxs("div",{className:pe("text-xs pl-6",{"text-gray-400":ne(_),"text-gray-500":!ne(_)}),children:["In list: ",c.jsx("span",{className:"font-semibold",children:_.list_name})]})]})},size:200}),p.accessor("assignees",{header:"Assignees",cell:T=>{const _=T.getValue()||[];return _.length===0?c.jsx("span",{className:"text-gray-400 italic text-sm",children:"Unassigned"}):c.jsxs("div",{className:"flex -space-x-1 overflow-hidden",children:[_.slice(0,3).map(C=>c.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-200 flex items-center justify-center text-xs overflow-hidden border border-white flex-shrink-0",title:C.full_name,children:C.avatar_url?c.jsx("img",{src:C.avatar_url!==null?`/storage/${C.avatar_url}`:"/storage/profile_pictures/default.jpg",alt:C.full_name,className:"h-full w-full object-cover"}):C.full_name.charAt(0)},C.id)),_.length>3&&c.jsxs("div",{className:"h-6 w-6 rounded-full bg-gray-300 flex items-center justify-center text-xs border border-white",children:["+",_.length-3]})]})},enableSorting:!1,size:120}),p.accessor("priority",{header:"Details",cell:T=>{const{priority:_,due_date:C}=T.row.original,N={Urgent:"bg-red-100 text-red-800",High:"bg-orange-100 text-orange-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-blue-100 text-blue-800"}[_]||"bg-gray-100 text-gray-800";return c.jsxs("div",{className:"flex flex-col gap-2",children:[_&&c.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full whitespace-nowrap text-center w-fit ${N}`,children:_}),C&&c.jsxs("div",{className:"flex items-center text-xs text-gray-600 whitespace-nowrap",children:[c.jsx(gt,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),c.jsx("span",{children:Ve(new Date(C),"MMM d, yyyy")})]})]})},size:120}),p.accessor("description",{header:"Description",cell:T=>T.getValue()?c.jsx("span",{className:"line-clamp-3 text-sm break-words",children:T.getValue()}):c.jsx("span",{className:"text-gray-400 italic text-sm",children:"No description"}),enableSorting:!1,size:250})],[h,t]),b=My({data:f,columns:v,state:{sorting:n,globalFilter:s},onSortingChange:T=>{r(T),l(1)},onGlobalFilterChange:T=>{i(T),l(1)},getSortedRowModel:Ty(),getFilteredRowModel:Dy(),getCoreRowModel:Ey()}),x=b.getFilteredRowModel().rows.filter(T=>d?!0:!ne(T.original)),D=Math.ceil(x.length/a),A=(o-1)*a,j=A+a,M=x.slice(A,j);return e?c.jsx(Vc,{delayDuration:0,children:c.jsxs("div",{className:"table-view-container bg-white rounded-lg shadow flex flex-col h-full",children:[c.jsxs("div",{className:"px-3 md:px-4 py-3 border-b bg-gray-50 space-y-3 md:space-y-0 md:flex md:items-center md:justify-between flex-shrink-0",children:[c.jsxs("div",{className:"relative flex-1 max-w-md",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(zc,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search tasks...",value:s??"",onChange:T=>i(String(T.target.value))})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"show-completed-table",checked:d,onChange:T=>u(T.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 focus:ring-2"}),c.jsx("label",{htmlFor:"show-completed-table",className:"ml-2 text-sm font-medium text-gray-700",children:"Show Completed"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full divide-y divide-gray-200 table-fixed",style:{minWidth:"800px"},children:[c.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:b.getHeaderGroups().map(T=>c.jsx("tr",{children:T.headers.map(_=>c.jsx("th",{scope:"col",className:"px-3 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 touch-manipulation",style:{width:_.getSize(),minWidth:_.column.columnDef.minSize||_.getSize()},onClick:_.column.getToggleSortingHandler(),children:c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("span",{children:co(_.column.columnDef.header,_.getContext())}),_.column.getIsSorted()&&c.jsx("span",{className:"flex-shrink-0",children:_.column.getIsSorted()==="desc"?c.jsx(Uc,{className:"w-4 h-4"}):c.jsx(Gc,{className:"w-4 h-4"})})]})},_.id))},T.id))}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.length>0?M.map(T=>c.jsx("tr",{className:pe("hover:bg-gray-50",{"opacity-60":ne(T.original)}),children:T.getVisibleCells().map(_=>c.jsx("td",{className:"px-3 md:px-6 py-3 md:py-4 whitespace-normal text-sm text-gray-900",style:{width:_.column.getSize(),minWidth:_.column.columnDef.minSize||_.column.getSize()},children:co(_.column.columnDef.cell,_.getContext())},_.id))},T.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:v.length,className:"px-4 py-8 text-center text-sm text-gray-500",children:s?"No tasks match your search criteria":d||f.length===0?"No tasks found":"No active tasks found"})})})]})})}),x.length>a&&c.jsx("div",{className:"px-4 py-3 border-t flex-shrink-0",children:c.jsx(Bc,{currentPage:o,totalPages:D,onPageChange:l})})]})}):c.jsx("div",{className:"table-view-container bg-white rounded-lg shadow p-4",children:c.jsx("div",{className:"text-center text-gray-500",children:"No board data available"})})}var uo;(function(e){e.Hour="Hour",e.QuarterDay="Quarter Day",e.HalfDay="Half Day",e.Day="Day",e.Week="Week",e.Month="Month",e.Year="Year"})(uo||(uo={}));typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));const Na=[{value:"Not Started",label:"Not Started"},{value:"Planning",label:"Planning"},{value:"Researching",label:"Researching"},{value:"Drafting",label:"Drafting"},{value:"Revising",label:"Revising"},{value:"Final Review",label:"Final Review"},{value:"Completed",label:"Completed"}],es=e=>e?e.academician?.full_name||e.postgraduate?.full_name||e.undergraduate?.full_name||e.name:"Unknown User",Py=e=>e?e.academician?.profile_picture?`/storage/${e.academician.profile_picture}`:e.postgraduate?.profile_picture?`/storage/${e.postgraduate.profile_picture}`:e.undergraduate?.profile_picture?`/storage/${e.undergraduate.profile_picture}`:e.avatar_url||"/storage/profile_pictures/default.jpg":"/storage/profile_pictures/default.jpg";function Fy({task:e,show:t,onClose:n,workspaceMembers:r,researchOptions:s=[]}){const[i,o]=y.useState(!1),[l,a]=y.useState(!1),[d,u]=y.useState(null),[h,g]=y.useState(null),[f,p]=y.useState([]),m=e&&!e.id,{addTaskToCalendar:v}=fs(),[b,E]=y.useState(!1),[x,D]=y.useState(null),[A,j]=y.useState(null),{props:M}=ts(),T=15*1024*1024,_=Bt({title:e?.title||"",description:e?.description||"",due_date:e?.due_date||"",assignees:e?.assignees?.map(R=>R.id)||[],priority:e?.priority||"Medium",list_id:e?.board_list_id||null,task_type:"normal",area_of_study:[],paper_type:"",publication_type:"",scopus_info:"",progress:"Not Started"}),C=Bt({content:""}),N=Bt({files:[]});y.useEffect(()=>{const R=M?.flash?.google_calendar_prompt,z=M?.flash?.task_for_calendar;R?.show_prompt&&z&&e?.id===z&&(j(e),D(R),E(!0))},[M?.flash]),y.useEffect(()=>{if(e){p(e.comments||[]);let R="";if(e.due_date)try{const U=new Date(e.due_date);isNaN(U)||(R=Ve(U,"yyyy-MM-dd'T'HH:mm"))}catch(U){console.error("Error parsing date:",U)}const z={title:e.title||"",description:e.description||"",due_date:R,assignees:e.assignees?.map(U=>U.id)||[],priority:e.priority||"Medium",list_id:e.board_list_id||null,task_type:e.paper_writing_task?"paper":"normal"};e.paper_writing_task?_.setData({...z,area_of_study:e.paper_writing_task.area_of_study||[],paper_type:e.paper_writing_task.paper_type||"",publication_type:e.paper_writing_task.publication_type||"",scopus_info:e.paper_writing_task.scopus_info||"",progress:e.paper_writing_task.progress||"Not Started"}):_.setData({...z,area_of_study:[],paper_type:"",publication_type:"",scopus_info:"",progress:"Not Started"})}},[e]);const Q=R=>{R.preventDefault();const z=e&&e.paper_writing_task?"paper":"normal";if(_.setData("task_type",z),m){const U=_.data.list_id||e.board_list_id;if(!U){console.error("No list_id available for task creation"),V.error("Failed to create task: No list ID provided");return}_.post(`/project-hub/lists/${U}/tasks`,{forceFormData:!0,onSuccess:()=>{V.success("Task created successfully!"),n()},onError:Re=>{console.error("Submission Errors:",Re),V.error("Failed to create task. Please check the form for errors.")}})}else _.put(`/project-hub/tasks/${e.id}`,{onSuccess:()=>{V.success("Task updated successfully!")},onError:U=>{console.error("Update Errors:",U),V.error("Failed to update task. Please check the form for errors.")}})},we=R=>{R.preventDefault(),C.data.content.trim()&&(C.processing=!0,ke.post(route("project-hub.tasks.comments.add",e.id),C.data).then(z=>{const U=z.data.comment;U&&p(Re=>[U,...Re]),V.success("Comment added!"),C.reset("content")}).catch(z=>{V.error(z?.response?.data?.message||"Failed to add comment.")}).finally(()=>{C.processing=!1}))},re=()=>{J.delete(route("project-hub.tasks.destroy",e.id),{preserveScroll:!0,onSuccess:()=>{V.success(`Task "${e.title}" deleted successfully.`),n()},onError:R=>{console.error("Delete Error:",R),V.error("Failed to delete the task.")}})},Ie=()=>{e?.id&&J.post(route("project-hub.tasks.archive",e.id),{},{preserveScroll:!0,onSuccess:()=>{V.success("Task archived!"),n(),J.reload({only:["initialBoardData"]})},onError:()=>V.error("Failed to archive task.")})},[le,de]=y.useState(e?.attachments||[]);y.useEffect(()=>{t&&(de(e?.attachments||[]),N.reset("files"),g(null),u(null),a(!1))},[e,t]);const B=R=>{if(R.preventDefault(),N.data.files.length===0){V.error("Please select at least one file to upload.");return}N.processing=!0;const z=new FormData;N.data.files.forEach(U=>{z.append("files[]",U)}),ke.post(route("project-hub.tasks.attachments.store",e.id),z,{headers:{"Content-Type":"multipart/form-data"}}).then(U=>{const Re=U.data.attachments||[];Re.length>0?(de(ze=>[...ze,...Re]),V.success(U.data.message||"Attachments uploaded!")):V.error("Upload succeeded but no new attachments were returned.")}).catch(U=>{console.error("Upload Error:",U);const Re=U.response?.data?.message||"Failed to upload attachments.";V.error(Re)}).finally(()=>{N.processing=!1,N.reset("files")})},ue=R=>{u(R),a(!0)},ae=()=>{ke.delete(`/project-hub/attachments/${d.id}`,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(R=>{V.success("Attachment deleted successfully!"),a(!1),de(z=>z.filter(U=>U.id!==d.id))}).catch(R=>{console.error("Delete Error:",R),V.error("Failed to delete attachment. Please try again.")})},Se=y.useMemo(()=>r?.map(R=>({value:R.id,label:es(R),profilePicture:R.profile_picture,role:R.academician?"Academician":R.postgraduate?"Postgraduate":R.undergraduate?"Undergraduate":"User"}))||[],[r]),fe=y.useMemo(()=>{const R=_.data.assignees||[];return Se.filter(z=>R.includes(z.value))},[Se,_.data.assignees]),X=e&&e.paper_writing_task;return!e||!t?null:c.jsxs(c.Fragment,{children:[c.jsx(We,{appear:!0,show:t,as:y.Fragment,children:c.jsx(rs,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:n,children:c.jsxs("div",{className:"min-h-screen px-4 text-center",children:[c.jsx(We.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:c.jsx(ss,{className:"fixed inset-0 bg-black bg-opacity-30"})}),c.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"â€‹"}),c.jsx(We.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:c.jsxs(is,{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[c.jsxs(os,{as:"h3",className:"text-lg font-semibold text-gray-900",children:[m?"Create Task":X?"Paper Writing Task Details":"Task Details",X&&c.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[c.jsx(_t,{className:"w-3 h-3 mr-1"}),"Paper Task"]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[!m&&ne(e)&&!e.archived_at&&c.jsx("button",{type:"button",onClick:Ie,className:"text-gray-500 hover:text-gray-700 p-1",title:"Archive task",children:c.jsx(as,{className:"w-5 h-5"})}),!m&&c.jsx("button",{type:"button",onClick:()=>o(!0),className:"text-red-500 hover:text-red-700 p-1",title:"Delete task",children:c.jsx(qt,{className:"w-5 h-5"})}),c.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-500 p-1",children:c.jsx(Dt,{className:"w-5 h-5"})})]})]}),c.jsxs("form",{onSubmit:Q,className:"mt-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),c.jsx("input",{type:"text",id:"title",value:_.data.title,onChange:R=>_.setData("title",R.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Task title",required:!0}),_.errors.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.title})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),c.jsx("textarea",{id:"description",value:_.data.description||"",onChange:R=>_.setData("description",R.target.value),rows:4,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Task description"})]}),X&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("h4",{className:"flex items-center text-sm font-medium text-gray-700 mb-4",children:[c.jsx(_t,{className:"w-5 h-5 mr-2 text-blue-500"}),"Paper Writing Details"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area_of_study",className:"block text-sm font-medium text-gray-700",children:c.jsxs("span",{className:"flex items-center",children:[c.jsx(qc,{className:"w-4 h-4 mr-1"}),"Area of Study"]})}),c.jsx(_n,{id:"area_of_study",isMulti:!0,name:"area_of_study",options:s.map(R=>({value:`${R.field_of_research_id}-${R.research_area_id}-${R.niche_domain_id}`,label:`${R.field_of_research_name} - ${R.research_area_name} - ${R.niche_domain_name}`})),value:_.data.area_of_study?.map(R=>{const z=s.find(U=>`${U.field_of_research_id}-${U.research_area_id}-${U.niche_domain_id}`===R);return{value:R,label:z?`${z.field_of_research_name} - ${z.research_area_name} - ${z.niche_domain_name}`:R}}),onChange:R=>{const z=R.map(U=>U.value);_.setData("area_of_study",z)},className:"mt-1 block w-full",classNamePrefix:"select",placeholder:"Select research areas...",menuPortalTarget:document.body,styles:{menuPortal:R=>({...R,zIndex:9999}),menu:R=>({...R,maxHeight:"215px",overflowY:"auto"})}}),_.errors.area_of_study&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.area_of_study})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"paper_type",className:"block text-sm font-medium text-gray-700",children:c.jsxs("span",{className:"flex items-center",children:[c.jsx(id,{className:"w-4 h-4 mr-1"}),"Paper Type"]})}),c.jsxs("select",{id:"paper_type",value:_.data.paper_type,onChange:R=>_.setData("paper_type",R.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",disabled:!0,children:"Select a paper type"}),c.jsx("option",{value:"Experimental Paper",children:"Experimental Paper"}),c.jsx("option",{value:"Systematic Literature Review",children:"Systematic Literature Review"}),c.jsx("option",{value:"Conceptual Paper",children:"Conceptual Paper"}),c.jsx("option",{value:"Literature Review",children:"Literature Review"}),c.jsx("option",{value:"Thesis",children:"Thesis"}),c.jsx("option",{value:"Book Chapter",children:"Book Chapter"}),c.jsx("option",{value:"Research Proposal",children:"Research Proposal"}),c.jsx("option",{value:"Conference Paper",children:"Conference Paper"}),c.jsx("option",{value:"Conference Abstract",children:"Conference Abstract"}),c.jsx("option",{value:"Poster Presentation",children:"Poster Presentation"})]}),_.errors.paper_type&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.paper_type})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"publication_type",className:"block text-sm font-medium text-gray-700",children:c.jsxs("span",{className:"flex items-center",children:[c.jsx(_t,{className:"w-4 h-4 mr-1"}),"Publication Type"]})}),c.jsxs("select",{id:"publication_type",value:_.data.publication_type,onChange:R=>_.setData("publication_type",R.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",disabled:!0,children:"Select a publication type"}),c.jsx("option",{value:"Journal Article",children:"Journal Article"}),c.jsx("option",{value:"Conference",children:"Conference"}),c.jsx("option",{value:"Book",children:"Book"}),c.jsx("option",{value:"Book Chapter",children:"Book Chapter"}),c.jsx("option",{value:"Technical Report",children:"Technical Report"}),c.jsx("option",{value:"Dataset",children:"Dataset"}),c.jsx("option",{value:"Software / Code",children:"Software / Code"})]}),_.errors.publication_type&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.publication_type})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"scopus_info",className:"block text-sm font-medium text-gray-700",children:"Scopus/ WOS Quartile"}),c.jsxs("select",{id:"scopus_info",value:_.data.scopus_info,onChange:R=>_.setData("scopus_info",R.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",disabled:!0,children:"Select a quartile"}),c.jsx("option",{value:"WOS Q1",children:"WOS Q1"}),c.jsx("option",{value:"WOS Q2",children:"WOS Q2"}),c.jsx("option",{value:"WOS Q3",children:"WOS Q3"}),c.jsx("option",{value:"WOS Q4",children:"WOS Q4"}),c.jsx("option",{value:"Scopus Q1",children:"Scopus Q1"}),c.jsx("option",{value:"Scopus Q2",children:"Scopus Q2"}),c.jsx("option",{value:"Scopus Q3",children:"Scopus Q3"}),c.jsx("option",{value:"Scopus Q4",children:"Scopus Q4"})]}),_.errors.scopus_info&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.scopus_info})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"progress",className:"block text-sm font-medium text-gray-700",children:c.jsxs("span",{className:"flex items-center",children:[c.jsx(Qc,{className:"w-4 h-4 mr-1"}),"Progress"]})}),c.jsx("select",{id:"progress",value:_.data.progress,onChange:R=>_.setData("progress",R.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Na.map(R=>c.jsx("option",{value:R.value,children:R.label},R.value))}),_.errors.progress&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.progress})]})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700",children:"Due Date & Time"}),c.jsxs("div",{className:"mt-1 flex items-center",children:[c.jsx("span",{className:"mr-2 text-gray-500",children:c.jsx(gt,{className:"w-5 h-5"})}),c.jsx("input",{type:"datetime-local",id:"due_date",value:_.data.due_date||"",onChange:R=>_.setData("due_date",R.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),c.jsx("div",{className:"mt-1",children:c.jsxs("select",{id:"priority",value:_.data.priority,onChange:R=>_.setData("priority",R.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"Low",children:"Low"}),c.jsx("option",{value:"Medium",children:"Medium"}),c.jsx("option",{value:"High",children:"High"}),c.jsx("option",{value:"Urgent",children:"Urgent"})]})})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"assignees",className:"block text-sm font-medium text-gray-700",children:"Assignees"}),c.jsx("div",{className:"mt-1 flex rounded-md shadow-sm",children:c.jsxs("div",{className:"relative flex items-stretch flex-grow",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(jr,{className:"h-4 w-4 text-gray-400"})}),c.jsx(_n,{isMulti:!0,name:"assignees",options:Se,value:fe,onChange:R=>{_.setData("assignees",R?.map(z=>z.value)||[])},className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",classNamePrefix:"select",placeholder:"Select assignees...",menuPortalTarget:document.body,formatOptionLabel:R=>c.jsxs("div",{className:"flex items-center",children:[R.profilePicture&&c.jsx("img",{src:R.profilePicture,alt:R.label,className:"w-6 h-6 rounded-full mr-2 object-cover"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm",children:R.label}),c.jsx("div",{className:"text-xs text-gray-500",children:R.role})]})]}),styles:{menuPortal:R=>({...R,zIndex:9999}),option:(R,z)=>({...R,padding:"8px 12px"})}})]})}),_.errors.assignees&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.assignees})]}),m&&c.jsxs("div",{className:"mt-6",children:[c.jsx("label",{htmlFor:"task-attachment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Attachment (optional)"}),c.jsx("input",{type:"file",id:"task-attachment",multiple:!0,onChange:R=>_.setData("files",Array.from(R.target.files)),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),_.errors.files&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.errors.files}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"You can attach multiple files when creating the task. Additional files can be added after creation."})]}),c.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t",children:c.jsx("button",{type:"submit",disabled:_.processing,className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:_.processing?"Saving...":m?"Create Task":"Save Changes"})})]}),!m&&c.jsxs("div",{className:"mt-6 border-t pt-4",children:[c.jsxs("h4",{className:"flex items-center text-sm font-medium text-gray-700 mb-4",children:[c.jsx(Eo,{className:"w-5 h-5 mr-2"}),"Attachments (",le?.length||0,")"]}),le&&le.length>0&&c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:le.map(R=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(ls,{className:"w-5 h-5 mr-2 text-gray-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:R.original_name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[R.size_formatted," Â· ",new Date(R.created_at).toLocaleString()]})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("a",{href:R.url,onClick:z=>{(R.mime_type?.startsWith("image/")||R.mime_type==="application/pdf")&&R.size<T&&(z.preventDefault(),g(R))},download:R.original_name,className:"p-1 text-blue-500 hover:text-blue-700",target:"_blank",rel:"noopener noreferrer",children:c.jsx(Yc,{className:"w-4 h-4"})}),c.jsx("button",{type:"button",onClick:()=>ue(R),className:"p-1 text-red-500 hover:text-red-700",children:c.jsx(qt,{className:"w-4 h-4"})})]})]},R.id))}),e&&(!le||le.length===0)&&c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-sm text-gray-500 italic",children:"No attachments yet"})}),c.jsx("form",{onSubmit:B,className:"mt-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("input",{type:"file",id:"attachment",multiple:!0,onChange:R=>N.setData("files",Array.from(R.target.files)),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),N.errors.files&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.errors.files})]}),c.jsx("button",{type:"submit",disabled:N.processing||!N.data.files.length,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:"Upload"})]})})]}),!m&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mt-6 border-t pt-4",children:[c.jsxs("h4",{className:"flex items-center text-sm font-medium text-gray-700 mb-4",children:[c.jsx(Co,{className:"w-5 h-5 mr-2"}),"Comments (",f.length||0,")"]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto mb-4",children:f&&f.length>0?f.map(R=>{const z=Py(R.user),U=es(R.user);return c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:z,alt:U})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm",children:c.jsx("span",{className:"font-medium text-gray-900",children:U})}),c.jsx("div",{className:"mt-1 text-sm text-gray-700",children:c.jsx("p",{children:R.content})}),c.jsx("div",{className:"mt-1 text-xs text-gray-500",children:c.jsx("p",{children:new Date(R.created_at).toLocaleString()})})]})]},R.id)}):c.jsx("p",{className:"text-sm text-gray-500 italic",children:"No comments yet"})}),c.jsx("form",{onSubmit:we,className:"mt-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("textarea",{id:"comment",value:C.data.content,onChange:R=>C.setData("content",R.target.value),placeholder:"Add a comment...",rows:2,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),C.errors.content&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.errors.content})]}),c.jsx("button",{type:"submit",disabled:C.processing||!C.data.content.trim(),className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:c.jsx(Zc,{className:"w-4 h-4"})})]})})]}),c.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(fo,{className:"w-4 h-4 mr-1"}),c.jsxs("span",{children:["Created: ",new Date(e.created_at).toLocaleString()]})]}),e.creator&&c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx(jr,{className:"w-4 h-4 mr-1"}),c.jsxs("span",{children:["Created by: ",e.creator.full_name]})]})]})]})]})})]})})}),c.jsx(Qt,{show:i,onClose:()=>o(!1),onConfirm:re,title:"Delete Task",message:`Are you sure you want to delete the task "${e?.title||"Untitled"}"? This action cannot be undone.`}),c.jsx(Qt,{show:l,onClose:()=>a(!1),onConfirm:ae,title:"Delete Attachment",message:`Are you sure you want to delete the attachment "${d?.original_name}"? This action cannot be undone.`}),c.jsx(Wc,{file:h,onClose:()=>g(null)}),b&&A&&x&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsx(us,{task:A,promptData:x,onYes:async()=>{const R=await v(A.id);R.success&&j(R.task),E(!1)},onNo:()=>{E(!1)},visible:b})})]})}function Oy({task:e=null,show:t,onClose:n,listId:r,workspaceMembers:s,researchOptions:i=[]}){const[o,l]=y.useState(!1),[a,d]=y.useState(null),u=!!e,{addTaskToCalendar:h}=fs(),[g,f]=y.useState(!1),[p,m]=y.useState(null),[v,b]=y.useState(null),{props:E}=ts(),x=Bt({title:e?.title||"",description:e?.description||"",due_date:e?.due_date||"",assignees:e?.assignees?.map(C=>C.id)||[],priority:e?.priority||"Medium",area_of_study:e?.paperWritingTask?.area_of_study||[],paper_type:e?.paperWritingTask?.paper_type||"",publication_type:e?.paperWritingTask?.publication_type||"",scopus_info:e?.paperWritingTask?.scopus_info||"",progress:e?.paperWritingTask?.progress||"Not Started",files:[],task_type:"paper",list_id:e?.board_list_id||r||null}),D=Na;y.useEffect(()=>{const C=E?.flash?.google_calendar_prompt,N=E?.flash?.task_for_calendar;C?.show_prompt&&N&&e?.id===N&&(b(e),m(C),f(!0))},[E?.flash]),y.useEffect(()=>{if(e){let C="";if(e.due_date)try{const N=new Date(e.due_date);isNaN(N)||(C=Ve(N,"yyyy-MM-dd'T'HH:mm"))}catch(N){console.error("Error parsing date:",N)}x.setData({title:e.title||"",description:e.description||"",due_date:C,assignees:e.assignees?.map(N=>N.id)||[],priority:e.priority||"Medium",area_of_study:e.paperWritingTask?.area_of_study||[],paper_type:e.paperWritingTask?.paper_type||"",publication_type:e.paperWritingTask?.publication_type||"",scopus_info:e.paperWritingTask?.scopus_info||"",progress:e.paperWritingTask?.progress||"Not Started",files:[],task_type:"paper",list_id:e.board_list_id||r||null})}},[e,r]),y.useEffect(()=>{t&&!u&&x.reset()},[t,u]);const A=C=>{const N=Array.from(C.target.files);N.length>0&&(d(N[0]),x.setData("files",N))},j=C=>{C.preventDefault(),u||x.setData("list_id",r),x.setData("task_type","paper"),u?J.put(route("project-hub.tasks.update",e.id),x.data,{forceFormData:!0,onSuccess:()=>{V.success("Paper task updated successfully!")},onError:N=>{console.error("Update Errors:",N),V.error("Failed to update paper task. Please check the form for errors.")}}):J.post(route("project-hub.lists.tasks.store",r),x.data,{forceFormData:!0,onSuccess:()=>{V.success("Paper task created successfully!"),x.reset(),x.setData("files",[]),d(null),n()},onError:N=>{if(console.error("Submission Errors:",N),V.error("Failed to create paper task. Please check the form for errors."),Object.keys(N).length>0){const Q=Object.entries(N).map(([we,re])=>`${we}: ${re}`).join(`
`);console.error("Field errors:",Q)}}})},M=()=>{J.delete(route("project-hub.tasks.destroy",e.id),{preserveScroll:!0,onSuccess:()=>{V.success(`Task "${e.title}" deleted successfully.`),n()},onError:C=>{console.error("Delete Error:",C),V.error("Failed to delete the task.")}})},T=s?.map(C=>({value:C.id,label:es(C),profilePicture:C.profile_picture,role:C.academician?"Academician":C.postgraduate?"Postgraduate":C.undergraduate?"Undergraduate":"User"}))||[],_=T.filter(C=>x.data.assignees?.includes(C.value));return c.jsxs(c.Fragment,{children:[c.jsx(We,{appear:!0,show:t,as:y.Fragment,children:c.jsx(rs,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:n,children:c.jsxs("div",{className:"min-h-screen px-4 text-center",children:[c.jsx(We.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:c.jsx(ss,{className:"fixed inset-0 bg-black bg-opacity-30"})}),c.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"â€‹"}),c.jsx(We.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:c.jsxs(is,{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[c.jsx(os,{as:"h3",className:"text-lg font-semibold text-gray-900",children:u?"Edit Paper Writing Task":"Create Paper Writing Task"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[u&&c.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-red-500 hover:text-red-700 p-1",children:c.jsx(qt,{className:"w-5 h-5"})}),c.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-500 p-1",children:c.jsx(Dt,{className:"w-5 h-5"})})]})]}),c.jsxs("form",{onSubmit:j,className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Basic Task Details"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),c.jsx("input",{type:"text",id:"title",value:x.data.title,onChange:C=>x.setData("title",C.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Task title",required:!0}),x.errors.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.errors.title})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),c.jsx("textarea",{id:"description",value:x.data.description||"",onChange:C=>x.setData("description",C.target.value),rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Task description"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700",children:"Due Date & Time"}),c.jsx("div",{className:"mt-1 flex rounded-md shadow-sm",children:c.jsxs("div",{className:"relative flex items-stretch flex-grow",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(gt,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{type:"datetime-local",id:"due_date",value:x.data.due_date||"",onChange:C=>x.setData("due_date",C.target.value),className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),c.jsxs("select",{id:"priority",value:x.data.priority,onChange:C=>x.setData("priority",C.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"Low",children:"Low"}),c.jsx("option",{value:"Medium",children:"Medium"}),c.jsx("option",{value:"High",children:"High"}),c.jsx("option",{value:"Urgent",children:"Urgent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"assignees",className:"block text-sm font-medium text-gray-700",children:"Assignees"}),c.jsx("div",{className:"mt-1 flex rounded-md shadow-sm",children:c.jsxs("div",{className:"relative flex items-stretch flex-grow",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(jr,{className:"h-4 w-4 text-gray-400"})}),c.jsx(_n,{isMulti:!0,name:"assignees",options:T,value:_,onChange:C=>{x.setData("assignees",C?.map(N=>N.value)||[])},className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",classNamePrefix:"select",placeholder:"Select assignees...",menuPortalTarget:document.body,formatOptionLabel:C=>c.jsxs("div",{className:"flex items-center",children:[C.profilePicture&&c.jsx("img",{src:C.profilePicture,alt:C.label,className:"w-6 h-6 rounded-full mr-2 object-cover"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm",children:C.label}),c.jsx("div",{className:"text-xs text-gray-500",children:C.role})]})]}),styles:{menuPortal:C=>({...C,zIndex:9999}),option:(C,N)=>({...C,padding:"8px 12px"})}})]})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Paper Details"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area_of_study",className:"block text-sm font-medium text-gray-700",children:"Area of Study"}),c.jsx(_n,{id:"area_of_study",isMulti:!0,name:"area_of_study",options:i.map(C=>({value:`${C.field_of_research_id}-${C.research_area_id}-${C.niche_domain_id}`,label:`${C.field_of_research_name} - ${C.research_area_name} - ${C.niche_domain_name}`})),value:x.data.area_of_study?.map(C=>{const N=i.find(Q=>`${Q.field_of_research_id}-${Q.research_area_id}-${Q.niche_domain_id}`===C);return{value:C,label:N?`${N.field_of_research_name} - ${N.research_area_name} - ${N.niche_domain_name}`:C}}),onChange:C=>{const N=C.map(Q=>Q.value);x.setData("area_of_study",N)},className:"mt-1 block w-full",classNamePrefix:"select",placeholder:"Select research areas...",menuPortalTarget:document.body,styles:{menuPortal:C=>({...C,zIndex:9999}),menu:C=>({...C,maxHeight:"215px",overflowY:"auto"})}})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"paper_type",className:"block text-sm font-medium text-gray-700",children:"Paper Type"}),c.jsxs("select",{id:"paper_type",value:x.data.paper_type||"",onChange:C=>x.setData("paper_type",C.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",disabled:!0,children:"Select a paper type"}),c.jsx("option",{value:"Experimental Paper",children:"Experimental Paper"}),c.jsx("option",{value:"Systematic Literature Review",children:"Systematic Literature Review"}),c.jsx("option",{value:"Conceptual Paper",children:"Conceptual Paper"}),c.jsx("option",{value:"Literature Review",children:"Literature Review"}),c.jsx("option",{value:"Thesis",children:"Thesis"}),c.jsx("option",{value:"Book Chapter",children:"Book Chapter"}),c.jsx("option",{value:"Research Proposal",children:"Research Proposal"}),c.jsx("option",{value:"Conference Paper",children:"Conference Paper"}),c.jsx("option",{value:"Conference Abstract",children:"Conference Abstract"}),c.jsx("option",{value:"Poster Presentation",children:"Poster Presentation"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"publication_type",className:"block text-sm font-medium text-gray-700",children:"Publication Type"}),c.jsxs("select",{id:"publication_type",value:x.data.publication_type||"",onChange:C=>x.setData("publication_type",C.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",disabled:!0,children:"Select a publication type"}),c.jsx("option",{value:"Journal Article",children:"Journal Article"}),c.jsx("option",{value:"Conference",children:"Conference"}),c.jsx("option",{value:"Book",children:"Book"}),c.jsx("option",{value:"Book Chapter",children:"Book Chapter"}),c.jsx("option",{value:"Technical Report",children:"Technical Report"}),c.jsx("option",{value:"Dataset",children:"Dataset"}),c.jsx("option",{value:"Software / Code",children:"Software / Code"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"scopus_info",className:"block text-sm font-medium text-gray-700",children:"Scopus/ WOS Quartile"}),c.jsxs("select",{id:"scopus_info",value:x.data.scopus_info||"",onChange:C=>x.setData("scopus_info",C.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[c.jsx("option",{value:"",disabled:!0,children:"Select a quartile"}),c.jsx("option",{value:"WOS Q1",children:"WOS Q1"}),c.jsx("option",{value:"WOS Q2",children:"WOS Q2"}),c.jsx("option",{value:"WOS Q3",children:"WOS Q3"}),c.jsx("option",{value:"WOS Q4",children:"WOS Q4"}),c.jsx("option",{value:"Scopus Q1",children:"Scopus Q1"}),c.jsx("option",{value:"Scopus Q2",children:"Scopus Q2"}),c.jsx("option",{value:"Scopus Q3",children:"Scopus Q3"}),c.jsx("option",{value:"Scopus Q4",children:"Scopus Q4"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"progress",className:"block text-sm font-medium text-gray-700",children:"Progress"}),c.jsx("select",{id:"progress",value:x.data.progress,onChange:C=>x.setData("progress",C.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:D.map(C=>c.jsx("option",{value:C.value,children:C.label},C.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pdf_attachment",className:"block text-sm font-medium text-gray-700",children:"PDF Attachment"}),c.jsxs("div",{className:"mt-1 flex items-center",children:[c.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none",children:[c.jsxs("span",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[c.jsx(Xc,{className:"h-4 w-4 mr-2"}),a?"Change Files":"Upload PDFs"]}),c.jsx("input",{id:"pdf_attachment",name:"pdf_attachment",type:"file",accept:".pdf",multiple:!0,className:"sr-only",onChange:A})]}),a&&c.jsx("span",{className:"ml-3 text-sm text-gray-500",children:x.data.files.length>1?`${a.name} and ${x.data.files.length-1} more file(s)`:a.name}),e?.paperWritingTask?.pdf_attachment_path&&!a&&c.jsxs("span",{className:"ml-3 text-sm text-gray-500 flex items-center",children:[c.jsx(ls,{className:"h-4 w-4 mr-1"}),"Current file: ",e.paperWritingTask.pdf_attachment_path.split("/").pop()]})]})]})]})]}),c.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:n,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),c.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:x.processing,children:x.processing?"Saving...":u?"Update Task":"Create Task"})]})]})]})})]})})}),c.jsx(Qt,{show:o,onClose:()=>l(!1),onConfirm:M,title:"Delete Task",message:"Are you sure you want to delete this task? This action cannot be undone."}),g&&v&&p&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsx(us,{task:v,promptData:p,onYes:async()=>{const C=await h(v.id);C.success&&b(C.task),f(!1)},onNo:()=>{f(!1)},visible:g})})]})}function Hy({show:e,onClose:t,onSelectTaskType:n}){return c.jsx(We,{appear:!0,show:e,as:y.Fragment,children:c.jsx(rs,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:t,children:c.jsxs("div",{className:"min-h-screen px-4 text-center",children:[c.jsx(We.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:c.jsx(ss,{className:"fixed inset-0 bg-black bg-opacity-30"})}),c.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"â€‹"}),c.jsx(We.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:c.jsxs(is,{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[c.jsx(os,{as:"h3",className:"text-lg font-semibold text-gray-900",children:"Choose Task Type"}),c.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-500 p-1",children:c.jsx(Dt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>n("normal"),className:"flex flex-col items-center p-6 border-2 border-gray-300 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-colors",children:[c.jsx(Jc,{className:"w-12 h-12 text-indigo-600 mb-3"}),c.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Create a Normal Task"}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Create a standard task with basic details and tracking."})]}),c.jsxs("button",{type:"button",onClick:()=>n("paper"),className:"flex flex-col items-center p-6 border-2 border-gray-300 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-colors",children:[c.jsx(ls,{className:"w-12 h-12 text-indigo-600 mb-3"}),c.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Create a Paper Writing Task"}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Create a specialized task for academic paper writing with additional fields."})]})]})]})})]})})})}function Ly({show:e,onClose:t,boardId:n}){const[r,s]=y.useState([]),[i,o]=y.useState(!1);y.useEffect(()=>{e&&(o(!0),ke.get(route("project-hub.boards.archived",n)).then(a=>{s(a.data.data||[])}).catch(()=>console.error("Failed to fetch archived tasks")).finally(()=>o(!1)))},[e,n]);const l=a=>{J.post(route("project-hub.tasks.archive",a),{},{preserveScroll:!0,onSuccess:()=>{V.success("Task restored to board!"),s(d=>d.filter(u=>u.id!==a)),J.reload({only:["initialBoardData"]})},onError:()=>V.error("Failed to restore task.")})};return c.jsx(_o,{show:e,onClose:t,maxWidth:"2xl",children:c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Archived Tasks"}),c.jsxs("div",{className:"mt-4 max-h-96 overflow-y-auto",children:[i&&c.jsx("p",{children:"Loading..."}),!i&&r.length===0&&c.jsx("p",{children:"No archived tasks."}),c.jsx("ul",{className:"space-y-3",children:r.map(a=>c.jsxs("li",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center space-x-3",children:[c.jsxs("span",{children:["Archived: ",a.archived_at?new Date(a.archived_at).toLocaleDateString():""]}),c.jsx("span",{className:"font-bold",children:"Â·"}),c.jsxs("span",{children:["In list: ",c.jsx("span",{className:"font-semibold",children:a.list_name})]})]})]}),c.jsx("div",{className:"ml-4",children:c.jsx("button",{onClick:()=>l(a.id),className:"inline-flex items-center px-3 py-1.5 bg-white border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50",children:"Restore"})})]},a.id))})]}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:t,className:"inline-flex items-center px-3 py-1.5 bg-white border border-gray-300 rounded-md text-xs text-gray-700 hover:bg-gray-50",children:"Close"})})]})})}function By({initialBoardData:e,researchOptions:t=[]}){const[n,r]=y.useState(null),[s,i]=y.useState(null),[o,l]=y.useState(null),[a,d]=y.useState(null),[u,h]=y.useState("board"),[g,f]=y.useState(!0),[p,m]=y.useState(!1),[v,b]=y.useState(null),[E,x]=y.useState(null),[D,A]=y.useState(null),[j,M]=y.useState(!1),[T,_]=y.useState(!1),[C,N]=y.useState(!1),[Q,we]=y.useState(null),{props:re}=ts(),{addTaskToCalendar:Ie}=fs(),[le,de]=y.useState(!1),[B,ue]=y.useState(null),[ae,Se]=y.useState(null),fe=async I=>{try{await J.put(route("project-hub.boards.update",n.id),{name:I},{preserveScroll:!0,onSuccess:()=>{V.success("Board renamed successfully.")},onError:k=>{console.error("Error renaming board:",k),V.error("Failed to rename board. Please try again.")}})}catch(k){console.error("Error renaming board:",k),V.error("Failed to rename board. Please try again.")}},X=Bt({name:""});y.useEffect(()=>{if(e){const I={...e,lists:e.lists?.data||[],parent:e.parent||{id:null,name:"Unknown",type:"unknown",members:[]}};r(I),f(!1)}else f(!0)},[e]),y.useEffect(()=>{console.log("Flash data:",re?.flash);const I=re?.flash?.google_calendar_prompt,k=re?.flash?.task_for_calendar;console.log("Calendar prompt data:",I),console.log("Task data:",k),I?.show_prompt&&k&&(Se(k),ue(I),de(!0),console.log("Showing Google Calendar toast"))},[re?.flash]);const R=()=>{if(!n||!n.parent)return{href:route("project-hub.index"),text:"NexLab"};const I=n.parent,k=I.type;return I.id?k.toLowerCase()==="workspace"?{href:route("project-hub.workspaces.show",I.id),text:I.name||"Workspace"}:k.toLowerCase()==="project"?{href:route("project-hub.projects.show",I.id),text:I.name||"Project"}:{href:route("project-hub.index"),text:"NexLab"}:{href:route("project-hub.index"),text:"NexLab"}};y.useEffect(()=>{if(!n||!n.id)return;console.log(`Subscribing to board channel: boards.${n.id}`);const I=window.Echo.private(`boards.${n.id}`);return I.listen(".task.created",k=>{console.log("task.created:",k),r(P=>{const $=P.lists.map(F=>F.id===k.task.list_id?{...F,tasks:[...F.tasks,k.task]}:F);return{...P,lists:$}})}),I.listen(".task.updated",k=>{console.log("task.updated:",k),r(P=>{const $=P.lists.map(F=>({...F,tasks:F.tasks.map(G=>G.id===k.task.id?{...G,...k.task}:G)}));return{...P,lists:$}})}),I.listen(".task.deleted",k=>{console.log("task.deleted:",k),r(P=>{const $=P.lists.map(F=>F.id===k.list_id?{...F,tasks:F.tasks.filter(G=>G.id!==k.task_id)}:F);return{...P,lists:$}})}),I.listen(".task.moved",k=>{console.log("task.moved:",k),d(k.task.id),setTimeout(()=>d(null),2e3),U(k.task)}),I.listen(".task.assignees.changed",k=>{console.log("task.assignees.changed:",k),r(P=>{const $=P.lists.map(F=>({...F,tasks:F.tasks.map(G=>G.id===k.task_id?{...G,assignees:k.assignees}:G)}));return{...P,lists:$}})}),I.listen(".task.completion.toggled",k=>{console.log("task.completion.toggled:",k),r(P=>{const $=P.lists.map(F=>({...F,tasks:F.tasks.map(G=>G.id===k.task_id?{...G,is_completed:k.is_completed}:G)}));return{...P,lists:$}})}),I.listen(".task.archive.toggled",k=>{console.log("task.archive.toggled:",k),r(P=>{const $=P.lists.map(F=>({...F,tasks:k.is_archived?F.tasks.filter(G=>G.id!==k.task_id):F.tasks}));return{...P,lists:$}})}),I.listen(".board-list.created",k=>{console.log("board-list.created:",k),r(P=>({...P,lists:[...P.lists,{...k.board_list,tasks:[]}]}))}),I.listen(".board-list.updated",k=>{console.log("board-list.updated:",k),r(P=>{const $=P.lists.map(F=>F.id===k.board_list.id?{...F,name:k.board_list.name}:F);return{...P,lists:$}})}),I.listen(".board-list.deleted",k=>{console.log("board-list.deleted:",k),r(P=>({...P,lists:P.lists.filter($=>$.id!==k.list_id)}))}),I.listen(".board-list.reordered",k=>{console.log("board-list.reordered:",k),r(P=>{const $=[...P.lists].sort((F,G)=>{const Ee=k.lists.find(De=>De.id===F.id)?.order||0,te=k.lists.find(De=>De.id===G.id)?.order||0;return Ee-te});return{...P,lists:$}})}),I.listen(".board.updated",k=>{console.log("board.updated:",k),k.board.name!==n.name&&r(P=>({...P,name:k.board.name}))}),()=>{console.log(`Unsubscribing from board channel: boards.${n.id}`),I.stopListening(".task.created"),I.stopListening(".task.updated"),I.stopListening(".task.deleted"),I.stopListening(".task.moved"),I.stopListening(".task.assignees.changed"),I.stopListening(".task.completion.toggled"),I.stopListening(".task.archive.toggled"),I.stopListening(".board.updated"),I.stopListening(".board-list.created"),I.stopListening(".board-list.updated"),I.stopListening(".board-list.deleted"),I.stopListening(".board-list.reordered"),window.Echo.leave(`boards.${n.id}`)}},[n?.id]);const z=y.useMemo(()=>!n||!n.lists?[]:(Array.isArray(n.lists)?n.lists:[]).flatMap(k=>(Array.isArray(k.tasks)?k.tasks:[]).map($=>({...$,list_id:k.id,list_name:k.name}))),[n]),U=I=>{const k=structuredClone(n);let P=-1,$=-1;for(let F=0;F<k.lists.length;F++){const G=k.lists[F].tasks.findIndex(Ee=>Ee.id===I.id);if(G!==-1){P=F,$=G;break}}if(P!==-1&&$!==-1){k.lists[P].tasks.splice($,1);const F=k.lists.findIndex(G=>G.id===I.list_id);if(F!==-1){const G={...I,list_id:I.list_id};if(k.lists[F].tasks.length>0){let Ee=!1;for(let te=0;te<k.lists[F].tasks.length;te++)if(k.lists[F].tasks[te].order>I.order){k.lists[F].tasks.splice(te,0,G),Ee=!0;break}Ee||k.lists[F].tasks.push(G)}else k.lists[F].tasks.push(G);r(k)}}},Re=tc(nc(oc,{activationConstraint:{distance:8}})),ze=I=>{const{active:k}=I,P=k.id;if(P&&P.toString().startsWith("task-")){const $=k.data.current.task.list_id,F=parseInt(P.replace("task-","")),G=n.lists.find(Ee=>Ee.id===$);if(G){const Ee=G.tasks.find(te=>te.id===F);Ee&&i(Ee)}}else if(P&&P.toString().startsWith("list-")){const $=parseInt(P.replace("list-","")),F=n.lists.find(G=>G.id===$);F&&l({...F,tasks:F.tasks||[]})}},Ye=I=>{const{active:k,over:P}=I;if(i(null),l(null),!P)return;const $=k.id,F=P.id;if($===F)return;const G=k.data.current?.type==="List"||$.toString().startsWith("list-"),Ee=k.data.current?.type==="Task"||$.toString().startsWith("task-");if(G&&(P.data.current?.type==="List"||F.toString().startsWith("list-"))){r(te=>{const De=te.lists.findIndex(Me=>`list-${Me.id}`===$.toString()),ye=te.lists.findIndex(Me=>`list-${Me.id}`===F.toString());if(De===-1||ye===-1)return te;const be=An(te.lists,De,ye),Ue=be.map((Me,ot)=>({id:Me.id,order:ot}));return J.post(route("project-hub.lists.reorder"),{lists:Ue},{preserveScroll:!0,preserveState:!0}),{...te,lists:be}});return}if(Ee){const te=k.data.current?.task?.list_id,De=P.data.current?.type==="List"?P.data.current.list.id:P.data.current?.type==="Task"?P.data.current.task.list_id:void 0;if(!te||!De)return;if(te===De){const ye=n.lists,be=ye.findIndex(Te=>Te.id===te);if(be===-1)return;const Ue=ye[be].tasks.findIndex(Te=>`task-${Te.id}`===$.toString()),Me=ye[be].tasks.findIndex(Te=>`task-${Te.id}`===F.toString());if(Ue===-1||Me===-1)return;const ot=An(ye[be].tasks,Ue,Me),Ft=[...ye];Ft[be]={...Ft[be],tasks:ot},r(Te=>({...Te,lists:Ft}));const lt=ot.map(Te=>Te.id);J.post(route("project-hub.tasks.reorder"),{list_id:te,task_ids:lt},{preserveScroll:!0,preserveState:!0});return}if(te!==De){const ye=n.lists,be=ye.findIndex(je=>je.id===te),Ue=ye.findIndex(je=>je.id===De);if(be===-1||Ue===-1)return;const Me=ye[be].tasks.findIndex(je=>`task-${je.id}`===$.toString());if(Me===-1)return;const ot=[...ye[be].tasks],[Ft]=ot.splice(Me,1),lt=[...ye[Ue].tasks],Te=P.data.current?.type==="Task"?lt.findIndex(je=>`task-${je.id}`===F.toString()):lt.length,Va=Te===-1?lt.length:Te;lt.splice(Va,0,Ft);const $s=lt,Ot=[...ye];Ot[be]={...Ot[be],tasks:ot},Ot[Ue]={...Ot[Ue],tasks:$s},r(je=>({...je,lists:Ot}));const $a=parseInt($.toString().replace("task-","")),za=$s.map(je=>je.id);J.post(route("project-hub.tasks.move",$a),{new_list_id:De,order_in_new_list:za},{preserveScroll:!0,preserveState:!0});return}}},se=I=>{if(I.preventDefault(),!n){console.error("Board state is missing");return}const k=parseInt(n.id);if(!k||isNaN(k)){console.error("Invalid board ID:",n.id);return}X.post(route("project-hub.boards.lists.store",k),{onSuccess:()=>{m(!1),X.reset(),J.reload({only:["initialBoardData"]})},onError:P=>{console.error("Failed to create list:",P),alert("Failed to create list. Please try again.")}})},er=I=>{b(I)},nn=()=>{v&&J.delete(route("project-hub.lists.destroy",v.id),{preserveScroll:!0,onSuccess:()=>{V.success(`List "${v.name}" deleted successfully.`),b(null),J.reload({only:["initialBoardData"]})},onError:I=>{console.error("Error deleting list:",I),V.error("Failed to delete list. Please try again.")}})},Pt=I=>{x(I)},tr=()=>{E&&J.delete(route("project-hub.tasks.destroy",E.id),{preserveScroll:!0,onSuccess:()=>{V.success(`Task "${E.title}" deleted successfully.`),x(null),J.reload({only:["initialBoardData"]})},onError:I=>{console.error("Error deleting task:",I),V.error("Failed to delete task. Please try again.")}})},nr=I=>{I.paperWritingTask?(A(I),N(!0)):A(I)},Ma=I=>{console.log("handleAddTask called with listId:",I),we(I),M(!0)},ja=I=>{if(console.log("handleTaskTypeSelect called with taskType:",I),console.log("currentListId when selecting task type:",Q),M(!1),I==="paper")N(!0);else{A(null);const k={board_list_id:Q,title:"",description:"",due_date:"",priority:"Medium",assignees:[],task_type:"normal"};console.log("Creating temporary task with board_list_id:",Q),A(k)}},Pa=()=>{N(!1),A(null)},Fa=({list:I,tasks:k})=>{k.map($=>({...$,isRecentlyUpdated:$.id===a}));const P=o?.id===I.id;return c.jsx(ii,{list:I,tasks:I.tasks||[],onDeleteList:()=>er(I),onDeleteTask:Pt,onTaskClick:nr,onAddTask:Ma,className:"board-column",isDragging:P},I.id)},Oa=()=>{if(!n)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-500 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading board data..."})]})});const I=Array.isArray(n.lists)?n.lists:[],k=I.map(P=>`list-${P.id}`);return c.jsx("div",{className:"board-container w-full overflow-hidden flex flex-col",children:c.jsx("div",{className:"board-scroll-container overflow-y-auto md:overflow-y-hidden md:overflow-x-auto",children:c.jsxs(rc,{sensors:Re,collisionDetection:sc,onDragStart:ze,onDragEnd:Ye,children:[c.jsxs("div",{className:"board-lists-container flex flex-col gap-4 md:flex-row md:flex-nowrap md:gap-4 pb-4 md:pr-4 lg:w-full w-[24.5rem]",children:[c.jsx(Po,{items:k,strategy:Io,children:I.map(P=>c.jsx(Fa,{list:P,tasks:Array.isArray(P.tasks?.data)?P.tasks.data:[]},P.id))}),p?c.jsxs("div",{className:"w-full md:w-64 md:flex-shrink-0 bg-white shadow rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("h3",{className:"text-md font-medium text-gray-900",children:"Create a new list"}),c.jsx("button",{type:"button",onClick:()=>{m(!1),X.reset()},className:"text-gray-400 hover:text-gray-500",children:c.jsx(Dt,{className:"w-4 h-4"})})]}),c.jsxs("form",{onSubmit:se,className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("input",{type:"text",value:X.data.name,onChange:P=>X.setData("name",P.target.value),className:"w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-sm",placeholder:"List name",disabled:X.processing,autoFocus:!0}),X.errors.name&&c.jsx("div",{className:"text-red-500 text-xs mt-1",children:X.errors.name})]}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[c.jsx("button",{type:"button",onClick:()=>{m(!1),X.reset()},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:X.processing,children:"Cancel"}),c.jsx("button",{type:"submit",className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md text-xs font-medium text-white bg-indigo-600 hover:bg-indigo-700",disabled:X.processing||!X.data.name.trim(),children:X.processing?"Creating...":"Create List"})]})]})]}):c.jsxs("button",{type:"button",onClick:()=>m(!0),className:"w-full md:w-64 md:flex-shrink-0 h-16 flex items-center justify-center bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[c.jsx(Mr,{className:"w-5 h-5 mr-2"})," Add List"]})]}),c.jsx(ic,{children:s?c.jsx(Lo,{task:s}):o?c.jsx(ii,{list:o,tasks:Array.isArray(o.tasks?.data)?o.tasks.data:[],className:"opacity-90 shadow-xl scale-[1.02] board-column",isOverlay:!0}):null})]})})})},Ha=()=>c.jsx(Fv,{tasks:z}),La=()=>c.jsx(Ov,{board:n,onTaskClick:A}),Ba=()=>c.jsx(jy,{board:n,onTaskClick:A});return g||!n?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-500 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading board..."})]})}):c.jsxs("div",{className:"w-[26rem] lg:w-full md:max-w-full lg:mx-auto mx-1 px-1 md:px-4 py-4 md:py-6 overflow-x-hidden lg:mt-2 mt-6",children:[c.jsxs("div",{className:"mb-4 md:mb-6",children:[(()=>{const I=R();return c.jsxs(Ga,{href:I.href,className:"flex items-center text-gray-500 hover:text-gray-700 mb-2",children:[c.jsx(Kc,{className:"w-4 h-4 mr-1"}),c.jsxs("span",{className:"text-sm",children:["Back to ",I.text]})]})})(),c.jsxs("div",{className:"flex flex-col space-y-3 md:flex-row md:justify-between md:items-center md:space-y-0",children:[c.jsx(mo,{value:n.name,onSave:fe,canEdit:n.can&&n.can.update,className:"text-xl md:text-2xl font-bold text-gray-900",placeholder:"Board name"}),c.jsx("div",{className:"bg-gray-100 rounded-md p-1 overflow-x-auto",children:c.jsxs("div",{className:"flex space-x-1 min-w-max",children:[c.jsxs("button",{type:"button",onClick:()=>h("board"),className:`
                                    flex items-center px-2 md:px-3 py-1.5 rounded-md text-xs md:text-sm font-medium whitespace-nowrap
                                    ${u==="board"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-gray-900"}
                                `,children:[c.jsx(ed,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-1.5"}),"Board"]}),c.jsxs("button",{type:"button",onClick:()=>h("list"),className:`
                                    flex items-center px-2 md:px-3 py-1.5 rounded-md text-xs md:text-sm font-medium whitespace-nowrap
                                    ${u==="list"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-gray-900"}
                                `,children:[c.jsx(nd,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-1.5"}),"List"]}),c.jsxs("button",{type:"button",onClick:()=>h("table"),className:`
                                    flex items-center px-2 md:px-3 py-1.5 rounded-md text-xs md:text-sm font-medium whitespace-nowrap
                                    ${u==="table"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-gray-900"}
                                `,children:[c.jsx(td,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-1.5"}),"Table"]}),c.jsxs("button",{type:"button",onClick:()=>h("calendar"),className:`
                                    flex items-center px-2 md:px-3 py-1.5 rounded-md text-xs md:text-sm font-medium whitespace-nowrap
                                    ${u==="calendar"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-gray-900"}
                                `,children:[c.jsx(gt,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-1.5"}),"Calendar"]})]})}),c.jsxs("button",{type:"button",onClick:()=>_(!0),className:"ml-0 md:ml-3 inline-flex items-center px-3 py-1.5 bg-white border border-gray-300 rounded-md text-xs md:text-sm text-gray-700 hover:bg-gray-50",children:[c.jsx(as,{className:"w-4 h-4 mr-2"})," Archived Items"]})]})]}),u==="board"&&!p&&c.jsx("div",{className:"mb-4",children:c.jsxs("button",{type:"button",onClick:()=>m(!0),className:"inline-flex items-center px-3 md:px-4 py-2 bg-gray-100 border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[c.jsx(Mr,{className:"w-4 h-4 mr-2"})," Add List"]})}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 md:p-4 h-[calc(100vh-12rem)] md:h-auto md:min-h-[35rem] flex flex-col",children:[u==="board"&&Oa(),u==="list"&&La(),u==="table"&&Ba(),u==="calendar"&&Ha()]}),c.jsx(Qt,{show:!!v,onClose:()=>b(null),onConfirm:nn,title:"Delete List",message:v?`Are you sure you want to delete the list "${v.name}"? This action cannot be undone and will delete all tasks within this list.`:""}),c.jsx(Qt,{show:!!E,onClose:()=>x(null),onConfirm:tr,title:"Delete Task",message:E?`Are you sure you want to delete the task "${E.title}"? This action cannot be undone.`:""}),c.jsx(Fy,{task:D,show:!!D&&!C,onClose:()=>A(null),workspaceMembers:n?.parent?.members||[],researchOptions:t}),c.jsx(Oy,{task:D,show:C,onClose:Pa,listId:Q,workspaceMembers:n?.parent?.members||[],researchOptions:t}),c.jsx(Hy,{show:j,onClose:()=>M(!1),onSelectTaskType:ja}),c.jsx(Ly,{show:T,onClose:()=>_(!1),boardId:n.id}),le&&ae&&B&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsx(us,{task:ae,promptData:B,onYes:async()=>{const I=await Ie(ae.id);I.success&&Se(I.task),de(!1)},onNo:()=>{de(!1)},visible:le})})]})}const Ia=document.createElement("style");Ia.textContent=`
    .board-container {
        height: 100%;
        min-height: 0;
    }
    
    /* Mobile: Vertical scrolling, Desktop: Horizontal scrolling */
    .board-scroll-container {
        flex: 1;
        min-height: 0;
    }
    
    /* Mobile: Full height for vertical scroll, Desktop: Horizontal scroll */
    @media (max-width: 768px) {
        .board-scroll-container {
            overflow-y: auto;
            overflow-x: hidden;
            max-height: calc(100vh - 16rem);
        }
        
        .board-lists-container {
            flex-direction: column !important;
        }
        
        /* Mobile board columns take full width */
        .board-column {
            width: 100% !important;
            flex-shrink: 0;
            margin: 0 !important;
        }
    }
    
    /* Desktop behavior */
    @media (min-width: 769px) {
        .board-scroll-container {
            overflow-y: hidden;
            overflow-x: auto;
            width: calc(68rem);
            max-width: 100%;
        }
        
        .board-lists-container {
            min-height: 100%;
        }
        
        /* Desktop columns have fixed width */
        .board-column {
            width: 16rem;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            max-height: 32rem;
        }
    }
    
    /* Task list scrolling */
    .board-column-tasks {
        overflow-y: auto;
        flex-grow: 1;
        padding-right: 0.5rem;
        margin-right: -0.5rem;
    }
    
    /* Scrollbar styling */
    .board-column-tasks::-webkit-scrollbar,
    .list-view-container::-webkit-scrollbar,
    .table-view-container::-webkit-scrollbar {
        width: 6px;
    }
    
    .board-column-tasks::-webkit-scrollbar-track,
    .list-view-container::-webkit-scrollbar-track,
    .table-view-container::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
    }
    
    .board-column-tasks::-webkit-scrollbar-thumb,
    .list-view-container::-webkit-scrollbar-thumb,
    .table-view-container::-webkit-scrollbar-thumb {
        background: #d1d5db;
        border-radius: 3px;
    }
    
    .board-column-tasks::-webkit-scrollbar-thumb:hover,
    .list-view-container::-webkit-scrollbar-thumb:hover,
    .table-view-container::-webkit-scrollbar-thumb:hover {
        background: #9ca3af;
    }
    
    /* --- ADD THESE NEW RULES --- */
    /* This rule controls the TimelineView container layout */
    .timeline-view-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        width: 50%;
    }

    /* This rule formats the Gantt chart date labels into two lines */
    .gantt-task-react__header-text {
        white-space: normal !important;
        line-height: 1.2 !important;
        text-align: center !important;
        font-size: 11px !important;
    }
    
    /* List View mobile optimization */
    .list-view-container {
        max-height: calc(100vh - 200px);
        overflow-y: auto;
    }
    
    /* Table View mobile optimization */
    .table-view-container {
        md:max-height: calc(100vh - 160px);
        overflow-y: auto;
    }
    
    /* Mobile responsive adjustments */
    @media (max-width: 1280px) {
        .board-scroll-container {
            width: calc(60rem + 1.5rem);
        }
    }
    
    @media (max-width: 1024px) {
        .board-scroll-container {
            width: calc(40rem + 1rem);
        }
    }
`;document.head.appendChild(Ia);By.layout=e=>c.jsx(Wa,{title:"Board View",children:e,TopMenuOpen:!1});export{By as default};
