import{r,j as s}from"./app-CxJcie6X.js";import{F as y,a as w,b as j}from"./index-Bo4JNGWa.js";import"./iconBase-Dgfn16JF.js";const v=({onQueryChange:u,value:n="",researchOptions:l,placeholder:m="e.g., Artificial Intelligence in Healthcare, Design Science Research...",onEnterPress:i=null})=>{const[g,c]=r.useState(!1),[d,f]=r.useState([]),o=r.useRef(null);r.useEffect(()=>{function e(t){o.current&&!o.current.contains(t.target)&&c(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]),r.useEffect(()=>{if(l&&l.length>0){const e=new Set;l.forEach(a=>{a.field_of_research_name&&e.add(a.field_of_research_name),a.research_area_name&&e.add(a.research_area_name),a.niche_domain_name&&e.add(a.niche_domain_name)});const t=Array.from(e).slice(0,15);f(t)}},[l]);const x=e=>{u(e.target.value)},h=e=>{e.key==="Enter"&&i&&(e.preventDefault(),i())},b=e=>{const t=n?`${n}, ${e}`:e;u(t),c(!1)};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:n,onChange:x,onKeyDown:h,placeholder:m,className:"w-full px-4 pr-14 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",onFocus:()=>c(!0),autoFocus:!0}),n&&s.jsx("button",{className:"absolute right-10 top-4 text-gray-400 hover:text-gray-600",onClick:()=>{u("")},children:s.jsx(y,{})})]}),g&&d.length>0&&s.jsxs("div",{ref:o,className:"mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-3 absolute z-20 w-full max-w-3xl",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(w,{className:"text-yellow-500 mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"Suggested research terms"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((e,t)=>s.jsxs("button",{className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm flex items-center",onClick:()=>b(e),children:[s.jsx(j,{className:"mr-1 text-xs text-gray-500"}),e]},t))}),s.jsx("button",{className:"mt-2 text-xs text-gray-500 hover:text-gray-700",onClick:()=>c(!1),children:"Close suggestions"})]})]})};export{v as default};
