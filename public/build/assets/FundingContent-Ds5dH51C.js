import{r,j as e,b as p,a as j}from"./app-Dyc2YSa7.js";import{I as g,J as b,U as E,K as u}from"./index-Bf7Fcr0d.js";import{u as B}from"./useRoles-CU-WmQgm.js";import{t as R,a as T}from"./analytics-BQ374C1C.js";import{B as F}from"./BookmarkButton-i78Ks_g4.js";import{p as G}from"./purify.es-B2xYLbnv.js";import{A as M}from"./arrow-left-Cp3pqLK-.js";import{c as O}from"./createLucideIcon-DgyMBRUj.js";import{F as U,L as $}from"./linkedin-CJb54Am4.js";import{M as z}from"./message-circle-DAi-dXae.js";import{C as W}from"./calendar-D4jGpTBE.js";import{D as H}from"./dollar-sign-D2KnTWhd.js";import{B as P}from"./building-0n5Eh2KL.js";import{U as V}from"./user-DobLyCls.js";import{G as q}from"./globe-FbUQ9rgM.js";import{M as K}from"./mail-DQ2QLjVc.js";import{E as J}from"./external-link-D11kLOD6.js";import{T as Q}from"./tag-DKMfBwJB.js";import"./iconBase-BKzFCYXg.js";import"./index-Csod4yPu.js";import"./BookmarkHandler-DYB8AXoa.js";import"./tooltip-DpUoRlqm.js";import"./index-D-0X1VHc.js";import"./index-CYrMXf2H.js";import"./index-Mz8iZoV8.js";import"./index-CFIxVmDG.js";import"./index-DGC_azny.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-Bby_8r0G.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Y=O("Link",X),y=({html:s,className:i})=>{const o=G.sanitize(s||"",{ALLOWED_TAGS:["b","i","u","p","br","ul","ol","li","strong","em","a","h1","h2","h3","h4","h5","h6"],ALLOWED_ATTR:["href","target","rel"]});return!o||o.trim()===""?e.jsx("p",{className:i,children:"No content available"}):e.jsx("div",{className:i,dangerouslySetInnerHTML:{__html:o}})};function Ce({fundingItem:s,academicians:i,auth:o,isWelcome:N,relatedFunding:n}){B();const[w,f]=r.useState(s.total_likes||0),[Z,v]=r.useState(s.total_shares||0),[k,_]=r.useState(s.liked||!1),[m,l]=r.useState(!1),d=r.useRef(null);r.useEffect(()=>{const t=a=>{d.current&&!d.current.contains(a.target)&&l(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),r.useEffect(()=>{R(window.location.pathname);const t=s.type==="grant"?"Grant":"Scholarship";T(t,"view",s.grant_name||s.title,s.id)},[s]);const h=i&&i.find(t=>t.academician_id===s.author_id)||null,L=()=>{if(!o){window.location.href=route("login");return}const t=s.type==="grant"?route("funding.toggleLike.grant",{url:s.url}):route("funding.toggleLike.scholarship",{url:s.url});j.post(t).then(a=>{f(a.data.total_likes),_(a.data.liked)}).catch(a=>console.error(a))},x=t=>{t();const a=s.type==="grant"?route("funding.share.grant",{url:s.url}):route("funding.share.scholarship",{url:s.url});j.post(a).then(c=>{v(c.data.total_shares)}).catch(c=>console.error(c))},D=()=>{const t=s.type==="grant"?route("funding.show.grant",{url:s.url}):route("funding.show.scholarship",{url:s.url});window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"_blank","width=600,height=400")},S=()=>{const t=s.type==="grant"?route("funding.show.grant",{url:s.url}):route("funding.show.scholarship",{url:s.url});window.open(`https://wa.me/?text=${encodeURIComponent(t)}`,"_blank")},A=()=>{const t=s.type==="grant"?route("funding.show.grant",{url:s.url}):route("funding.show.scholarship",{url:s.url});window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}`,"_blank","width=600,height=400")},C=()=>{const t=s.type==="grant"?route("funding.show.grant",{url:s.url}):route("funding.show.scholarship",{url:s.url});navigator.clipboard.writeText(t).then(()=>{alert("Link copied to clipboard")})};return e.jsx("div",{className:"px-6 md:px-8 lg:px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 lg:pt-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(p,{onClick:()=>window.history.back(),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50","aria-label":"Go back to previous page",children:[e.jsx(M,{className:"w-4 h-4"}),"Back"]})}),s.title&&e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 text-left",children:s.title}),h?e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("img",{src:`/storage/${h.profile_picture}`,alt:h.full_name,className:"w-12 h-12 rounded-full object-cover shadow-md bg-gray-200 border-2 border-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:h.full_name}),s.created_at&&e.jsx("div",{className:"text-gray-500",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}):e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("img",{src:"/storage/Admin.jpg",alt:"Admin",className:"w-12 h-12 rounded-full object-cover shadow-md border-2 border-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:"Admin"}),s.created_at&&e.jsx("div",{className:"text-gray-500",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("hr",{}),e.jsxs("div",{className:"flex flex-wrap items-center space-x-4 py-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"w-6 h-6 text-gray-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:s.total_views})]}),e.jsxs("button",{onClick:L,className:"flex items-center",children:[k?e.jsx(b,{className:"w-6 h-6 text-red-600"}):e.jsx(E,{className:"w-6 h-6 text-gray-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:w})]}),e.jsxs("div",{className:"relative",ref:d,children:[e.jsx("button",{onClick:()=>l(!m),className:"flex items-center",children:e.jsx(u,{className:"w-6 h-6 text-gray-600"})}),m&&e.jsxs("div",{className:"absolute left-0 mt-2 w-40 bg-white shadow-lg rounded z-10",children:[e.jsxs("button",{onClick:()=>{x(C),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2 text-gray-600"}),"Copy Link"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{x(D),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx(U,{className:"w-5 h-5 mr-2 text-blue-600"}),"Facebook"]}),e.jsxs("button",{onClick:()=>{x(S),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-green-600"}),"WhatsApp"]}),e.jsxs("button",{onClick:()=>{x(A),l(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2 text-blue-700"}),"LinkedIn"]})]})]}),e.jsx(F,{bookmarkableType:s.type,bookmarkableId:s.id,category:"Funding",iconSize:"w-6 h-6",tooltipPosition:"top"})]}),e.jsx("hr",{})]}),s.image&&e.jsx("img",{src:`/storage/${s.image}`,alt:"Banner",className:"w-full h-auto md:h-64 object-cover mb-4"}),s.description&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Description"}),e.jsx(y,{html:s.description,className:"mb-4 text-gray-700 prose w-full text-left max-w-none break-words leading-relaxed"})]}),e.jsxs("div",{className:"mt-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 pb-2 border-b-2 border-gray-200",children:"Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Key Dates"})]}),e.jsxs("div",{className:"space-y-3 ml-7",children:[s.start_date&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 font-medium w-24",children:"Start:"}),e.jsx("span",{className:"text-gray-900",children:new Date(s.start_date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),s.end_date&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 font-medium w-24",children:"End:"}),e.jsx("span",{className:"text-gray-900",children:new Date(s.end_date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),s.application_deadline&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-red-600 font-medium w-24",children:"Deadline:"}),e.jsxs("span",{className:`font-semibold ${new Date(s.application_deadline)<new Date,"text-red-600"}`,children:[new Date(s.application_deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),new Date(s.application_deadline)<new Date&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full font-semibold",children:"Ended"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(H,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Funding Information"})]}),e.jsxs("div",{className:"space-y-3 ml-7",children:[(s.grant_type||s.scholarship_type)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 font-medium w-24",children:"Type:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${s.type==="grant"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.grant_type||s.scholarship_type})]}),s.type==="grant"&&s.cycle&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 font-medium w-24",children:"Cycle:"}),e.jsx("span",{className:"text-gray-900",children:s.cycle})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(P,{className:"w-5 h-5 text-purple-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Organization & Contact"})]}),e.jsxs("div",{className:"space-y-3 ml-7",children:[s.sponsored_by&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-4 h-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-gray-600 font-medium w-20 ml-1",children:"Sponsor:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:s.sponsored_by})]}),s.country&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-gray-600 font-medium w-20 ml-1",children:"Country:"}),e.jsx("span",{className:"text-gray-900",children:s.country})]}),s.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-gray-600 font-medium w-20 ml-1",children:"Email:"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-blue-600 hover:text-blue-800 underline",children:s.email})]}),s.website&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-4 h-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-gray-600 font-medium w-20 ml-1",children:"Website:"}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Visit Website"})]})]})]}),(s.grant_theme||s.scholarship_theme)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Q,{className:"w-5 h-5 text-orange-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Research Themes"})]}),e.jsx("div",{className:"ml-7",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(s.grant_theme)?s.grant_theme:Array.isArray(s.scholarship_theme)?s.scholarship_theme:[s.grant_theme||s.scholarship_theme].filter(Boolean)).map((a,c)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 border border-orange-200",children:a},c))})})]})]})]})]}),s.attachment&&e.jsx("div",{className:"mb-2",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",e.jsx("a",{href:`/storage/${s.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"})]})}),e.jsx("hr",{className:"my-6 border-gray-200"}),(()=>{const t=n?Array.isArray(n)?n:Object.values(n):[];return t&&t.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Other Funding Opportunities"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>e.jsxs(p,{href:N?a.type==="grant"?route("welcome.funding.show.grant",a.url):route("welcome.funding.show.scholarship",a.url):a.type==="grant"?route("funding.show.grant",{url:a.url}):route("funding.show.scholarship",{url:a.url}),className:"block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-[300px] flex flex-col justify-end hover:opacity-90",style:{backgroundImage:`url(${encodeURI(a.image?`/storage/${a.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsx("div",{className:`absolute top-4 left-4 px-3 py-1 rounded-full text-xs font-semibold text-white z-20 ${a.type==="grant"?"bg-blue-500":a.type==="scholarship"?"bg-green-500":"bg-gray-500"}`,children:a.type==="grant"?"Grant":a.type==="scholarship"?"Scholarship":"Funding"}),new Date(a.application_deadline)<new Date&&e.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-semibold text-white bg-red-500 z-20",children:"Ended"}),e.jsxs("div",{className:"relative z-10 text-white pr-10",children:[e.jsx("h2",{className:"text-2xl font-bold truncate",title:a.title,children:a.title||"Untitled Funding"}),a.description&&e.jsx(y,{html:a.description,className:"text-sm line-clamp-2 mb-2"}),e.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[e.jsxs("p",{className:"text-xs",children:["Deadline: ",new Date(a.application_deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1",children:a.total_views||0})]}),e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(b,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"ml-1",children:a.total_likes||0})]}),e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1",children:a.total_shares||0})]})]})]})]})]},a.id))})]})})()]})})}export{Ce as default};
