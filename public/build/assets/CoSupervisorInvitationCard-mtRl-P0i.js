import{q as L,j as e}from"./app-BodExSbw.js";import{C as O,a as Q}from"./card-DlB-Racq.js";import{B as W}from"./badge-DjhgJA26.js";import{B as X}from"./button-DBoeCbAi.js";import{U as E}from"./user-Dsu1AnUj.js";import{U as G}from"./users-DczRUbjv.js";import{C as H}from"./calendar-B_CZibmO.js";import{C as o}from"./circle-check-C3TcVouP.js";import{C as J}from"./clock-D9yThb50.js";import{f as Y}from"./formatDistanceToNow-GKXiLTrL.js";import"./utils-D-KgF5mV.js";import"./index-CGrAONsN.js";import"./createLucideIcon-plmRflaj.js";import"./constructNow-DtVD-0hX.js";import"./en-US-DNUEYIb-.js";const fe=({invitation:a,onClick:n})=>{var y,b,_,w,v,C,S,U,A,B,D,P,k,R,$,q,I,M,F,T,V,z;const{auth:K}=L().props,t=(y=a.relationship)==null?void 0:y.student,r=(b=a.relationship)==null?void 0:b.academician,s=a.cosupervisor,u=((w=(_=a.relationship)==null?void 0:_.supervisionRequest)==null?void 0:w.proposal_title)||((C=(v=a.relationship)==null?void 0:v.supervision_request)==null?void 0:C.proposal_title),g=((S=K.user)==null?void 0:S.unique_id)===a.cosupervisor_academician_id;let l,c,i,d;g?(l=(t==null?void 0:t.full_name)||((U=t==null?void 0:t.user)==null?void 0:U.name)||"Student",c=t!=null&&t.profile_picture?`/storage/${t.profile_picture}`:null,i=((A=t==null?void 0:t.universityDetails)==null?void 0:A.name)||((B=t==null?void 0:t.universityDetails)==null?void 0:B.full_name)||((D=t==null?void 0:t.university_details)==null?void 0:D.name)||((P=t==null?void 0:t.university_details)==null?void 0:P.full_name)||null,d=l.split(" ").map(m=>m[0]).join("").slice(0,2).toUpperCase()):(l=(s==null?void 0:s.full_name)||((k=s==null?void 0:s.user)==null?void 0:k.name)||"Co-Supervisor",c=s!=null&&s.profile_picture?`/storage/${s.profile_picture}`:null,i=((R=s==null?void 0:s.universityDetails)==null?void 0:R.name)||(($=s==null?void 0:s.universityDetails)==null?void 0:$.full_name)||((q=s==null?void 0:s.university)==null?void 0:q.name)||((I=s==null?void 0:s.university)==null?void 0:I.full_name)||((M=s==null?void 0:s.university_details)==null?void 0:M.name)||((F=s==null?void 0:s.university_details)==null?void 0:F.full_name)||null,d=l.split(" ").map(m=>m[0]).join("").slice(0,2).toUpperCase());const f=(t==null?void 0:t.full_name)||((T=t==null?void 0:t.user)==null?void 0:T.name)||"Student",p=(r==null?void 0:r.full_name)||((V=r==null?void 0:r.user)==null?void 0:V.name)||"Main Supervisor",h=a.initiated_by==="student"?f:p,j=a.created_at?Y(new Date(a.created_at),{addSuffix:!0}):null,N=a.cancelled_at?{text:"Cancelled",className:"bg-gray-100 text-gray-700"}:a.cosupervisor_status==="rejected"?{text:"Rejected",className:"bg-red-100 text-red-700"}:a.approver_status==="rejected"?{text:"Not Approved",className:"bg-red-100 text-red-700"}:a.completed_at?{text:"Completed",className:"bg-green-100 text-green-700"}:a.cosupervisor_status==="accepted"&&a.approver_status==="pending"?{text:"Awaiting Approval",className:"bg-yellow-100 text-yellow-700"}:a.cosupervisor_status==="pending"?{text:"Pending Response",className:"bg-blue-100 text-blue-700"}:{text:"Pending",className:"bg-blue-100 text-blue-700"},x=a.completed_at||a.approver_status==="accepted"?100:a.cosupervisor_status==="accepted"?50:0;return e.jsx(O,{className:"hover:shadow-lg transition-all cursor-pointer border border-gray-200",onClick:n,children:e.jsxs(Q,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 border border-indigo-200 flex items-center justify-center overflow-hidden flex-shrink-0",children:c?e.jsx("img",{src:c,alt:l,className:"w-full h-full object-cover rounded-full"}):e.jsx("div",{className:"bg-indigo-100 text-indigo-700 w-full h-full flex items-center justify-center text-xs font-semibold",children:d})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:l}),i&&e.jsx("p",{className:"text-sm text-gray-600 truncate font-normal",children:i}),j&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:j})]})]}),e.jsx(W,{className:`${N.className} flex-shrink-0`,children:N.text})]}),u&&e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-base font-semibold text-slate-900 line-clamp-2 leading-snug",children:u})}),e.jsx("div",{className:"space-y-2 mb-4",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Student:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:f})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(G,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Main Supervisor:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:p})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Invited by:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:h})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Co-Supervisor:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:(s==null?void 0:s.full_name)||((z=s==null?void 0:s.user)==null?void 0:z.name)||"Co-Supervisor"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(G,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Main Supervisor:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:p})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Invited by:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:h})]})]})}),!a.cancelled_at&&(a.cosupervisor_status==="pending"||a.approver_status==="pending")&&e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[e.jsx("span",{children:"Approval Progress"}),e.jsxs("span",{children:[x,"%"]})]}),e.jsx("div",{className:"relative h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute inset-y-0 left-0 rounded-full transition-all duration-300 ${x===100?"bg-green-500":x===50?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${x}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[a.cosupervisor_status==="accepted"?e.jsx(o,{className:"w-3 h-3 text-green-600"}):e.jsx(J,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:a.cosupervisor_status==="accepted"?"text-green-700":"text-gray-500",children:"Co-supervisor"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[a.approver_status==="accepted"?e.jsx(o,{className:"w-3 h-3 text-green-600"}):e.jsx(J,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:a.approver_status==="accepted"?"text-green-700":"text-gray-500",children:"Approver"})]})]})]}),a.invitation_message&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"Personal Message:"}),e.jsxs("p",{className:"text-sm text-blue-800 italic line-clamp-2",children:['"',a.invitation_message,'"']})]}),a.rejection_reason&&e.jsxs("div",{className:"mt-3 bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-red-900 mb-1",children:"Rejection Reason:"}),e.jsxs("p",{className:"text-sm text-red-800 line-clamp-2",children:['"',a.rejection_reason,'"']})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs(X,{variant:"outline",size:"sm",className:"w-full text-xs sm:text-sm",onClick:m=>{m.stopPropagation(),n==null||n()},children:[e.jsx(o,{className:"mr-1.5 sm:mr-2 h-3.5 w-3.5 sm:h-4 sm:w-4"}),"View Details"]})})]})})};export{fe as default};
