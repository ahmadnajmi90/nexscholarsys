import{r as C,j as e,b as h}from"./app-Doi1BfNX.js";import{C as M,b as _,c as D,a as R}from"./card-CzKfn69n.js";import{B as S}from"./button-KPEq8PdI.js";import{B as A}from"./badge-Be2D36dO.js";import{A as g,a as j}from"./avatar-D-ohjjtQ.js";import T from"./StudentRelationshipDetailModal-BxMn3MOp.js";import{n as k}from"./en-US-DNUEYIb-.js";import{d as H,f as N}from"./format-Dv9Rm441.js";import{C as F}from"./calendar-CBO9yeE8.js";import{C as B}from"./clock-yedA_mME.js";import{C as E}from"./circle-x-CHFI4rOT.js";import{H as U}from"./history-CYjZsRfK.js";import{f as $}from"./formatDistanceToNow-GKXiLTrL.js";import"./utils-D-KgF5mV.js";import"./index-CGrAONsN.js";import"./modalAnimations-CCENKliM.js";import"./supervisionHelpers-EJT0WNFw.js";import"./tabs-BgtJ-Aqh.js";import"./index-B_QUZuO0.js";import"./index-FRhtyj0h.js";import"./index-BGtqCWya.js";import"./index-Ct-Jk4RI.js";import"./index-Be4Hbpsc.js";import"./index-BdR5mO0l.js";import"./index-CkAoBwhz.js";import"./index-Bb94jkfk.js";import"./scroll-area-Du06xGgY.js";import"./index-BdQq_4o_.js";import"./ThreadPane-B5BIAZi7.js";import"./Modal-BjJ_nX2Q.js";import"./dialog-DYcl7DcC.js";import"./transition-Dk-vnbkR.js";import"./file-text-CjHuEEW2.js";import"./createLucideIcon-BIWf6Fgr.js";import"./download-Xk6ccwe6.js";import"./x-DrXySrr5.js";import"./index-dbiIR3J5.js";import"./isSameDay-Dm-A-V7S.js";import"./ScheduleMeetingDialog-Bg9sEkOz.js";import"./input-yCRxI6tt.js";import"./textarea-B9-sF3_G.js";import"./label-BYlrvoGV.js";import"./alert-DlfG3K4y.js";import"./logError-D4ezqrCx.js";import"./useGoogleCalendar-BXh9FXme.js";import"./external-link-DYFIg7ks.js";import"./loader-circle-D1uCPtBJ.js";import"./UnifiedOverviewTab-DNnrDGUR.js";import"./user-round-B_eanpyP.js";import"./briefcase-Cs22VvWr.js";import"./mail-7f1JiwhA.js";import"./phone-CDfQ_U-X.js";import"./graduation-cap-BiSIS5Fh.js";import"./globe-CO-0Byd6.js";import"./calendar-clock-DWMtvC7-.js";import"./UnbindRequestModal-C0DyPriN.js";import"./user-minus-aiA-FD3x.js";import"./triangle-alert-uV-J_FuU.js";import"./RelationshipHistoryTab-D0VInf3e.js";import"./circle-alert-DIrS-PEp.js";import"./users-CJk5icQ6.js";import"./tooltip-CJCiABJO.js";import"./index-CZA6k5rr.js";import"./index-BkPy3AN8.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-CJzlUPP7.js";import"./index-BvLvCl4J.js";import"./index-CvKzrQIm.js";import"./proxy-BUFhk0Wh.js";import"./video-CabzSFea.js";import"./constructNow-DtVD-0hX.js";function q(s,a,t){const[r,o]=k(t==null?void 0:t.in,s,a),m=b(r,o),i=Math.abs(H(r,o));r.setDate(r.getDate()-m*i);const l=+(b(r,o)===-m),n=m*(i-l);return n===0?0:n}function b(s,a){const t=s.getFullYear()-a.getFullYear()||s.getMonth()-a.getMonth()||s.getDate()-a.getDate()||s.getHours()-a.getHours()||s.getMinutes()-a.getMinutes()||s.getSeconds()-a.getSeconds()||s.getMilliseconds()-a.getMilliseconds();return t<0?-1:t>0?1:t}function as({relationships:s=[],reload:a,isLoading:t=!1}){const[r,o]=C.useState(null),m=!t&&(!Array.isArray(s)||s.length===0);return t?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((i,l)=>e.jsxs("div",{className:"border border-dashed rounded-xl p-5 bg-white shadow-sm animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-slate-200"}),e.jsx("div",{className:"h-3 w-24 rounded bg-slate-100"})]})]}),e.jsx("div",{className:"h-6 w-24 rounded-full bg-slate-100"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"h-3 w-full rounded bg-slate-100"}),e.jsx("div",{className:"h-3 w-3/4 rounded bg-slate-100"})]}),e.jsx("div",{className:"mt-4 h-10 rounded bg-slate-200"})]},`terminated-skeleton-${l}`))}):m?e.jsxs(M,{className:"border-dashed border-slate-200",children:[e.jsx(_,{children:e.jsx(D,{className:"text-lg font-semibold text-slate-800",children:"No Terminated Relationships"})}),e.jsx(R,{className:"text-sm text-slate-600",children:"You don't have any terminated supervision relationships. All past relationships will appear here."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:s.map(i=>e.jsx(Y,{relationship:i,onViewHistory:()=>o(i)},i.id))}),r&&e.jsx(T,{relationship:r,onClose:()=>o(null),onUpdated:a,isReadOnly:!0})]})}function Y({relationship:s,onViewHistory:a}){var u,f;const t=(s==null?void 0:s.academician)??{},r=t.full_name??"Supervisor",o=t.profile_picture?`/storage/${t.profile_picture}`:null,m=t.url||null,i=(s==null?void 0:s.accepted_at)||(s==null?void 0:s.start_date),l=s==null?void 0:s.terminated_at,n=i?N(new Date(i),"dd/MM/yyyy"):"—",v=l?N(new Date(l),"dd/MM/yyyy"):"—",c=l?$(new Date(l),{addSuffix:!0}):null,d=i&&l?q(new Date(l),new Date(i)):0,w=d>0?`${Math.floor(d/30)} months, ${d%30} days`:"—",x=((u=s==null?void 0:s.unbind_requests)==null?void 0:u.length)>0?(f=s.unbind_requests[s.unbind_requests.length-1])==null?void 0:f.reason:"No reason provided",p=r.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,3);return e.jsxs("div",{className:"border rounded-xl p-5 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),className:"flex-shrink-0",children:e.jsx(g,{className:"h-10 w-10 border border-slate-200 hover:ring-2 hover:ring-slate-300 transition-all cursor-pointer",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})})}):e.jsx(g,{className:"h-10 w-10 border border-slate-200",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),children:e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate hover:text-indigo-600 transition-colors cursor-pointer",children:r})}):e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:r}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.role==="main"?"Main Supervisor":"Co-Supervisor"}),c&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Terminated ",c]})]})]}),e.jsx(A,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 flex-shrink-0",children:"Terminated"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(F,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:[n," → ",v]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(B,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:["Duration: ",w]})]})]}),x&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-red-900 mb-1",children:"Termination Reason:"}),e.jsx("p",{className:"text-xs text-red-800 line-clamp-2",children:x})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(S,{variant:"outline",className:"w-full",onClick:a,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"View History"]})})]})}export{as as default};
