import{r as n,R as z,j as e,b as D}from"./app-DL56HMWY.js";import{F as j}from"./FilterDropdown-WoL6KkMc.js";import{S as _}from"./SearchBar-B2bYJuS-.js";import{P as M}from"./Pagination-BfOGx2kd.js";import $ from"./ContentSkeletonCard-Cao_Efvq.js";import"./purify.es-B2xYLbnv.js";import"./react-select.esm-CYioCxEz.js";import"./chevron-left-BqLKPhYc.js";import"./createLucideIcon-D99nLCoM.js";import"./chevron-right-BR1RXfeZ.js";const R=({html:a,maxLength:c=100,className:r})=>{if(!a)return e.jsx("p",{className:r,children:"No content available"});const o=a.replace(/<[^>]*>/g,""),i=o.length>c?o.substring(0,c)+"...":o;return e.jsx("p",{className:r,children:i})},Y=({fundingItems:a,isLoading:c})=>{const[r,o]=n.useState("all"),[i,v]=n.useState([]),[h,w]=n.useState([]),[m,N]=n.useState([]),[f,F]=n.useState(1),[S,k]=n.useState(!1),[C,A]=n.useState(!1),b=9,p=a.filter(t=>r==="all"?!0:r==="grants"?t.type==="grant":r==="scholarships"?t.type==="scholarship":!0),P=[...new Set(p.flatMap(t=>{const s=[];return t.grant_type&&s.push(t.grant_type),t.scholarship_type&&s.push(t.scholarship_type),s}))].filter(Boolean).map(t=>({value:t,label:t})),B=[...new Set(p.flatMap(t=>{const s=[];return t.grant_theme&&s.push(...t.grant_theme),t.scholarship_theme&&s.push(...t.scholarship_theme),s}))].filter(Boolean).map(t=>({value:t,label:t})),L=[...new Set(p.map(t=>t.country))].filter(Boolean).map(t=>({value:t,label:t})),T=[...p.filter(t=>{const s=i.length===0||i.includes(t.grant_type)||i.includes(t.scholarship_type),u=h.length===0||t.grant_theme&&t.grant_theme.some(l=>h.includes(l))||t.scholarship_theme&&t.scholarship_theme.some(l=>h.includes(l)),d=m.length===0||m.includes(t.country);return s&&u&&d})].sort((t,s)=>{const u=new Date,d=new Date(t.application_deadline),l=new Date(s.application_deadline),g=d<u,x=l<u;return!g&&x?-1:g&&!x?1:!g&&!x?d-l:g&&x?l-d:0}),V=Math.ceil(T.length/b),E=T.slice((f-1)*b,f*b),y=t=>{o(t),F(1),v([]),w([]),N([])};return z.useEffect(()=>{const t=s=>{C&&!s.target.closest(".tooltip-container")&&A(!1)};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[C]),e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col items-end space-y-2 lg:hidden",children:[e.jsx("button",{onClick:()=>k(!S),className:"bg-blue-600 text-white p-2 rounded-lg shadow-lg",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L13 14.414V19a1 1 0 01-1 1h-2a1 1 0 01-1-1v-4.586L3.293 6.707A1 1 0 013 6V4z"})})}),e.jsx(_,{placeholder:"Search funding...",routeName:"funding.index",className:""})]}),e.jsxs("div",{className:"mb-0 lg:mb-6 px-4 lg:px-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex space-x-1 bg-gray-200 lg:bg-gray-100 p-1 rounded-lg w-fit mt-4 lg:mt-0",children:[e.jsxs("button",{onClick:()=>y("all"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${r==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:["All (",a.length,")"]}),e.jsxs("button",{onClick:()=>y("grants"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${r==="grants"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:["Grants (",a.filter(t=>t.type==="grant").length,")"]}),e.jsxs("button",{onClick:()=>y("scholarships"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${r==="scholarships"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:["Scholarships (",a.filter(t=>t.type==="scholarship").length,")"]})]}),e.jsxs("div",{className:"hidden lg:block relative group tooltip-container",children:[e.jsx("button",{className:"flex items-center justify-center w-5 h-5 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Information about grants and scholarships",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-80 p-3 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[e.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Grants:"}),e.jsx("p",{children:"A sum of money awarded to Academicians to fund specific research projects. Postgraduates can join these projects as Research Assistants but typically do not apply for the grant itself."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Scholarships:"}),e.jsx("p",{children:"Financial aid awarded directly to Students to support their education, often based on merit or financial need."})]})]}),e.jsx("div",{className:"absolute -top-1 left-2 w-0 h-0 border-l-3 border-r-3 border-b-3 border-transparent border-b-white"})]})]})]}),e.jsx("div",{className:"lg:hidden mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-gray-700 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Grants:"}),e.jsx("p",{children:"A sum of money awarded to Academicians to fund specific research projects. Postgraduates can join these projects as Research Assistants but typically do not apply for the grant itself."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Scholarships:"}),e.jsx("p",{children:"Financial aid awarded directly to Students to support their education, often based on merit or financial need."})]})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 p-4 md:p-0 md:py-2 md:px-4 lg:p-0 lg:py-2 lg:pr-2",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{className:`fixed lg:relative top-0 left-0 lg:block lg:w-full w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${S?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",e.jsx("button",{onClick:()=>k(!1),className:"text-gray-600 lg:hidden",children:"âœ•"})]}),e.jsx(j,{label:"Funding Type",options:P,selectedValues:i,setSelectedValues:v}),e.jsx(j,{label:"Funding Theme",options:B,selectedValues:h,setSelectedValues:w}),e.jsx(j,{label:"Country",options:L,selectedValues:m,setSelectedValues:N})]})}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsx("div",{className:"mb-6 hidden lg:block",children:e.jsx(_,{placeholder:"Search funding...",routeName:"funding.index",className:""})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c?Array.from({length:9},(t,s)=>e.jsx($,{},s)):E.map((t,s)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden text-center pb-8 relative",children:[e.jsx("div",{className:`absolute top-4 left-4 px-3 py-1 rounded-full text-xs font-semibold text-white z-10 ${t.type==="grant"?"bg-blue-500":t.type==="scholarship"?"bg-green-500":"bg-gray-500"}`,children:t.type==="grant"?"Grant":t.type==="scholarship"?"Scholarship":"Funding"}),new Date(t.application_deadline)<new Date&&e.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-semibold text-white bg-red-500 z-10",children:"Ended"}),e.jsx("img",{src:t.image?`/storage/${t.image}`:"/storage/default.jpg",alt:t.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 truncate",title:t.title,children:t.title}),e.jsx("p",{className:"text-gray-600 h-12 mt-4 text-center font-extralight",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.jsx(R,{html:t.description||"No description available.",maxLength:100})})]}),e.jsx(D,{href:t.type==="grant"?route("funding.show.grant",{url:t.url}):route("funding.show.scholarship",{url:t.url}),className:"inline-block rounded-full border border-gray-300 px-7 py-2 text-base font-medium transition hover:border-primary hover:bg-primary hover:text-dark",children:"View Details"})]},s))}),e.jsx("div",{className:"mt-6",children:e.jsx(M,{currentPage:f,totalPages:V,onPageChange:F})})]})]})]})};export{Y as default};
