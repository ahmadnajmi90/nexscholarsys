import{r as o,j as t,b as F,R as G}from"./app-C8DLZsco.js";import{F as p}from"./FilterDropdown-CI0so8Nw.js";import{S as y}from"./SearchBar-C5zP17Ok.js";import V from"./ContentSkeletonCard-BabrIeJD.js";import"./purify.es-B2xYLbnv.js";import"./react-select.esm-B8P8SIUm.js";const _=({html:l,maxLength:c=100,className:r})=>{if(!l)return t.jsx("p",{className:r,children:"No content available"});const n=l.replace(/<[^>]*>/g,""),i=n.length>c?n.substring(0,c)+"...":n;return t.jsx("p",{className:r,children:i})},q=({grants:l,isLoading:c})=>{const[r,n]=o.useState([]),[i,j]=o.useState([]),[h,v]=o.useState([]),[a,m]=o.useState(1),[g,b]=o.useState(!1),x=9,w=[...new Set(l.map(e=>e.grant_type))].filter(Boolean).map(e=>({value:e,label:e})),N=[...new Set(l.flatMap(e=>e.grant_theme||[]))].filter(Boolean).map(e=>({value:e,label:e})),k=[...new Set(l.map(e=>e.country))].filter(Boolean).map(e=>({value:e,label:e})),f=l.filter(e=>{const s=r.length===0||r.includes(e.grant_type),u=i.length===0||e.grant_theme&&e.grant_theme.some(T=>i.includes(T)),C=h.length===0||h.includes(e.country);return s&&u&&C}),d=Math.ceil(f.length/x),S=f.slice((a-1)*x,a*x);return t.jsxs("div",{className:"min-h-screen flex",children:[t.jsx("div",{className:"fixed top-20 left-4 z-50 lg:left-auto lg:right-20 hidden lg:block",children:t.jsx(y,{placeholder:"Search grants...",routeName:"grants.index",className:""})}),t.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col items-end space-y-2 lg:hidden",children:[t.jsx("button",{onClick:()=>b(!g),className:"bg-blue-600 text-white p-2 rounded-lg shadow-lg",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L13 14.414V19a1 1 0 01-1 1h-2a1 1 0 01-1-1v-4.586L3.293 6.707A1 1 0 013 6V4z"})})}),t.jsx(y,{placeholder:"Search grants...",routeName:"grants.index",className:""})]}),t.jsxs("div",{className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${g?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",t.jsx("button",{onClick:()=>b(!1),className:"text-gray-600 lg:hidden",children:"✕"})]}),t.jsx(p,{label:"Grant Type",options:w,selectedValues:r,setSelectedValues:n}),t.jsx(p,{label:"Grant Theme",options:N,selectedValues:i,setSelectedValues:j}),t.jsx(p,{label:"Country",options:k,selectedValues:h,setSelectedValues:v})]}),t.jsxs("div",{className:"flex-1 py-6 sm:py-4 lg:py-0 px-4",children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c?Array.from({length:9},(e,s)=>t.jsx(V,{},s)):S.map((e,s)=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden text-center pb-8",children:[t.jsx("img",{src:e.image?`/storage/${e.image}`:"/storage/default.jpg",alt:e.title,className:"w-full h-48 object-cover"}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 truncate",title:e.title,children:e.title}),t.jsx("p",{className:"text-gray-600 h-12 mt-4 text-center font-extralight",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.jsx(_,{html:e.description||"No description available.",maxLength:100})})]}),t.jsx(F,{href:route("grants.show",{grant:e.url}),className:"inline-block rounded-full border border-gray-300 px-7 py-2 text-base font-medium transition hover:border-primary hover:bg-primary hover:text-dark",children:"View Details"})]},s))}),t.jsxs("div",{className:"flex justify-center mt-6 space-x-2 items-center",children:[t.jsx("button",{onClick:()=>m(e=>Math.max(e-1,1)),disabled:a===1,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"◄"}),Array.from({length:d},(e,s)=>s+1).filter(e=>e===1||e===d||Math.abs(e-a)<=1).map((e,s,u)=>t.jsxs(G.Fragment,{children:[s>0&&e-u[s-1]>1&&t.jsx("span",{className:"px-2",children:"..."}),t.jsx("button",{onClick:()=>m(e),className:`px-4 py-2 border rounded ${a===e?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:e})]},e)),t.jsx("button",{onClick:()=>m(e=>Math.min(e+1,d)),disabled:a===d,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"►"})]})]})]})};export{q as default};
