import{r as x,j as e,b as y}from"./app-CLtIConJ.js";import{p as $,q as F,r as C,s as q,t as T,u as b}from"./index-Dh8e9IBX.js";const K=({academics:l,universities:v,faculties:w,researchOptions:k,onSendReminder:A,onSendBatchReminder:E,pagination:a,currentTab:o})=>{const[i,c]=x.useState({}),[n,h]=x.useState([]),[d,j]=x.useState(!1),[g,_]=x.useState(!1),[R,P]=x.useState({}),U=async t=>{c(s=>({...s,[t]:"sending"}));try{await A(t,"academician"),c(s=>({...s,[t]:"sent"})),setTimeout(()=>{c(s=>{const r={...s};return delete r[t],r})},3e3)}catch{c(r=>({...r,[t]:"error"})),setTimeout(()=>{c(r=>{const m={...r};return delete m[t],m})},3e3)}},z=t=>{if(t.target.checked){const s=l.map(r=>r.id);h(s)}else h([])},D=t=>{h(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},O=async()=>{if(n.length!==0){j(!0);try{await E(n,"academician"),j(!1),_(!0),setTimeout(()=>{h([]),_(!1)},3e3)}catch{j(!1)}}},B=t=>{P(s=>({...s,[t]:!s[t]}))},J=()=>{const t={preserveState:!0,preserveScroll:!0,only:["academicians","postgraduates","undergraduates"],replace:!0};return e.jsxs("div",{className:"mt-4 flex items-center justify-between px-4 py-3 bg-white sm:px-6",children:[e.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[a.current_page>1&&e.jsx(y,{href:`?academicians_page=${a.current_page-1}&tab=${o}`,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",...t,children:"Previous"}),a.current_page<a.last_page&&e.jsx(y,{href:`?academicians_page=${a.current_page+1}&tab=${o}`,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",...t,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:a.from||0})," to ",e.jsx("span",{className:"font-medium",children:a.to||0})," of"," ",e.jsx("span",{className:"font-medium",children:a.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[a.current_page>1&&e.jsx(y,{href:`?academicians_page=${a.current_page-1}&tab=${o}`,className:"relative inline-flex items-center rounded-l-md px-3 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",...t,children:"Previous"}),e.jsx("span",{className:"relative z-10 inline-flex items-center bg-blue-600 px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",children:a.current_page}),a.current_page<a.last_page&&e.jsx(y,{href:`?academicians_page=${a.current_page+1}&tab=${o}`,className:"relative inline-flex items-center rounded-r-md px-3 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",...t,children:"Next"})]})})]})]})};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:n.length>0?e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-md bg-blue-50 text-blue-700",children:[n.length," academician",n.length!==1?"s":""," selected"]}):e.jsx("span",{children:"No academicians selected"})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{onClick:O,disabled:n.length===0||d||g,className:`inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium shadow-sm transition-colors ${n.length===0||d||g?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:[d&&e.jsx($,{className:"animate-spin -ml-0.5 mr-2 h-4 w-4"}),g&&e.jsx(F,{className:"-ml-0.5 mr-2 h-4 w-4"}),!d&&!g?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Send Reminders to Selected"]}):d?"Sending Reminders...":"Reminders Sent!"]})})]}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{scope:"col",className:"relative w-12 px-4 sm:w-16 sm:px-6",children:e.jsx("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6",checked:l&&l.length>0&&n.length===l.length,onChange:z})}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Academician"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"University & Faculty"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Department & Position"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Research Expertise"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Profile Status"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:l&&l.length>0?l.map(t=>{var m,S;const s=t.academician,r=R[t.id]||!1;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"relative w-12 px-4 sm:w-16 sm:px-6",children:e.jsx("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6",checked:n.includes(t.id),onChange:()=>D(t.id)})}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-3 pr-3 text-sm",children:e.jsx("div",{className:"flex items-start space-x-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:(s==null?void 0:s.full_name)||t.name||"N/A"}),e.jsx("div",{className:"text-gray-500 mt-1",children:t.email})]})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s!=null&&s.university&&v[s.university]?v[s.university]:((m=s==null?void 0:s.universityDetails)==null?void 0:m.full_name)||"Not specified"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:s!=null&&s.faculty_id&&w[s.faculty_id]?w[s.faculty_id]:((S=s==null?void 0:s.faculty)==null?void 0:S.name)||"Faculty not specified"})]})}),e.jsx("td",{className:"px-3 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(s==null?void 0:s.current_position)||"Position not specified"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:(s==null?void 0:s.department)||"Department not specified"})]})}),e.jsx("td",{className:"px-3 py-4",children:s!=null&&s.research_expertise?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>B(t.id),className:"flex items-center justify-between w-full text-left text-sm font-medium text-blue-600 hover:text-blue-800",children:[e.jsx("span",{children:Array.isArray(s.research_expertise)?`${s.research_expertise.length} area${s.research_expertise.length!==1?"s":""}`:"Research expertise"}),r?e.jsx(q,{className:"h-4 w-4 ml-1"}):e.jsx(T,{className:"h-4 w-4 ml-1"})]}),r&&e.jsx("div",{className:"mt-2 bg-gray-50 p-2 rounded max-h-40 overflow-y-auto",children:e.jsx("div",{className:"space-y-1 text-sm",children:Array.isArray(s.research_expertise)?s.research_expertise.map((u,f)=>{const p=k.find(N=>`${N.field_of_research_id}-${N.research_area_id}-${N.niche_domain_id}`===u);return p?e.jsxs("div",{className:"text-gray-700 flex",children:[e.jsxs("span",{className:"text-gray-400 mr-1.5",children:[f+1,"."]}),e.jsxs("span",{children:[p.field_of_research_name," - ",p.research_area_name," - ",p.niche_domain_name]})]},f):e.jsxs("div",{className:"text-gray-700 flex",children:[e.jsxs("span",{className:"text-gray-400 mr-1.5",children:[f+1,"."]}),e.jsx("span",{children:typeof u=="string"?u:JSON.stringify(u)})]},f)}):e.jsx("div",{className:"text-gray-700",children:typeof s.research_expertise=="string"?s.research_expertise:JSON.stringify(s.research_expertise)})})})]}):e.jsxs("div",{className:"flex items-center text-gray-500 italic",children:[e.jsx(b,{className:"text-yellow-500 mr-1.5 h-4 w-4"}),e.jsx("span",{children:"Not specified"})]})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(s==null?void 0:s.profile_status)==="Complete"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:(s==null?void 0:s.profile_status)||"Needs Update"})})}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:e.jsx("button",{onClick:()=>U(t.id),disabled:i[t.id]==="sending"||i[t.id]==="sent",className:`inline-flex items-center rounded-md px-3 py-2 text-sm font-medium shadow-sm ${i[t.id]==="sending"||i[t.id]==="sent"?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-blue-600 hover:bg-blue-50 border border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}`,children:i[t.id]==="sending"?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"animate-spin mr-1.5 -ml-0.5 h-4 w-4"}),"Sending..."]}):i[t.id]==="sent"?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-1.5 -ml-0.5 h-4 w-4 text-green-500"}),"Sent"]}):i[t.id]==="error"?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-1.5 -ml-0.5 h-4 w-4 text-red-500"}),"Error"]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-1.5 -ml-0.5 h-4 w-4"}),"Send"]})})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"py-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[e.jsx(b,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{children:"No academicians found"})]})})})})]})})}),a.last_page>1&&J()]})};export{K as default};
