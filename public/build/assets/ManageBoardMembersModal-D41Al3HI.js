import{r as u,j as s,a as v}from"./app-CLtIConJ.js";import{M as b}from"./Modal-C1Nt0ktB.js";import{P as k}from"./PrimaryButton-DqsUc73S.js";import{S as M}from"./SecondaryButton-CxncJiWv.js";import{c as y}from"./index-DtlMuPAt.js";import{c as f}from"./MainLayout-OwM1FlNF.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],w=f("UserCheck",S);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],U=f("UserX",_);function q({show:d,onClose:o,board:t,workspaceMembers:x}){const[r,h]=u.useState([]),[l,p]=u.useState(!1);u.useEffect(()=>{d&&t&&t.members&&h(t.members.map(e=>e.id))},[d,t]);const j=e=>{h(a=>a.includes(e)?a.filter(c=>c!==e):[...a,e])},N=e=>{e.preventDefault(),p(!0),v.post(route("api.boards.syncMembers",t.id),{user_ids:r}).then(a=>{y.success("Board access updated successfully"),o()}).catch(a=>{var i,n;const c=((n=(i=a.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to update board access";y.error(c)}).finally(()=>{p(!1)})},m=e=>{if(!e)return"Unknown User";const a=e.academician||e.postgraduate||e.undergraduate;return(a==null?void 0:a.full_name)||e.name},g=e=>{var c,i,n;if(!e)return null;const a=((c=e.academician)==null?void 0:c.profile_picture)||((i=e.postgraduate)==null?void 0:i.profile_picture)||((n=e.undergraduate)==null?void 0:n.profile_picture);return a?`/storage/${a}`:null};return s.jsx(b,{show:d,onClose:o,maxWidth:"md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Manage Board Access"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Select which workspace members should have access to the ",s.jsx("strong",{children:t==null?void 0:t.name})," board."]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-2 max-h-80 overflow-y-auto",children:x&&x.length>0?s.jsx("div",{className:"space-y-2",children:x.map(e=>{var a;return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${r.includes(e.id)?"bg-indigo-50 border border-indigo-100":"bg-white border border-gray-100"}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:g(e)?s.jsx("img",{src:g(e),alt:m(e),className:"h-full w-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-sm",children:m(e).charAt(0)})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:m(e)}),s.jsx("p",{className:"text-xs text-gray-500",children:((a=e.pivot)==null?void 0:a.role)||"Member"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only",checked:r.includes(e.id),onChange:()=>j(e.id),disabled:l}),r.includes(e.id)?s.jsx("span",{className:"p-1.5 text-indigo-600 bg-indigo-100 rounded-md",children:s.jsx(w,{className:"w-5 h-5"})}):s.jsx("span",{className:"p-1.5 text-gray-400 bg-gray-100 hover:bg-gray-200 rounded-md",children:s.jsx(U,{className:"w-5 h-5"})})]})})]},e.id)})}):s.jsx("div",{className:"text-center p-4",children:s.jsx("p",{className:"text-gray-500",children:"No workspace members available."})})}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(M,{onClick:o,disabled:l,children:"Cancel"}),s.jsx(k,{type:"submit",disabled:l,children:l?"Saving...":"Save Changes"})]})]})]})})}export{q as M};
