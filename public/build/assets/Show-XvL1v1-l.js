import{q as C,r as n,W as M,j as e,b as g,y as B}from"./app-BkEYYv5s.js";import{L as D,M as S}from"./MainLayout-BRh-8HHk.js";import{C as k}from"./ConfirmationModal-DrpG6MMR.js";import{U as P,M as L}from"./ManageCollaboratorsModal-8dak4JNU.js";import{U as T,M as I}from"./ManageBoardMembersModal-1t914m_F.js";import{p as U}from"./purify.es-B2xYLbnv.js";import{C as _}from"./chevron-left-CAFYeWvt.js";import{a as E,C as F}from"./chevron-up-Bjzj3ae1.js";import{P as O,T as A}from"./trash-2-dJz8wjaD.js";import"./index-q1oeqibH.js";import"./useRoles-vHhO6uAY.js";import"./createLucideIcon-5ChSc-b-.js";import"./analytics-BQ374C1C.js";import"./index-Bk97oRuv.js";import"./Modal-BrvPZ8QO.js";import"./transition-kyGYTtJ_.js";import"./InputLabel-BXaPrkos.js";import"./InputError-Dcc_QIk8.js";import"./PrimaryButton-BmFJyJNw.js";import"./SecondaryButton-CHDb3cRZ.js";function G({project:t,connections:u}){const{auth:p}=C().props,[b,i]=n.useState(!1),[o,d]=n.useState(null),[f,c]=n.useState(!1),[l,j]=n.useState(!1),[m,x]=n.useState(null),a=M({name:""}),w=s=>{if(s.preventDefault(),!t||!t.data||!t.data.id){console.error("Project ID is missing, cannot create board.");return}a.post(route("projects.boards.store",t.data.id),{onSuccess:()=>{i(!1),a.reset()}})},y=(s,r)=>{s.preventDefault(),s.stopPropagation(),d(r)},N=()=>{o&&B.delete(route("boards.destroy",o.id),{onSuccess:()=>{d(null)}})},v=(s,r)=>{s.preventDefault(),s.stopPropagation(),x(r)},h=p.user.id===t.data.owner_id;return e.jsxs("div",{className:"w-full md:max-w-8xl md:mx-auto px-4 md:px-4 lg:px-2 py-4 md:py-6 lg:mt-2 mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(g,{href:route("project-hub.index"),className:"flex items-center text-gray-500 hover:text-gray-700 mb-2",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Back to projects"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 truncate",children:t.data.name}),h&&e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Manage Members"]})]}),t.data.description&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mt-1 text-gray-500 ${l?"":"line-clamp-2"}`,dangerouslySetInnerHTML:{__html:U.sanitize(t.data.description)}}),e.jsx("button",{onClick:()=>j(!l),className:"mt-1 text-indigo-600 hover:text-indigo-800 text-sm flex items-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),"Show Less"]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"Show More"]})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Boards"})}),t.data.can.create_board&&(b?e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Create a new board"}),e.jsxs("form",{onSubmit:w,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.data.name,onChange:s=>a.setData("name",s.target.value),className:"w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-sm",placeholder:"Board name",disabled:a.processing,autoFocus:!0}),a.errors.name&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:a.errors.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),a.reset()},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:a.processing,children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md text-xs font-medium text-white bg-indigo-600 hover:bg-indigo-700",disabled:a.processing||!a.data.name.trim(),children:a.processing?"Creating...":"Create Board"})]})]})]}):e.jsxs("button",{type:"button",onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 mb-6 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Create new board"]})),t.data.boards&&t.data.boards.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.data.boards.map(s=>e.jsxs("div",{className:"relative bg-white shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:[e.jsxs(g,{href:route("project-hub.boards.show",s.id),className:"block p-5",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(D,{className:"w-5 h-5 text-indigo-500 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name})]}),e.jsx("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:e.jsxs("span",{children:["Created ",new Date(s.created_at).toLocaleDateString("en-GB")]})})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[h&&e.jsx("button",{onClick:r=>v(r,s),className:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-gray-100 rounded-full",title:"Manage board access",children:e.jsx(P,{className:"w-4 h-4"})}),s.can&&s.can.delete&&e.jsx("button",{onClick:r=>y(r,s),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-full",title:"Delete board",children:e.jsx(A,{className:"w-4 h-4"})})]})]},s.id))}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-500 mb-4",children:"No boards available. Create a board to get started."})})]}),e.jsx(k,{show:!!o,onClose:()=>d(null),onConfirm:N,title:"Delete Board",message:o?`Are you sure you want to delete the board "${o.name}"? This action cannot be undone and will delete all lists and tasks within this board.`:""}),e.jsx(L,{show:f,onClose:()=>c(!1),context:t,contextType:"project",connections:u||[]}),m&&e.jsx(I,{show:!!m,onClose:()=>x(null),board:m,workspaceMembers:t.data.members||[]})]})}G.layout=t=>e.jsx(S,{title:"Project Boards",children:t,TopMenuOpen:!1});export{G as default};
