import{q as x,W as u,j as e,Y as h,b as g,r as j}from"./app-DycluJDi.js";import{M as f}from"./MainLayout-B6p5qXtx.js";import{R as b}from"./quill.snow-C5HudpRX.js";import{u as y}from"./useRoles-Ex28E3oj.js";import"./house-DuQe23QT.js";import"./createLucideIcon-D0KJwFBT.js";import"./zap-DV9Acmiq.js";import"./users-B5watpD6.js";import"./folder-open-Bgm5Yl-Q.js";import"./settings-CcnxK-77.js";import"./chevron-left-CCTwwUf3.js";import"./proxy-BQWTDGOX.js";import"./user-round-D0HJxKcP.js";import"./clipboard-list-BHEDK9c8.js";import"./dollar-sign-DggTktnR.js";import"./calendar-B99WzEhS.js";import"./file-text-CM_fgsBl.js";import"./message-square-DJV6gM-2.js";import"./graduation-cap-D5C30QRj.js";import"./building-0UgdvqyI.js";import"./Dropdown-YylP5fBo.js";import"./transition-CPF_n0Aj.js";import"./sparkles-BmXWKRKa.js";import"./bookmark-DgZoxyTC.js";import"./folder-kanban-DWpojK_X.js";import"./building-2-D0BlUxRJ.js";import"./database-Bdq9zUMP.js";import"./shield-CJ75fCXR.js";import"./index-D2lR-Ixd.js";import"./analytics-BQ374C1C.js";import"./index-CRoFkAwq.js";import"./index-B8HlzDGM.js";import"./iconBase--qfUO0jU.js";import"./supervisionConstants-BuM5-H5X.js";import"./button-DrpbBg5w.js";import"./utils-D-KgF5mV.js";import"./Modal-B5RxEfWL.js";import"./dialog-BhLoydV6.js";import"./PrimaryButton-BmPLB8rg.js";import"./SecondaryButton-BMDFl-bS.js";import"./x-DMdqOVgw.js";import"./chevron-right-Ccsl5LyU.js";import"./search-B-v2ubcP.js";import"./circle-check-big-CCdWVaOD.js";import"./tooltip-Bjh7jqzi.js";import"./index-CQUljECt.js";import"./index-Cyyfgiou.js";import"./index-CjkJyM6P.js";import"./index-TfP-1Own.js";import"./index-DhTYVmtt.js";import"./index-MS7JGIS8.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-DygBQkXJ.js";import"./index-C_G9iF1W.js";import"./index-Bf3MYqwD.js";import"./briefcase-B4GBZk0m.js";import"./user-gMN38dzl.js";function v({tags:r,setTags:i}){const[n,c]=j.useState(""),s=o=>{if(o.key==="Enter"||o.key===","){o.preventDefault();const t=n.trim();t&&!r.includes(t)&&i([...r,t]),c("")}else o.key==="Backspace"&&!n.length&&r.length&&i(r.slice(0,r.length-1))},m=o=>{i(r.filter((t,a)=>a!==o))};return e.jsxs("div",{className:"flex flex-wrap items-center border rounded-lg p-2",children:[r.map((o,t)=>e.jsxs("div",{className:"bg-blue-200 text-blue-800 rounded-full px-3 py-1 m-1 flex items-center",children:[e.jsx("span",{children:o}),e.jsx("button",{type:"button",onClick:()=>m(t),className:"ml-2 text-sm text-blue-800",children:"Ã—"})]},t)),e.jsx("input",{type:"text",value:n,onChange:o=>c(o.target.value),onKeyDown:s,className:"flex-grow outline-none p-1",placeholder:"Type a tag and press enter"})]})}function Ce(){x().props,y();const{data:r,setData:i,post:n,processing:c,errors:s}=u({title:"",url:"",content:"",category:"",tags:[],images:[],featured_image:null,attachment:null,status:"published"}),m=t=>{i("tags",t)};function o(t){t.preventDefault();const a=new FormData;Object.keys(r).forEach(l=>{l==="tags"?a.append(l,JSON.stringify(r[l])):l==="images"&&Array.isArray(r[l])?r[l].forEach((d,p)=>{a.append(`images[${p}]`,d)}):(r[l]instanceof File,a.append(l,r[l]))}),n(route("create-posts.store"),{data:a,headers:{"Content-Type":"multipart/form-data"},preserveScroll:!0,onSuccess:()=>{alert("Post created successfully.")},onError:l=>{console.error("Error creating Post:",l),alert("Failed to create the Post. Please check the form for errors.")}})}return e.jsxs(f,{title:"",children:[e.jsx(h,{title:"Add New Post"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-4 h-4 mr-2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Back"]})}),e.jsxs("form",{onSubmit:o,className:"bg-white p-6 lg:p-0 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Post"}),Object.keys(s).length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Please fix the following errors:"}),e.jsx("ul",{className:"mt-2 list-disc list-inside",children:Object.entries(s).map(([t,a])=>e.jsx("li",{children:t==="images"?Object.entries(a).map(([l,d])=>e.jsxs("span",{children:["Image ",parseInt(l)+1,": ",d]},l)):a},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-10 gap-4 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Post Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:r.title,onChange:t=>i("title",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter Post Title"}),s.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.title})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Category ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"category",name:"category",value:r.category,onChange:t=>i("category",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Category"}),e.jsx("option",{value:"General Discussion",children:"General Discussion"}),e.jsx("option",{value:"Academic Research",children:"Academic Research"}),e.jsx("option",{value:"Student Life",children:"Student Life"}),e.jsx("option",{value:"Career Opportunities",children:"Career Opportunities"}),e.jsx("option",{value:"News",children:"News"}),e.jsx("option",{value:"Startup",children:"Startup"}),e.jsx("option",{value:"Technology",children:"Technology"}),e.jsx("option",{value:"Research Methodology",children:"Research Methodology"}),e.jsx("option",{value:"Research Paradigm",children:"Research Paradigm"}),e.jsx("option",{value:"Science & Technology",children:"Science & Technology"}),e.jsx("option",{value:"Social Science",children:"Social Science"}),e.jsx("option",{value:"Community",children:"Community"}),e.jsx("option",{value:"Award",children:"Award"}),e.jsx("option",{value:"Achievement",children:"Achievement"}),e.jsx("option",{value:"Business",children:"Business"}),e.jsx("option",{value:"Economy",children:"Economy"}),e.jsx("option",{value:"Health",children:"Health"}),e.jsx("option",{value:"Science",children:"Science"}),e.jsx("option",{value:"Sport",children:"Sport"}),e.jsx("option",{value:"Corporate Social Responsibility",children:"Corporate Social Responsibility"}),e.jsx("option",{value:"Knowledge Transfer Program",children:"Knowledge Transfer Program"})]}),s.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.category})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-10 gap-4 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 w-full rounded-lg border border-gray-200",style:{height:"300px",overflowY:"auto"},children:e.jsx(b,{theme:"snow",value:r.content,onChange:t=>i("content",t),placeholder:"Enter content",style:{height:"300px",maxHeight:"300px"}})}),s.content&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.content})]}),e.jsxs("div",{className:"lg:col-span-3 flex flex-col space-y-4 lg:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Tags"}),e.jsx(v,{tags:r.tags,setTags:m}),s.tags&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.tags})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Images (Multiple Allowed)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t=>{const a=Array.from(t.target.files);i("images",a)},className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),s.images&&e.jsx("div",{className:"mt-1",children:Object.entries(s.images).map(([t,a])=>e.jsxs("p",{className:"text-red-500 text-xs",children:["Image ",parseInt(t)+1,": ",a]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Featured Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>i("featured_image",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),s.featured_image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.featured_image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:t=>i("attachment",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),s.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.attachment})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:space-x-4",children:[e.jsx("button",{type:"submit",disabled:c,className:"w-full sm:w-auto inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"}),e.jsx(g,{href:route("create-posts.index"),className:"w-full sm:w-auto inline-block rounded-lg bg-gray-300 px-5 py-3 text-sm font-medium text-gray-700 hover:bg-gray-400 text-center",children:"Cancel"})]})]})]})]})}export{Ce as default};
