import{r as m,j as t,Y as P,y as n,a as g,b as y}from"./app-Doi1BfNX.js";import{M as S,U as q,g as C}from"./MainLayout-VD0w9tEu.js";import{g as D}from"./supervisionConstants-BuM5-H5X.js";import{f as T,g as F,n as A,q as R}from"./index-Degf296b.js";import{m as p}from"./proxy-BUFhk0Wh.js";import"./house-DG9-SKJz.js";import"./createLucideIcon-BIWf6Fgr.js";import"./zap-Jwr2WBUL.js";import"./users-CJk5icQ6.js";import"./folder-open-Dt0aD5aH.js";import"./settings-BrND01Uv.js";import"./useRoles-ZkMXyAVp.js";import"./chevron-left-B4SkBdMm.js";import"./user-round-B_eanpyP.js";import"./clipboard-list-DrTWdQ-4.js";import"./dollar-sign-D4dg_IhF.js";import"./calendar-CBO9yeE8.js";import"./file-text-CjHuEEW2.js";import"./message-square-THXDma7t.js";import"./graduation-cap-BiSIS5Fh.js";import"./building-Blr4MO9I.js";import"./Dropdown-C3siJS7L.js";import"./transition-Dk-vnbkR.js";import"./sparkles-CoZiYbuv.js";import"./bookmark-TdMgL57n.js";import"./folder-kanban-Ci5r-Zyx.js";import"./building-2-DoFw0cmv.js";import"./database-B1qHiJEl.js";import"./shield-B9sqgGYc.js";import"./index-CvKzrQIm.js";import"./analytics-BQ374C1C.js";import"./index-dbiIR3J5.js";import"./utils-D-KgF5mV.js";import"./ThreadPane-B5BIAZi7.js";import"./Modal-BjJ_nX2Q.js";import"./dialog-DYcl7DcC.js";import"./scroll-area-Du06xGgY.js";import"./index-FRhtyj0h.js";import"./index-B_QUZuO0.js";import"./index-BdR5mO0l.js";import"./index-Bb94jkfk.js";import"./index-BdQq_4o_.js";import"./format-Dv9Rm441.js";import"./en-US-DNUEYIb-.js";import"./button-KPEq8PdI.js";import"./download-Xk6ccwe6.js";import"./x-DrXySrr5.js";import"./isSameDay-Dm-A-V7S.js";import"./constructNow-DtVD-0hX.js";import"./addDays-CAl2nVVE.js";import"./PrimaryButton-DP3HZhbg.js";import"./SecondaryButton-u54usrQd.js";import"./chevron-right-Dg3EFaoF.js";import"./search-FGZFllxI.js";import"./circle-check-big-BlfyvA-C.js";import"./tooltip-CJCiABJO.js";import"./index-CZA6k5rr.js";import"./index-Be4Hbpsc.js";import"./index-BkPy3AN8.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-CJzlUPP7.js";import"./index-CkAoBwhz.js";import"./index-BvLvCl4J.js";import"./briefcase-Cs22VvWr.js";import"./user-dLQj9SMU.js";function We({notifications:s,availableTypes:h,filters:i}){const[l,_]=m.useState(i.status||"all"),[f,j]=m.useState(i.type||""),[b,o]=m.useState([]),d=r=>{_(r);const e={...i};r==="all"?delete e.status:e.status=r,n.get(route("notifications.index"),e,{preserveState:!0,preserveScroll:!0})},v=r=>{j(r);const e={...i,type:r||void 0};n.get(route("notifications.index"),e,{preserveState:!0,preserveScroll:!0})},N=async r=>{o(e=>[...e,r]);try{await g.post("/api/v1/app/notifications/mark-as-read",{notification_id:r}),n.reload({only:["notifications"]})}catch(e){console.error("Error marking notification as read:",e)}finally{o(e=>e.filter(a=>a!==r))}},k=async r=>{if(confirm("Are you sure you want to delete this notification?")){o(e=>[...e,r]);try{await g.delete(`/api/v1/app/notifications/${r}`),n.reload({only:["notifications"]})}catch(e){console.error("Error deleting notification:",e)}finally{o(e=>e.filter(a=>a!==r))}}},x=r=>{const e=r.data;return e.requester_name?{name:e.requester_name,profilePicture:e.requester_profile_picture}:e.recipient_name?{name:e.recipient_name,profilePicture:e.recipient_profile_picture}:e.student_name?{name:e.student_name,profilePicture:e.student_profile_picture}:e.supervisor_name?{name:e.supervisor_name,profilePicture:e.supervisor_profile_picture}:e.inviter_name?{name:e.inviter_name,profilePicture:e.inviter_profile_picture}:e.assigner_name?{name:e.assigner_name,profilePicture:e.assigner_profile_picture}:e.meeting_creator_name?{name:e.meeting_creator_name,profilePicture:e.meeting_creator_profile_picture}:e.canceller_name?{name:e.canceller_name,profilePicture:e.canceller_profile_picture}:e.initiator_name?{name:e.initiator_name,profilePicture:e.initiator_profile_picture}:e.changed_by_profile_picture||e.deleted_by_profile_picture?{name:e.changed_by||e.deleted_by||"Administrator",profilePicture:e.changed_by_profile_picture||e.deleted_by_profile_picture}:e.cosupervisor_name?{name:e.cosupervisor_name,profilePicture:e.cosupervisor_profile_picture}:e.initiator?{name:e.initiator,profilePicture:e.initiator_profile_picture}:e.approver?{name:e.approver,profilePicture:e.approver_profile_picture}:{name:"System",profilePicture:null}},w=r=>{const e=r.data,a=x(r);switch(e.type){case"connection_request":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ","sent you a connection request"]}),t.jsx("div",{className:"mt-2",children:t.jsx(y,{href:"/connections?tab=received",className:"inline-flex items-center px-3 py-1.5 text-xs font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors shadow-sm",children:"View"})})]});case"connection_accepted":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ","accepted your connection request"]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"You are friends now!"}),t.jsx("div",{className:"mt-2",children:t.jsx(y,{href:"/connections?tab=connections",className:"inline-flex items-center px-3 py-1.5 text-xs font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors shadow-sm",children:"View"})})]});case"task_assigned":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ",'assigned you to task "',t.jsx("span",{className:"font-medium",children:e.task_title}),'"',e.workspace_name&&t.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[" in ",e.workspace_name]})]}),e.task_due_date&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["ðŸ“… Due: ",new Date(e.task_due_date).toLocaleDateString("en-GB")]})]});case"task_due_date_changed":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:['Due date changed for task "',t.jsx("span",{className:"font-medium",children:e.task_title}),'"']}),e.old_due_date_formatted&&e.new_due_date_formatted&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[e.old_due_date_formatted," â†’ ",e.new_due_date_formatted]}),e.changed_by&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["Changed by ",e.changed_by]})]});case"workspace_invitation":return t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ",'invited you to workspace "',t.jsx("span",{className:"font-medium",children:e.workspace_name}),'"']})});case"workspace_deleted":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:['Workspace "',t.jsx("span",{className:"font-medium",children:e.workspace_name}),'" was deleted']}),e.deleted_by&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["Deleted by ",e.deleted_by]})]});case"board_deleted":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:['Board "',t.jsx("span",{className:"font-medium",children:e.board_name}),'" in ',e.parent_type,' "',t.jsx("span",{className:"font-medium",children:e.parent_name}),'" was deleted']}),e.deleted_by&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["Deleted by ",e.deleted_by]})]});case"role_changed":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:["Your role in ",e.parent_type,' "',t.jsx("span",{className:"font-medium",children:e.parent_name}),'" changed to ',t.jsx("span",{className:"font-medium",children:e.new_role})]}),e.changed_by&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["Changed by ",e.changed_by]})]});case"project_invitation":return t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ",'invited you to project "',t.jsx("span",{className:"font-medium",children:e.project_name}),'"']})});case"request_submitted":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ","submitted a new supervision request"]}),e.proposal_title&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e.proposal_title})]});case"request_approved":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ","approved your supervision request"]}),e.proposal_title&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e.proposal_title})]});case"request_rejected":return t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ","declined your supervision request"]}),e.rejection_reason&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["Reason: ",D(e.rejection_reason)]})]});case"offer_sent":return t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ","sent you a supervision offer"]})});case"offer_accepted":return t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:[t.jsx("span",{className:"font-semibold",children:a.name})," ","accepted your supervision offer"]})});default:return e.message?t.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:e.message}):t.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:"You have a new notification"})}},u=s.data.filter(r=>!r.read_at).length;return t.jsxs(S,{children:[t.jsx(P,{title:"Notifications"}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-2 pb-8 pt-8 lg:pt-4",children:[t.jsxs(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-50",children:"Notifications"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Stay updated with all your activities and interactions"})]}),t.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="all"?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"All"}),t.jsxs("button",{onClick:()=>d("unread"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="unread"?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:["Unread ",u>0&&`(${u})`]}),t.jsx("button",{onClick:()=>d("read"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="read"?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Read"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{className:"text-gray-500"}),t.jsxs("select",{value:f,onChange:r=>v(r.target.value),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-50 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"All Types"}),h.map(r=>t.jsx("option",{value:r.value,children:r.label},r.value))]})]})]})}),t.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.data.length>0?s.data.map((r,e)=>{const a=x(r),c=b.includes(r.id);return t.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:e*.05},className:`px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${r.read_at?"":"bg-blue-50/30 dark:bg-blue-900/10"}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(q,{src:a.profilePicture,name:a.name,size:"md"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[w(r),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:C(r.created_at)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[!r.read_at&&!c&&t.jsx("button",{onClick:()=>N(r.id),className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Mark as read",children:t.jsx(F,{className:"text-sm"})}),!c&&t.jsx("button",{onClick:()=>k(r.id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete notification",children:t.jsx(A,{className:"text-sm"})}),c&&t.jsx(R,{className:"animate-spin text-blue-500"})]})]})},r.id)}):t.jsx("div",{className:"px-6 py-12 text-center",children:t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications found"})})}),s.links.length>3&&t.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",s.from," to ",s.to," of ",s.total," notifications"]}),t.jsx("div",{className:"flex items-center gap-2",children:s.links.map((r,e)=>t.jsx("button",{onClick:()=>{r.url&&n.get(r.url,i,{preserveState:!0,preserveScroll:!1})},disabled:!r.url,className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${r.active?"bg-blue-600 text-white":r.url?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700":"text-gray-400 dark:text-gray-600 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:r.label}},e))})]})})]})]})]})}export{We as default};
