import{q as U,W as $,r as c,j as e,y as j}from"./app-Doi1BfNX.js";import{M as D}from"./MainLayout-VD0w9tEu.js";import{u as R}from"./useRoles-ZkMXyAVp.js";import"./house-DG9-SKJz.js";import"./createLucideIcon-BIWf6Fgr.js";import"./zap-Jwr2WBUL.js";import"./users-CJk5icQ6.js";import"./folder-open-Dt0aD5aH.js";import"./settings-BrND01Uv.js";import"./chevron-left-B4SkBdMm.js";import"./proxy-BUFhk0Wh.js";import"./user-round-B_eanpyP.js";import"./clipboard-list-DrTWdQ-4.js";import"./dollar-sign-D4dg_IhF.js";import"./calendar-CBO9yeE8.js";import"./file-text-CjHuEEW2.js";import"./message-square-THXDma7t.js";import"./graduation-cap-BiSIS5Fh.js";import"./building-Blr4MO9I.js";import"./Dropdown-C3siJS7L.js";import"./transition-Dk-vnbkR.js";import"./sparkles-CoZiYbuv.js";import"./bookmark-TdMgL57n.js";import"./folder-kanban-Ci5r-Zyx.js";import"./building-2-DoFw0cmv.js";import"./database-B1qHiJEl.js";import"./shield-B9sqgGYc.js";import"./index-CvKzrQIm.js";import"./analytics-BQ374C1C.js";import"./index-dbiIR3J5.js";import"./index-Degf296b.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-D-KgF5mV.js";import"./ThreadPane-B5BIAZi7.js";import"./Modal-BjJ_nX2Q.js";import"./dialog-DYcl7DcC.js";import"./scroll-area-Du06xGgY.js";import"./index-FRhtyj0h.js";import"./index-B_QUZuO0.js";import"./index-BdR5mO0l.js";import"./index-Bb94jkfk.js";import"./index-BdQq_4o_.js";import"./format-Dv9Rm441.js";import"./en-US-DNUEYIb-.js";import"./button-KPEq8PdI.js";import"./download-Xk6ccwe6.js";import"./x-DrXySrr5.js";import"./isSameDay-Dm-A-V7S.js";import"./constructNow-DtVD-0hX.js";import"./addDays-CAl2nVVE.js";import"./PrimaryButton-DP3HZhbg.js";import"./SecondaryButton-u54usrQd.js";import"./chevron-right-Dg3EFaoF.js";import"./search-FGZFllxI.js";import"./circle-check-big-BlfyvA-C.js";import"./tooltip-CJCiABJO.js";import"./index-CZA6k5rr.js";import"./index-Be4Hbpsc.js";import"./index-BkPy3AN8.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-CJzlUPP7.js";import"./index-CkAoBwhz.js";import"./index-BvLvCl4J.js";import"./briefcase-Cs22VvWr.js";import"./user-dLQj9SMU.js";const Te=()=>{const{academicians:i,flash:n,universities:v,faculties:N,researchOptions:b}=U().props;R();const{post:O,processing:w}=$(),[S,k]=c.useState({}),[a,h]=c.useState({}),[o,u]=c.useState(!1),[l,d]=c.useState(!1);c.useEffect(()=>{const t={};i.forEach(s=>{t[s.id]=o}),h(t)},[i,o]);const _=t=>{j.post(route("faculty-admin.verify-academician",t),{},{onStart:()=>{console.log(`Starting verification for academician ID: ${t}`)},onSuccess:s=>{console.log(`Successfully verified academician ID: ${t}`),s.props.flash&&s.props.flash.success?alert(s.props.flash.success):alert("Academician verified successfully!")},onError:s=>{console.error(`Failed to verify academician ID: ${t}`,s),alert("Failed to verify academician.")}})},A=()=>{const t=Object.keys(a).filter(s=>a[s]).map(s=>parseInt(s,10));if(t.length===0){alert("Please select at least one academician to verify.");return}d(!0),console.log("Sending verification request for IDs:",t),j.post(route("faculty-admin.verify-academicians-batch"),{academician_ids:t},{onStart:()=>(console.log("Starting batch verification request"),!0),onSuccess:s=>{console.log("Verification success response:",s),s.props.flash&&s.props.flash.success?alert(s.props.flash.success):alert("Academicians verified successfully!"),h({}),u(!1),d(!1)},onError:s=>{console.error("Verification error:",s),d(!1),alert("Failed to verify academicians: "+(Object.values(s)[0]||"Unknown error"))},onFinish:()=>{console.log("Verification request finished"),d(!1)}})},I=t=>{const s={...a};s[t]=!a[t],h(s);const r=i.every(m=>s[m.id]===!0);u(r)},C=()=>{u(!o)},f=()=>Object.values(a).filter(Boolean).length,V=t=>{const s=v.find(r=>r.id===t);return s?s.full_name:"Unknown University"},E=t=>{const s=N.find(r=>r.id===t);return s?s.name:"Unknown Faculty"},B=t=>{k(s=>({...s,[t]:!s[t]}))},F=t=>t?e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Verified"}):e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Not Verified"});return e.jsx(D,{title:"",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-2 px-4",children:[e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Academicians"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Review and verify academicians in your faculty."})]}),i.length>0&&e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[f()," selected"]}),e.jsx("button",{className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${f()>0?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-300 cursor-not-allowed"}`,onClick:A,disabled:f()===0||l,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Selected"})]})]}),(n==null?void 0:n.success)&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-700",children:n.success})})]})}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:i.length===0?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No academicians pending verification in your faculty."})}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:o,onChange:C,disabled:l}),e.jsx("span",{className:"ml-2",children:"Select All"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academician"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"University & Faculty"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department & Position"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Expertise"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>{var m;const s=S[t.id]||!1,r=a[t.id]||!1;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:r||!1,onChange:()=>I(t.id),disabled:l})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.full_name||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((m=t.user)==null?void 0:m.email)||"N/A"})]})})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:V(t.university)}),e.jsx("div",{className:"text-sm text-gray-500",children:E(t.faculty)})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.department||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:t.current_position||"N/A"})]}),e.jsx("td",{className:"px-6 py-4",children:t.research_expertise&&t.research_expertise.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[t.research_expertise.length," area",t.research_expertise.length!==1?"s":""]}),e.jsx("button",{onClick:()=>B(t.id),className:"text-blue-600 hover:text-blue-800 text-sm",children:s?"Hide details":"Show details"})]}),s&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.research_expertise.map((g,x)=>{const p=b.find(y=>`${y.field_of_research_id}-${y.research_area_id}-${y.niche_domain_id}`===g);return p?e.jsxs("p",{className:"text-sm text-gray-700",children:[x+1,". ",p.field_of_research_name," - ",p.research_area_name," - ",p.niche_domain_name]},x):e.jsxs("p",{className:"text-sm text-gray-700",children:[x+1,". Unknown expertise (ID: ",g,")"]},x)})})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No research expertise specified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F(t.verified)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!t.verified&&e.jsx("button",{className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>_(t.id),disabled:w||l,children:"Verify"})})]},t.id)})})]})})})]})})};export{Te as default};
