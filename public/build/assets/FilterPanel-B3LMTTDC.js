import{r as v,j as e}from"./app-1xdDtbuK.js";import{S as j}from"./react-select.esm-B5NorESl.js";import{F as q,f as z}from"./index-Cmq_fAnc.js";import"./floating-ui.dom-eiE65J5j.js";import"./iconBase-CbySmyZP.js";function I({searchType:l,searchResults:i,universities:$,faculties:U,researchOptions:S,skills:N,selectedArea:E,setSelectedArea:w,selectedUniversity:k,setSelectedUniversity:_,selectedAvailability:C,setSelectedAvailability:A,selectedSkills:g,setSelectedSkills:F,onClose:f=null,isOpen:p=!0,toggleOpen:n=null}){const[b,d]=v.useState(p),y=v.useRef(null);v.useEffect(()=>{function r(s){y.current&&!y.current.contains(s.target)&&window.innerWidth<1024&&(d(!1),n&&n(!1))}return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[n]),v.useEffect(()=>{d(p)},[p]);const c=(()=>{if(!i||!i.matches)return{researchAreas:[],universities:[],skills:[]};const r=new Set,s=new Set;i.matches.forEach(a=>{const t=a.academician||a.student||{},o=l==="supervisor"||l==="collaborators"&&a.result_type==="academician"?t.research_expertise:t.student_type==="postgraduate"?t.field_of_research:t.research_preference;Array.isArray(o)&&o.forEach(u=>{r.add(u)}),Array.isArray(t.skills)&&t.skills.forEach(u=>{u&&u.id&&s.add(u.id)})});const x=(Array.isArray(N)?N:[]).filter(a=>s.has(a.id)).map(a=>{let t=a.name;return a.subdomain&&a.subdomain.domain?t=`${a.subdomain.domain.name} - ${a.subdomain.name} - ${a.name}`:a.full_name?t=a.full_name:t=a.name,{value:a.id,label:t}}),h=Array.from(r).map(a=>{const t=S.find(o=>`${o.field_of_research_id}-${o.research_area_id}-${o.niche_domain_id}`===a);return t?{value:a,label:`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`}:{value:a,label:`${a}`}}),m=new Set;i.matches.forEach(a=>{const t=a.academician||a.student||{};t.university&&m.add(t.university.toString())});const M=Array.from(m).map(a=>{const t=$.find(o=>o.id.toString()===a);return{value:a,label:t?t.short_name:"Unknown University"}});return{researchAreas:h,universities:M,skills:x}})(),L=()=>{var r,s;if(l==="supervisor")return"Available for Supervision";if(l==="students")return"Looking for Supervision";if(l==="collaborators"){const x=(r=i==null?void 0:i.matches)==null?void 0:r.some(m=>m.result_type==="academician"),h=(s=i==null?void 0:i.matches)==null?void 0:s.some(m=>m.result_type!=="academician");return x&&!h?"Available for Collaboration":!x&&h?"Looking for Supervision":"Availability"}return"Availability"},P=e.jsx("div",{className:"fixed top-20 right-4 z-50 flex items-center space-x-4 lg:hidden",children:e.jsx("button",{onClick:()=>{d(!b),n&&n(!b)},className:"bg-blue-600 text-white p-2 rounded-full shadow-lg",children:e.jsx(z,{className:"text-xl"})})});return e.jsxs(e.Fragment,{children:[P,e.jsx("div",{ref:y,className:`fixed lg:relative top-0 left-0 lg:block lg:w-full w-3/4 h-full bg-white lg:bg-transparent rounded-lg lg:rounded-none shadow-lg lg:shadow-none transition-transform duration-300 z-30 ${b?"translate-x-0":"-translate-x-full"} lg:translate-x-0 overflow-auto pb-20 lg:pb-0`,children:e.jsxs("div",{className:"p-5 lg:p-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>{d(!1),n&&n(!1),f&&f()},className:"text-gray-500 hover:text-gray-700 lg:hidden transition-colors",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Research Area"}),e.jsx(j,{isMulti:!0,name:"researchAreas",options:c.researchAreas,value:c.researchAreas.filter(r=>E.includes(r.value)),onChange:r=>w(r?r.map(s=>s.value):[]),placeholder:"Filter by research area...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0})]}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent my-6"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"University"}),e.jsx(j,{isMulti:!0,name:"universities",options:c.universities,value:c.universities.filter(r=>k.includes(r.value)),onChange:r=>_(r?r.map(s=>s.value):[]),placeholder:"Filter by university...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0})]}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent my-6"}),(l==="students"||l==="collaborators")&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Skills"}),e.jsx(j,{isMulti:!0,name:"skills",options:c.skills,value:c.skills.filter(r=>g==null?void 0:g.includes(r.value)),onChange:r=>F(r?r.map(s=>s.value):[]),placeholder:"Filter by skills...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0})]}),l!=="collaborators"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent my-6"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:L()}),e.jsxs("select",{className:`mt-1 block w-full pl-3 pr-10 py-2.5 text-base border-gray-300 
                            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm 
                            rounded-xl shadow-sm transition-all duration-200`,value:C,onChange:r=>A(r.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]})]}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent my-6"}),e.jsx("button",{className:`w-full px-4 py-3 bg-gradient-to-r from-gray-100 to-gray-50 hover:from-gray-200 hover:to-gray-100 
                    rounded-xl shadow-sm text-sm font-semibold text-gray-700 
                    transition-all duration-300 hover:shadow-md border border-gray-200`,onClick:()=>{w([]),_([]),A(""),F([])},children:"Reset All Filters"})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>{d(!1),n&&n(!1),f&&f()}})]})}export{I as default};
