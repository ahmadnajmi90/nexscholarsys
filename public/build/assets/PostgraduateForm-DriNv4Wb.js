import{q as T,W as D,r as m,j as e}from"./app-BMOBPCyx.js";import{T as d,I as n}from"./TextInput-CRlifNPW.js";import{I as o}from"./InputLabel-BraqCceo.js";import{P as G}from"./PrimaryButton-DOUv7wfZ.js";import O from"./NationalityForm-LzaQzNDw.js";import{z as U}from"./transition-Jn6RKi0L.js";function K({universities:y,faculties:N,className:w="",researchOptions:C}){const s=T().props.postgraduate,{data:r,setData:t,post:_,errors:c,processing:k,recentlySuccessful:F}=D({phone_number:(s==null?void 0:s.phone_number)||"",full_name:(s==null?void 0:s.full_name)||"",previous_degree:typeof(s==null?void 0:s.previous_degree)=="string"?JSON.parse(s==null?void 0:s.previous_degree):s==null?void 0:s.previous_degree,bachelor:(s==null?void 0:s.bachelor)||"",CGPA_bachelor:(s==null?void 0:s.CGPA_bachelor)||"",master:(s==null?void 0:s.master)||"",master_type:(s==null?void 0:s.master_type)||"",nationality:(s==null?void 0:s.nationality)||"",english_proficiency_level:(s==null?void 0:s.english_proficiency_level)||"",funding_requirement:(s==null?void 0:s.funding_requirement)||"",current_postgraduate_status:(s==null?void 0:s.current_postgraduate_status)||"",matric_no:(s==null?void 0:s.matric_no)||"",suggested_research_title:(s==null?void 0:s.suggested_research_title)||"",suggested_research_description:(s==null?void 0:s.suggested_research_description)||"",CV_file:(s==null?void 0:s.CV_file)||"",profile_picture:(s==null?void 0:s.profile_picture)||"",field_of_research:typeof(s==null?void 0:s.field_of_research)=="string"?JSON.parse(s==null?void 0:s.field_of_research):s==null?void 0:s.field_of_research,website:(s==null?void 0:s.website)||"",linkedin:(s==null?void 0:s.linkedin)||"",google_scholar:(s==null?void 0:s.google_scholar)||"",researchgate:(s==null?void 0:s.researchgate)||"",bio:(s==null?void 0:s.bio)||"",faculty:(s==null?void 0:s.faculty)||"",university:(s==null?void 0:s.university)||""}),S=l=>{if(l.preventDefault(),!r.profile_picture){alert("Please select a profile picture.");return}const a=new FormData;a.append("profile_picture",r.profile_picture),_(route("role.updateProfilePicture"),{data:a,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile picture updated successfully."),p()},onError:i=>{console.error("Error updating profile picture:",i),alert("Failed to update the profile picture. Please try again.")}})},P=l=>{const a=l.target.value;t(i=>({...i,current_postgraduate_status:a,matric_no:a==="Registered"?i.matric_no:"",university:a==="Registered"?i.university:"",faculty:a==="Registered"?i.faculty:""}))},I=l=>{l.preventDefault();const a=new FormData;Object.keys(r).forEach(i=>{i!=="profile_picture"&&(Array.isArray(r[i])?a.append(i,JSON.stringify(r[i])):a.append(i,r[i]))});for(let[i,b]of a.entries())console.log(`${i}: ${b}`),console.log(`${i}: ${typeof b}`);_(route("role.update"),{data:a,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile updated successfully.")},onError:i=>{console.error("Error updating profile:",i),alert("Failed to update the profile. Please try again.")}})},[R,v]=m.useState(!1),q=()=>v(!0),p=()=>v(!1),[g,M]=m.useState(r.university),$=N.filter(l=>l.university_id===parseInt(g)),[u,A]=m.useState(!1),[h,E]=m.useState(!1),[j,x]=m.useState(!1);m.useEffect(()=>{(r.suggested_research_title||r.suggested_research_description)&&x(!0)},[r.suggested_research_title,r.suggested_research_description]);const B=l=>{l.target.value==="yes"?x(!0):x(!1),l.target.value==="yes"||t(i=>({...i,suggested_research_title:"",suggested_research_description:""}))},[f,V]=m.useState("profiles");return e.jsxs("div",{className:"pb-8",children:[e.jsxs("div",{className:"w-full h-66 bg-cover bg-center mt-4",style:{backgroundImage:`url('https://picsum.photos/seed/${s==null?void 0:s.id}/500/150')`},children:[e.jsx("div",{}),e.jsxs("div",{className:"flex flex-col items-center -mt-16 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/${r.profile_picture||"default-profile.jpg"}`,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white shadow-md object-cover"}),e.jsx("button",{onClick:q,className:"absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Profile Picture",children:"✏️"})]}),e.jsxs("div",{className:"text-center mt-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 uppercase",children:r.full_name}),e.jsx("p",{className:"text-gray-500",children:r.highest_degree}),e.jsx("p",{className:"text-gray-500",children:r.current_position})]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Profile Picture"}),e.jsxs("form",{onSubmit:S,children:[e.jsx("input",{type:"file",accept:"image/*",className:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:l=>t("profile_picture",l.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 mr-2",children:"Save"}),e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-6xl mx-auto flex space-x-8 px-4 sm:px-6",children:["Profiles","Projects","Works","Teams","Network","Activity","More"].map(l=>e.jsx("button",{className:`py-4 px-3 font-medium text-sm ${f.toLowerCase()===l.toLowerCase()?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>V(l.toLowerCase()),children:l},l))})}),e.jsxs("div",{className:"w-full px-4 py-8",children:[f==="profiles"&&e.jsxs("section",{className:w,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your personal information."})]}),e.jsxs("form",{onSubmit:I,className:"mt-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(o,{htmlFor:"full_name",value:"Full Name",required:!0}),e.jsx(d,{id:"full_name",className:"mt-1 block w-full",value:r.full_name,onChange:l=>t("full_name",l.target.value),required:!0,isFocused:!0,autoComplete:"full_name"}),e.jsx(n,{className:"mt-2",message:c.full_name})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(o,{htmlFor:"bio",value:"Short Bio"}),e.jsx("textarea",{id:"bio",className:"mt-1 block w-full",value:r.bio,onChange:l=>t("bio",l.target.value),rows:4}),e.jsx(n,{className:"mt-2",message:c.bio})]})}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Your Previous Degree"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:u,onChange:()=>{const l=!u;A(l),t(a=>({...a,previous_degree:JSON.stringify([...l?["Bachelor Degree"]:[],...h?["Master"]:[]])}))}}),e.jsx("span",{children:"Bachelor Degree"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox",checked:h,onChange:()=>{const l=!h;E(l),t(a=>({...a,previous_degree:JSON.stringify([...u?["Bachelor Degree"]:[],...l?["Master"]:[]])}))}}),e.jsx("span",{children:"Master"})]})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"bachelor",value:"Bachelor Degree In"}),e.jsx(d,{id:"bachelor",className:"mt-1 block w-full",value:r.bachelor||"",onChange:l=>t(a=>({...a,bachelor:l.target.value}))}),e.jsx(n,{className:"mt-2",message:c.bachelor})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"CGPA_bachelor",value:"CGPA Bachelor"}),e.jsx(d,{id:"CGPA_bachelor",className:"mt-1 block w-full",value:r.CGPA_bachelor||"",onChange:l=>t(a=>({...a,CGPA_bachelor:l.target.value}))}),e.jsx(n,{className:"mt-2",message:c.CGPA_bachelor})]})]}),h&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"master",value:"Master Degree In"}),e.jsx(d,{id:"master",className:"mt-1 block w-full",value:r.master||"",onChange:l=>t(a=>({...a,master:l.target.value}))}),e.jsx(n,{className:"mt-2",message:c.master})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"master_type",value:"Master Type"}),e.jsxs("select",{id:"master_type",className:"mt-1 block w-full border rounded-md p-2",value:r.master_type||"",onChange:l=>t(a=>({...a,master_type:l.target.value})),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Master Type"}),e.jsx("option",{value:"Full Research",children:"Full Research"}),e.jsx("option",{value:"Coursework",children:"Coursework"}),e.jsx("option",{value:"Research + Coursework",children:"Research + Coursework"})]}),e.jsx(n,{className:"mt-2",message:c.master_type})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(o,{htmlFor:"phone_number",value:"Phone Number",required:!0}),e.jsx(d,{id:"phone_number",className:"mt-1 block w-full",value:r.phone_number,onChange:l=>t("phone_number",l.target.value),autoComplete:"tel"}),e.jsx(n,{className:"mt-2",message:c.phone_number})]}),e.jsx("div",{children:e.jsx(O,{title:"Nationality",value:r.nationality,onChange:l=>t("nationality",l)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"english_proficiency_level",value:"English Proficiency Level"}),e.jsxs("select",{id:"english_proficiency_level",className:"mt-1 block w-full border rounded-md p-2",value:r.english_proficiency_level||"",onChange:l=>t("english_proficiency_level",l.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select English Proficiency Level"}),e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Elementary",children:"Elementary"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Upper Intermediate",children:"Upper Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]}),e.jsx(n,{className:"mt-2",message:c.english_proficiency_level})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"funding_requirement",value:"Funding Requirement"}),e.jsxs("select",{id:"funding_requirement",className:"mt-1 block w-full border rounded-md p-2",value:r.funding_requirement||"",onChange:l=>t("funding_requirement",l.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Funding Requirement"}),e.jsx("option",{value:"I need a scholarship",children:"I need a scholarship"}),e.jsx("option",{value:"I need a grant",children:"I need a grant"}),e.jsx("option",{value:"I am self-funded",children:"I am self-funded"})]}),e.jsx(n,{className:"mt-2",message:c.funding_requirement})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"current_postgraduate_status",className:"mt-1 block text-sm font-medium text-gray-700",children:"Current Postgraduate Status"}),e.jsxs("select",{id:"current_postgraduate_status",className:"block w-full border-gray-300 rounded-md shadow-sm",value:r.current_postgraduate_status,onChange:P,children:[e.jsx("option",{value:"",hidden:!0,children:"Select your current postgraduate status"}),e.jsx("option",{value:"Not registered yet",children:"Not registered yet"}),e.jsx("option",{value:"Registered",children:"Registered"})]})]}),r.current_postgraduate_status==="Registered"&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"university",value:"University",required:!0}),e.jsxs("select",{id:"university",className:"mt-1 block w-full border rounded-md p-2",value:g||"",onChange:l=>{const a=l.target.value;M(a),t("university",a)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select your University"}),y.map(l=>e.jsx("option",{value:l.id,children:l.full_name},l.id))]}),e.jsx(n,{className:"mt-2",message:c.university})]})]}),r.current_postgraduate_status==="Registered"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[g&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"faculty",value:"Faculty",required:!0}),e.jsxs("select",{id:"faculty",className:"mt-1 block w-full border rounded-md p-2",value:r.faculty||"",onChange:l=>t("faculty",l.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select your Faculty"}),$.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsx(n,{className:"mt-2",message:c.faculty})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(o,{htmlFor:"matric_no",value:"Matric No.",required:!0}),e.jsx(d,{id:"matric_no",className:"mt-1 block w-full",value:r.matric_no,onChange:l=>t("matric_no",l.target.value),required:!0,isFocused:!0,autoComplete:"matric_no"}),e.jsx(n,{className:"mt-2",message:c.matric_no})]})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"has_suggested_research_title",className:"block text-sm font-medium text-gray-700",children:"Have own suggested research title?"}),e.jsxs("select",{id:"has_suggested_research_title",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:j?"yes":"no",onChange:B,children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]})]}),j&&e.jsxs("div",{className:"",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"suggested_research_title",value:"Suggested Research Title",required:!0}),e.jsx(d,{id:"suggested_research_title",className:"mt-1 block w-full",value:r.suggested_research_title,onChange:l=>t("suggested_research_title",l.target.value),required:!0,isFocused:!0,autoComplete:"suggested_research_title"}),e.jsx(n,{className:"mt-2",message:c.suggested_research_title})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(o,{htmlFor:"suggested_research_description",value:"Suggested Research Description"}),e.jsx("textarea",{id:"suggested_research_description",className:"mt-1 block w-full",value:r.suggested_research_description,onChange:l=>t("suggested_research_description",l.target.value),rows:4}),e.jsx(n,{className:"mt-2",message:c.suggested_research_description})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"field_of_research",className:"block text-sm font-medium text-gray-700",children:"Preferred Field of research (Multiple Selection)"}),e.jsx("select",{id:"field_of_research",className:"mt-1 block w-full border rounded-md p-2",value:r.field_of_research||[],onChange:l=>{const a=Array.from(l.target.selectedOptions).map(i=>i.value);t("field_of_research",a)},multiple:!0,children:C.map(l=>e.jsx("option",{value:`${l.field_of_research_name}-${l.research_area_name}-${l.niche_domain_name}`,children:`${l.field_of_research_name} - ${l.research_area_name} - ${l.niche_domain_name}`},`${l.field_of_research_id}-${l.research_area_id}-${l.niche_domain_id}`))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{htmlFor:"CV_file",className:"block text-sm font-medium text-gray-700",children:"Upload CV (Max 5MB)"}),e.jsx("input",{type:"file",id:"CV_file",name:"CV_file",className:"block w-full border-gray-300 rounded-md shadow-sm",accept:".pdf,.doc,.docx",onChange:l=>{const a=l.target.files[0];a&&(a.size<=5*1024*1024?t(i=>({...i,CV_file:a})):alert("File size exceeds 5MB. Please upload a smaller file."))}}),r.CV_file&&e.jsx("div",{className:"mt-2",children:typeof r.CV_file=="string"?e.jsxs("a",{href:`/storage/${r.CV_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline",children:["View Current File: ",r.CV_file.split("/").pop()]}):e.jsxs("p",{className:"text-sm text-gray-500",children:["File Selected: ",r.CV_file.name]})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"website",value:"Website"}),e.jsx(d,{id:"website",className:"mt-1 block w-full",value:r.website,onChange:l=>t("website",l.target.value),autoComplete:"url"}),e.jsx(n,{className:"mt-2",message:c.website})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"linkedin",value:"LinkedIn"}),e.jsx(d,{id:"linkedin",className:"mt-1 block w-full",value:r.linkedin,onChange:l=>t("linkedin",l.target.value),autoComplete:"url"}),e.jsx(n,{className:"mt-2",message:c.linkedin})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"google_scholar",value:"Google Scholar"}),e.jsx(d,{id:"google_scholar",className:"mt-1 block w-full",value:r.google_scholar,onChange:l=>t("google_scholar",l.target.value),autoComplete:"url"}),e.jsx(n,{className:"mt-2",message:c.google_scholar})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"researchgate",value:"ResearchGate"}),e.jsx(d,{id:"researchgate",className:"mt-1 block w-full",value:r.researchgate,onChange:l=>t("researchgate",l.target.value),autoComplete:"url"}),e.jsx(n,{className:"mt-2",message:c.researchgate})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(G,{disabled:k,children:"Save"}),e.jsx(U,{show:F,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]}),f==="projects"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"})]})]})}export{K as default};
