import{q as ue,r as n,j as e,a as V}from"./app-xmIh42KO.js";import{T as he,a as je,b as I,c as k}from"./tabs-ydYS5gEr.js";import{B as u}from"./button-BxlM9Ynt.js";import{B as q}from"./badge-CcdemaNu.js";import{A as fe,a as be}from"./avatar-Bgpg1fcL.js";import{T as ve}from"./textarea-BOMMor71.js";import{S as F}from"./scroll-area-AuKSir-5.js";import{O as ge,S as Ne}from"./modalAnimations-CCENKliM.js";import{t as N}from"./index-DHlc-qfi.js";import we from"./DocumentPreviewModal-BXDvradQ.js";import{M as ye}from"./Modal-9xzh__1a.js";import{A as _e}from"./index-gVQqUwf4.js";import{m as Z}from"./proxy-BAb5Dv9p.js";import{X as Ce}from"./x-CqhkXXcI.js";import{C as S}from"./circle-check-CwsGHSo8.js";import{C}from"./circle-x-CxwFGZHM.js";import{C as J}from"./circle-alert-pBmeMKmm.js";import{E as ee}from"./eye-CF532UA4.js";import{C as Se}from"./clock-YdwyQpoI.js";import{c as De}from"./createLucideIcon-DVFNR6_B.js";import{F as se}from"./file-text--rlsk2LO.js";import{C as Ae}from"./chevron-down-DQCopX2H.js";import{C as Re}from"./chevron-right-W86pD0Cb.js";import{F as Ie}from"./folder-open-oQe88qJA.js";import{M as ke}from"./message-square-BBXQLeGc.js";import{H as Fe}from"./history-DjHglOSJ.js";import{f as P}from"./format-BOijCLBA.js";import"./index-CfHh2K1o.js";import"./index-C-SKuI93.js";import"./index-CLSrQ3eM.js";import"./index-BADX2Att.js";import"./index-B95x1XYb.js";import"./index-Jct0HHTX.js";import"./index-DxyQ96zj.js";import"./index-Cn5-Ykwo.js";import"./index-D3U9SMCW.js";import"./utils-CBfrqCZ4.js";import"./index-CdJFUDDL.js";import"./index-BdQq_4o_.js";import"./download-DhGNF5t8.js";import"./transition-wZyx5jV7.js";import"./dialog-B-e007Fb.js";import"./en-US-DIdCsyf3.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Te=De("File",Pe);function Fs({invitation:s,onClose:a,onUpdated:c}){const{auth:l}=ue().props,[p,b]=n.useState("overview"),[d,h]=n.useState(!1),[v,g]=n.useState(!1),[m,o]=n.useState(""),[i,j]=n.useState({}),[w,D]=n.useState([]),[T,L]=n.useState({}),[te,ae]=n.useState(!1),[A,U]=n.useState(null),[re,H]=n.useState(!1),[le,B]=n.useState(null),ce=15*1024*1024;if(console.log("ðŸ” CoSupervisorInvitationDetailPanel - Full invitation:",s),console.log("ðŸ‘¤ Auth user:",l.user),console.log("ðŸ“‹ Student:",s.relationship?.student),console.log("ðŸ« University:",s.relationship?.student?.university),console.log("ðŸ›ï¸ Faculty:",s.relationship?.student?.faculty),console.log("ðŸ“ Supervision request:",s.relationship?.supervisionRequest||s.relationship?.supervision_request),console.log("ðŸ”— Relationship ID:",s.relationship?.id),!s)return null;const x=s.relationship?.student,oe=s.relationship?.academician,M=s.cosupervisor;s.relationship?.supervisionRequest||s.relationship?.supervision_request;const ie=s.relationship?.id,E=(()=>{const t=l.user?.unique_id;return t===s.cosupervisor_academician_id?"cosupervisor":t===s.relationship?.academician_id&&s.initiated_by==="student"?"main_supervisor":t===s.relationship?.student_id&&s.initiated_by==="main_supervisor"?"student":"viewer"})();console.log("ðŸ‘¥ Determined user role:",E);const W=(t,r)=>{const y=r.split(".").pop().toLowerCase(),$=["jpg","jpeg","png","gif","webp","svg"].includes(y),Y=y==="pdf";if(($||Y)&&t.size<ce){const pe=route("supervision.document-versions.preview",t.id),xe=route("supervision.document-versions.download",t.id);B({preview_url:pe,download_url:xe,original_name:r,mime_type:Y?"application/pdf":`image/${y}`,size:t.size,size_formatted:t.size_formatted||`${(t.size/1024).toFixed(1)} KB`,created_at:t.created_at})}else window.open(route("supervision.document-versions.download",t.id),"_blank","noopener,noreferrer")},R=E==="cosupervisor"&&s.cosupervisor_status==="pending"&&!s.cancelled_at,_=E!=="cosupervisor"&&s.cosupervisor_status==="accepted"&&s.approver_status==="pending"&&!s.cancelled_at,X=async t=>{if(t==="rejected"&&!m.trim()){N.error("Please provide a reason for rejection");return}h(!0);try{const r=await V.post(`/api/v1/app/supervision/cosupervisor-invitations/${s.id}/respond`,{response:t,rejection_reason:t==="rejected"?m:null});N.success(t==="accepted"?"Invitation accepted! Waiting for approval.":"Invitation rejected"),setTimeout(()=>{c?.(r.data.invitation),a?.()},1500)}catch(r){N.error(r.response?.data?.message||"Failed to respond")}finally{h(!1),g(!1),o("")}},G=async t=>{if(t==="rejected"&&!m.trim()){N.error("Please provide a reason for rejection");return}h(!0);try{const r=await V.post(`/api/v1/app/supervision/cosupervisor-invitations/${s.id}/approve`,{response:t,rejection_reason:t==="rejected"?m:null});N.success(t==="accepted"?"Co-supervisor approved!":"Co-supervisor invitation declined"),setTimeout(()=>{c?.(r.data.invitation),a?.()},1500)}catch(r){N.error(r.response?.data?.message||"Failed to respond")}finally{h(!1),g(!1),o("")}},O=s.cancelled_at?{text:"Cancelled",color:"bg-gray-100 text-gray-700 border-gray-200",icon:C}:s.cosupervisor_status==="rejected"?{text:"Rejected by Co-supervisor",color:"bg-red-100 text-red-700 border-red-200",icon:C}:s.approver_status==="rejected"?{text:"Not Approved",color:"bg-red-100 text-red-700 border-red-200",icon:C}:s.completed_at?{text:"Completed",color:"bg-green-100 text-green-700 border-green-200",icon:S}:s.cosupervisor_status==="accepted"&&s.approver_status==="pending"?{text:"Awaiting Approval",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:Se}:{text:"Pending Response",color:"bg-blue-100 text-blue-700 border-blue-200",icon:J},de=O.icon,z=x?.full_name||x?.user?.name||"Student",K=x?.profile_picture?`/storage/${x.profile_picture}`:null,ne=z.split(" ").map(t=>t[0]).join("").slice(0,2).toUpperCase(),me=x?.universityDetails?.name||x?.universityDetails?.full_name||x?.university_details?.name||x?.university_details?.full_name||null;return e.jsxs(e.Fragment,{children:[e.jsx(_e,{children:e.jsx(Z.div,{...ge,className:"fixed inset-0 z-40 flex items-center justify-end bg-black/50",onClick:a,children:e.jsxs(Z.div,{...Ne,className:"w-full max-w-3xl h-full bg-white shadow-xl overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx(fe,{className:"h-12 w-12",children:K?e.jsx("img",{src:K,alt:z,className:"h-full w-full object-cover"}):e.jsx(be,{className:"bg-indigo-100 text-indigo-700 text-sm font-semibold",children:ne})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:z}),e.jsx("p",{className:"text-sm text-slate-600",children:me||"Student"}),e.jsx("div",{className:"mt-2 flex items-center gap-3 flex-wrap",children:e.jsxs(q,{className:`${O.color} border flex items-center gap-1`,children:[e.jsx(de,{className:"w-3 h-3"}),O.text]})})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(Ce,{className:"h-5 w-5 text-slate-500"})})]})}),e.jsxs("div",{className:"px-6 py-4 border-b bg-slate-50",children:[R&&!v&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(u,{onClick:()=>X("accepted"),disabled:d,className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Accept Invitation"]}),e.jsxs(u,{variant:"outline",onClick:()=>g(!0),disabled:d,className:"flex-1 border-red-300 text-red-700 hover:bg-red-50",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Decline"]})]}),_&&!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start gap-2 mb-3",children:[e.jsx(J,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Your Approval Required"}),e.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:[M?.full_name||M?.user?.name||"The co-supervisor"," has accepted the invitation to be a co-supervisor."]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(u,{onClick:()=>G("accepted"),disabled:d,className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Approve Co-Supervisor"]}),e.jsxs(u,{variant:"outline",onClick:()=>g(!0),disabled:d,className:"flex-1 border-red-300 text-red-700 hover:bg-red-50",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Reject"]})]})]}),v&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for ",_?"Rejection":"Declining"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ve,{value:m,onChange:t=>o(t.target.value),placeholder:"Please provide a reason...",className:"min-h-[80px]",maxLength:500}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m.length,"/500"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>{g(!1),o("")},disabled:d,className:"flex-1",children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:()=>{R?X("rejected"):_&&G("rejected")},disabled:d||!m.trim(),className:"flex-1",children:d?"Processing...":"Confirm"})]})]}),!R&&!_&&s.cosupervisor_status==="accepted"&&s.approver_status==="pending"&&e.jsxs("div",{className:"text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded p-3 text-center",children:["Waiting for ",s.initiated_by==="student"?"main supervisor":"student"," approval"]}),!R&&!_&&s.completed_at&&e.jsx("div",{className:"text-sm text-emerald-700 bg-emerald-50 border border-emerald-200 rounded p-3 text-center",children:"âœ“ Invitation accepted and approved - Co-supervisor relationship is active"})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs(he,{value:p,onValueChange:b,className:"h-full flex flex-col",children:[e.jsxs(je,{className:"px-6 bg-gray-100 w-full justify-start rounded-none h-auto p-0 gap-0",children:[e.jsx(I,{value:"overview",className:"data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-indigo-600 data-[state=inactive]:bg-transparent rounded-none px-6 py-3",children:"Overview"}),e.jsx(I,{value:"documents",className:"data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-indigo-600 data-[state=inactive]:bg-transparent rounded-none px-6 py-3",children:"Documents"}),e.jsx(I,{value:"message",className:"data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-indigo-600 data-[state=inactive]:bg-transparent rounded-none px-6 py-3",children:"Message"}),e.jsx(I,{value:"timeline",className:"data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-indigo-600 data-[state=inactive]:bg-transparent rounded-none px-6 py-3",children:"Timeline"})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsx(k,{value:"overview",className:"mt-0 h-full",children:e.jsx(F,{className:"h-full",children:e.jsx(Me,{invitation:s,student:x,mainSupervisor:oe,cosupervisor:M})})}),e.jsx(k,{value:"documents",className:"mt-0 h-full",children:e.jsx(F,{className:"h-full",children:e.jsx(Ee,{relationshipId:ie,documentsByFolder:i,availableFolders:w,expandedFolders:T,loading:te,onLoad:(t,r)=>{j(t),D(r);const y={};r.forEach($=>{y[$]=!0}),L(y)},onLoadingChange:t=>ae(t),onToggleFolder:t=>{L({...T,[t]:!T[t]})},onViewVersions:t=>{U(t),H(!0)},onPreview:(t,r)=>{W(t,r)}})})}),e.jsx(k,{value:"message",className:"mt-0 h-full",children:e.jsx(F,{className:"h-full",children:e.jsx(ze,{invitation:s})})}),e.jsx(k,{value:"timeline",className:"mt-0 h-full",children:e.jsx(F,{className:"h-full",children:e.jsx($e,{invitation:s})})})]})]})})]})})}),A&&e.jsx(ye,{show:re,onClose:()=>{H(!1),U(null)},maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Version History: ",A.name]}),e.jsx("div",{className:"space-y-3",children:A.versions?.map(t=>{const r=t.id===A.current_version_id;return e.jsx("div",{className:`p-4 rounded-lg border ${r?"bg-indigo-50 border-indigo-200":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-semibold text-slate-900",children:["Version ",t.version_number]}),r&&e.jsx(q,{className:"bg-indigo-600 text-white",children:"Current"})]}),e.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[e.jsxs("p",{children:["Uploaded by: ",t.uploader?.full_name||t.uploader?.name||"Unknown"]}),e.jsxs("p",{children:["Date: ",P(new Date(t.created_at),"dd/MM/yyyy HH:mm")]}),e.jsxs("p",{children:["Size: ",t.size_formatted||`${(t.size/1024).toFixed(1)} KB`]}),t.notes&&e.jsxs("p",{className:"mt-2 text-slate-700",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",t.notes]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(u,{size:"sm",variant:"outline",onClick:()=>W(t,t.original_name),title:"Preview document",children:e.jsx(ee,{className:"h-4 w-4"})})})]})},t.id)})})]})}),e.jsx(we,{file:le,onClose:()=>B(null)})]})}function Me({invitation:s,student:a,mainSupervisor:c,cosupervisor:l}){const p=a?.full_name||a?.user?.name||"Student",b=c?.full_name||c?.user?.name||"Main Supervisor",d=l?.full_name||l?.user?.name||"Co-supervisor",h=a?.universityDetails?.name||a?.universityDetails?.full_name||a?.university_details?.name||a?.university_details?.full_name||"â€”",v=a?.faculty?.name||a?.faculty?.full_name||"â€”";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("section",{className:"border border-slate-200 rounded-lg p-6 bg-white shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Student Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{label:"Full Name",value:p}),e.jsx(f,{label:"Email",value:a?.user?.email||a?.email||"â€”"}),e.jsx(f,{label:"University",value:h}),e.jsx(f,{label:"Faculty",value:v})]})]}),e.jsxs("section",{className:"border border-slate-200 rounded-lg p-6 bg-white shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Invitation Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{label:"Main Supervisor",value:b}),e.jsx(f,{label:"Invited Co-supervisor",value:d}),e.jsx(f,{label:"Initiated by",value:s.initiated_by==="student"?`${p} (Student)`:`${b} (Main Supervisor)`}),e.jsx(f,{label:"Sent",value:s.created_at?P(new Date(s.created_at),"PPp"):"â€”"})]})]}),!s.cancelled_at&&!s.completed_at&&e.jsxs("section",{className:"border border-slate-200 rounded-lg p-6 bg-white shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Approval Progress"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.cosupervisor_status==="accepted"?"bg-green-100 text-green-700":s.cosupervisor_status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-500"}`,children:s.cosupervisor_status==="accepted"?e.jsx(S,{className:"w-5 h-5"}):"1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Co-supervisor Response"}),e.jsx("p",{className:"text-sm text-slate-500",children:s.cosupervisor_status==="accepted"?"Accepted":s.cosupervisor_status==="rejected"?"Rejected":"Pending"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.approver_status==="accepted"?"bg-green-100 text-green-700":s.approver_status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-500"}`,children:s.approver_status==="accepted"?e.jsx(S,{className:"w-5 h-5"}):"2"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-slate-900",children:[s.initiated_by==="student"?"Main Supervisor":"Student"," Approval"]}),e.jsx("p",{className:"text-sm text-slate-500",children:s.approver_status==="accepted"?"Approved":s.approver_status==="rejected"?"Rejected":"Pending"})]})]})]})]})]})}const Q={Drafts:"bg-yellow-50 text-yellow-700 border-yellow-200","Final Papers":"bg-green-50 text-green-700 border-green-200","Meeting Notes":"bg-blue-50 text-blue-700 border-blue-200",Literature:"bg-purple-50 text-purple-700 border-purple-200",Data:"bg-indigo-50 text-indigo-700 border-indigo-200",General:"bg-slate-50 text-slate-700 border-slate-200"};function Ee({relationshipId:s,documentsByFolder:a,availableFolders:c,expandedFolders:l,loading:p,onLoad:b,onLoadingChange:d,onToggleFolder:h,onViewVersions:v,onPreview:g}){if(n.useEffect(()=>{(async()=>{if(s){d(!0);try{const i=await V.get(`/api/v1/app/supervision/relationships/${s}/documents`);console.log("ðŸ“ Documents API response:",i.data);const j=i.data.data?.documents_by_folder||{},w=i.data.data?.available_folders||Object.keys(j);console.log("ðŸ“„ Documents by folder:",j),console.log("ðŸ“‚ Available folders:",w),b(j,w)}catch(i){console.error("âŒ Error fetching documents:",i),N.error(i.response?.data?.message||"Failed to load documents"),b({},[])}finally{d(!1)}}})()},[s]),p)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:[1,2,3].map(o=>e.jsx("div",{className:"border border-slate-200 rounded-lg p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-slate-100 rounded w-1/2"})]})]})},o))})});if(!s)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center text-slate-500 py-12",children:[e.jsx(Te,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),e.jsx("p",{children:"No relationship information available"})]})});const m=Object.values(a).reduce((o,i)=>o+i.length,0);return m===0?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center text-slate-500 py-12",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"font-medium text-slate-700",children:"No documents yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Documents uploaded to this supervision will appear here"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Supervision Documents"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[m," document",m!==1?"s":""," across ",Object.keys(a).length," folder",Object.keys(a).length!==1?"s":""]}),e.jsx("p",{className:"text-sm text-indigo-600 mt-2",children:"ðŸ“– Read-only view - Documents shared between the student and main supervisor"})]}),e.jsx("div",{className:"space-y-4",children:c.map(o=>{const i=a[o]||[];if(i.length===0)return null;const j=l[o],w=Q[o]||Q.General;return e.jsxs("div",{className:"border border-slate-200 rounded-lg bg-white shadow-sm",children:[e.jsx("button",{onClick:()=>h(o),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[j?e.jsx(Ae,{className:"h-5 w-5 text-slate-400"}):e.jsx(Re,{className:"h-5 w-5 text-slate-400"}),e.jsx(Ie,{className:"h-5 w-5 text-slate-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:o}),e.jsxs(q,{variant:"outline",className:w,children:[i.length," file",i.length!==1?"s":""]})]})}),j&&e.jsx("div",{className:"border-t border-slate-200 p-4 space-y-3",children:i.map(D=>e.jsx(Oe,{document:D,onPreview:g,onViewVersions:v},D.id))})]},o)})})]})}function Oe({document:s,onPreview:a,onViewVersions:c}){const l=s.current_version||s.currentVersion,p=s.versions?.length||0;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200 hover:border-indigo-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-2 bg-white rounded-md border border-slate-200",children:e.jsx(se,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-slate-900 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-slate-500",children:[e.jsxs("span",{children:["v",l?.version_number||1]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:l?.uploader?.full_name||l?.uploader?.name||"Unknown"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:l?.created_at?P(new Date(l.created_at),"dd/MM/yyyy"):"â€”"})]}),s.notes&&e.jsx("p",{className:"text-sm text-slate-600 mt-2 line-clamp-2",children:s.notes})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>a(l,l?.original_name),title:"Preview document",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsxs(u,{size:"sm",variant:"ghost",onClick:()=>c(s),title:"View version history",children:[e.jsx(Fe,{className:"h-4 w-4"}),p>1&&e.jsx("span",{className:"ml-1 text-xs",children:p})]})]})]})}function ze({invitation:s}){return e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("section",{className:"border border-slate-200 rounded-lg p-6 bg-white shadow-sm w-[720px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ke,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Personal Invitation Message"})]}),s.invitation_message?e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-900 leading-relaxed whitespace-pre-line italic break-words max-w-full",children:['"',s.invitation_message,'"']})}):e.jsx("p",{className:"text-sm text-slate-500",children:"No personal message provided"}),s.rejection_reason&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Rejection Reason"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-red-900 leading-relaxed whitespace-pre-line break-words max-w-full",children:['"',s.rejection_reason,'"']})})]})]})})}function $e({invitation:s}){const a=[];return s.created_at&&a.push({id:1,title:"Invitation Sent",date:s.created_at,status:"completed"}),s.cosupervisor_responded_at&&a.push({id:2,title:s.cosupervisor_status==="accepted"?"Co-supervisor Accepted":"Co-supervisor Declined",date:s.cosupervisor_responded_at,status:"completed"}),s.approver_responded_at&&a.push({id:3,title:s.approver_status==="accepted"?"Approved":"Not Approved",date:s.approver_responded_at,status:"completed"}),s.completed_at&&a.push({id:4,title:"Invitation Completed",date:s.completed_at,status:"completed"}),s.cancelled_at&&a.push({id:5,title:"Invitation Cancelled",date:s.cancelled_at,status:"cancelled"}),e.jsx("div",{className:"p-6",children:e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Timeline"}),a.length===0?e.jsx("div",{className:"text-sm text-slate-500 text-center py-8",children:"No timeline events yet"}):e.jsx("div",{className:"space-y-4",children:a.map((c,l)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c.status==="completed"?"bg-green-500":c.status==="cancelled"?"bg-red-500":"bg-slate-300"}`}),l<a.length-1&&e.jsx("div",{className:"w-0.5 h-full bg-slate-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsx("h4",{className:"font-medium text-slate-900",children:c.title}),e.jsx("p",{className:"text-sm text-slate-500",children:c.date?P(new Date(c.date),"PPp"):"TBD"})]})]},c.id))})]})})}function f({label:s,value:a}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:s}),e.jsx("div",{className:"text-sm text-slate-700",children:a||"â€”"})]})}export{Fs as default};
