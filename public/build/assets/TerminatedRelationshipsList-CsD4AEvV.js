import{r as C,j as e,b as h}from"./app-CRunKGlS.js";import{C as M,b as _,c as D,a as R}from"./card-NTypxU8u.js";import{B as S}from"./button-CvHeaofT.js";import{B as A}from"./badge-B1g_318y.js";import{A as g,a as j}from"./avatar-Ds4ln6o3.js";import T from"./StudentRelationshipDetailModal-BBY5HeMj.js";import{n as k}from"./en-US-DNUEYIb-.js";import{d as H,f as N}from"./format-Dv9Rm441.js";import{C as F}from"./calendar-DiJwSlCn.js";import{C as B}from"./clock-xc2kTVw8.js";import{C as E}from"./circle-x-Cx5yCetz.js";import{H as U}from"./history-Dwi8J0p2.js";import{f as $}from"./formatDistanceToNow-GKXiLTrL.js";import"./utils-D-KgF5mV.js";import"./index-CGrAONsN.js";import"./modalAnimations-CCENKliM.js";import"./supervisionHelpers-EJT0WNFw.js";import"./tabs-BDn6vQwl.js";import"./index-CducTqIN.js";import"./index-B_k58LZM.js";import"./index-BeFf3wNe.js";import"./index-DDu3sMfd.js";import"./index-B9EkYX5o.js";import"./index-BRxmF7GM.js";import"./index-Bpe_-bUu.js";import"./index-D23ZVUNN.js";import"./scroll-area-CWiq0LMD.js";import"./index-BdQq_4o_.js";import"./ThreadPane-BDEflQ9C.js";import"./Modal-B6Xe6uPJ.js";import"./dialog-6F-BmcU5.js";import"./transition-Bs7yPu4Z.js";import"./AttachmentPreviewModal-DWdqnEyl.js";import"./file-text-uLWXHWQR.js";import"./createLucideIcon-Cn5nLR87.js";import"./download-C-vGVbX9.js";import"./x-D71_YNlz.js";import"./index-BP2IIEZc.js";import"./isSameDay-Dm-A-V7S.js";import"./ScheduleMeetingDialog-CWMF0G_N.js";import"./input-DIt0dFL2.js";import"./textarea-B-DGX93a.js";import"./label-BXs4LQ9L.js";import"./alert-DLMX4gfy.js";import"./logError-D4ezqrCx.js";import"./useGoogleCalendar-8Fm045Ad.js";import"./external-link-Cacj0Iyr.js";import"./loader-circle-CA_94cJH.js";import"./UnifiedOverviewTab-BDJVrKvK.js";import"./user-round-CXbdGVXv.js";import"./briefcase-rw-TJokl.js";import"./mail-DocOWdof.js";import"./phone-qryiHr51.js";import"./graduation-cap-CP7tnpew.js";import"./globe-CvOh4UZQ.js";import"./calendar-clock-CslYIhXf.js";import"./UnbindRequestModal-BhxAW_Ab.js";import"./user-minus-D9jc62QH.js";import"./triangle-alert-DzrA2F_K.js";import"./RelationshipHistoryTab-B4Ma7hP_.js";import"./circle-alert-DX7nHMHh.js";import"./users-DxN6mnuU.js";import"./tooltip-BOquGV58.js";import"./index-DLWeQ60J.js";import"./index-B6dBdtsN.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-DNbbLZqP.js";import"./index-BFjFn49E.js";import"./index-DcBN7yqm.js";import"./proxy-hY7jBSjC.js";import"./video-CHiuNE1K.js";import"./constructNow-DtVD-0hX.js";function q(s,a,t){const[r,o]=k(t==null?void 0:t.in,s,a),m=b(r,o),i=Math.abs(H(r,o));r.setDate(r.getDate()-m*i);const l=+(b(r,o)===-m),n=m*(i-l);return n===0?0:n}function b(s,a){const t=s.getFullYear()-a.getFullYear()||s.getMonth()-a.getMonth()||s.getDate()-a.getDate()||s.getHours()-a.getHours()||s.getMinutes()-a.getMinutes()||s.getSeconds()-a.getSeconds()||s.getMilliseconds()-a.getMilliseconds();return t<0?-1:t>0?1:t}function is({relationships:s=[],reload:a,isLoading:t=!1}){const[r,o]=C.useState(null),m=!t&&(!Array.isArray(s)||s.length===0);return t?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((i,l)=>e.jsxs("div",{className:"border border-dashed rounded-xl p-5 bg-white shadow-sm animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-slate-200"}),e.jsx("div",{className:"h-3 w-24 rounded bg-slate-100"})]})]}),e.jsx("div",{className:"h-6 w-24 rounded-full bg-slate-100"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"h-3 w-full rounded bg-slate-100"}),e.jsx("div",{className:"h-3 w-3/4 rounded bg-slate-100"})]}),e.jsx("div",{className:"mt-4 h-10 rounded bg-slate-200"})]},`terminated-skeleton-${l}`))}):m?e.jsxs(M,{className:"border-dashed border-slate-200",children:[e.jsx(_,{children:e.jsx(D,{className:"text-lg font-semibold text-slate-800",children:"No Terminated Relationships"})}),e.jsx(R,{className:"text-sm text-slate-600",children:"You don't have any terminated supervision relationships. All past relationships will appear here."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:s.map(i=>e.jsx(Y,{relationship:i,onViewHistory:()=>o(i)},i.id))}),r&&e.jsx(T,{relationship:r,onClose:()=>o(null),onUpdated:a,isReadOnly:!0})]})}function Y({relationship:s,onViewHistory:a}){var u,f;const t=(s==null?void 0:s.academician)??{},r=t.full_name??"Supervisor",o=t.profile_picture?`/storage/${t.profile_picture}`:null,m=t.url||null,i=(s==null?void 0:s.accepted_at)||(s==null?void 0:s.start_date),l=s==null?void 0:s.terminated_at,n=i?N(new Date(i),"dd/MM/yyyy"):"—",v=l?N(new Date(l),"dd/MM/yyyy"):"—",c=l?$(new Date(l),{addSuffix:!0}):null,d=i&&l?q(new Date(l),new Date(i)):0,w=d>0?`${Math.floor(d/30)} months, ${d%30} days`:"—",x=((u=s==null?void 0:s.unbind_requests)==null?void 0:u.length)>0?(f=s.unbind_requests[s.unbind_requests.length-1])==null?void 0:f.reason:"No reason provided",p=r.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,3);return e.jsxs("div",{className:"border rounded-xl p-5 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),className:"flex-shrink-0",children:e.jsx(g,{className:"h-10 w-10 border border-slate-200 hover:ring-2 hover:ring-slate-300 transition-all cursor-pointer",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})})}):e.jsx(g,{className:"h-10 w-10 border border-slate-200",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),children:e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate hover:text-indigo-600 transition-colors cursor-pointer",children:r})}):e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:r}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.role==="main"?"Main Supervisor":"Co-Supervisor"}),c&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Terminated ",c]})]})]}),e.jsx(A,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 flex-shrink-0",children:"Terminated"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(F,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:[n," → ",v]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(B,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:["Duration: ",w]})]})]}),x&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-red-900 mb-1",children:"Termination Reason:"}),e.jsx("p",{className:"text-xs text-red-800 line-clamp-2",children:x})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(S,{variant:"outline",className:"w-full",onClick:a,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"View History"]})})]})}export{is as default};
