import{W as w,r as g,j as e}from"./app-B7My-eC5.js";import{V as b}from"./index-CLpi5V0M.js";import C from"./NationalityForm-CAm8vHYR.js";import{I as u}from"./InputLabel-BRGbgCoC.js";import"./react-select.esm-DOdJe45j.js";import"./InputError-D_yIAUbo.js";function $({isOpen:n,onClose:m,university:t=null,mode:a="create"}){const{data:c,setData:o,post:j,put:P,processing:x,errors:s,reset:f}=w({full_name:(t==null?void 0:t.full_name)||"",short_name:(t==null?void 0:t.short_name)||"",country:(t==null?void 0:t.country)||"",university_category:(t==null?void 0:t.university_category)||"",university_type:(t==null?void 0:t.university_type)||"",profile_picture:null,background_image:null}),[p,i]=g.useState(t!=null&&t.profile_picture?`/storage/${t.profile_picture}`:null),[h,d]=g.useState(t!=null&&t.background_image?`/storage/${t.background_image}`:null);g.useEffect(()=>{n&&a==="edit"&&t?(o({full_name:t.full_name||"",short_name:t.short_name||"",country:t.country||"",university_category:t.university_category||"",university_type:t.university_type||"",profile_picture:null,background_image:null}),i(t.profile_picture?`/storage/${t.profile_picture}`:null),d(t.background_image?`/storage/${t.background_image}`:null)):n&&a==="create"&&(f(),i(null),d(null))},[n,t,a]);const _=r=>{r.preventDefault();const l=a==="create"?"University created successfully!":"University updated successfully!",k=a==="create"?"/admin/data-management/universities":`/admin/data-management/universities/${t.id}`;j(k,{data:c,onSuccess:()=>{b.success(l),m(),a==="create"&&(f(),i(null),d(null))},onError:v=>{b.error(`Error ${a==="create"?"saving":"updating"} university`),console.error(v)}})},y=r=>{const l=r.target.files[0];l&&(o("profile_picture",l),i(URL.createObjectURL(l)))},N=r=>{const l=r.target.files[0];l&&(o("background_image",l),d(URL.createObjectURL(l)))};return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:r=>{r.target===r.currentTarget&&m()},children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-[600px] shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a==="create"?"Add University":"Edit University"}),e.jsxs("button",{onClick:m,className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"full_name",value:c.full_name,onChange:r=>o("full_name",r.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),s.full_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.full_name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"short_name",className:"block text-sm font-medium text-gray-700",children:["Short Name / Acronym ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",id:"short_name",value:c.short_name,onChange:r=>o("short_name",r.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),s.short_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.short_name})]}),e.jsx("div",{className:"mb-4",children:e.jsx(C,{value:c.country,onChange:r=>o("country",r),title:"Country",errors:s})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(u,{htmlFor:"university_category",className:"block text-sm font-medium text-gray-700",children:["University Category ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"university_category",value:c.university_category,onChange:r=>o("university_category",r.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category..."}),e.jsx("option",{value:"Research",children:"Research"}),e.jsx("option",{value:"Comprehensive",children:"Comprehensive"}),e.jsx("option",{value:"N/A",children:"N/A"})]}),s.university_category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.university_category})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(u,{htmlFor:"university_type",className:"block text-sm font-medium text-gray-700",children:["University Type ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"university_type",value:c.university_type,onChange:r=>o("university_type",r.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Type..."}),e.jsx("option",{value:"Public",children:"Public"}),e.jsx("option",{value:"Private",children:"Private"})]}),s.university_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.university_type})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(u,{htmlFor:"profile_picture",className:"block text-sm font-medium text-gray-700",children:"Profile Picture"}),e.jsx("input",{type:"file",id:"profile_picture",onChange:y,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",accept:"image/jpeg,image/png,image/jpg,image/gif"}),p&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:p,alt:"Profile Preview",className:"h-32 w-32 object-cover rounded-md"})}),s.profile_picture&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.profile_picture})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(u,{htmlFor:"background_image",className:"block text-sm font-medium text-gray-700",children:"Background Image"}),e.jsx("input",{type:"file",id:"background_image",onChange:N,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",accept:"image/jpeg,image/png,image/jpg,image/gif"}),h&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:h,alt:"Background Preview",className:"h-32 w-full object-cover rounded-md"})}),s.background_image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.background_image})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:m,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mr-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:x?"Saving...":a==="create"?"Create":"Update"})]})]})]})}):null}export{$ as default};
