import{r as g,W,j as e,Y as G,b as P,y as p}from"./app-CMy8VBjM.js";import{T as d,I as u}from"./TextInput-5RuJ0x16.js";import{P as N}from"./PrimaryButton-D5-mTGQ4.js";import{G as I}from"./GuestLayout-NpAgLbOa.js";import{I as m}from"./InputLabel-B2EzjuRM.js";function E(){const[h,f]=g.useState(null),[a,l]=g.useState(!1),[b,o]=g.useState(""),{data:t,setData:i,reset:C,errors:n}=W({personalWebsite:"",institutionalWebsite:"",linkedinProfile:"",googleScholarProfile:"",researchgateProfile:""}),y=()=>Object.values(t).some(s=>s&&s.trim()!==""),j=s=>{f(s),o("")},w=async()=>{var s,c;l(!0),o("");try{const r=await P.post(route("ai.generate.automatic"));if(r.data.status==="success"&&r.data.generation_initiated)p.visit(route("role.edit"),{preserveState:!1,onSuccess:()=>{l(!1)}});else throw new Error("Generation could not be initiated")}catch(r){o(((c=(s=r.response)==null?void 0:s.data)==null?void 0:c.error)||"An error occurred during AI profile generation"),l(!1)}},k=async s=>{var c,r;if(s.preventDefault(),!y()){o("Please provide at least one URL to continue");return}l(!0),o("");try{const x={personalWebsite:t.personalWebsite,institutionalWebsite:t.institutionalWebsite,linkedinProfile:t.linkedinProfile,scholarProfile:t.googleScholarProfile,researchgateProfile:t.researchgateProfile},v=await P.post(route("ai.urls.save"),x);if(v.data.status==="success"&&v.data.generation_initiated)p.visit(route("role.edit"),{preserveState:!1,onSuccess:()=>{l(!1)}});else throw new Error("Generation could not be initiated")}catch(x){o(((r=(c=x.response)==null?void 0:c.data)==null?void 0:r.error)||"An error occurred while saving URLs"),l(!1)}},S=()=>{p.visit(route("role.edit"))};return e.jsxs(I,{children:[e.jsx(G,{title:"AI Profile Generation"}),e.jsxs("div",{className:"w-full sm:max-w-md px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Generate Your Academic Profile"}),b&&e.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:b}),h?h==="automatic"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"We'll search the web for your academic information and generate a profile for you. This may take a moment."}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{onClick:()=>f(null),className:"text-sm text-gray-600 hover:text-gray-900 underline",disabled:a,children:"Back"}),e.jsx(N,{onClick:w,disabled:a,className:"ml-4",children:a?"Processing...":"Generate Profile"})]})]}):h==="url"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-600 mb-6",children:[e.jsx("strong",{children:"URL Search is generally more reliable as it uses the website links you provide."})," Please enter at least one URL to continue."]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"personalWebsite",value:"Personal Website"}),e.jsx(d,{id:"personalWebsite",type:"url",className:"mt-1 block w-full",value:t.personalWebsite,onChange:s=>i("personalWebsite",s.target.value),placeholder:"https://yourwebsite.com"}),e.jsx(u,{message:n.personalWebsite,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"institutionalWebsite",value:"Institutional Website"}),e.jsx(d,{id:"institutionalWebsite",type:"url",className:"mt-1 block w-full",value:t.institutionalWebsite,onChange:s=>i("institutionalWebsite",s.target.value),placeholder:"https://university.edu/faculty/you"}),e.jsx(u,{message:n.institutionalWebsite,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"linkedinProfile",value:"LinkedIn Profile"}),e.jsx(d,{id:"linkedinProfile",type:"url",className:"mt-1 block w-full",value:t.linkedinProfile,onChange:s=>i("linkedinProfile",s.target.value),placeholder:"https://linkedin.com/in/yourprofile"}),e.jsx(u,{message:n.linkedinProfile,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"googleScholarProfile",value:"Google Scholar Profile"}),e.jsx(d,{id:"googleScholarProfile",type:"url",className:"mt-1 block w-full",value:t.googleScholarProfile,onChange:s=>i("googleScholarProfile",s.target.value),placeholder:"https://scholar.google.com/citations?user=..."}),e.jsx(u,{message:n.googleScholarProfile,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"researchgateProfile",value:"ResearchGate Profile"}),e.jsx(d,{id:"researchgateProfile",type:"url",className:"mt-1 block w-full",value:t.researchgateProfile,onChange:s=>i("researchgateProfile",s.target.value),placeholder:"https://www.researchgate.net/profile/..."}),e.jsx(u,{message:n.researchgateProfile,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{type:"button",onClick:()=>f(null),className:"text-sm text-gray-600 hover:text-gray-900 underline",disabled:a,children:"Back"}),e.jsx(N,{type:"submit",className:"ml-4",disabled:a||!y(),children:a?"Processing...":"Save URLs & Continue"})]})]})]}):null:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Nexscholar can use AI to help you create your academic profile. How would you like to proceed?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>j("automatic"),className:"w-full p-4 border rounded-lg hover:bg-gray-50 flex flex-col items-start",children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Generate with Automatic Search"}),e.jsx("span",{className:"text-sm text-gray-600 mt-1",children:"We'll search the web for your academic information based on your name and institution."})]}),e.jsxs("button",{onClick:()=>j("url"),className:"w-full p-4 border rounded-lg hover:bg-gray-50 flex flex-col items-start",children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Generate Using My Profile URLs"}),e.jsx("span",{className:"text-sm text-gray-600 mt-1",children:"Provide your academic profile URLs for more accurate results."})]}),e.jsxs("button",{onClick:S,className:"w-full p-4 border rounded-lg hover:bg-gray-50 flex flex-col items-start",children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Skip AI Generation for Now"}),e.jsx("span",{className:"text-sm text-gray-600 mt-1",children:"You can always generate your profile later from your profile settings."})]})]})]})]})]})}export{E as default};
