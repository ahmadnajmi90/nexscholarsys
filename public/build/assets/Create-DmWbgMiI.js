import{q as f,W as y,r as o,j as e}from"./app-UEXgTzw_.js";import{M as b}from"./MainLayout-CjgIh0x8.js";import u from"./NationalityForm-CgiMZYZk.js";import"./index-F4p-aueL.js";function C(){const{auth:i,isPostgraduate:m,researchOptions:p,universities:h}=f().props,{data:t,setData:l,post:x,processing:g,errors:r}=y({title:"",description:"",start_date:"",end_date:"",application_deadline:"",duration:"",sponsored_by:"",category:"",field_of_research:[],supervisor_category:"",supervisor_name:"",university:"",email:"",origin_country:"",purpose:"",student_nationality:"",student_level:"",appointment_type:"",purpose_of_collaboration:"",image:null,attachment:null,amount:"",application_url:"",status:"published"}),[v,j]=o.useState(t.university);o.useState(!1),o.useState("");function d(a){a&&a.preventDefault();const n=new FormData;Object.keys(t).forEach(s=>{t[s]instanceof File?n.append(s,t[s]):Array.isArray(t[s])?n.append(s,JSON.stringify(t[s])):n.append(s,t[s])});for(let[s,c]of n.entries())console.log(`${s}: ${c}`),console.log(`${s}: ${typeof c}`);x(route("post-grants.store"),{data:n,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Grant posted successfully.")},onError:s=>{console.error("Error updating profile:",s),alert("Failed to post the grant. Please try again.")}})}return e.jsx(b,{title:"",isPostgraduate:m,children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"absolute top-4 left-4 text-gray-700 hover:text-gray-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsxs("form",{onSubmit:d,className:"bg-white p-6 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Grant"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Grant Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.title,onChange:a=>l("title",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter grant title"}),r.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Grant Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:t.description,onChange:a=>l("description",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter description"}),r.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Start Date"}),e.jsx("input",{type:"date",value:t.start_date,onChange:a=>{l("start_date",a.target.value)},className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"End Date"}),e.jsx("input",{type:"date",value:t.end_date,min:t.start_date||"",onChange:a=>{l("end_date",a.target.value)},className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mt-1 block text-gray-700 font-medium",children:"Application Deadline"}),e.jsx("input",{type:"date",value:t.application_deadline,min:t.start_date||"",max:t.end_date||"",onChange:a=>l("application_deadline",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mt-1 block text-gray-700 font-medium",children:"Duration (in months)"}),e.jsx("input",{type:"number",value:t.duration,onChange:a=>l("duration",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter grant duration"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Sponsored By"}),e.jsx("input",{type:"text",value:t.sponsored_by,onChange:a=>l("sponsored_by",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter sponsor"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 font-medium",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:t.category,onChange:a=>l("category",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Category"}),e.jsx("option",{value:"Fundamental Research",children:"Fundamental Research"}),e.jsx("option",{value:"Applied Research",children:"Applied Research"}),e.jsx("option",{value:"Fundamental + Applied",children:"Fundamental + Applied"}),e.jsx("option",{value:"Knowledge Transfer Program (KTP)",children:"Knowledge Transfer Program (KTP)"}),e.jsx("option",{value:"CSR (Corporate Social Responsibility)",children:"CSR (Corporate Social Responsibility)"})]}),r.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.category})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[(t.category==="Fundamental Research"||t.category==="Applied Research"||t.category==="Fundamental + Applied")&&e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"field_of_research",className:"block text-sm font-medium text-gray-700",children:"Field of Research (Multiple Selection)"}),e.jsx("select",{id:"field_of_research",className:"mt-1 block w-full border rounded-md p-2",value:t.field_of_research||[],onChange:a=>{const n=Array.from(a.target.selectedOptions).map(s=>s.value);l("field_of_research",n)},multiple:!0,children:p.map(a=>e.jsx("option",{value:`${a.field_of_research_name}-${a.research_area_name}-${a.niche_domain_name}`,children:`${a.field_of_research_name} - ${a.research_area_name} - ${a.niche_domain_name}`},`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Grant Supervisor / Project Learder"}),e.jsxs("select",{value:t.supervisor_category,onChange:a=>l("supervisor_category",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"Own Name",children:"Own Name"}),e.jsx("option",{value:"On Behalf",children:"On Behalf"})]})]})]}),t.supervisor_category==="On Behalf"&&e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mt-1 block text-gray-700 font-medium",children:"Grant Supervisor / Project Leader Name"}),e.jsx("input",{type:"text",value:t.supervisor_name,onChange:a=>l("supervisor_name",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mt-1 block text-gray-700 font-medium",children:"University"}),e.jsxs("select",{id:"university",className:"mt-1 block w-full border rounded-md p-2",value:v||"",onChange:a=>{const n=a.target.value;j(n),l("university",n)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select your University"}),h.map(a=>e.jsx("option",{value:a.id,children:a.full_name},a.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Email"}),e.jsx("input",{type:"email",value:t.email,onChange:a=>l("email",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter email"}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:t.email===i.email,onChange:a=>{a.target.checked?l("email",i.email):l("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsxs("label",{htmlFor:"usePersonalEmail",className:"ml-2 text-gray-700",children:["Use personal email (",i.email,")"]})]})]}),e.jsx("div",{children:e.jsx(u,{title:"Grant Origin Country",value:t.origin_country,onChange:a=>l("origin_country",a)})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-8",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Grant Purpose"}),e.jsxs("select",{value:t.purpose,onChange:a=>l("purpose",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Grant Purpose"}),e.jsx("option",{value:"find_pgstudent",children:"Find Postgraduate Student"}),e.jsx("option",{value:"find_academic_collaboration",children:"Find Academic Collaboration"}),e.jsx("option",{value:"find_industry_collaboration",children:"Find Industry Collaboration - Matching Grant"})]})]})}),t.purpose==="find_pgstudent"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(u,{title:"Student Nationality",value:t.student_nationality,onChange:a=>l("student_nationality",a)})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Level of Study"}),e.jsxs("select",{value:t.student_level,onChange:a=>l("student_level",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Level of Study"}),e.jsx("option",{value:"Master",children:"Master"}),e.jsx("option",{value:"Ph.D.",children:"Ph.D."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Appointment Type"}),e.jsxs("select",{value:t.appointment_type,onChange:a=>l("appointment_type",a.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Appointment Type"}),e.jsx("option",{value:"Research Assistant (RA)",children:"Research Assistant (RA)"}),e.jsx("option",{value:"Graduate Assistant (GA)",children:"Graduate Assistant (GA)"}),e.jsx("option",{value:"Teaching Assistant (TA)",children:"Teaching Assistant (TA)"}),e.jsx("option",{value:"Research Fellow (RF)",children:"Research Fellow (RF)"}),e.jsx("option",{value:"Project Assistant (PA)",children:"Project Assistant (PA)"}),e.jsx("option",{value:"Technical Assistant (TA)",children:"Technical Assistant (TA)"}),e.jsx("option",{value:"Graduate Research Assistant (GRA)",children:"Graduate Research Assistant (GRA)"}),e.jsx("option",{value:"Scholarship Recipient",children:"Scholarship Recipient"}),e.jsx("option",{value:"Intern",children:"Intern"})]})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Purpose of Collaboration"}),e.jsx("textarea",{value:t.purpose_of_collaboration,onChange:a=>l("purpose_of_collaboration",a.target.value||""),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter Purpose of Collaboration"}),r.purpose_of_collaboration&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.purpose_of_collaboration})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>l("image",a.target.files[0]),className:"w-full rounded-lg border-gray-200 p-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:a=>l("attachment",a.target.files[0]),className:"w-full rounded-lg border-gray-200 p-2 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[t.purpose!=="find_pgstudent"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Approved Grant Amount"}),e.jsx("input",{type:"number",value:t.amount,onChange:a=>l("amount",a.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter amount (e.g., 5000.00)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Application URL"}),e.jsx("input",{type:"url",value:t.application_url,onChange:a=>l("application_url",a.target.value),className:"w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter application URL"}),r.application_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.application_url})]})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:()=>{d()},disabled:g,className:"inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"})})]})]})})}export{C as default};
