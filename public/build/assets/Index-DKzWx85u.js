import{W as O,j as e,q as A,r as x,b as D,y as P}from"./app-CcL8mqJg.js";import{c as H,B as N,M as R}from"./MainLayout-BrhqOSxE.js";import{T as G}from"./TextInput-DPiS_tKG.js";import{I as w}from"./InputError-BuKV6iGR.js";import{I as C}from"./InputLabel-B8Kh0Q3S.js";import{P as h}from"./PrimaryButton-DZW4fE3P.js";import{S as L}from"./SecondaryButton-CJQfbzcr.js";import{M as J}from"./Modal-O7aHsPAy.js";import{S as K}from"./react-select.esm-BR1Jowvf.js";import{U as Q,M as V}from"./ManageCollaboratorsModal-Bf2nDXwz.js";import{C as _}from"./ConfirmationModal-BHitAyku.js";import{p as X}from"./purify.es-B2xYLbnv.js";import{P as W,T}from"./trash-2-inedCYbY.js";import{C as I}from"./clock-CvOoiWJ3.js";import"./index-D26INkXh.js";import"./useRoles-CyoACi4S.js";import"./analytics-BQ374C1C.js";import"./index-CIAO3bRK.js";import"./transition-j-s56bsc.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],v=H("Users",Z);function ee({isOpen:n,onClose:r}){const{data:o,setData:u,post:i,processing:m,errors:c,reset:p}=O({name:"",description:""}),d=t=>{t.preventDefault(),i(route("project-hub.workspaces.store"),{onSuccess:()=>{p(),r()}})};return n?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:r}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative z-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Workspace"}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(C,{htmlFor:"name",value:"Workspace Name"}),e.jsx(G,{id:"name",type:"text",className:"mt-1 block w-full",value:o.name,onChange:t=>u("name",t.target.value),required:!0}),e.jsx(w,{message:c.name,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(C,{htmlFor:"description",value:"Description (Optional)"}),e.jsx("textarea",{id:"description",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:o.description,onChange:t=>u("description",t.target.value),rows:"3"}),e.jsx(w,{message:c.description,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{onClick:r,disabled:m,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:m,children:m?"Creating...":"Create Workspace"})]})]})]})]}):null}function se({show:n,onClose:r,linkableProjects:o=[]}){const{data:u,setData:i,post:m,processing:c,errors:p,reset:d}=O({post_project_id:""}),t=l=>{l.preventDefault(),m(route("project-hub.projects.store"),{onSuccess:()=>{d(),r()}})};return e.jsx(J,{show:n,onClose:r,maxWidth:"md",children:e.jsxs("form",{onSubmit:t,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Workspace from Project"}),e.jsxs("div",{className:"mb-6",children:[e.jsx(C,{htmlFor:"post_project_id",value:"Select a Project to Create a Workspace For",className:"mb-2"}),o.length>0?e.jsxs(e.Fragment,{children:[e.jsx(K,{id:"post_project_id",options:o.map(l=>({value:l.id,label:l.title})),onChange:l=>i("post_project_id",l?l.value:""),className:"w-full",classNamePrefix:"select",placeholder:"Select a project...",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The workspace will inherit the title and description from the selected project."})]}):e.jsx("p",{className:"text-amber-600 py-2 px-3 bg-amber-50 border border-amber-200 rounded-md",children:"You don't have any projects available for linking. Please create a project first."}),e.jsx(w,{message:p.post_project_id,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(L,{onClick:r,className:"mr-2",children:"Cancel"}),e.jsx(h,{type:"submit",disabled:c||o.length===0,children:"Create Project"})]})]})})}function te({workspaces:n,projects:r,linkableProjects:o,connections:u}){console.log(n),console.log(r);const{auth:i}=A().props,[m,c]=x.useState(!1),[p,d]=x.useState(!1),[t,l]=x.useState(null),[j,b]=x.useState(null),[z,k]=x.useState(!1),[F,M]=x.useState(null),[q,S]=x.useState(null),y=i.user.academician!==null,B=(s,a)=>{s.preventDefault(),s.stopPropagation(),l(a)},U=()=>{t&&P.delete(route("workspaces.destroy",t.id),{onSuccess:()=>{l(null)}})},E=(s,a)=>{s.preventDefault(),s.stopPropagation(),b(a)},Y=()=>{j&&P.delete(route("project-hub.projects.destroy",j.id),{onSuccess:()=>{b(null)}})},$=(s,a,g)=>{s.preventDefault(),s.stopPropagation(),M(a),S(g),k(!0)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 pl-2",children:"Your Workspaces"}),e.jsx("div",{className:"space-x-2",children:e.jsxs(h,{onClick:()=>c(!0),children:[e.jsx(W,{className:"w-4 h-4 mr-2"})," New Workspace"]})})]}),n.length===0?e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"mx-auto bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center",children:e.jsx(v,{className:"w-8 h-8 text-gray-500"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workspaces yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first workspace to start organizing your projects."}),e.jsxs("div",{className:"space-x-2",children:[y&&e.jsxs(h,{onClick:()=>d(!0),children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," Create Project"]}),e.jsxs(h,{onClick:()=>c(!0),children:[e.jsx(W,{className:"w-4 h-4 mr-2"})," Create Workspace"]})]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(s=>{const a=s.owner.academician||s.owner.postgraduate||s.owner.undergraduate,g=(a==null?void 0:a.full_name)||s.owner.name;return e.jsxs("div",{className:"relative bg-white shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:[e.jsxs(D,{href:route("project-hub.workspaces.show",s.id),className:"block p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.name}),s.description&&e.jsx("p",{className:"text-gray-500 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:[e.jsxs("div",{className:"flex items-center mr-4",children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Owner: ",g]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"absolute top-2 right-2 flex space-x-1",children:i.user.id===s.owner_id&&e.jsx("button",{onClick:f=>B(f,s),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-full",title:"Delete workspace",children:e.jsx(T,{className:"w-4 h-4"})})})]},s.id)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 pl-2",children:"Your Projects"}),e.jsx("div",{className:"space-x-2",children:y&&e.jsxs(h,{onClick:()=>d(!0),children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," New Project"]})})]}),r.length===0?e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"mx-auto bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center",children:e.jsx(N,{className:"w-8 h-8 text-gray-500"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first project to start organizing your research."}),e.jsx("div",{className:"space-x-2",children:y&&e.jsxs(h,{onClick:()=>d(!0),children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," Create Project"]})})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>{const a=s.owner.academician||s.owner.postgraduate||s.owner.undergraduate,g=(a==null?void 0:a.full_name)||s.owner.name;return e.jsxs("div",{className:"relative bg-blue-50 shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:[e.jsxs(D,{href:route("project-hub.projects.show",s.id),className:"block p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.name}),s.description&&e.jsx("p",{className:"text-gray-500 text-sm mb-3 line-clamp-2",dangerouslySetInnerHTML:{__html:X.sanitize(s.description)}}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:[e.jsxs("div",{className:"flex items-center mr-4",children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Owner: ",g]})]}),s.post_project_id&&e.jsxs("div",{className:"flex items-center mr-4",children:[e.jsx(N,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Linked Project"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[i.user.id===s.owner_id&&e.jsx("button",{onClick:f=>$(f,s,"project"),className:"p-1.5 text-gray-400 hover:text-blue-500 hover:bg-blue-100 rounded-full",title:"Manage members",children:e.jsx(Q,{className:"w-4 h-4"})}),i.user.id===s.owner_id&&e.jsx("button",{onClick:f=>E(f,s),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-blue-100 rounded-full",title:"Delete project",children:e.jsx(T,{className:"w-4 h-4"})})]})]},s.id)})})]}),e.jsx(ee,{isOpen:m,onClose:()=>c(!1)}),e.jsx(se,{show:p,onClose:()=>d(!1),linkableProjects:o||[]}),e.jsx(V,{show:z,onClose:()=>{k(!1),M(null),S(null)},context:F,contextType:q,connections:u||[]}),e.jsx(_,{show:!!t,onClose:()=>l(null),onConfirm:U,title:"Delete Workspace",message:t?`Are you sure you want to delete the workspace "${t.name}"? This action cannot be undone and will delete all boards and tasks within this workspace.`:""}),e.jsx(_,{show:!!j,onClose:()=>b(null),onConfirm:Y,title:"Delete Project",message:j?`Are you sure you want to delete the project "${j.name}"? This action cannot be undone and will delete all boards and tasks within this project.`:""})]})}te.layout=n=>e.jsx(R,{title:"Scholar Lab",children:n,TopMenuOpen:!1});export{te as default};
