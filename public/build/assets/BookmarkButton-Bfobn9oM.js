import{a as d,r as k,j as r}from"./app-CDhB17tc.js";import{M as w,N as B}from"./index-Bxnf0qm3.js";import{y as g}from"./index-ChfMB--s.js";class h{static async checkBookmarkStatus(o,e){try{return(await d.get(route("bookmarks.check"),{params:{bookmarkable_type:o,bookmarkable_id:e}})).data}catch(a){throw console.error("Error checking bookmark status:",a),a}}static async toggleBookmark(o,e,a="general"){try{return(await d.post(route("bookmarks.toggle"),{bookmarkable_type:o,bookmarkable_id:e,category:a})).data}catch(s){throw console.error("Error toggling bookmark:",s),s}}static async removeBookmark(o){try{return(await d.delete(route("bookmarks.destroy",o))).data}catch(e){throw console.error("Error removing bookmark:",e),e}}}const E=({bookmarkableType:m,bookmarkableId:o,category:e="general",className:a="",iconSize:s="text-lg",showText:f=!1,tooltipPosition:l="bottom"})=>{const[n,u]=k.useState(!1),[i,c]=k.useState(!0),[p,b]=k.useState(!1);k.useEffect(()=>{x()},[o,m]);const x=async()=>{c(!0);try{const t=await h.checkBookmarkStatus(m,o);u(t.is_bookmarked)}catch(t){console.error("Error checking bookmark status:",t)}finally{c(!1)}},y=async()=>{if(!i){c(!0);try{const t=await h.toggleBookmark(m,o,e);u(t.is_bookmarked),g.success(t.is_bookmarked?"Added to bookmarks":"Removed from bookmarks",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}catch(t){console.error("Error toggling bookmark:",t),g.error("Failed to update bookmark. Please try again.",{position:"bottom-right",autoClose:3e3})}finally{c(!1)}}};return r.jsxs("div",{className:`relative cursor-pointer ${a}`,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[r.jsxs("button",{onClick:y,className:`flex items-center focus:outline-none ${n?"text-yellow-500":"text-gray-500 hover:text-yellow-500"} transition duration-200`,disabled:i,"aria-label":n?"Remove bookmark":"Add bookmark",children:[i?r.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):r.jsx(r.Fragment,{children:n?r.jsx(w,{className:s}):r.jsx(B,{className:s})}),f&&r.jsx("span",{className:"ml-1",children:n?"Bookmarked":"Bookmark"})]}),p&&r.jsxs("div",{className:`
          absolute z-50 w-max 
          ${l==="bottom"?"top-full mt-2 left-1/2 transform -translate-x-1/2":l==="top"?"bottom-full mb-2 left-1/2 transform -translate-x-1/2":l==="right"?"left-full ml-2 top-1/2 transform -translate-y-1/2":"right-full mr-2 top-1/2 transform -translate-y-1/2"} 
          px-3 py-2 text-sm font-medium text-gray-800 bg-white border border-gray-200 rounded-lg shadow-lg whitespace-nowrap
        `,children:[r.jsx("div",{className:`
            absolute w-3 h-3 bg-white transform rotate-45 border-gray-200
            ${l==="bottom"?"top-0 -translate-y-1/2 border-t border-l left-1/2 -translate-x-1/2":l==="top"?"bottom-0 translate-y-1/2 border-b border-r left-1/2 -translate-x-1/2":l==="right"?"left-0 -translate-x-1/2 border-l border-t top-1/2 -translate-y-1/2":"right-0 translate-x-1/2 border-r border-b top-1/2 -translate-y-1/2"}
          `}),r.jsx("div",{className:"relative z-10",children:n?"Remove from bookmarks":"Add to bookmarks"})]})]})};export{E as B};
