import{q as U,W as V,r as m,j as e}from"./app-TC0ML_MV.js";import{T as d,I as c}from"./TextInput-lYfy4FkO.js";import{I as n}from"./InputLabel-tl0VOzJR.js";import{P as G}from"./PrimaryButton-DrVlpvqr.js";import q from"./NationalityForm-BNm0lj6G.js";import{S as D}from"./react-select.esm-BFolHCfB.js";import{z as T}from"./transition-BBMR13yc.js";function Q({universities:j,faculties:N,className:y="",researchOptions:p}){var v;const s=U().props.undergraduate;console.log(s);const{data:a,setData:i,post:u,errors:o,processing:w,recentlySuccessful:C}=V({phone_number:(s==null?void 0:s.phone_number)||"",full_name:(s==null?void 0:s.full_name)||"",bio:(s==null?void 0:s.bio)||"",bachelor:(s==null?void 0:s.bachelor)||"",CGPA_bachelor:(s==null?void 0:s.CGPA_bachelor)||"",nationality:(s==null?void 0:s.nationality)||"",english_proficiency_level:(s==null?void 0:s.english_proficiency_level)||"",current_undergraduate_status:(s==null?void 0:s.current_undergraduate_status)||"",university:(s==null?void 0:s.university)||"",faculty:(s==null?void 0:s.faculty)||"",matric_no:(s==null?void 0:s.matric_no)||"",skill:(s==null?void 0:s.skill)||"",interested_do_research:(s==null?void 0:s.interested_do_research)||!1,expected_graduate:(s==null?void 0:s.expected_graduate)||"",research_preference:typeof(s==null?void 0:s.research_preference)=="string"?JSON.parse(s==null?void 0:s.research_preference):s==null?void 0:s.research_preference,CV_file:(s==null?void 0:s.CV_file)||"",profile_picture:(s==null?void 0:s.profile_picture)||"",background_image:(s==null?void 0:s.background_image)||"",website:(s==null?void 0:s.website)||"",linkedin:(s==null?void 0:s.linkedin)||"",google_scholar:(s==null?void 0:s.google_scholar)||"",researchgate:(s==null?void 0:s.researchgate)||""}),k=l=>{if(l.preventDefault(),!a.profile_picture){alert("Please select a profile picture.");return}const r=new FormData;r.append("profile_picture",a.profile_picture),u(route("role.updateProfilePicture"),{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile picture updated successfully."),b(),window.location.reload()},onError:t=>{console.error("Error updating profile picture:",t),alert("Failed to update the profile picture. Please try again.")}})},F=l=>{if(l.preventDefault(),!a.background_image){alert("Please select a background image.");return}const r=new FormData;r.append("background_image",a.background_image),u(route("role.updateBackgroundImage"),{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Background image updated successfully."),h(!1),window.location.reload()},onError:t=>{console.error("Error updating background image:",t),alert("Failed to update the background image. Please try again.")}})},S=l=>{const r=l.target.value;i(t=>({...t,current_undergraduate_status:r,matric_no:r==="Registered"?t.matric_no:"",university:r==="Registered"?t.university:"",faculty:r==="Registered"?t.faculty:""}))},P=l=>{l.preventDefault();const r=new FormData;Object.keys(a).forEach(t=>{t!=="profile_picture"&&(Array.isArray(a[t])?r.append(t,JSON.stringify(a[t])):t==="interested_do_research"?r.append(t,a[t]===!0?1:0):r.append(t,a[t]))});for(let[t,_]of r.entries())console.log(`${t}: ${_}`),console.log(`${t}: ${typeof _}`);u(route("role.update"),{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile updated successfully.")},onError:t=>{console.error("Error updating profile:",t),alert("Failed to update the profile. Please try again.")}})},[$,x]=m.useState(!1),I=()=>x(!0),b=()=>x(!1),[E,h]=m.useState(!1),[g,A]=m.useState(a.university),B=N.filter(l=>l.university_id===parseInt(g));m.useState(!1),m.useState(!1);const[z,M]=m.useState(!1);m.useEffect(()=>{(a.suggested_research_title||a.suggested_research_description)&&M(!0)},[a.suggested_research_title,a.suggested_research_description]);const[f,R]=m.useState("profiles");return e.jsxs("div",{className:"pb-8",children:[e.jsxs("div",{className:"w-full bg-white pb-12 shadow-md relative mb-4",children:[e.jsxs("div",{className:"relative w-full h-48 overflow-hidden",children:[e.jsx("img",{src:`/storage/${a.background_image||"default-background.jpg"}`,alt:"Background",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>h(!0),className:"absolute top-4 right-4 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Background Image",children:"✏️"})]}),e.jsxs("div",{className:"relative flex flex-col items-center -mt-16 z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/${a.profile_picture||"default-profile.jpg"}`,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"}),e.jsx("button",{onClick:I,className:"absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Profile Picture",children:"✏️"})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:a.full_name})})]})]}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Background Image"}),e.jsxs("form",{onSubmit:F,children:[e.jsx("input",{type:"file",accept:"image/*",className:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:l=>i("background_image",l.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 mr-2",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Profile Picture"}),e.jsxs("form",{onSubmit:k,children:[e.jsx("input",{type:"file",accept:"image/*",className:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:l=>i("profile_picture",l.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 mr-2",children:"Save"}),e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-6xl mx-auto flex space-x-8 px-4 sm:px-6",children:["Profiles","Projects","Works","Teams","Network","Activity","More"].map(l=>e.jsx("button",{className:`py-4 px-3 font-medium text-sm ${f.toLowerCase()===l.toLowerCase()?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>R(l.toLowerCase()),children:l},l))})}),e.jsxs("div",{className:"w-full px-4 py-8",children:[f==="profiles"&&e.jsxs("section",{className:y,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your personal information."})]}),e.jsxs("form",{onSubmit:P,className:"mt-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"full_name",value:"Full Name",required:!0}),e.jsx(d,{id:"full_name",className:"mt-1 block w-full p-4",value:a.full_name,onChange:l=>i("full_name",l.target.value),required:!0,isFocused:!0,autoComplete:"full_name"}),e.jsx(c,{className:"mt-2",message:o.full_name})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"bio",value:"Short Bio"}),e.jsx("textarea",{id:"bio",className:"mt-1 block w-full p-4",value:a.bio,onChange:l=>i("bio",l.target.value),rows:4}),e.jsx(c,{className:"mt-2",message:o.bio})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"bachelor",value:"Name of Bachelor Degree"}),e.jsx(d,{id:"bachelor",className:"mt-1 block w-full p-4",value:a.bachelor||"",onChange:l=>i(r=>({...r,bachelor:l.target.value}))}),e.jsx(c,{className:"mt-2",message:o.bachelor})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"CGPA_bachelor",value:"CGPA Bachelor"}),e.jsx(d,{id:"CGPA_bachelor",className:"mt-1 block w-full p-4",value:a.CGPA_bachelor||"",onChange:l=>i(r=>({...r,CGPA_bachelor:l.target.value}))}),e.jsx(c,{className:"mt-2",message:o.CGPA_bachelor})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"phone_number",value:"Phone Number",required:!0}),e.jsx(d,{id:"phone_number",className:"mt-1 block w-full p-4",value:a.phone_number,onChange:l=>i("phone_number",l.target.value),autoComplete:"tel"}),e.jsx(c,{className:"mt-2",message:o.phone_number})]}),e.jsx("div",{children:e.jsx(q,{title:"Nationality",value:a.nationality,onChange:l=>i("nationality",l)})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"current_undergraduate_status",className:"mt-1 block text-sm font-medium text-gray-700",children:"Current Undergraduate Status"}),e.jsxs("select",{id:"current_undergraduate_status",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-4",value:a.current_undergraduate_status,onChange:S,children:[e.jsx("option",{value:"",hidden:!0,children:"Select your current undergraduate status"}),e.jsx("option",{value:"Not registered yet",children:"Not registered yet"}),e.jsx("option",{value:"Registered",children:"Registered"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"english_proficiency_level",value:"English Proficiency Level"}),e.jsxs("select",{id:"english_proficiency_level",className:"mt-1 block w-full border rounded-md p-4",value:a.english_proficiency_level||"",onChange:l=>i("english_proficiency_level",l.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select English Proficiency Level"}),e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Elementary",children:"Elementary"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Upper Intermediate",children:"Upper Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]}),e.jsx(c,{className:"mt-2",message:o.english_proficiency_level})]}),a.current_undergraduate_status==="Registered"&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"university",value:"University",required:!0}),e.jsxs("select",{id:"university",className:"mt-1 block w-full border rounded-md p-2 p-4",value:g||"",onChange:l=>{const r=l.target.value;A(r),i("university",r)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select your University"}),j.map(l=>e.jsx("option",{value:l.id,children:l.full_name},l.id))]}),e.jsx(c,{className:"mt-2",message:o.university})]})]}),a.current_undergraduate_status==="Registered"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[g&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"faculty",value:"Faculty",required:!0}),e.jsxs("select",{id:"faculty",className:"mt-1 block w-full border rounded-md p-4",value:a.faculty||"",onChange:l=>i("faculty",l.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select your Faculty"}),B.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsx(c,{className:"mt-2",message:o.faculty})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"matric_no",value:"Matric No.",required:!0}),e.jsx(d,{id:"matric_no",className:"mt-1 block w-full p-4",value:a.matric_no,onChange:l=>i("matric_no",l.target.value),required:!0,isFocused:!0,autoComplete:"matric_no"}),e.jsx(c,{className:"mt-2",message:o.matric_no})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"skill",value:"Skills"}),e.jsx("textarea",{id:"skill",className:"mt-1 block w-full p-4",value:a.skill,onChange:l=>i("skill",l.target.value),rows:4}),e.jsx(c,{className:"mt-2",message:o.skill})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"interested_do_research",className:"block text-sm font-medium text-gray-700",children:"Are you interested to do research after bachelor degree?"}),e.jsxs("select",{id:"interested_do_research",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-4",value:a.interested_do_research,onChange:l=>i("interested_do_research",l.target.value),children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(n,{htmlFor:"expected_graduate",value:"Expected Graduate (Month/Year)",required:!0}),e.jsx(d,{id:"expected_graduate",className:"mt-1 block w-full p-4",value:a.expected_graduate,onChange:l=>i("expected_graduate",l.target.value),required:!0,isFocused:!0,autoComplete:"expected_graduate"}),e.jsx(c,{className:"mt-2",message:o.expected_graduate})]})]}),a.interested_do_research==="true"&&e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"research_preference",className:"block text-sm font-medium text-gray-700",children:"Preferred Field of research (Multiple Selection) Structure : Field of Research - Research Area - Niche Domain"}),e.jsx(D,{id:"research_preference",isMulti:!0,options:p.map(l=>({value:`${l.field_of_research_id}-${l.research_area_id}-${l.niche_domain_id}`,label:`${l.field_of_research_name} - ${l.research_area_name} - ${l.niche_domain_name}`})),className:"mt-1",classNamePrefix:"select",value:(v=a.research_preference)==null?void 0:v.map(l=>{const r=p.find(t=>`${t.field_of_research_id}-${t.research_area_id}-${t.niche_domain_id}`===l);return{value:l,label:r?`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`:l}}),onChange:l=>{const r=l.map(t=>t.value);i("research_preference",r)},placeholder:"Select Preferred Field of research..."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{htmlFor:"CV_file",className:"block text-sm font-medium text-gray-700",children:"Upload CV (Max 5MB)"}),e.jsx("input",{type:"file",id:"CV_file",name:"CV_file",className:"block w-full border-gray-300 ",accept:".pdf,.doc,.docx",onChange:l=>{const r=l.target.files[0];r&&(r.size<=5*1024*1024?i(t=>({...t,CV_file:r})):alert("File size exceeds 5MB. Please upload a smaller file."))}}),a.CV_file&&e.jsx("div",{className:"mt-2",children:typeof a.CV_file=="string"?e.jsxs("a",{href:`/storage/${a.CV_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline",children:["View Current File: ",a.CV_file.split("/").pop()]}):e.jsxs("p",{className:"text-sm text-gray-500",children:["File Selected: ",a.CV_file.name]})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"website",value:"Website"}),e.jsx(d,{id:"website",className:"mt-1 block w-full p-4",value:a.website,onChange:l=>i("website",l.target.value),autoComplete:"url"}),e.jsx(c,{className:"mt-2",message:o.website})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"linkedin",value:"LinkedIn"}),e.jsx(d,{id:"linkedin",className:"mt-1 block w-full p-4",value:a.linkedin,onChange:l=>i("linkedin",l.target.value),autoComplete:"url"}),e.jsx(c,{className:"mt-2",message:o.linkedin})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"google_scholar",value:"Google Scholar"}),e.jsx(d,{id:"google_scholar",className:"mt-1 block w-full p-4",value:a.google_scholar,onChange:l=>i("google_scholar",l.target.value),autoComplete:"url"}),e.jsx(c,{className:"mt-2",message:o.google_scholar})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"researchgate",value:"ResearchGate"}),e.jsx(d,{id:"researchgate",className:"mt-1 block w-full p-4",value:a.researchgate,onChange:l=>i("researchgate",l.target.value),autoComplete:"url"}),e.jsx(c,{className:"mt-2",message:o.researchgate})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(G,{disabled:w,children:"Save"}),e.jsx(T,{show:C,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]}),f==="projects"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"})]})]})}export{Q as default};
