import{q as F,W as U,r as c,j as e,y as g}from"./app-D_isCBrZ.js";import{M as $}from"./MainLayout-DFHTJA1K.js";import{u as D}from"./useRoles-Bqwai8Sw.js";import"./house-C09fpVO9.js";import"./createLucideIcon-BT85Csak.js";import"./zap-7CK7LKMF.js";import"./users-CzJIWcZi.js";import"./folder-open-CA9bVcGc.js";import"./settings-JsLbx9pE.js";import"./chevron-left-BjuclT0k.js";import"./proxy-hyWpbevY.js";import"./user-round-DHB2rLfi.js";import"./clipboard-list-bDsaPQ1j.js";import"./dollar-sign-CKWtW4Ws.js";import"./calendar-D8HyrHOR.js";import"./file-text-aNmLS6r1.js";import"./message-square-aRmyvbGu.js";import"./graduation-cap-BDaXx5-Y.js";import"./building-BzLX-1Tq.js";import"./Dropdown-C4pTIkAa.js";import"./transition-B-iVJ-Dl.js";import"./sparkles-DBHFI2EX.js";import"./bookmark-IOsNloOG.js";import"./folder-kanban-YiDVfHbK.js";import"./building-2-BotSZuIB.js";import"./database-OkIdYBy7.js";import"./shield-DIRjH5Xw.js";import"./index-B2H7aNu6.js";import"./analytics-BQ374C1C.js";import"./index-S2oVNL1R.js";import"./iconBase-Ky0bhwWY.js";import"./index-Dje2_Jfs.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-CBfrqCZ4.js";import"./ThreadPane-DXxMgnx_.js";import"./Modal-DC1ukoCH.js";import"./dialog-C6ICxX1D.js";import"./index-BG6TJDBP.js";import"./scroll-area-Bgije4Ta.js";import"./index-BxE-5CCQ.js";import"./index-CL6H2niU.js";import"./index--9W6mpJI.js";import"./index-DEX240OH.js";import"./index-BdQq_4o_.js";import"./format-BOijCLBA.js";import"./en-US-DIdCsyf3.js";import"./button-CvkXbyNI.js";import"./download-C9pj9r2a.js";import"./x-DHPN06jQ.js";import"./isSameDay-BHs4V-zU.js";import"./constructNow-6bIQB1GK.js";import"./addDays-KHeCUDUr.js";import"./PrimaryButton-ER2dCufN.js";import"./SecondaryButton-CXsAGrXg.js";import"./search-oexLbFuf.js";import"./circle-check-big-C8DvMf6D.js";import"./chevron-right-Be2Bs3JC.js";import"./tooltip-CQVkmZ9i.js";import"./index-CoKnqvF_.js";import"./index-BSdNhmJ5.js";import"./index-8kpB6Eh5.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-lKKoak1a.js";import"./index-Be7aubF8.js";import"./index-DKcCfogn.js";import"./index-Chjiymov.js";import"./dialog-D0uO8m2L.js";import"./index-BsmCtA5d.js";import"./index-BlbDubjO.js";import"./briefcase-BrtHsIPx.js";import"./user-B_P0OToR.js";const et=()=>{const{academicians:i,flash:y,universities:j,faculties:v,researchOptions:N}=F().props;D();const{processing:b}=U(),[w,S]=c.useState({}),[a,x]=c.useState({}),[n,h]=c.useState(!1),[l,o]=c.useState(!1);c.useEffect(()=>{const t={};i.forEach(s=>{t[s.id]=n}),x(t)},[i,n]);const k=t=>{g.post(route("faculty-admin.verify-academician",t),{},{onStart:()=>{console.log(`Starting verification for academician ID: ${t}`)},onSuccess:s=>{console.log(`Successfully verified academician ID: ${t}`),s.props.flash&&s.props.flash.success?alert(s.props.flash.success):alert("Academician verified successfully!")},onError:s=>{console.error(`Failed to verify academician ID: ${t}`,s),alert("Failed to verify academician.")}})},_=()=>{const t=Object.keys(a).filter(s=>a[s]).map(s=>parseInt(s,10));if(t.length===0){alert("Please select at least one academician to verify.");return}o(!0),console.log("Sending verification request for IDs:",t),g.post(route("faculty-admin.verify-academicians-batch"),{academician_ids:t},{onStart:()=>(console.log("Starting batch verification request"),!0),onSuccess:s=>{console.log("Verification success response:",s),s.props.flash&&s.props.flash.success?alert(s.props.flash.success):alert("Academicians verified successfully!"),x({}),h(!1),o(!1)},onError:s=>{console.error("Verification error:",s),o(!1),alert("Failed to verify academicians: "+(Object.values(s)[0]||"Unknown error"))},onFinish:()=>{console.log("Verification request finished"),o(!1)}})},A=t=>{const s={...a};s[t]=!a[t],x(s);const r=i.every(d=>s[d.id]===!0);h(r)},I=()=>{h(!n)},u=()=>Object.values(a).filter(Boolean).length,C=t=>{const s=j.find(r=>r.id===t);return s?s.full_name:"Unknown University"},V=t=>{const s=v.find(r=>r.id===t);return s?s.name:"Unknown Faculty"},E=t=>{S(s=>({...s,[t]:!s[t]}))},B=t=>t?e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Verified"}):e.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Not Verified"});return e.jsx($,{title:"",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-2 px-4",children:[e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Academicians"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Review and verify academicians in your faculty."})]}),i.length>0&&e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[u()," selected"]}),e.jsx("button",{className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${u()>0?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-300 cursor-not-allowed"}`,onClick:_,disabled:u()===0||l,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Selected"})]})]}),y?.success&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-700",children:y.success})})]})}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:i.length===0?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No academicians pending verification in your faculty."})}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:n,onChange:I,disabled:l}),e.jsx("span",{className:"ml-2",children:"Select All"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academician"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"University & Faculty"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department & Position"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Expertise"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>{const s=w[t.id]||!1,r=a[t.id]||!1;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:r||!1,onChange:()=>A(t.id),disabled:l})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.full_name||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:t.user?.email||"N/A"})]})})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:C(t.university)}),e.jsx("div",{className:"text-sm text-gray-500",children:V(t.faculty)})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.department||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:t.current_position||"N/A"})]}),e.jsx("td",{className:"px-6 py-4",children:t.research_expertise&&t.research_expertise.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[t.research_expertise.length," area",t.research_expertise.length!==1?"s":""]}),e.jsx("button",{onClick:()=>E(t.id),className:"text-blue-600 hover:text-blue-800 text-sm",children:s?"Hide details":"Show details"})]}),s&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.research_expertise.map((d,m)=>{const p=N.find(f=>`${f.field_of_research_id}-${f.research_area_id}-${f.niche_domain_id}`===d);return p?e.jsxs("p",{className:"text-sm text-gray-700",children:[m+1,". ",p.field_of_research_name," - ",p.research_area_name," - ",p.niche_domain_name]},m):e.jsxs("p",{className:"text-sm text-gray-700",children:[m+1,". Unknown expertise (ID: ",d,")"]},m)})})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No research expertise specified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B(t.verified)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!t.verified&&e.jsx("button",{className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>k(t.id),disabled:b||l,children:"Verify"})})]},t.id)})})]})})})]})})};export{et as default};
