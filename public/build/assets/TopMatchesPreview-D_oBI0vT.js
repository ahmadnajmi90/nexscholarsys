import{r as n,j as e,a as S,b as Y}from"./app-A8xQkvSk.js";import{h as Z,i as ee,j as te,k as ae}from"./index-CVHBOZVQ.js";import se from"./ProfileCard-B8wyoU4Y.js";import ie from"./RecommendationModal-l2ZfJRv0.js";import re from"./RecommendationDisplay-fWIgJfiF.js";import{S as C}from"./sparkles-CGG6vdsp.js";import{c as I}from"./createReactComponent-DGUauFTO.js";import{m as w}from"./proxy-CKd5URLT.js";import"./iconBase-UojUzoPr.js";import"./BookmarkButton-6joHXjCW.js";import"./index-Km-vM6Jb.js";import"./BookmarkHandler-C_QiK5Hm.js";import"./tooltip-Oo0Wz_lE.js";import"./index-BEzQHz4a.js";import"./index-7Qlnuq3l.js";import"./index-BlKfbGK4.js";import"./index-OrEFxIKi.js";import"./index-DwuY8lh1.js";import"./index-Cp2nhW7C.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-Db3xrL5F.js";import"./index-DMPy21CI.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";import"./ConnectionButton-CoHHFEBh.js";import"./ellipsis-vertical-DWV20yfL.js";import"./createLucideIcon-DPzobtnR.js";import"./mail-Dtimj1fp.js";import"./star-fHj6RZVc.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l4 4",key:"svg-1"}],["path",{d:"M5 12l4 -4",key:"svg-2"}]],oe=I("outline","arrow-narrow-left","ArrowNarrowLeft",ne);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M15 16l4 -4",key:"svg-1"}],["path",{d:"M15 8l4 4",key:"svg-2"}]],ce=I("outline","arrow-narrow-right","ArrowNarrowRight",le);function Ve({searchResults:o,universitiesList:P,researchOptions:j,users:M,onViewAllResults:L,onQuickInfoClick:de,onRecommendClick:me,onShowInsight:A}){var k;const l=n.useRef(null),[$,R]=n.useState(!1),[F,W]=n.useState(!0),[B,m]=n.useState(!1),[E,g]=n.useState(!1),[a,N]=n.useState(null),[T,v]=n.useState(!1),[he,D]=n.useState(""),[G,f]=n.useState(!1),[_,V]=n.useState(null),y=((k=o==null?void 0:o.matches)==null?void 0:k.slice(0,5))||[];if(!y||y.length===0)return null;n.useEffect(()=>{b()},[]);const b=()=>{if(l.current){const{scrollLeft:t,scrollWidth:s,clientWidth:i}=l.current;R(t>0),W(t<s-i)}},z=()=>{l.current&&(l.current.scrollBy({left:-400,behavior:"smooth"}),setTimeout(b,300))},O=()=>{l.current&&(l.current.scrollBy({left:400,behavior:"smooth"}),setTimeout(b,300))},Q=t=>{g(!0),f(!0);let s=t.ai_insights||"";if(!s){const r=o.matches.find(x=>{const d=x.academician||x.student||{};return(d.id||d.academician_id||d.postgraduate_id||d.undergraduate_id)===(t.academician_id||t.postgraduate_id||t.undergraduate_id||t.id)});s=(r==null?void 0:r.ai_insights)||""}let i=s;if(s){const r=/\b(\d+-\d+-\d+)\b/g;(s.match(r)||[]).forEach(d=>{const u=j.find(p=>`${p.field_of_research_id}-${p.research_area_id}-${p.niche_domain_id}`===d);if(u){const p=`${u.field_of_research_name} - ${u.research_area_name} - ${u.niche_domain_name}`;i=i.replace(new RegExp(d,"g"),p)}})}const c={...t,ai_insights:s,processedInsights:i};N(c),D(i);const h=t.academician_id||t.result_type==="academician",X=t.academician_id||t.postgraduate_id||t.undergraduate_id||t.id;h?Y.get(route("academicians.quick-info",X)).then(r=>{if(r.data&&r.data.academician){const x={...c,...r.data.academician,ai_insights:s,processedInsights:i,projects_count:r.data.projects_count||0,grants_count:r.data.grants_count||0,publications_count:r.data.publications_count||0};N(x)}m(!0),g(!1),f(!1)}).catch(r=>{console.error("Error fetching academician detail:",r),m(!0),g(!1),f(!1)}):(m(!0),g(!1),f(!1))},H=(t,s)=>{s.preventDefault(),V(t),v(!0)},q=()=>{v(!1)},U=()=>(a==null?void 0:a.projects_count)||0,J=()=>(a==null?void 0:a.grants_count)||0,K=()=>(a==null?void 0:a.publications_count)||0;return e.jsxs("div",{className:"w-full py-8",children:[e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Top 5 Matches"}),e.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto",children:[e.jsx("div",{ref:l,onScroll:b,className:"flex overflow-x-auto overscroll-x-none scroll-smooth gap-8 pb-8 px-4 sm:px-6 lg:px-8 [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden",children:y.map((t,s)=>e.jsx(w.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1*s},className:"flex-shrink-0",style:{width:"320px"},children:e.jsx(se,{match:t,universitiesList:P,researchOptions:j,users:M,onQuickInfoClick:Q,onRecommendClick:H,onShowInsight:A})},s))}),e.jsxs("div",{className:"flex items-center justify-between mt-10 px-4 sm:px-6 lg:px-8",children:[o.matches.length>5&&e.jsxs(w.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},onClick:L,className:"group inline-flex items-center gap-3 px-8 py-4 text-base font-semibold text-white bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsxs("span",{children:["View All ",o.total_count||o.total||o.matches.length," Results"]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsxs("div",{className:"flex gap-3 ml-auto",children:[e.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-white hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-all duration-300 shadow-md hover:shadow-lg hover:-translate-y-0.5 border border-gray-200",onClick:z,disabled:!$,children:e.jsx(oe,{className:"h-6 w-6 text-gray-700"})}),e.jsx("button",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-white hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-all duration-300 shadow-md hover:shadow-lg hover:-translate-y-0.5 border border-gray-200",onClick:O,disabled:!F,children:e.jsx(ce,{className:"h-6 w-6 text-gray-700"})})]})]})]}),B&&a&&e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>m(!1)}),e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg max-h-[80vh] overflow-y-auto z-10",onClick:t=>t.stopPropagation(),children:[E?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading profile information..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:a.full_name}),e.jsx("hr",{className:"border-t border-gray-800 mb-4"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-800 mb-2 flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"AI Match Insights"]}),G?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e.jsx("p",{className:"text-gray-600",children:"Generating detailed insights..."})]}):e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:a.processedInsights||a.ai_insights||"No insights available for this profile."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Short Bio"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:a.bio||"Not Provided"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:a.academician_id?"Research Expertise":"Research Interests"}),e.jsx("div",{className:"",children:(()=>{let t=[];return a.academician_id?t=a.research_expertise||[]:a.postgraduate_id||a.student_type==="postgraduate"?t=a.field_of_research||[]:t=a.research_preference||[],Array.isArray(t)&&t.length>0?e.jsx("div",{className:"space-y-2",children:t.map((s,i)=>{const c=j.find(h=>`${h.field_of_research_id}-${h.research_area_id}-${h.niche_domain_id}`===s);return c?e.jsxs("p",{className:"text-gray-600",children:[i+1,". ",c.field_of_research_name," - ",c.research_area_name," - ",c.niche_domain_name]},i):e.jsxs("p",{className:"text-gray-600",children:[i+1,". ",s]},i)})}):e.jsx("p",{className:"text-gray-600",children:"Not Provided"})})()})]}),a.academician_id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Style of Supervision"}),e.jsx("div",{className:"space-y-2",children:Array.isArray(a.style_of_supervision)&&a.style_of_supervision.length>0?e.jsx("div",{className:"mt-2 text-normal text-gray-600",children:a.style_of_supervision.map((t,s)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("span",{className:"font-medium",children:[s+1,". ",t]}),e.jsxs("div",{className:"ml-4 text-sm",children:[t==="Directive Supervision"&&"Structured approach with active guidance and regular monitoring",t==="Facilitative Supervision"&&"Supportive approach encouraging student independence",t==="Coaching Supervision"&&"Focuses on personal development and academic growth",t==="Adaptive Supervision"&&"Flexible support based on student's changing needs",t==="Participatory Supervision"&&"Collaborative approach with shared decision-making"]})]},s))}):e.jsx("p",{className:"text-gray-600",children:"Not Specified"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Supervised Student"}),e.jsx("p",{className:"text-gray-600",children:a.supervised_students_count||"Not Provided"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Available Grant and Project"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-600",children:[J()+U()," Projects/Grants"]}),e.jsxs(S,{href:route("academicians.projects",a.url||a.academician_id),className:"mt-2 self-start text-xs px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200 flex items-center",children:[e.jsx("span",{children:"View Projects"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Publication"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-600",children:[K()," Publications"]}),e.jsxs(S,{href:route("academicians.publications",a.url||a.academician_id),className:"mt-2 self-start text-xs px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200 flex items-center",children:[e.jsx("span",{children:"View Publications"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Recommendation by Others"}),e.jsx(re,{academicianId:a.academician_id||a.id})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Skills"}),Array.isArray(a.skills)&&a.skills.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a.skills.map((t,s)=>{let i=t.name;return t.subdomain&&t.subdomain.domain?i=`${t.subdomain.domain.name} - ${t.subdomain.name} - ${t.name}`:t.full_name?i=t.full_name:i=t.name||`Skill #${s+1}`,e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:i},t.id||s)})}):e.jsx("p",{className:"text-gray-600",children:"No skills listed"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Connect via"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[a.google_scholar&&e.jsx("a",{href:a.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-red-700",title:"Google Scholar",children:e.jsx(Z,{})}),a.personal_website&&e.jsx("a",{href:a.personal_website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-green-700",title:"Personal Website",children:e.jsx(ee,{})}),a.institution_website&&e.jsx("a",{href:a.institution_website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-blue-700",title:"Institutional Website",children:e.jsx(te,{})}),a.linkedin&&e.jsx("a",{href:a.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-blue-800",title:"LinkedIn",children:e.jsx(ae,{})})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>m(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]}),T&&_&&e.jsx(ie,{academician:_,onClose:()=>v(!1),onSuccess:q})]})}export{Ve as default};
