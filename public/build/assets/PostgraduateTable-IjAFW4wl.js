import{r as h,j as e}from"./app-BGc9yukt.js";import{q as g,r as y,s as f}from"./index-DDcWGdFy.js";const N=({postgraduates:c,universities:x,faculties:l,onSendReminder:m,pagination:i})=>{const[a,n]=h.useState({}),p=async s=>{n(t=>({...t,[s]:"sending"}));try{await m(s,"postgraduate"),n(t=>({...t,[s]:"sent"})),setTimeout(()=>{n(t=>{const r={...t};return delete r[s],r})},3e3)}catch{n(r=>({...r,[s]:"error"})),setTimeout(()=>{n(r=>{const d={...r};return delete d[s],d})},3e3)}},o=()=>e.jsx("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:i.from||0})," to ",e.jsx("span",{className:"font-medium",children:i.to||0})," of"," ",e.jsx("span",{className:"font-medium",children:i.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[i.current_page>1&&e.jsx("a",{href:`?postgraduates_page=${i.current_page-1}`,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Previous"}),i.current_page<i.last_page&&e.jsx("a",{href:`?postgraduates_page=${i.current_page+1}`,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Next"})]})})]})});return e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Postgraduates"}),e.jsxs("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"University"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Faculty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Degree"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Field"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c&&c.length>0?c.map(s=>{var r,d;const t=s.postgraduate;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(t==null?void 0:t.full_name)||s.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.unique_id||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t!=null&&t.university_id&&x[t.university_id]?x[t.university_id].full_name:((r=t==null?void 0:t.universityDetails)==null?void 0:r.full_name)||"Not specified"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t!=null&&t.faculty_id&&l[t.faculty_id]?l[t.faculty_id].name:((d=t==null?void 0:t.faculty)==null?void 0:d.name)||"Not specified"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.master_type)||(t==null?void 0:t.previous_degree)||"Not specified"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t!=null&&t.field_of_research?typeof t.field_of_research=="string"?t.field_of_research:Array.isArray(t.field_of_research)?t.field_of_research.join(", "):JSON.stringify(t.field_of_research):"Not specified"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.is_profile_complete?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_profile_complete?"Complete":"Incomplete"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("button",{onClick:()=>p(s.id),disabled:a[s.id]==="sending"||a[s.id]==="sent",className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white ${a[s.id]==="sending"||a[s.id]==="sent"?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:[a[s.id]==="sending"&&e.jsx(g,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),a[s.id]==="sent"&&e.jsx(y,{className:"-ml-1 mr-2 h-4 w-4"}),a[s.id]!=="sending"&&a[s.id]!=="sent"?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"mr-2"}),"Send Reminder"]}):a[s.id]==="sending"?"Sending...":"Sent!"]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No postgraduates found"})})})]}),o()]})]})};export{N as default};
