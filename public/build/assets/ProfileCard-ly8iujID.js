import{r as x,j as e,b as A,R as V}from"./app-BfGWvB7w.js";import{G as Y}from"./iconBase-C2IzehuB.js";import{B as G}from"./BookmarkButton-gJ0NVoty.js";import{C as D}from"./ConnectionButton-DMU6i2Ss.js";import{E as U}from"./ellipsis-vertical-DSrdlRCH.js";import{M as W}from"./mail-wwsldmQc.js";import{S as q}from"./star-IVnfJkyC.js";import"./index-K6AC9O36.js";import"./index-BJH3I2kF.js";import"./BookmarkHandler-Klrtk2RN.js";import"./tooltip-1N_s-dpo.js";import"./index-ateNRHzS.js";import"./index-YHrrFQIB.js";import"./index-Dm_a-pHP.js";import"./index-DtFdHnhw.js";import"./index-DrCL8tui.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-CHD9kPCG.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-Czp2GFly.js";function K(a){return Y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(a)}function ge({match:a,universitiesList:P,researchOptions:m,users:w,onQuickInfoClick:I,onRecommendClick:O,onShowInsight:H}){var M,$,C,S;const s=a.academician||a.student||{},R=s.id||s.academician_id||s.postgraduate_id||s.undergraduate_id,d=!!a.academician||a.result_type==="academician",f=a.result_type==="postgraduate"||s.student_type==="postgraduate";a.result_type==="undergraduate"||s.student_type;const h=a.ai_insights||"";s.ai_insights=h;const[c,N]=x.useState(!1),[g,b]=x.useState(!1),[u,p]=x.useState(!1),v=x.useRef(null),F=()=>s.profile_picture&&s.profile_picture!=="profile_pictures/default.jpg"?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",L=((M=P.find(t=>t.id===s.university))==null?void 0:M.short_name)||s.university_name||s.university_short_name||"Unknown",E=()=>{if(d){if(s.bio)return s.bio.substring(0,100);const r=s.research_expertise||[];if(r.length>0&&s.current_position){const l=r[0],o=m.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===l),i=o?o.research_area_name:"research";return`${s.current_position} specializing in ${i}`}return s.current_position||"Academic Researcher"}if(f){if(s.bio)return s.bio.substring(0,100);const r=s.master_type||"PhD",l=s.field_of_research||[];if(l.length>0){const o=l[0],i=m.find(j=>`${j.field_of_research_id}-${j.research_area_id}-${j.niche_domain_id}`===o),n=i?i.research_area_name:"research";return`${r} Candidate researching ${n}`}return s.suggested_research_title||`${r} Candidate`}if(s.bio)return s.bio.substring(0,100);const t=s.research_preference||[];if(t.length>0){const r=t[0],l=m.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===r);return`Undergraduate interested in ${l?l.research_area_name:"research"}`}return"Undergraduate student exploring research opportunities"},B=()=>{var l;if(d)return[{value:((l=s.scholar_profile)==null?void 0:l.hindex)||s.total_publications||0,label:"h-index"},{value:s.total_publications?`${s.total_publications}+`:"0",label:"Publications"},{value:`${Math.round((a.score||0)*100)}%`,label:"Match"}];if(f){const o=s.master_type||(s.previous_degree==="Master"?"PhD":"Master"),i=Array.isArray(s.field_of_research)?s.field_of_research.length:0;return[{value:o,label:"Degree Level"},{value:i,label:"Research Fields"},{value:`${Math.round((a.score||0)*100)}%`,label:"Match"}]}const t=parseFloat(s.CGPA_bachelor)||0,r=Array.isArray(s.research_preference)?s.research_preference.length:0;return[{value:t>0?t.toFixed(2):"N/A",label:"CGPA"},{value:r,label:"Research Interests"},{value:`${Math.round((a.score||0)*100)}%`,label:"Match"}]},z=t=>{t.target.closest("button")||t.target.closest("a")||(c&&h?b(!g):N(!0))},_=t=>{t.stopPropagation(),b(!g)},y=()=>{b(!1),N(!1),p(!1)};x.useEffect(()=>{const t=r=>{v.current&&!v.current.contains(r.target)&&p(!1)};if(u)return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[u]);const k=B(),T=E();return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:y}),e.jsx("div",{className:`
          ${c?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-[420px]":"relative w-full cursor-pointer"}
        `,style:{perspective:"1000px",WebkitFontSmoothing:"antialiased"},onClick:z,children:e.jsxs("div",{className:`
            relative transition-transform duration-600 ease-in-out
            ${g?"[transform:rotateY(180deg)]":""}
          `,style:{transformStyle:"preserve-3d"},children:[e.jsxs("div",{className:`
              relative rounded-2xl overflow-hidden border-[3px] border-white
              transition-all duration-500 ease-out
              ${c?"h-[580px]":"h-[500px]"}
              shadow-lg hover:shadow-2xl hover:-translate-y-2
            `,style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"translateZ(0)",willChange:"transform",boxShadow:"0 10px 40px rgba(0,0,0,0.15)"},children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-500 ease-out hover:scale-105",style:{backgroundImage:`url('${F()}')`}}),e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to bottom, transparent 0%, transparent 40%, rgba(0,0,0,0.4) 60%, rgba(0,0,0,0.8) 100%)"}}),e.jsxs("div",{className:`relative h-full flex flex-col text-white ${c?"p-6 pb-7":"p-4 pb-5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-blue-500/70 backdrop-blur-md border border-white/30",children:L}),e.jsxs("div",{className:"relative",ref:v,children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),p(!u)},className:"bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-all shadow-lg",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:e.jsx(U,{className:"w-5 h-5 text-gray-700"})}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 flex flex-col gap-2 z-50",children:[e.jsx("div",{onClick:t=>t.stopPropagation(),className:"bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-all shadow-lg flex items-center justify-center",title:"Bookmark",children:e.jsx("div",{className:"flex items-center justify-center w-5 h-5",children:e.jsx(G,{bookmarkableType:d?"academician":a.result_type,bookmarkableId:R,category:d?"Academicians":"Students"})})}),e.jsx("div",{onClick:t=>t.stopPropagation(),className:"bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-all shadow-lg flex items-center justify-center",title:"Add Connection",children:e.jsx("div",{className:"flex items-center justify-center w-5 h-5",children:e.jsx(D,{user:w.find(t=>t.unique_id===(d?s.academician_id||s.id:s.postgraduate_id||s.undergraduate_id||s.id))})})}),e.jsx(A,{href:route("email.compose",{to:(($=w.find(t=>t.unique_id===(d?s.academician_id||s.id:s.postgraduate_id||s.undergraduate_id||s.id)))==null?void 0:$.email)||s.email||""}),onClick:t=>t.stopPropagation(),className:"bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-all shadow-lg",title:"Send Email",children:e.jsx(W,{className:"w-5 h-5 text-gray-700"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),p(!1),O(s,t)},className:"bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-all shadow-lg",title:"Recommend",children:e.jsx(q,{className:"w-5 h-5 text-gray-700"})})]})]})]}),e.jsx("div",{className:"flex-grow"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg font-extrabold leading-tight truncate tracking-tight",style:{textShadow:"0 2px 8px rgba(0,0,0,0.8)"},children:s.full_name}),s.verified===1&&e.jsx("div",{className:"bg-blue-500 rounded-full p-1 flex-shrink-0",children:e.jsx(K,{className:"w-4 h-4 text-white"})})]}),e.jsx("p",{className:"text-sm font-normal text-white/80 line-clamp-2 max-w-[300px] leading-relaxed",style:{textShadow:"0 1px 3px rgba(0,0,0,0.5)"},children:T}),e.jsx("div",{className:"flex items-center justify-between py-2",children:k.map((t,r)=>e.jsxs(V.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("span",{className:"text-lg font-bold leading-none mb-1.5",style:{textShadow:"0 2px 4px rgba(0,0,0,0.6)"},children:t.value}),e.jsx("span",{className:"text-[10px] uppercase tracking-wide text-white/60 font-medium text-center leading-tight",children:t.label})]}),r<k.length-1&&e.jsx("div",{className:"h-12 w-px bg-white/20"})]},r))}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(A,{href:d?route("academicians.show",s.url||s.academician_id||s.id):f?route("postgraduates.show",s.url||s.postgraduate_id||s.id):route("undergraduates.show",s.url||s.undergraduate_id||s.id),className:"flex-1 flex items-center justify-center bg-white text-gray-900 font-semibold text-sm py-3 px-6 rounded-xl hover:bg-gray-100 transition-all duration-300 hover:-translate-y-0.5 shadow-md hover:shadow-lg",onClick:t=>t.stopPropagation(),children:"View Full Profile"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),I(s)},className:"bg-white/20 backdrop-blur-md text-white p-3.5 rounded-xl hover:bg-white/30 transition-all duration-300 hover:scale-110 flex-shrink-0 shadow-md",title:"Quick Info",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),c&&h&&e.jsx("div",{className:"mt-3 text-center",children:e.jsx("button",{onClick:_,className:"text-xs text-white/50 hover:text-white/80 transition-colors font-medium",children:"Tap card to see AI insights →"})})]})]})]})]}),e.jsxs("div",{className:`
              absolute inset-0 rounded-3xl overflow-hidden shadow-xl border-[3px] border-white
              bg-gray-900 text-white p-6
              ${c?"h-[580px]":"h-[500px]"}
            `,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("button",{onClick:_,className:"flex items-center gap-2 text-white/80 hover:text-white transition-colors",children:[e.jsx("span",{className:"text-lg",children:"↺"}),e.jsx("span",{className:"text-sm font-medium",children:"Flip Back"})]}),e.jsx("button",{onClick:y,className:"text-white/80 hover:text-white transition-colors text-2xl",children:"×"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-bold flex items-center gap-2",children:"🤖 AI Match Insights"}),e.jsx("div",{className:"h-px bg-white/20 mt-2"})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[400px]",children:[e.jsx("div",{className:"text-sm text-white/90 whitespace-pre-line leading-relaxed",children:(()=>{let t=h;const r=/\b(\d+-\d+-\d+)\b/g;return(h.match(r)||[]).forEach(o=>{const i=m.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===o);if(i){const n=`${i.field_of_research_name} - ${i.research_area_name} - ${i.niche_domain_name}`;t=t.replace(new RegExp(o,"g"),n)}}),t})()}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/20",children:[(C=a.comparison)!=null&&C.researchOverlap?e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"📊 Research Overlap"}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs text-white/70",children:"Overlap"}),e.jsxs("span",{className:"text-lg font-bold",children:[a.comparison.researchOverlap.overlapPercentage,"%"]})]}),a.comparison.researchOverlap.commonAreas.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-xs text-white/70 mb-1",children:["Common Areas (",a.comparison.researchOverlap.totalCommon,")"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.comparison.researchOverlap.commonAreas.slice(0,3).map((t,r)=>e.jsxs("span",{className:"text-xs bg-green-500/30 text-green-100 px-2 py-0.5 rounded-full",children:["✓ Area ",r+1]},r))})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white/70 mb-1",children:[e.jsx("span",{children:"Your Fields"}),e.jsx("span",{children:a.comparison.researchOverlap.totalYours})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-400 h-1.5 rounded-full",style:{width:`${Math.min(100,a.comparison.researchOverlap.totalYours/10*100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white/70 mb-1",children:[e.jsx("span",{children:"Their Fields"}),e.jsx("span",{children:a.comparison.researchOverlap.totalTheirs})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-1.5",children:e.jsx("div",{className:"bg-purple-400 h-1.5 rounded-full",style:{width:`${Math.min(100,a.comparison.researchOverlap.totalTheirs/10*100)}%`}})})]})]})]})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"📊 Research Overlap"}),e.jsx("div",{className:"bg-white/10 rounded-lg p-4 text-center text-xs text-white/60",children:"Comparison data not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"📈 Collaboration Score"}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"Overall Match"}),e.jsxs("span",{className:"text-lg font-bold",children:[Math.round((a.score||0)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:`${Math.round((a.score||0)*100)}%`}})})]})]}),(S=a.comparison)!=null&&S.skillsMatch?e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"🎯 Key Strengths Match"}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs text-white/70",children:"Skills Alignment"}),e.jsxs("span",{className:"text-lg font-bold",children:[a.comparison.skillsMatch.overallSkillMatch,"%"]})]}),a.comparison.skillsMatch.topMatches.length>0?e.jsx("div",{className:"space-y-2",children:a.comparison.skillsMatch.topMatches.slice(0,5).map((t,r)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-white/90 truncate flex-1",children:t.skill}),e.jsxs("span",{className:"text-xs text-white/70 ml-2",children:[t.matchScore,"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${t.matchScore>=80?"bg-green-400":t.matchScore>=60?"bg-yellow-400":"bg-orange-400"}`,style:{width:`${t.matchScore}%`}})})]},r))}):e.jsx("div",{className:"text-xs text-white/60 text-center py-2",children:"No matching skills found"}),a.comparison.skillsMatch.totalMatchedSkills>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-white/10 text-center",children:e.jsxs("span",{className:"text-xs text-white/60",children:[a.comparison.skillsMatch.totalMatchedSkills," total matched skill",a.comparison.skillsMatch.totalMatchedSkills!==1?"s":""]})})]})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"🎯 Key Strengths Match"}),e.jsx("div",{className:"bg-white/10 rounded-lg p-4 text-xs text-white/60 text-center",children:"Skills comparison data not available"})]})]})]})]})]})})]})}export{ge as default};
