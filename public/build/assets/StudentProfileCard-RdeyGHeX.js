import{q as me,r as i,j as e,b as M}from"./app-6KcAPae7.js";import{F as w}from"./FilterDropdown-JaWHfkRV.js";import{f as he,_ as ue,l as I}from"./index-Ce5Il87X.js";import xe from"./RecommendationModal-BvdBfw0g.js";import{B as fe}from"./BookmarkButton-CyzbDy00.js";import{C as ge}from"./ConnectionButton-DH4Sm63e.js";import{S as T}from"./SearchBar-Bq4wsLuj.js";import{P as pe}from"./Pagination-BbSK2vVE.js";import je from"./LoadingSkeletonCard-BZffNBEr.js";import{S as be,T as _e,a as ye}from"./SkillsModal-CluM4I0w.js";import{T as ve,a as z,b as V,c as O}from"./tooltip-B6pzDCUw.js";import"./react-select.esm-Caq7p8aY.js";import"./index-JAD3o4sP.js";import"./floating-ui.dom-D5EC_49c.js";import"./iconBase-n0Q-2a7D.js";import"./index-DjCDrVl_.js";import"./BookmarkHandler-B_oDB6lu.js";import"./chevron-left-Dg3HzLsn.js";import"./createLucideIcon-Dg0NKHwN.js";import"./chevron-right-BAu-tXgn.js";import"./index-BgMvds5B.js";import"./index-Chjiymov.js";import"./index-C_9bpbuH.js";import"./index-C3-aQ1HP.js";import"./index-Cxfb7wM5.js";import"./index-Kc-fmclX.js";import"./index-4gt4wYEX.js";import"./index-CNVNpKw3.js";import"./index-CSjGVC7d.js";import"./index-CANaiMod.js";import"./index-Bby0leWS.js";import"./utils-CBfrqCZ4.js";const Ne=o=>typeof o!="string"?"":o.replace(/\w\S*/g,d=>d.charAt(0).toUpperCase()+d.substr(1).toLowerCase()),is=({profilesData:o,supervisorAvailabilityKey:d,universitiesList:u,faculties:we,isPostgraduateList:c,isUndergraduateList:n,isFacultyAdminDashboard:q,users:E,researchOptions:h,searchQuery:ke,isLoading:W,onSearch:k})=>{const{skills:S}=me().props,U=new Set(o.flatMap(s=>Array.isArray(s.skills)?s.skills.map(r=>r.id):[])),Q=(Array.isArray(S)?S:[]).filter(s=>U.has(s.id)).map(s=>{let r=s.name;return s.subdomain&&s.subdomain.domain?r=`${s.subdomain.domain.name} - ${s.subdomain.name} - ${s.name}`:s.full_name?r=s.full_name:r=Ne(s.name),{value:s.id,label:r}}),[x,D]=i.useState([]),[f,G]=i.useState([]),[g,H]=i.useState(""),[p,Y]=i.useState([]),[j,A]=i.useState(1),[m,b]=i.useState(!1),[J,_]=i.useState(!1),[l,X]=i.useState(null),y=9,[Z,C]=i.useState(!1),[$,Se]=i.useState(null),[K,P]=i.useState(!1),[R,F]=i.useState(!1),v=i.useRef(null);i.useEffect(()=>{function s(r){v.current&&!v.current.contains(r.target)&&m&&b(!1)}return m&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[m]);const L=s=>{P(!0),X(s),_(!0),P(!1)},ee=Array.from(new Set(o.flatMap(s=>{const r=Array.isArray(s.field_of_research)?s.field_of_research:[],t=Array.isArray(s.research_expertise)?s.research_expertise:[],a=Array.isArray(s.research_preference)?s.research_preference:[];return[...r,...t,...a]}))).map(s=>{const r=h.find(t=>`${t.field_of_research_id}-${t.research_area_id}-${t.niche_domain_id}`===s);return{value:s,label:r?`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`:"Unknown Research Area"}}),se=Array.from(new Set(o.map(s=>s.university))).map(s=>{const r=u.find(t=>t.id===s);return{value:s?s.toString():"",label:r?r.short_name:"Not registered yet"}}),re=s=>s===null?"0":s===!0||s==="1"||s===1?"1":s===!1||s==="0"||s===0?"0":"",B=o.filter(s=>{const r=s.university?s.university.toString():"",t=x.length===0||(s.field_of_research||s.research_expertise||s.research_preference||[]).some(N=>x.includes(N)),a=f.length===0||f.includes(r),oe=re(s[d]),ce=g===""||oe===g,de=p.length===0||s.skills&&s.skills.some(N=>p.includes(N.id));return t&&a&&ce&&de}),te=Math.ceil(B.length/y),ae=B.slice((j-1)*y,j*y),le=s=>{A(s)},ie=s=>{const r=u.find(t=>t.id===s);return r?r.full_name:"Not registered yet"},ne=()=>{C(!1)};return e.jsx(ve,{delayDuration:0,children:e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"fixed top-20 right-4 z-50 flex flex-col items-end space-y-2 lg:hidden",children:[e.jsx("button",{onClick:()=>b(!m),className:"bg-indigo-600 text-white p-2 rounded-lg shadow-lg",children:e.jsx(he,{className:"text-xl"})}),e.jsx(T,{placeholder:`Search ${n?"undergraduates":"postgraduates"}...`,onSearch:k,className:""})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 p-4 md:p-0 md:py-2 lg:p-0 lg:py-2",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{ref:v,className:`fixed lg:relative top-0 left-0 lg:block lg:w-full w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${m?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",e.jsx("button",{onClick:()=>b(!1),className:"text-gray-600 lg:hidden",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{label:n?"Preferred Research Area":"Field of Research",options:ee,selectedValues:x,setSelectedValues:D}),(c||n)&&e.jsx(w,{label:"Skills",options:Q,selectedValues:p,setSelectedValues:Y}),!q&&e.jsx(w,{label:"University",options:se,selectedValues:f,setSelectedValues:G}),!n&&e.jsxs("div",{children:[d==="availability_as_supervisor"?e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Available As Supervisor"}):e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Looking for a supervisor"}),e.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full pl-4",value:g,onChange:s=>{H(s.target.value),A(1)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]})]})]})}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsx("div",{className:"mb-6 hidden lg:block",children:e.jsx(T,{placeholder:`Search ${n?"undergraduates":"postgraduates"}...`,onSearch:k,className:""})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 px-0 md:px-6 lg:px-0",children:W?Array.from({length:9},(s,r)=>e.jsx("div",{className:"w-full",children:e.jsx(je,{})},r)):ae.map(s=>e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-[10px] font-semibold px-2.5 py-0.5 rounded-full",children:u.find(r=>r.id===s.university)?.short_name||"Not registered yet"}),!n&&e.jsx("div",{className:"relative"}),e.jsx("div",{className:"h-32",children:e.jsx("img",{src:s.background_image!==null?`/storage/${s.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Banner",className:"object-cover w-full h-full"})}),e.jsx("div",{className:"flex justify-center -mt-12",children:e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg",children:e.jsx("img",{src:s.profile_picture!==null?`/storage/${s.profile_picture}`:"/storage/profile_pictures/default.jpg",alt:"Profile",className:"w-full h-full object-cover"})}),s.verified===1&&e.jsxs("div",{className:"absolute bottom-0 right-0 p-1 rounded-full group cursor-pointer",children:[e.jsx("div",{className:"flex items-center justify-center w-7 h-7 bg-blue-500 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"absolute bottom-8 right-0 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-3 py-2 shadow-lg z-10 w-48",children:["This account is verified by ",ie(s.university)]})]})]})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("h2",{className:"text-lg font-semibold truncate px-6",children:s.full_name}),e.jsx("p",{className:"text-gray-500 text-sm px-6",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"2.5rem"},children:Array.isArray(s.field_of_research)&&s.field_of_research.length>0?(()=>{const r=s.field_of_research[0],t=h.find(a=>`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`===r);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():Array.isArray(s.research_preference)&&s.research_preference.length>0?(()=>{const r=s.research_preference[0],t=h.find(a=>`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`===r);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():"No Field of Research or Preference"}),e.jsxs("div",{className:"mt-2 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>L(s),className:"bg-blue-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-blue-600",children:"Quick Info"}),e.jsx(M,{href:c&&!n?route("postgraduates.show",s.url):route("undergraduates.show",s.url),className:"bg-green-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-green-600",children:"Full Profile"})]})]}),e.jsxs("div",{className:"flex justify-around items-center mt-6 py-4 border-t px-10",children:[e.jsx(ge,{user:s.user}),e.jsxs(z,{children:[e.jsx(V,{asChild:!0,children:e.jsx(M,{href:route("email.compose",{to:E.find(r=>r.unique_id===(s.postgraduate_id||s.undergraduate_id))?.email}),className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",children:e.jsx(ue,{className:"text-lg"})})}),e.jsx(O,{children:e.jsx("p",{children:"Send Email"})})]}),e.jsxs(z,{children:[e.jsx(V,{asChild:!0,children:e.jsx("a",{href:s.linkedin||"#",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-blue-800",children:e.jsx(I,{className:"text-lg"})})}),e.jsx(O,{children:e.jsx("p",{children:"LinkedIn"})})]}),e.jsx(fe,{bookmarkableType:n?"undergraduate":c?"postgraduate":"academician",bookmarkableId:s.id,category:n?"Undergraduates":c?"Postgraduates":"Academicians",iconSize:"text-lg",tooltipPosition:"top"})]})]},s.id))}),e.jsx("div",{className:"mt-6",children:e.jsx(pe,{currentPage:j,totalPages:te,onPageChange:le})})]})]}),J&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>_(!1),children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg relative max-h-[80vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[K?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading profile information..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 ",children:l.full_name}),e.jsx("hr",{className:"border-t border-gray-800 mb-4"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Short Bio"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:l.bio||"Not Provided"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:c&&!n?"Field of Research":"Research Interest"}),e.jsx("div",{className:"",children:(()=>{let s=[];if(c&&!n?s=l.field_of_research||[]:s=l.research_preference||[],Array.isArray(s)&&s.length>0){const r=s[0],t=h.find(a=>`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`===r);if(t)return e.jsxs("p",{className:"text-gray-600",children:[t.field_of_research_name," - ",t.research_area_name," - ",t.niche_domain_name]})}return e.jsx("p",{className:"text-gray-600",children:"Not Provided"})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Skills"}),Array.isArray(l.skills)&&l.skills.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx(be,{skills:l.skills,className:"",textClass:"text-sm font-medium text-gray-700"}),e.jsx(_e,{skills:l.skills,maxSkills:5,onViewAll:()=>F(!0),showViewAllButton:l.skills.length>5})]}):e.jsx("p",{className:"text-gray-600",children:"No skills listed"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Connect via"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("a",{href:l.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-lg hover:text-blue-800",title:"LinkedIn",children:e.jsx(I,{})})})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>_(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})}),Z&&$&&e.jsx(xe,{academician:$,onClose:()=>C(!1),onSuccess:ne}),R&&l&&e.jsx(ye,{isOpen:R,onClose:()=>F(!1),skills:l.skills||[],profileName:l.full_name})]})})};export{is as default};
