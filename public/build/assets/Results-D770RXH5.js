import{j as e,R as T,r as o,b as M,a as $,Y as ne,y as z}from"./app-Dyc2YSa7.js";import{z as L}from"./transition-DXBASaqI.js";import{y as F}from"./dialog-haDdWfH4.js";import{G as Z}from"./graduation-cap-Cl6IOeeC.js";import{M as ie}from"./map-pin-CifKsbfd.js";import{C as le}from"./clock-D51tpS3a.js";import{U as D}from"./users-CAiLhpJO.js";import{D as oe}from"./dollar-sign-D2KnTWhd.js";import{S as ee}from"./sparkles-D1Sf2ezX.js";import{H as R}from"./heart-Bkn0I3Jy.js";import{E}from"./external-link-D11kLOD6.js";import{M as ce}from"./MainLayout-BzvEeSqv.js";import{T as de,a as H,b as Q,c as G}from"./tooltip-DpUoRlqm.js";import{B as W}from"./BookmarkHandler-DYB8AXoa.js";import{C as te}from"./circle-check-SbfhXHPb.js";import{B as me}from"./book-open-ietLbANk.js";import{F as xe}from"./folder-kanban-B9x8dhJX.js";import{U as I}from"./user-plus-Bra8bLqs.js";import{M as K}from"./mail-DQ2QLjVc.js";import{V as he}from"./index-Csod4yPu.js";import{S as Y}from"./search-BBtDGrRu.js";import{c as ue}from"./createLucideIcon-DgyMBRUj.js";import{A as J}from"./arrow-left-Cp3pqLK-.js";import"./house-BZy_iHHL.js";import"./zap-CUaOemyc.js";import"./folder-open-BE0jgFvV.js";import"./settings-B_7QdAfJ.js";import"./useRoles-CU-WmQgm.js";import"./chevron-left-iXqtKjXF.js";import"./proxy-DRaf4OF9.js";import"./user-round-BvPE_KKu.js";import"./clipboard-list-Bzh1snCE.js";import"./calendar-D4jGpTBE.js";import"./file-text-BrE0JVp-.js";import"./message-square-xskcnl5O.js";import"./building-0n5Eh2KL.js";import"./building-2-BhPbfFGB.js";import"./database-D9eubQHm.js";import"./shield-CET4uGJC.js";import"./analytics-BQ374C1C.js";import"./Modal-B-1y-mKR.js";import"./PrimaryButton-BNCcwIds.js";import"./SecondaryButton-Bmm2fMbJ.js";import"./x-DiT1Y4qL.js";import"./briefcase-CDiT_CZn.js";import"./user-DobLyCls.js";import"./index-D-0X1VHc.js";import"./index-CYrMXf2H.js";import"./index-Mz8iZoV8.js";import"./index-CFIxVmDG.js";import"./index-DGC_azny.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-Bby_8r0G.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],X=ue("Filter",pe);function se({isOpen:t,onClose:a,title:r="AI Insight",content:c=""}){return e.jsx(L.Root,{show:t,as:T.Fragment,children:e.jsxs(F,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(L.Child,{as:T.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/30"})}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(L.Child,{as:T.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:e.jsxs(F.Panel,{className:"w-full max-w-lg transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(F.Title,{className:"text-lg font-semibold text-gray-900 mb-2",children:r}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed text-sm",children:c}),e.jsx("div",{className:"mt-6 text-right",children:e.jsx("button",{onClick:a,className:"inline-flex items-center px-4 py-2 text-sm rounded-md border border-gray-300 bg-white hover:bg-gray-50",children:"Close"})})]})})})})]})})}function fe({rec:t,onViewSupervisors:a}){var x,j,s,l;const r=t.postgraduate_program;if(!r)return null;const c=r.name||"Postgraduate Program",h=((x=r.university)==null?void 0:x.name)||((j=r.university)==null?void 0:j.full_name)||((s=r.university)==null?void 0:s.short_name)||"Unknown University",d=((l=r.faculty)==null?void 0:l.name)||"",b=typeof t.match_score=="number"?Math.round(t.match_score*100):null,y=b!==null?`${b}%`:"-",[k,u]=o.useState(!1),m=t.justification||"",p=r.duration_years||"",i=r.funding_info||"",w=r.country||"";return e.jsxs("div",{className:"border rounded-xl p-5 bg-white flex flex-col h-full shadow-sm transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-50 border border-blue-200 flex items-center justify-center flex-shrink-0",children:e.jsx(Z,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",title:c,children:c}),e.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:e.jsx("span",{className:"truncate",title:d?`${d}, ${h}`:h,children:d?`${d}`:""})})]})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-green-50 border border-green-200 text-green-700 text-xs font-semibold text-right",children:[y," ",e.jsx("span",{className:"font-normal text-[11px] text-green-700",children:"Match"})]})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-x-4 gap-y-2 text-sm text-gray-700",children:[h&&e.jsxs("div",{className:"col-span-2 flex items-center",children:[e.jsx(ie,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsxs("span",{children:[h,", ",w]})]}),p&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsxs("span",{children:[p," years"]})]}),typeof r.supervisors_count=="number"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsxs("span",{children:[r.supervisors_count," Supervisors"]})]}),i&&e.jsxs("div",{className:"col-span-2 flex items-center text-green-600",children:[e.jsx(oe,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-green-700",children:i})]})]}),m&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-800 font-semibold",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"AI Insight"})]}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsx("p",{className:"leading-relaxed line-clamp-3",children:m})}),m.length>200&&e.jsx("button",{onClick:()=>u(!0),className:"mt-2 text-xs text-blue-700 hover:underline",children:"Show More…"}),e.jsx(se,{isOpen:k,onClose:()=>u(!1),title:"AI Insight",content:m})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>a(r),className:"inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:[e.jsx(D,{className:"w-4 h-4 mr-2"})," View Supervisors"]}),e.jsxs("button",{className:"px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50 flex items-center",children:[e.jsx(R,{className:"w-4 h-4 mr-2"})," Save"]}),r.application_url&&e.jsxs("a",{href:r.application_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border rounded text-sm hover:bg-gray-50",children:[e.jsx(E,{className:"w-4 h-4 mr-2"})," Program Details"]})]})]})}function ge({supervisor:t}){var V,q;if(!t)return null;console.log(t);const a=t.name||"Supervisor",r=t.department||"",c=typeof t.match_score=="number"?Math.round(t.match_score*100):null,h=t.accepting_students!==!1,d=Array.isArray(t.research_areas)?t.research_areas:[],b=t.publications_count??0,y=t.post_projects_count??0,[k,u]=o.useState(!1),m=t.justification||"",p=t.academician||{},i=p.user||t.user||null,[w,x]=o.useState(!1),[j,s]=o.useState(((V=i==null?void 0:i.connection_status_with_auth_user)==null?void 0:V.status)||"not_connected"),[l,v]=o.useState(((q=i==null?void 0:i.connection_status_with_auth_user)==null?void 0:q.connection_id)||null),[f,N]=o.useState(!0),[A,_]=o.useState(!1),C="academician",g=p.id||t.academician_id||t.id;o.useEffect(()=>{let n=!0;async function B(){try{const P=await W.checkBookmarkStatus(C,g);n&&_(!!P.is_bookmarked)}catch{}finally{n&&N(!1)}}return g?B():N(!1),()=>{n=!1}},[g]);const S=async()=>{if(i!=null&&i.id){x(!0);try{const n=await $.post(route("api.app.connections.store",i.id));n.data&&n.data.connection&&(s("pending_sent"),v(n.data.connection.id))}catch(n){console.error("Error sending connection request:",n)}finally{x(!1)}}},re=async()=>{if(l){x(!0);try{await $.patch(route("api.app.connections.accept",l)),s("connected")}catch(n){console.error("Error accepting connection request:",n)}finally{x(!1)}}},ae=async()=>{if(!(!g||f)){N(!0);try{const n=await W.toggleBookmark(C,g,"Academicians");_(!!n.is_bookmarked)}catch(n){console.error("Error toggling bookmark:",n)}finally{N(!1)}}},O=p.url||t.url||null,U=(t==null?void 0:t.email)||"";return e.jsx(de,{delayDuration:0,children:e.jsxs("div",{className:"border rounded-xl p-5 bg-white shadow-sm transition-all duration-200 ease-in-out hover:shadow-lg hover:ring-2 hover:ring-indigo-200 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 border border-indigo-200 flex items-center justify-center",children:e.jsx("img",{src:t.avatar_url!==null?`/storage/${t.avatar_url}`:"/storage/profile_pictures/default.jpg",alt:a,className:"w-full h-full object-cover rounded-full"})}),e.jsx("div",{className:"min-w-0",children:e.jsxs("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:[a,r&&e.jsx("p",{className:"text-sm text-gray-600 truncate font-normal",children:r})]})})]}),e.jsx("div",{className:"flex flex-col items-end space-y-1 flex-shrink-0",children:c!==null&&e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-green-50 border border-green-200 text-green-700 text-xs font-semibold",children:[c,"% ",e.jsx("span",{className:"font-normal text-[11px]",children:"Match"})]})})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm text-gray-600",children:[h&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 text-green-700",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Accepting Students"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1.5 text-gray-400"}),e.jsxs("span",{children:[b," Publications"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"w-4 h-4 mr-1.5 text-gray-400"}),e.jsxs("span",{children:[y," Projects"]})]})]}),d.length>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium",children:"Research Areas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((n,B)=>e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:n},B))})]}),m&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-800 font-semibold",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"AI Insight"})]}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsx("p",{className:"leading-relaxed line-clamp-3",children:m})}),m.length>200&&e.jsx("button",{onClick:()=>u(!0),className:"mt-2 text-xs text-blue-700 hover:underline",children:"Show More…"}),e.jsx(se,{isOpen:k,onClose:()=>u(!1),title:"AI Insight",content:m})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 pt-4 border-t",children:[(()=>{if(w)return e.jsx("button",{className:"inline-flex items-center justify-center px-4 py-2 bg-gray-400 text-white rounded-md text-sm font-medium flex-1",disabled:!0,children:"Processing..."});switch(j){case"connected":return e.jsxs("button",{className:"inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium flex-1",disabled:!0,children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Connected"]});case"pending_sent":return e.jsxs("button",{className:"inline-flex items-center justify-center px-4 py-2 bg-gray-400 text-white rounded-md text-sm font-medium flex-1",disabled:!0,children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Pending"]});case"pending_received":return e.jsxs("button",{onClick:re,className:"inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 flex-1",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Accept"]});case"not_connected":default:return e.jsxs("button",{onClick:S,className:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 flex-1",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Connect"]})}})(),O?e.jsxs(M,{href:route("academicians.show",O),className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 flex-1",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"View Profile"]}):e.jsxs("button",{className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-400 bg-white flex-1",disabled:!0,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"View Profile"]}),e.jsxs(H,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs("button",{onClick:ae,className:"inline-flex items-center justify-center h-9 w-9 border border-gray-300 rounded-md text-gray-600 bg-white hover:bg-gray-50",disabled:f,children:[e.jsx("span",{className:"sr-only",children:"Save"}),A?e.jsx(R,{className:"w-4 h-4 fill-red-500 text-red-500"}):e.jsx(R,{className:"w-4 h-4"})]})}),e.jsx(G,{children:e.jsx("p",{children:"Save"})})]}),e.jsxs(H,{children:[e.jsx(Q,{asChild:!0,children:U?e.jsxs(M,{href:route("email.compose",{to:U}),className:"inline-flex items-center justify-center h-9 w-9 border border-gray-300 rounded-md text-gray-600 bg-white hover:bg-gray-50",children:[e.jsx("span",{className:"sr-only",children:"Contact"}),e.jsx(K,{className:"w-4 h-4"})]}):e.jsxs("button",{className:"inline-flex items-center justify-center h-9 w-9 border border-gray-300 rounded-md text-gray-300 bg-white",disabled:!0,children:[e.jsx("span",{className:"sr-only",children:"Contact"}),e.jsx(K,{className:"w-4 h-4"})]})}),e.jsx(G,{children:e.jsx("p",{children:"Contact"})})]})]})]})})}function bt({recommendations:t=[],selectedProgram:a=null,supervisors:r=[]}){var x,j;const[c,h]=o.useState(""),[d,b]=o.useState(""),[y,k]=o.useState("match_score_desc"),u=a?"Available Supervisors":"Postgraduate Program Recommendations",m=s=>{if(!(s!=null&&s.id))return he.error("Program not found");z.get(route("postgraduate-recommendations.supervisors",s.id))},p=()=>{z.get(route("postgraduate-recommendations.results"))},i=o.useMemo(()=>{let s=Array.isArray(t)?t.slice():[];if(c){const l=c.toLowerCase();s=s.filter(v=>{var g,S;const f=v.postgraduate_program;if(!f)return!1;const N=(f.name||"").toLowerCase().includes(l),A=(((g=f.university)==null?void 0:g.name)||"").toLowerCase().includes(l),_=(((S=f.faculty)==null?void 0:S.name)||"").toLowerCase().includes(l),C=(f.country||"").toLowerCase().includes(l);return N||A||_||C})}return y==="match_score_desc"&&s.sort((l,v)=>(v.match_score||0)-(l.match_score||0)),s},[t,c,y]),w=o.useMemo(()=>{if(!d)return r;const s=d.toLowerCase();return r.filter(l=>(l.name||"").toLowerCase().includes(s))},[r,d]);return e.jsx(ce,{title:u,children:e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx(ne,{title:u}),a?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{className:"text-sm text-gray-600 hover:text-gray-900 flex items-center",onClick:p,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Back to All Programs"]}),e.jsx("div",{className:"mt-2 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{className:"flex flex-col ml-1",children:[e.jsx("h2",{className:"text-m font-normal text-blue-900",children:a==null?void 0:a.name}),e.jsxs("p",{className:"text-sm text-blue-600",children:[(x=a==null?void 0:a.faculty)==null?void 0:x.name,", ",(j=a==null?void 0:a.university)==null?void 0:j.full_name]})]})]})})]}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 w-full md:max-w-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 border border-gray-300 rounded-md px-3 bg-white",children:[e.jsx(Y,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:d,onChange:s=>b(s.target.value),placeholder:"Search supervisors...",className:"border border-white w-full text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none"})]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(X,{className:"w-4 h-4"}),"Filters"]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[w.map(s=>e.jsx(ge,{supervisor:s},s.id)),r.length===0&&e.jsx("div",{className:"text-center text-gray-600 py-10 col-span-2",children:"No supervisors found for this program."})]}),r.length>0&&e.jsxs("div",{className:"text-center mt-12 py-8 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Want to explore other programs? Check out our other recommendations."}),e.jsxs(M,{href:route("postgraduate-recommendations.results"),className:"inline-flex items-center px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Back to All Programs"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-start gap-3 bg-green-50 border border-green-200 text-green-900 px-4 py-3 rounded-md mb-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex flex-col ml-1 text-sm",children:[e.jsx("p",{className:"font-semibold",children:"Analysis Complete!"}),e.jsxs("p",{children:["We found ",i.length," highly compatible Postgraduate Programs based on your profile and research interests."]})]})]})}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 w-full md:max-w-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 border border-gray-300 rounded-md px-3 bg-white",children:[e.jsx(Y,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:c,onChange:s=>h(s.target.value),placeholder:"Search programs, universities, or research areas...",className:"border border-white w-full text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none"})]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(X,{className:"w-4 h-4"}),"Filters"]})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-5",children:i.map((s,l)=>e.jsx(fe,{rec:s,onViewSupervisors:()=>m(s.postgraduate_program)},l))}),e.jsxs("div",{className:"text-center mt-12 py-8 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Not seeing the perfect program? Try refining your search or contact our academic advisors."}),e.jsx(M,{href:route("postgraduate-recommendations.index"),className:"inline-flex items-center px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Refine Search Criteria"})]})]})]})})}export{bt as default};
