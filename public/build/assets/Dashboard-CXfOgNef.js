import{j as e,r as u}from"./app-OyJITDQ0.js";import{M as D}from"./MainLayout-CISuWve_.js";import{P as I}from"./ProfileCard-BRbwPFyb.js";import{u as _}from"./useRoles-CSvMmOe-.js";import{F as T}from"./index-BDflseub.js";import"./FilterDropdown-AM7PdNq8.js";import"./react-select.esm-DJemSLts.js";const C=()=>{const l=[{label:"Give Feedback",icon:e.jsx("img",{src:"/images/feedback.png",alt:"Feedback",style:{width:"30px",height:"30px"}}),link:"https://forms.gle/CQnJJxd8tfSrL2RE7"},{label:"Find Academician",icon:e.jsx("img",{src:"/images/academician.png",alt:"Academician",style:{width:"30px",height:"30px"}}),link:"/academicians"},{label:"Find Postgraduate",icon:e.jsx("img",{src:"/images/postgraduate.png",alt:"Postgraduate",style:{width:"30px",height:"30px"}}),link:"/postgraduates"},{label:"ChatGPT",icon:e.jsx("img",{src:"/images/chatgpt.png",alt:"ChatGPT",style:{width:"30px",height:"30px"}}),link:"https://chatgpt.com/"},{label:"Scispaces",icon:e.jsx("img",{src:"/images/scispaces.png",alt:"Scispaces",style:{width:"30px",height:"30px"}}),link:"https://typeset.io/"},{label:"Canva",icon:e.jsx("img",{src:"/images/canva.png",alt:"Canva",style:{width:"30px",height:"30px"}}),link:"https://www.canva.com/"},{label:"Mendeley",icon:e.jsx("img",{src:"/images/mendeley.png",alt:"Mendeley",style:{width:"30px",height:"30px"}}),link:"https://www.mendeley.com/"},{label:"Zotero",icon:e.jsx("img",{src:"/images/zotero.png",alt:"Zotero",style:{width:"30px",height:"30px"}}),link:"https://www.zotero.org/"},{label:"Scimago",icon:e.jsx("img",{src:"/images/scimago.png",alt:"Scimago",style:{width:"30px",height:"30px"}}),link:"https://www.scimagojr.com/"},{label:"Scopus",icon:e.jsx("img",{src:"/images/scopus.png",alt:"Scopus",style:{width:"30px",height:"30px"}}),link:"https://www.scopus.com/sources.uri?zone=TopNavBar&origin=searchbasic"}];return e.jsxs("div",{className:"mx-auto ",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 mt-4",children:"QuickLinks"}),e.jsx("div",{className:"flex flex-wrap justify-start gap-4",children:l.map((n,c)=>e.jsx("div",{className:"flex flex-col items-center justify-center bg-white shadow-md rounded-lg hover:bg-gray-100 transition p-4",style:{width:"137px",height:"137px"},children:n.link?e.jsxs("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2",children:n.icon}),e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:n.label})]}):e.jsxs("button",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2",children:n.icon}),e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:n.label})]})},c))})]})},E=({events:l=[]})=>{const[n,c]=u.useState(!1),[t,g]=u.useState(null),d=o=>{g(o),c(!0)},p=()=>{c(!1),g(null)},[r,b]=u.useState(1),m=5,i=Math.ceil(l.length/m),f=l.slice((r-1)*m,r*m),j=()=>{r>1&&b(r-1)},N=()=>{r<i&&b(r+1)};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 h-full",children:[e.jsx("h2",{className:"text-base font-bold mb-3",children:"Upcoming Events"}),e.jsx("ul",{className:"space-y-2",children:f.map((o,a)=>e.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-gray-50 shadow hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("img",{src:"https://flagcdn.com/w40/my.png",alt:"Malaysia Flag",className:"w-6 h-4 mt-1 ml-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 truncate pr-2 w-32",title:o.event_name,children:o.event_name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[o.start_date_time,"   ",o.location]})]})]}),e.jsx("button",{onClick:()=>d(o),className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-blue-700 text-xs",children:"→"})]},a))}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("button",{onClick:j,disabled:r===1,className:`px-3 py-1 text-xs font-medium rounded-lg ${r===1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Prev"}),e.jsxs("p",{className:"text-xs",children:["Page ",r," of ",i]}),e.jsx("button",{onClick:N,disabled:r===i,className:`px-3 py-1 text-xs font-medium rounded-lg ${r===i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Next"})]}),n&&t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:p,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 w-11/12 max-w-2xl relative overflow-y-auto max-h-[90vh]",onClick:o=>o.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-800 text-center",children:t.event_name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Description:"}),t.description?e.jsx("div",{className:"mt-1 text-sm",dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No description available."})]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Event type:"})," ",(()=>{switch(t.event_type){case"competition":return"Competition";case"conference":return"Conference";case"workshop":return"Workshop";case"seminar":return"Seminar";case"webinar":return"Webinar";default:return"Not provided"}})()]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Event Duration:"})," ",t.start_date_time?`${t.start_date_time} - ${t.end_date_time}`:"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Target Audience:"})," ",(()=>{try{const o=JSON.parse(t.target_audience);return Array.isArray(o)?o.join(", "):"Invalid format"}catch{return t.target_audience||"Not provided"}})()]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Organized by:"})," ",t.organized_by||"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Registration Link:"})," ",t.registration_url||"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Registration Deadline:"})," ",t.registration_deadline||"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Contact Email:"})," ",t.contact_email||"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Contact No.:"})," ",t.contact_number||"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",t.location||"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Fees:"})," ",t.fees||"Not provided"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",t.attachment?e.jsx("a",{href:`/storage/${t.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"}):"No attachment available."]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]})},P=({totalUsers:l})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Total Registered Users"}),e.jsx("p",{className:"text-3xl font-bold",children:l})]}),z=({onlineUsers:l})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Online Users"}),e.jsx("p",{className:"text-3xl font-bold",children:l})]}),R=({clicksByType:l})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Clicks by Type"}),["grant","event","project"].map(n=>{const c=l.filter(t=>t.entity_type===n);return c.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-bold text-gray-800 capitalize",children:n==="grant"?"Grant":n==="event"?"Event":"Project"}),e.jsx("ul",{className:"mt-2",children:c.map((t,g)=>e.jsxs("li",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:t.entity_name})," -"," ",e.jsxs("span",{className:"text-blue-500",children:[t.total_clicks," clicks"]})]},g))})]},n)})]}),k=({items:l=[],timer:n=7e3,renderItem:c,fadeDuration:t=300,className:g="",label:d})=>{const[p,r]=u.useState(0),[b,m]=u.useState(!0),i=u.useRef(null),f=u.useRef(null);u.useEffect(()=>{if(!l.length)return;const x=setInterval(()=>{m(!1),setTimeout(()=>{r(v=>(v+1)%l.length),m(!0)},t)},n);return()=>clearInterval(x)},[l,n,t]);const j=x=>{m(!1),setTimeout(()=>{r(x),m(!0)},t)},N=x=>{i.current=x},o=x=>{if(f.current=x,i.current===null||f.current===null)return;const v=i.current-f.current;v>50?(m(!1),setTimeout(()=>{r(w=>(w+1)%l.length),m(!0)},t)):v<-50&&(m(!1),setTimeout(()=>{r(w=>w===0?l.length-1:w-1),m(!0)},t)),i.current=null,f.current=null},a=x=>{N(x.touches[0].clientX)},h=x=>{},y=x=>{o(x.changedTouches[0].clientX)},s=x=>{N(x.clientX)},S=x=>{o(x.clientX)};return e.jsxs("div",{className:`relative h-full ${g}`,onTouchStart:a,onTouchMove:h,onTouchEnd:y,onTouchCancel:y,onMouseDown:s,onMouseUp:S,children:[d&&e.jsx("div",{className:"absolute top-2 right-3 bg-red-500 text-white px-2 py-1 text-xs font-bold rounded z-50",children:d}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`transform h-full transition-opacity duration-${t} ${b?"opacity-100":"opacity-0"}`,children:c(l[p],p)}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-2",children:l.map((x,v)=>e.jsx("button",{onClick:()=>j(v),className:`w-2 h-2 rounded-full ${v===p?"bg-indigo-500":"bg-gray-300"}`},v))})]})]})},$=({totalUsers:l,onlineUsers:n,clicksByType:c,posts:t,events:g,projects:d,grants:p,academicians:r,universities:b,faculties:m,users:i,researchOptions:f})=>{const{isAdmin:j,isFacultyAdmin:N}=_(),o=s=>e.jsxs("div",{className:"block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(s.featured_image?`/storage/${s.featured_image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white pr-10",children:[e.jsx("h2",{className:"text-4xl font-bold truncate",title:s.title,children:s.title||"Untitled Post"}),s.content&&e.jsx("div",{className:"text-sm line-clamp-2 mb-2",dangerouslySetInnerHTML:{__html:s.content}}),e.jsx("p",{className:"text-xs mt-1",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),a=s=>e.jsxs("div",{className:"block relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(s.image?`/storage/${s.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:s.event_name,children:s.event_name||"Untitled Event"}),e.jsx("p",{className:"text-xs",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),h=s=>e.jsxs("div",{className:"block relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(s.image?`/storage/${s.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:s.title,children:s.title||"Untitled Project"}),e.jsx("p",{className:"text-xs",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]}),y=s=>e.jsxs("div",{className:"relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(s.image?`/storage/${s.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:s.title,children:s.title||"Untitled Grant"}),e.jsx("p",{className:"text-xs",children:new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]});return e.jsxs("div",{className:"p-6 min-h-screen",children:[j&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(P,{totalUsers:l}),e.jsx(z,{onlineUsers:n}),e.jsx(R,{clicksByType:c})]}),N&&e.jsx(I,{profilesData:r,supervisorAvailabilityKey:"availability_as_supervisor",universitiesList:b,faculties:m,isPostgraduateList:!1,isFacultyAdminDashboard:!0,users:i,researchOptions:f}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-6 mb-[10rem] h-[300px]",children:[e.jsx("div",{className:"md:col-span-4 h-full",children:e.jsx(k,{items:t.slice(0,5),timer:7e3,fadeDuration:300,renderItem:o,label:"Post"})}),e.jsxs("div",{className:"md:col-span-3 h-full flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-1/2",children:[e.jsx(k,{items:g.slice(0,5),timer:8e3,fadeDuration:300,renderItem:a,label:"Event"}),e.jsx(k,{items:d.slice(0,5),timer:9e3,fadeDuration:300,renderItem:h,label:"Project"})]}),e.jsx("div",{className:"h-1/2",children:e.jsx(k,{items:p.slice(0,5),timer:1e4,fadeDuration:300,renderItem:y,label:"Grant"})})]}),e.jsx("div",{className:"md:col-span-3 h-full",children:e.jsx(E,{events:g})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(C,{})})]})},M=({events:l,users:n})=>{const[c,t]=u.useState(0),[g,d]=u.useState(!0),p=u.useRef(null),r=u.useRef(null),b=l.map(a=>{var y;const h=((y=n.find(s=>s.unique_id===a.author_id))==null?void 0:y.name)||"Unknown Author";return{id:a.id,url:a.image?`/storage/${a.image}`:"https://via.placeholder.com/800x600",title:a.event_name||"Untitled Event",author:h,theme:a.event_theme||"No Theme",isFresh:!0}}),i=Array.from(new Map(b.map(a=>[a.id+a.title,a])).values()).slice(0,7);u.useEffect(()=>{const a=setInterval(()=>{d(!1),setTimeout(()=>{t(h=>(h+1)%i.length),d(!0)},300)},7e3);return()=>clearInterval(a)},[i.length]);const f=a=>{d(!1),setTimeout(()=>{t(a),d(!0)},300)},j=a=>{p.current=a.touches[0].clientX},N=a=>{r.current=a.changedTouches[0].clientX,o()},o=()=>{const a=p.current-r.current;a>50?(d(!1),setTimeout(()=>{t(h=>(h+1)%i.length),d(!0)},300)):a<-50&&(d(!1),setTimeout(()=>{t(h=>h===0?i.length-1:h-1),d(!0)},300))};return e.jsx("div",{className:"w-screen h-screen bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"bg-white text-gray-800 rounded-xl shadow-lg overflow-hidden relative flex flex-col",style:{width:"414px",height:"736px",maxWidth:"100%",maxHeight:"100%"},children:e.jsxs("div",{className:"bg-white w-full px-5 pt-6 pb-20 overflow-y-auto h-full",onTouchStart:j,onTouchEnd:N,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Today"}),e.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:new Date().toDateString()})]}),e.jsxs("div",{className:"mb-5 relative",children:[i.length>0&&e.jsxs("a",{href:"#",className:`block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden ${g?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${encodeURI(i[c].url)})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),i[c].isFresh&&e.jsxs("div",{className:"absolute top-3 right-3 bg-red-600 text-white text-xs px-3 py-1 rounded-full flex items-center",children:[e.jsx(T,{className:"mr-1 text-sm"})," Event"]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"h-48"}),e.jsx("h2",{className:"text-white text-2xl font-bold leading-tight mb-3 pr-5",style:{textShadow:"2px 2px 4px rgba(0, 0, 0, 0.7)"},children:i[c].title}),e.jsx("div",{className:"flex w-full items-center text-sm text-gray-300 font-medium",children:e.jsx("div",{className:"flex-1 flex items-center"})})]})]}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-2",children:i.map((a,h)=>e.jsx("button",{onClick:()=>f(h),className:`w-2 h-2 rounded-full ${h===c?"bg-indigo-500":"bg-gray-300"}`},h))})]})]})})})},U=()=>{const[l,n]=u.useState(!1);return u.useEffect(()=>{const c=()=>{n(window.innerWidth>=1024)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),l},W=({totalUsers:l,onlineUsers:n,clicksByType:c,events:t,posts:g,projects:d,grants:p,academicians:r,universities:b,faculties:m,users:i,researchOptions:f})=>{_();const j=U();return e.jsx(D,{title:"Dashboard",children:j?e.jsx($,{totalUsers:l,onlineUsers:n,clicksByType:c,events:t,posts:g,projects:d,grants:p,academicians:r,universities:b,faculties:m,users:i,researchOptions:f}):e.jsx(M,{events:t,users:i})})};export{W as default};
