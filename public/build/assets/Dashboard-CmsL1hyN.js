import{j as e,r as d}from"./app-BefuRNO7.js";import{M as A}from"./MainLayout-B4BnU3Na.js";import{P as F}from"./ProfileCard-Caj3mx19.js";import{u as L}from"./useRoles-M7rYvnZb.js";import{F as M}from"./index-CJl2ymm2.js";import"./FilterDropdown-DCC1vnUg.js";import"./react-select.esm-Dyo60qZg.js";const G=()=>{const c=[{label:"Give Feedback",icon:e.jsx("img",{src:"/images/feedback.png",alt:"Feedback",style:{width:"30px",height:"30px"}}),link:"https://forms.gle/CQnJJxd8tfSrL2RE7"},{label:"Find Academician",icon:e.jsx("img",{src:"/images/academician.png",alt:"Academician",style:{width:"30px",height:"30px"}}),link:"/academicians"},{label:"Find Postgraduate",icon:e.jsx("img",{src:"/images/postgraduate.png",alt:"Postgraduate",style:{width:"30px",height:"30px"}}),link:"/postgraduates"},{label:"ChatGPT",icon:e.jsx("img",{src:"/images/chatgpt.png",alt:"ChatGPT",style:{width:"30px",height:"30px"}}),link:"https://chatgpt.com/"},{label:"Scispaces",icon:e.jsx("img",{src:"/images/scispaces.png",alt:"Scispaces",style:{width:"30px",height:"30px"}}),link:"https://typeset.io/"},{label:"Canva",icon:e.jsx("img",{src:"/images/canva.png",alt:"Canva",style:{width:"30px",height:"30px"}}),link:"https://www.canva.com/"},{label:"Mendeley",icon:e.jsx("img",{src:"/images/mendeley.png",alt:"Mendeley",style:{width:"30px",height:"30px"}}),link:"https://www.mendeley.com/"},{label:"Zotero",icon:e.jsx("img",{src:"/images/zotero.png",alt:"Zotero",style:{width:"30px",height:"30px"}}),link:"https://www.zotero.org/"},{label:"Scimago",icon:e.jsx("img",{src:"/images/scimago.png",alt:"Scimago",style:{width:"30px",height:"30px"}}),link:"https://www.scimagojr.com/"},{label:"Scopus",icon:e.jsx("img",{src:"/images/scopus.png",alt:"Scopus",style:{width:"30px",height:"30px"}}),link:"https://www.scopus.com/sources.uri?zone=TopNavBar&origin=searchbasic"}];return e.jsxs("div",{className:"mx-auto ",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 mt-4",children:"QuickLinks"}),e.jsx("div",{className:"flex flex-wrap justify-start gap-4",children:c.map((l,n)=>e.jsx("div",{className:"flex flex-col items-center justify-center bg-white shadow-md rounded-lg hover:bg-gray-100 transition p-4",style:{width:"137px",height:"137px"},children:l.link?e.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2",children:l.icon}),e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:l.label})]}):e.jsxs("button",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-2",children:l.icon}),e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:l.label})]})},n))})]})},O=({events:c=[]})=>{const[l,n]=d.useState(!1),[t,g]=d.useState(null),x=m=>{g(m),n(!0)},b=()=>{n(!1),g(null)},[o,N]=d.useState(1),y=5,i=Math.ceil(c.length/y),w=c.slice((o-1)*y,o*y),k=()=>{o>1&&N(o-1)},I=()=>{o<i&&N(o+1)};return e.jsxs("div",{className:"col-span-2 md:col-span-1 bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Upcoming Events"}),e.jsx("ul",{className:"space-y-4",children:w.map((m,s)=>e.jsxs("li",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 shadow hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:"https://flagcdn.com/w40/my.png",alt:"Malaysia Flag",className:"w-8 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 truncate w-40 md:w-48",title:m.event_name,children:m.event_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[m.start_date_time,"   ",m.location]})]})]}),e.jsx("button",{onClick:()=>x(m),className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-blue-700",children:"→"})]},s))}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("button",{onClick:k,disabled:o===1,className:`px-4 py-2 text-sm font-medium rounded-lg ${o===1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Prev"}),e.jsxs("p",{className:"text-sm",children:["Page ",o," of ",i]}),e.jsx("button",{onClick:I,disabled:o===i,className:`px-4 py-2 text-sm font-medium rounded-lg ${o===i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Next"})]}),l&&t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:b,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-4xl relative overflow-y-auto max-h-[90vh]",onClick:m=>m.stopPropagation(),children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-800 text-center",children:t.event_name}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Description:"}),t.description?e.jsx("div",{className:"mt-2 text-sm",dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No description available."})]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Event type:"})," ",(()=>{switch(t.event_type){case"competition":return"Competition";case"conference":return"Conference";case"workshop":return"Workshop";case"seminar":return"Seminar";case"webinar":return"Webinar";default:return"Not provided"}})()]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Event Duration:"})," ",t.start_date_time?`${t.start_date_time} - ${t.end_date_time}`:"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Target Audience:"})," ",(()=>{try{const m=JSON.parse(t.target_audience);return Array.isArray(m)?m.join(", "):"Invalid format"}catch{return t.target_audience||"Not provided"}})()]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Organized by:"})," ",t.organized_by||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Registration Link:"})," ",t.registration_url||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Registration Deadline:"})," ",t.registration_deadline||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Contact Email:"})," ",t.contact_email||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Contact No.:"})," ",t.contact_number||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Location:"})," ",t.location||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Fees:"})," ",t.fees||"Not provided"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",t.attachment?e.jsx("a",{href:`/storage/${t.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"}):"No attachment available."]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:b,className:"px-6 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]})},W=({totalUsers:c})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Total Registered Users"}),e.jsx("p",{className:"text-3xl font-bold",children:c})]}),q=({onlineUsers:c})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Online Users"}),e.jsx("p",{className:"text-3xl font-bold",children:c})]}),Q=({clicksByType:c})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Clicks by Type"}),["grant","event","project"].map(l=>{const n=c.filter(t=>t.entity_type===l);return n.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-md font-bold text-gray-800 capitalize",children:l==="grant"?"Grant":l==="event"?"Event":"Project"}),e.jsx("ul",{className:"mt-2",children:n.map((t,g)=>e.jsxs("li",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:t.entity_name})," -"," ",e.jsxs("span",{className:"text-blue-500",children:[t.total_clicks," clicks"]})]},g))})]},l)})]}),H=({totalUsers:c,onlineUsers:l,clicksByType:n,posts:t,events:g,projects:x,grants:b,academicians:o,universities:N,faculties:y,users:i,researchOptions:w})=>{const{isAdmin:k,isPostgraduate:I,isUndergraduate:m,isFacultyAdmin:s,isAcademician:h}=L(),[u,D]=d.useState(0),p=t.slice(0,5),$=r=>D(r);d.useEffect(()=>{const r=setInterval(()=>{D(a=>(a+1)%p.length)},7e3);return()=>clearInterval(r)},[p.length]);const[_,P]=d.useState(0),f=g.slice(0,5),z=r=>P(r);d.useEffect(()=>{const r=setInterval(()=>{P(a=>(a+1)%f.length)},7e3);return()=>clearInterval(r)},[f.length]);const[S,E]=d.useState(0),j=x.slice(0,5),T=r=>E(r);d.useEffect(()=>{const r=setInterval(()=>{E(a=>(a+1)%j.length)},7e3);return()=>clearInterval(r)},[j.length]);const[C,U]=d.useState(0),v=b.slice(0,5),R=r=>U(r);return d.useEffect(()=>{const r=setInterval(()=>{U(a=>(a+1)%v.length)},7e3);return()=>clearInterval(r)},[v.length]),e.jsxs("div",{className:"p-6 min-h-screen",children:[k&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(W,{totalUsers:c}),e.jsx(q,{onlineUsers:l}),e.jsx(Q,{clicksByType:n})]}),s&&e.jsx(F,{profilesData:o,supervisorAvailabilityKey:"availability_as_supervisor",universitiesList:N,faculties:y,isPostgraduateList:!1,isFacultyAdminDashboard:!0,users:i,researchOptions:w}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-6 mb-[17rem] h-[300px]",children:[e.jsx("div",{className:"relative md:col-span-4 h-full",children:p.length>0&&e.jsxs("div",{className:"block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(p[u].featured_image?`/storage/${p[u].featured_image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white pr-10",children:[e.jsx("h2",{className:"text-4xl font-bold truncate",title:p[u].title,children:p[u].title||"Untitled Post"}),p[u].content&&e.jsx("div",{className:"text-sm line-clamp-2 mb-2",dangerouslySetInnerHTML:{__html:p[u].content}}),e.jsx("p",{className:"text-xs mt-1",children:new Date(p[u].created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-2",children:p.map((r,a)=>e.jsx("button",{onClick:()=>$(a),className:`w-2 h-2 rounded-full ${a===u?"bg-indigo-500":"bg-gray-300"}`},a))})]})}),e.jsxs("div",{className:"md:col-span-3 h-full flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-1/2",children:[e.jsx("div",{className:"relative h-full",children:f.length>0&&e.jsxs("div",{className:"block relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(f[_].image?`/storage/${f[_].image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:f[_].event_name,children:f[_].event_name||"Untitled Event"}),e.jsx("p",{className:"text-xs",children:new Date(f[_].created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-1",children:f.map((r,a)=>e.jsx("button",{onClick:()=>z(a),className:`w-2 h-2 rounded-full ${a===_?"bg-indigo-500":"bg-gray-300"}`},a))})]})}),e.jsx("div",{className:"relative h-full",children:j.length>0&&e.jsxs("div",{className:"block relative p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-full flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(j[S].image?`/storage/${j[S].image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:j[S].title,children:j[S].title||"Untitled Project"}),e.jsx("p",{className:"text-xs",children:new Date(j[S].created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-1",children:j.map((r,a)=>e.jsx("button",{onClick:()=>T(a),className:`w-2 h-2 rounded-full ${a===S?"bg-indigo-500":"bg-gray-300"}`},a))})]})})]}),e.jsx("div",{className:"h-1/2",children:v.length>0&&e.jsxs("div",{className:"relative h-full p-3 transform transition-opacity duration-500 rounded-2xl overflow-hidden flex flex-col justify-end",style:{backgroundImage:`url(${encodeURI(v[C].image?`/storage/${v[C].image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("h3",{className:"text-lg font-bold truncate",title:v[C].title,children:v[C].title||"Untitled Grant"}),e.jsx("p",{className:"text-xs",children:new Date(v[C].created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-1",children:v.map((r,a)=>e.jsx("button",{onClick:()=>R(a),className:`w-2 h-2 rounded-full ${a===C?"bg-indigo-500":"bg-gray-300"}`},a))})]})})]}),e.jsx("div",{className:"md:col-span-3 h-full",children:e.jsx(O,{events:g})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(G,{})})]})},J=({events:c,users:l})=>{const[n,t]=d.useState(0),[g,x]=d.useState(!0),b=d.useRef(null),o=d.useRef(null),N=c.map(s=>{var u;const h=((u=l.find(D=>D.unique_id===s.author_id))==null?void 0:u.name)||"Unknown Author";return{id:s.id,url:s.image?`/storage/${s.image}`:"https://via.placeholder.com/800x600",title:s.event_name||"Untitled Event",author:h,theme:s.event_theme||"No Theme",isFresh:!0}}),i=Array.from(new Map(N.map(s=>[s.id+s.title,s])).values()).slice(0,7);d.useEffect(()=>{const s=setInterval(()=>{x(!1),setTimeout(()=>{t(h=>(h+1)%i.length),x(!0)},300)},7e3);return()=>clearInterval(s)},[i.length]);const w=s=>{x(!1),setTimeout(()=>{t(s),x(!0)},300)},k=s=>{b.current=s.touches[0].clientX},I=s=>{o.current=s.changedTouches[0].clientX,m()},m=()=>{const s=b.current-o.current;s>50?(x(!1),setTimeout(()=>{t(h=>(h+1)%i.length),x(!0)},300)):s<-50&&(x(!1),setTimeout(()=>{t(h=>h===0?i.length-1:h-1),x(!0)},300))};return e.jsx("div",{className:"w-screen h-screen bg-gray-200 flex items-center justify-center",children:e.jsx("div",{className:"bg-white text-gray-800 rounded-xl shadow-lg overflow-hidden relative flex flex-col",style:{width:"414px",height:"736px",maxWidth:"100%",maxHeight:"100%"},children:e.jsxs("div",{className:"bg-white w-full px-5 pt-6 pb-20 overflow-y-auto h-full",onTouchStart:k,onTouchEnd:I,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Today"}),e.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:new Date().toDateString()})]}),e.jsxs("div",{className:"mb-5 relative",children:[i.length>0&&e.jsxs("a",{href:"#",className:`block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden ${g?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${encodeURI(i[n].url)})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),i[n].isFresh&&e.jsxs("div",{className:"absolute top-3 right-3 bg-red-600 text-white text-xs px-3 py-1 rounded-full flex items-center",children:[e.jsx(M,{className:"mr-1 text-sm"})," Event"]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"h-48"}),e.jsx("h2",{className:"text-white text-2xl font-bold leading-tight mb-3 pr-5",style:{textShadow:"2px 2px 4px rgba(0, 0, 0, 0.7)"},children:i[n].title}),e.jsx("div",{className:"flex w-full items-center text-sm text-gray-300 font-medium",children:e.jsx("div",{className:"flex-1 flex items-center"})})]})]}),e.jsx("div",{className:"absolute bottom-2 right-2 flex space-x-2",children:i.map((s,h)=>e.jsx("button",{onClick:()=>w(h),className:`w-2 h-2 rounded-full ${h===n?"bg-indigo-500":"bg-gray-300"}`},h))})]})]})})})},B=()=>{const[c,l]=d.useState(!1);return d.useEffect(()=>{const n=()=>{l(window.innerWidth>=1024)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),c},se=({totalUsers:c,onlineUsers:l,clicksByType:n,events:t,posts:g,projects:x,grants:b,academicians:o,universities:N,faculties:y,users:i,researchOptions:w})=>{L();const k=B();return e.jsx(A,{title:"Dashboard",children:k?e.jsx(H,{totalUsers:c,onlineUsers:l,clicksByType:n,events:t,posts:g,projects:x,grants:b,academicians:o,universities:N,faculties:y,users:i,researchOptions:w}):e.jsx(J,{events:t,users:i})})};export{se as default};
