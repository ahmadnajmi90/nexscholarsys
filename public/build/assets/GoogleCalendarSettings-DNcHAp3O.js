import{r as o,j as e}from"./app-DycluJDi.js";import{u as M}from"./useGoogleCalendar-B8hZgA0d.js";import{c as $,a as z}from"./index-CQUljECt.js";import{u as S,P as k}from"./index-Cyyfgiou.js";import{u as D}from"./index-C_G9iF1W.js";import{u as H}from"./index-DbGR7Odn.js";import{u as F}from"./index-DygBQkXJ.js";import{c as w}from"./utils-D-KgF5mV.js";import{B as N}from"./button-DrpbBg5w.js";import{B as L}from"./badge-7bhQenKW.js";import{R as U,C as O,a as q}from"./index-CIQ4TiKC.js";import{C}from"./calendar-B99WzEhS.js";import{C as W}from"./check-B8VjmKe5.js";import{C as X}from"./chevron-up-Ba7z8PNf.js";import{C as Y}from"./chevron-down-CWxqwc3h.js";import{R as J}from"./refresh-cw-Cjnf1nEh.js";import{E as K}from"./external-link-C7oBCvIe.js";import{f as Q}from"./format-Dv9Rm441.js";import"./index-CRoFkAwq.js";import"./logError-D4ezqrCx.js";import"./index-CGrAONsN.js";import"./index-DhTYVmtt.js";import"./createLucideIcon-D0KJwFBT.js";import"./en-US-DNUEYIb-.js";var j="Switch",[V,Be]=$(j),[Z,ee]=V(j),E=o.forwardRef((a,s)=>{const{__scopeSwitch:t,name:c,checked:r,defaultChecked:u,required:l,disabled:d,value:m="on",onCheckedChange:f,form:n,...p}=a,[h,x]=o.useState(null),g=S(s,y=>x(y)),i=o.useRef(!1),v=h?n||!!h.closest("form"):!0,[b,G]=D({prop:r,defaultProp:u??!1,onChange:f,caller:j});return e.jsxs(Z,{scope:t,checked:b,disabled:d,children:[e.jsx(k.button,{type:"button",role:"switch","aria-checked":b,"aria-required":l,"data-state":T(b),"data-disabled":d?"":void 0,disabled:d,value:m,...p,ref:g,onClick:z(a.onClick,y=>{G(I=>!I),v&&(i.current=y.isPropagationStopped(),i.current||y.stopPropagation())})}),v&&e.jsx(B,{control:h,bubbles:!i.current,name:c,value:m,checked:b,required:l,disabled:d,form:n,style:{transform:"translateX(-100%)"}})]})});E.displayName=j;var P="SwitchThumb",R=o.forwardRef((a,s)=>{const{__scopeSwitch:t,...c}=a,r=ee(P,t);return e.jsx(k.span,{"data-state":T(r.checked),"data-disabled":r.disabled?"":void 0,...c,ref:s})});R.displayName=P;var se="SwitchBubbleInput",B=o.forwardRef(({__scopeSwitch:a,control:s,checked:t,bubbles:c=!0,...r},u)=>{const l=o.useRef(null),d=S(l,u),m=H(t),f=F(s);return o.useEffect(()=>{const n=l.current;if(!n)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(m!==t&&x){const g=new Event("click",{bubbles:c});x.call(n,t),n.dispatchEvent(g)}},[m,t,c]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:d,style:{...r.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});B.displayName=se;function T(a){return a?"checked":"unchecked"}var _=E,te=R;const A=o.forwardRef(({className:a,...s},t)=>e.jsx(_,{className:w("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:e.jsx(te,{className:w("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));A.displayName=_.displayName;const ae=U,re=O,ne=q;function Te({className:a=""}){const{isConnected:s,isEnabled:t,isLoading:c,tokenExpiresAt:r,connect:u,disconnect:l,syncFromGoogle:d}=M(),[m,f]=o.useState(!1),[n,p]=o.useState(!1),h=async i=>{i&&!s?await u():!i&&s&&confirm("Are you sure you want to disconnect Google Calendar?")&&await l()},x=async()=>{p(!0);try{await d()}finally{p(!1)}},g=i=>{if(!i)return"N/A";try{return Q(new Date(i),"PPp")}catch{return"Invalid date"}};return e.jsxs("div",{className:`space-y-6 ${a}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg flex-shrink-0",children:e.jsx(C,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Google Calendar Sync"}),s&&e.jsxs(L,{variant:"success",className:"text-xs",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Connected"]})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Automatically sync your supervision meetings to Google Calendar"})]})]}),e.jsx(A,{checked:s,onCheckedChange:h,disabled:c,className:"flex-shrink-0 ml-4"})]}),s&&e.jsxs(ae,{open:m,onOpenChange:f,children:[e.jsx(re,{className:"flex items-center gap-1 text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors",children:m?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4"}),"Hide details"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4"}),"Show details"]})}),e.jsxs(ne,{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Active"})]}),r&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Token Expires"}),e.jsx("span",{className:"font-medium text-gray-900",children:g(r)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Sync Enabled"}),e.jsx("span",{className:"font-medium text-gray-900",children:t?"Yes":"No"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:x,disabled:n,className:"flex items-center gap-2",children:[e.jsx(J,{className:`w-4 h-4 ${n?"animate-spin":""}`}),n?"Syncing...":"Sync Now"]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to disconnect Google Calendar?")&&l()},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Disconnect"})]}),e.jsx("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded-md",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," When you schedule a meeting through the supervision system, you'll be prompted to add it to your Google Calendar automatically."]})})]})]}),!s&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(C,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Connect Google Calendar"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"Meetings will be automatically added to your calendar when scheduled. Sync your supervision meetings seamlessly across all your devices."}),e.jsxs(N,{variant:"link",size:"sm",onClick:u,className:"mt-2 text-blue-600 hover:text-blue-700 p-0 h-auto font-medium flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),"Connect Now"]})]})]})})]})}export{Te as default};
