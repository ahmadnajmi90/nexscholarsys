import{d as Se,c as Ae,r as B,j as i,a as Ce}from"./app-iMgHp_eS.js";import{M as Te}from"./MainLayout-BZ9qQRI7.js";import{u as Re}from"./useRoles-B2_ZtqZN.js";import{F as Me}from"./FilterDropdown-Bz69Exch.js";import{f as De,W as Oe,X as Fe,C as we,Y as Ie,B as Le,R as qe,Z as $e}from"./index-B-2HQZRs.js";import"./house-BKiqbpiZ.js";import"./createLucideIcon-BXdi-pyk.js";import"./zap-nfA3yaWI.js";import"./users-B-SRuXWr.js";import"./folder-open-ChjFwgTU.js";import"./settings-C1-Fh3R5.js";import"./chevron-left-Doetd6kK.js";import"./proxy-C4MdbyQL.js";import"./user-round-4L2MoMDj.js";import"./clipboard-list-DdyUkn_-.js";import"./dollar-sign-B8d8tr0D.js";import"./calendar-D8qiMF9A.js";import"./file-text-C4_We7ct.js";import"./message-square-6J3gYpZ9.js";import"./graduation-cap-Cm3VtJAw.js";import"./building-1Tspi58Y.js";import"./Dropdown-CqwMmC7a.js";import"./transition-GCCCemnQ.js";import"./sparkles-DUShLJ3x.js";import"./bookmark-3wtOc-_d.js";import"./folder-kanban-Bflve8F-.js";import"./building-2-Dg3QJa8P.js";import"./database-D3pYEDtY.js";import"./shield-BiBcY61c.js";import"./index-BQ_UROI9.js";import"./analytics-BQ374C1C.js";import"./index---wvTow-.js";import"./iconBase-DNAnfLIv.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-CBfrqCZ4.js";import"./ThreadPane-CINILE3j.js";import"./Modal-CtrNcR4a.js";import"./dialog-tgbUGkxp.js";import"./index-CPRTWrZv.js";import"./scroll-area-Q_LSXepR.js";import"./index-CBiZf16v.js";import"./index-ZtdpDmOR.js";import"./index-DGrGDkv0.js";import"./index-BRZqG0or.js";import"./index-BdQq_4o_.js";import"./format-BOijCLBA.js";import"./en-US-DIdCsyf3.js";import"./button-Ct11kXcH.js";import"./download-DxUHOtTV.js";import"./x-ZEpUl_jb.js";import"./isSameDay-BHs4V-zU.js";import"./constructNow-6bIQB1GK.js";import"./addDays-KHeCUDUr.js";import"./PrimaryButton-DP4M3mkB.js";import"./SecondaryButton-BSeKTz41.js";import"./search-cbBBwD34.js";import"./circle-check-big-BORgBAPo.js";import"./chevron-right-I-HzKVbz.js";import"./tooltip-D0CFLqml.js";import"./index-B_K2CkPG.js";import"./index-CrTPggVb.js";import"./index-BFoK7Kyw.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-Bgv0hvvi.js";import"./index-BF2RFu8G.js";import"./index-BJzUWGlx.js";import"./index-Chjiymov.js";import"./dialog-CvesY_b2.js";import"./index-CUVil98b.js";import"./index-TSyOZiO6.js";import"./briefcase-DV5twO-B.js";import"./user-DVj4gD4f.js";import"./react-select.esm-6ABf47Ml.js";var xe={exports:{}},We=xe.exports,_e;function Ve(){return _e||(_e=1,(function(he,je){(function(de,ge){he.exports=ge(Se(),Ae())})(typeof self<"u"?self:We,(function(de,ge){return(function(){var J={328:function(y,d,m){Object.defineProperty(d,"__esModule",{value:!0}),d.PrintContextConsumer=d.PrintContext=void 0;var v=m(496),E=Object.prototype.hasOwnProperty.call(v,"createContext");d.PrintContext=E?v.createContext({}):null,d.PrintContextConsumer=d.PrintContext?d.PrintContext.Consumer:function(){return null}},428:function(y,d,m){Object.defineProperty(d,"__esModule",{value:!0}),d.ReactToPrint=void 0;var v=m(316),E=m(496),$=m(190),F=m(328),U=m(940),I=(function(q){function A(){var s=q.apply(this,v.__spreadArray([],v.__read(arguments),!1))||this;return s.startPrint=function(p){var h=s.props,w=h.onAfterPrint,C=h.onPrintError,k=h.print,j=h.documentTitle;setTimeout((function(){var L,T;if(p.contentWindow)if(p.contentWindow.focus(),k)k(p).then((function(){return w?.()})).then((function(){return s.handleRemoveIframe()})).catch((function(G){C?C("print",G):s.logMessages(["An error was thrown by the specified `print` function"])}));else{if(p.contentWindow.print){var W=(T=(L=p.contentDocument)===null||L===void 0?void 0:L.title)!==null&&T!==void 0?T:"",_=p.ownerDocument.title;j&&(p.ownerDocument.title=j,p.contentDocument&&(p.contentDocument.title=j)),p.contentWindow.print(),j&&(p.ownerDocument.title=_,p.contentDocument&&(p.contentDocument.title=W))}else s.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);w?.(),s.handleRemoveIframe()}else s.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])}),500)},s.triggerPrint=function(p){var h=s.props,w=h.onBeforePrint,C=h.onPrintError;if(w){var k=w();k&&typeof k.then=="function"?k.then((function(){s.startPrint(p)})).catch((function(j){C&&C("onBeforePrint",j)})):s.startPrint(p)}else s.startPrint(p)},s.handlePrint=function(p){var h=s.props,w=h.bodyClass,C=h.content,k=h.copyStyles,j=h.fonts,L=h.pageStyle,T=h.nonce,W=typeof p=="function"?p():null;if(W&&typeof C=="function"&&s.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),W||typeof C!="function"||(W=C()),W!==void 0)if(W!==null){var _=document.createElement("iframe");_.width="".concat(document.documentElement.clientWidth,"px"),_.height="".concat(document.documentElement.clientHeight,"px"),_.style.position="absolute",_.style.top="-".concat(document.documentElement.clientHeight+100,"px"),_.style.left="-".concat(document.documentElement.clientWidth+100,"px"),_.id="printWindow",_.srcdoc="<!DOCTYPE html>";var G=(0,$.findDOMNode)(W);if(G){var M=G.cloneNode(!0),H=M instanceof Text,ae=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ne=H?[]:M.querySelectorAll("img"),oe=H?[]:M.querySelectorAll("video"),pe=j?j.length:0;s.numResourcesToLoad=ae.length+ne.length+oe.length+pe,s.resourcesLoaded=[],s.resourcesErrored=[];var a=function(f,S){s.resourcesLoaded.includes(f)?s.logMessages(["Tried to mark a resource that has already been handled",f],"debug"):(S?(s.logMessages(v.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],v.__read(S),!1)),s.resourcesErrored.push(f)):s.resourcesLoaded.push(f),s.resourcesLoaded.length+s.resourcesErrored.length===s.numResourcesToLoad&&s.triggerPrint(_))};_.onload=function(){var f,S,R,Q;_.onload=null;var P=_.contentDocument||((S=_.contentWindow)===null||S===void 0?void 0:S.document);if(P){P.body.appendChild(M),j&&(!((R=_.contentDocument)===null||R===void 0)&&R.fonts&&(!((Q=_.contentWindow)===null||Q===void 0)&&Q.FontFace)?j.forEach((function(K){var b=new FontFace(K.family,K.source,{weight:K.weight,style:K.style});_.contentDocument.fonts.add(b),b.loaded.then((function(){a(b)})).catch((function(N){a(b,["Failed loading the font:",b,"Load error:",N])}))})):(j.forEach((function(K){return a(K)})),s.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var fe=typeof L=="function"?L():L;if(typeof fe!="string")s.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof fe,'". Styles from `pageStyle` will not be applied.')]);else{var ue=P.createElement("style");T&&(ue.setAttribute("nonce",T),P.head.setAttribute("nonce",T)),ue.appendChild(P.createTextNode(fe)),P.head.appendChild(ue)}if(w&&(f=P.body.classList).add.apply(f,v.__spreadArray([],v.__read(w.split(" ")),!1)),!H){for(var e=H?[]:G.querySelectorAll("canvas"),t=P.querySelectorAll("canvas"),r=0;r<e.length;++r){var n=e[r],o=t[r].getContext("2d");o&&o.drawImage(n,0,0)}var u=function(K){var b=ne[K],N=b.getAttribute("src");if(N){var Z=new Image;Z.onload=function(){return a(b)},Z.onerror=function(le,me,ye,te,V){return a(b,["Error loading <img>",b,"Error",V])},Z.src=N}else a(b,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',b])};for(r=0;r<ne.length;r++)u(r);var l=function(K){var b=oe[K];b.preload="auto";var N=b.getAttribute("poster");if(N){var Z=new Image;Z.onload=function(){return a(b)},Z.onerror=function(le,me,ye,te,V){return a(b,["Error loading video poster",N,"for video",b,"Error:",V])},Z.src=N}else b.readyState>=2?a(b):(b.onloadeddata=function(){return a(b)},b.onerror=function(le,me,ye,te,V){return a(b,["Error loading video",b,"Error",V])},b.onstalled=function(){return a(b,["Loading video stalled, skipping",b])})};for(r=0;r<oe.length;r++)l(r);var g="input",D=G.querySelectorAll(g),O=P.querySelectorAll(g);for(r=0;r<D.length;r++)O[r].value=D[r].value;var c="input[type=checkbox],input[type=radio]",x=G.querySelectorAll(c),Y=P.querySelectorAll(c);for(r=0;r<x.length;r++)Y[r].checked=x[r].checked;var X="select",ee=G.querySelectorAll(X),ie=P.querySelectorAll(X);for(r=0;r<ee.length;r++)ie[r].value=ee[r].value}if(k)for(var re=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),se=function(K,b){var N=re[K];if(N.tagName.toLowerCase()==="style"){var Z=P.createElement(N.tagName),le=N.sheet;if(le){var me="";try{for(var ye=le.cssRules.length,te=0;te<ye;++te)typeof le.cssRules[te].cssText=="string"&&(me+="".concat(le.cssRules[te].cssText,`\r
`))}catch{s.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",N],"warning")}Z.setAttribute("id","react-to-print-".concat(K)),T&&Z.setAttribute("nonce",T),Z.appendChild(P.createTextNode(me)),P.head.appendChild(Z)}}else if(N.getAttribute("href"))if(N.hasAttribute("disabled"))s.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",N],"warning"),a(N);else{for(var V=P.createElement(N.tagName),Ne=(te=0,N.attributes.length);te<Ne;++te){var ve=N.attributes[te];ve&&V.setAttribute(ve.nodeName,ve.nodeValue||"")}V.onload=function(){return a(V)},V.onerror=function(Ee,ze,Ue,Ge,ke){return a(V,["Failed to load",V,"Error:",ke])},T&&V.setAttribute("nonce",T),P.head.appendChild(V)}else s.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",N],"warning"),a(N)},Pe=(r=0,re.length);r<Pe;++r)se(r)}s.numResourcesToLoad!==0&&k||s.triggerPrint(_)},s.handleRemoveIframe(!0),document.body.appendChild(_)}else s.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else s.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else s.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},s.handleRemoveIframe=function(p){var h=s.props.removeAfterPrint;if(p||h){var w=document.getElementById("printWindow");w&&document.body.removeChild(w)}},s.logMessages=function(p,h){h===void 0&&(h="error"),s.props.suppressErrors||(h==="error"?console.error(p):h==="warning"?console.warn(p):h==="debug"&&console.debug(p))},s}return v.__extends(A,q),A.prototype.handleClick=function(s,p){var h=this,w=this.props,C=w.onBeforeGetContent,k=w.onPrintError;if(C){var j=C();j&&typeof j.then=="function"?j.then((function(){return h.handlePrint(p)})).catch((function(L){k&&k("onBeforeGetContent",L)})):this.handlePrint(p)}else this.handlePrint(p)},A.prototype.render=function(){var s=this.props,p=s.children,h=s.trigger;if(h)return E.cloneElement(h(),{onClick:this.handleClick.bind(this)});if(!F.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var w={handlePrint:this.handleClick.bind(this)};return E.createElement(F.PrintContext.Provider,{value:w},p)},A.defaultProps=U.defaultProps,A})(E.Component);d.ReactToPrint=I},940:function(y,d){Object.defineProperty(d,"__esModule",{value:!0}),d.defaultProps=void 0,d.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(y,d,m){Object.defineProperty(d,"__esModule",{value:!0}),d.useReactToPrint=void 0;var v=m(316),E=m(496),$=m(428),F=m(940),U=m(860),I=Object.prototype.hasOwnProperty.call(E,"useMemo")&&Object.prototype.hasOwnProperty.call(E,"useCallback");d.useReactToPrint=function(q){if(!I)return q.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var A=E.useMemo((function(){return new $.ReactToPrint(v.__assign(v.__assign({},F.defaultProps),q))}),[q]);return E.useCallback((function(s,p){return(0,U.wrapCallbackWithArgs)(A,A.handleClick,p)(s)}),[A])}},860:function(y,d,m){Object.defineProperty(d,"__esModule",{value:!0}),d.wrapCallbackWithArgs=void 0;var v=m(316);d.wrapCallbackWithArgs=function(E,$){for(var F=[],U=2;U<arguments.length;U++)F[U-2]=arguments[U];return function(){for(var I=[],q=0;q<arguments.length;q++)I[q]=arguments[q];return $.apply(E,v.__spreadArray(v.__spreadArray([],v.__read(I),!1),v.__read(F),!1))}}},496:function(y){y.exports=de},190:function(y){y.exports=ge},316:function(y,d,m){m.r(d),m.d(d,{__addDisposableResource:function(){return P},__assign:function(){return $},__asyncDelegator:function(){return ae},__asyncGenerator:function(){return H},__asyncValues:function(){return ne},__await:function(){return M},__awaiter:function(){return w},__classPrivateFieldGet:function(){return S},__classPrivateFieldIn:function(){return Q},__classPrivateFieldSet:function(){return R},__createBinding:function(){return k},__decorate:function(){return U},__disposeResources:function(){return ue},__esDecorate:function(){return q},__exportStar:function(){return j},__extends:function(){return E},__generator:function(){return C},__importDefault:function(){return f},__importStar:function(){return a},__makeTemplateObject:function(){return oe},__metadata:function(){return h},__param:function(){return I},__propKey:function(){return s},__read:function(){return T},__rest:function(){return F},__runInitializers:function(){return A},__setFunctionName:function(){return p},__spread:function(){return W},__spreadArray:function(){return G},__spreadArrays:function(){return _},__values:function(){return L}});var v=function(e,t){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},v(e,t)};function E(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}v(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var $=function(){return $=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$.apply(this,arguments)};function F(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function U(e,t,r,n){var o,u=arguments.length,l=u<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,r,n);else for(var g=e.length-1;g>=0;g--)(o=e[g])&&(l=(u<3?o(l):u>3?o(t,r,l):o(t,r))||l);return u>3&&l&&Object.defineProperty(t,r,l),l}function I(e,t){return function(r,n){t(r,n,e)}}function q(e,t,r,n,o,u){function l(se){if(se!==void 0&&typeof se!="function")throw new TypeError("Function expected");return se}for(var g,D=n.kind,O=D==="getter"?"get":D==="setter"?"set":"value",c=!t&&e?n.static?e:e.prototype:null,x=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),Y=!1,X=r.length-1;X>=0;X--){var ee={};for(var ie in n)ee[ie]=ie==="access"?{}:n[ie];for(var ie in n.access)ee.access[ie]=n.access[ie];ee.addInitializer=function(se){if(Y)throw new TypeError("Cannot add initializers after decoration has completed");u.push(l(se||null))};var re=(0,r[X])(D==="accessor"?{get:x.get,set:x.set}:x[O],ee);if(D==="accessor"){if(re===void 0)continue;if(re===null||typeof re!="object")throw new TypeError("Object expected");(g=l(re.get))&&(x.get=g),(g=l(re.set))&&(x.set=g),(g=l(re.init))&&o.unshift(g)}else(g=l(re))&&(D==="field"?o.unshift(g):x[O]=g)}c&&Object.defineProperty(c,n.name,x),Y=!0}function A(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function s(e){return typeof e=="symbol"?e:"".concat(e)}function p(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function h(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function w(e,t,r,n){return new(r||(r=Promise))((function(o,u){function l(O){try{D(n.next(O))}catch(c){u(c)}}function g(O){try{D(n.throw(O))}catch(c){u(c)}}function D(O){var c;O.done?o(O.value):(c=O.value,c instanceof r?c:new r((function(x){x(c)}))).then(l,g)}D((n=n.apply(e,t||[])).next())}))}function C(e,t){var r,n,o,u,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function g(D){return function(O){return(function(c){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,c[0]&&(l=0)),l;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,n=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||c[0]!==6&&c[0]!==2)){l=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){l.label=c[1];break}if(c[0]===6&&l.label<o[1]){l.label=o[1],o=c;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(c);break}o[2]&&l.ops.pop(),l.trys.pop();continue}c=t.call(e,l)}catch(x){c=[6,x],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}})([D,O])}}}var k=Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function j(e,t){for(var r in e)r==="default"||Object.prototype.hasOwnProperty.call(t,r)||k(t,e,r)}function L(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n,o,u=r.call(e),l=[];try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)l.push(n.value)}catch(g){o={error:g}}finally{try{n&&!n.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}return l}function W(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(T(arguments[t]));return e}function _(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var u=arguments[t],l=0,g=u.length;l<g;l++,o++)n[o]=u[l];return n}function G(e,t,r){if(r||arguments.length===2)for(var n,o=0,u=t.length;o<u;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function M(e){return this instanceof M?(this.v=e,this):new M(e)}function H(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),u=[];return n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n;function l(x){o[x]&&(n[x]=function(Y){return new Promise((function(X,ee){u.push([x,Y,X,ee])>1||g(x,Y)}))})}function g(x,Y){try{(X=o[x](Y)).value instanceof M?Promise.resolve(X.value.v).then(D,O):c(u[0][2],X)}catch(ee){c(u[0][3],ee)}var X}function D(x){g("next",x)}function O(x){g("throw",x)}function c(x,Y){x(Y),u.shift(),u.length&&g(u[0][0],u[0][1])}}function ae(e){var t,r;return t={},n("next"),n("throw",(function(o){throw o})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,u){t[o]=e[o]?function(l){return(r=!r)?{value:M(e[o](l)),done:!1}:u?u(l):l}:u}}function ne(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=L(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(u){return new Promise((function(l,g){(function(D,O,c,x){Promise.resolve(x).then((function(Y){D({value:Y,done:c})}),O)})(l,g,(u=e[o](u)).done,u.value)}))}}}function oe(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var pe=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function a(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&k(t,e,r);return pe(t,e),t}function f(e){return e&&e.__esModule?e:{default:e}}function S(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function R(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function Q(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function P(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var fe=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function ue(e){function t(r){e.error=e.hasError?new fe(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}return(function r(){for(;e.stack.length;){var n=e.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,(function(u){return t(u),r()}))}catch(u){t(u)}}if(e.hasError)throw e.error})()}d.default={__extends:E,__assign:$,__rest:F,__decorate:U,__param:I,__metadata:h,__awaiter:w,__generator:C,__createBinding:k,__exportStar:j,__values:L,__read:T,__spread:W,__spreadArrays:_,__spreadArray:G,__await:M,__asyncGenerator:H,__asyncDelegator:ae,__asyncValues:ne,__makeTemplateObject:oe,__importStar:a,__importDefault:f,__classPrivateFieldGet:S,__classPrivateFieldSet:R,__classPrivateFieldIn:Q,__addDisposableResource:P,__disposeResources:ue}}},be={};function z(y){var d=be[y];if(d!==void 0)return d.exports;var m=be[y]={exports:{}};return J[y](m,m.exports,z),m.exports}z.d=function(y,d){for(var m in d)z.o(d,m)&&!z.o(y,m)&&Object.defineProperty(y,m,{enumerable:!0,get:d[m]})},z.o=function(y,d){return Object.prototype.hasOwnProperty.call(y,d)},z.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var ce={};return(function(){var y=ce;Object.defineProperty(y,"__esModule",{value:!0}),y.useReactToPrint=y.ReactToPrint=y.PrintContextConsumer=void 0;var d=z(328);Object.defineProperty(y,"PrintContextConsumer",{enumerable:!0,get:function(){return d.PrintContextConsumer}});var m=z(428);Object.defineProperty(y,"ReactToPrint",{enumerable:!0,get:function(){return m.ReactToPrint}});var v=z(892);Object.defineProperty(y,"useReactToPrint",{enumerable:!0,get:function(){return v.useReactToPrint}});var E=z(428);y.default=E.ReactToPrint})(),ce})()}))})(xe)),xe.exports}var Be=Ve();const pr=({academicians:he,faculties:je,researchOptions:de,universities:ge,faculty:J,users:be})=>{Re();const[z,ce]=B.useState(!1),[y,d]=B.useState({}),[m,v]=B.useState({excel:!1}),[E,$]=B.useState(!1),[F,U]=B.useState([]),[I,q]=B.useState("all"),[A,s]=B.useState(1),p=B.useRef(null),h=15,w=B.useRef(),C=B.useRef(null),[k,j]=B.useState(!1),[L,T]=B.useState(!1);B.useEffect(()=>{function a(f){C.current&&!C.current.contains(f.target)&&$(!1)}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),B.useEffect(()=>{function a(f){p.current&&!p.current.contains(f.target)&&window.innerWidth<1024&&ce(!1)}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const W=new Set;he.forEach(a=>{Array.isArray(a.research_expertise)&&a.research_expertise.forEach(f=>{W.add(f)})});const _=Array.from(W).map(a=>{const f=de.find(S=>`${S.field_of_research_id}-${S.research_area_id}-${S.niche_domain_id}`===a);return{value:a,label:f?`${f.field_of_research_name} - ${f.research_area_name} - ${f.niche_domain_name}`:`Unknown (${a})`}}),G=a=>{d(f=>({...f,[a]:!f[a]}))},M=he.filter(a=>{if(!a)return!1;let f=!0;F.length>0&&(f=Array.isArray(a.research_expertise)&&a.research_expertise.some(R=>F.includes(R)));const S=I==="all"||I==="verified"&&a.verified||I==="unverified"&&!a.verified;return f&&S}),H=Math.ceil(M.length/h),ae=M.slice((A-1)*h,A*h),ne=[];for(let a=1;a<=H;a++)ne.push(a);const oe=Be.useReactToPrint({content:()=>w.current,documentTitle:`${J?.name||"Faculty"} - Academicians Directory`,onBeforeGetContent:()=>{j(!0),T(!0);const a={};return M.forEach(f=>{a[f.id]=!0}),d(a),new Promise(f=>{setTimeout(()=>{f()},2e3)})},onPrintError:()=>{j(!1),T(!1),d({})},onAfterPrint:()=>{j(!1),T(!1),d({})},removeAfterPrint:!0,suppressErrors:!0}),pe=async()=>{v({...m,excel:!0});try{const a={researchAreas:F,verificationStatus:I,facultyId:J?.id},f=await Ce.post(route("faculty-admin.export.excel"),a,{responseType:"blob"}),S=window.URL.createObjectURL(new Blob([f.data])),R=document.createElement("a");R.href=S,R.setAttribute("download",`${J?.name||"Faculty"}_Academicians.xlsx`),document.body.appendChild(R),R.click(),document.body.removeChild(R)}catch(a){console.error("Error exporting to Excel:",a),alert("Failed to export to Excel. Please try again.")}finally{v({...m,excel:!1}),$(!1)}};return i.jsxs(Te,{title:"",children:[i.jsxs("div",{className:"relative bg-gray-200",children:[i.jsx("div",{className:"w-full h-48 overflow-hidden",children:i.jsx("img",{src:J?.university?.background_image?`/storage/${J.university.background_image}`:"/storage/university_background_images/default.jpg",alt:"Faculty Banner",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"absolute top-28 left-1/2 transform -translate-x-1/2 w-full max-w-4xl text-center",children:[i.jsx("div",{className:"inline-block w-24 h-24 rounded-full overflow-hidden border-4 border-white",children:i.jsx("img",{src:J?.university?.profile_picture?`/storage/${J.university.profile_picture}`:"/storage/university_profile_pictures/default.jpg",alt:"University Logo",className:"w-full h-full object-cover"})}),i.jsxs("h1",{className:"mt-6 text-xl md:text-2xl font-bold text-gray-800",children:[J?.name," - Academicians Directory"]})]})]}),i.jsxs("div",{className:"mt-28 px-4 lg:px-8 pb-12",children:[i.jsx("button",{onClick:()=>ce(!z),className:"fixed top-20 right-4 z-50 bg-blue-600 text-white p-2 rounded-full shadow-lg lg:hidden",children:i.jsx(De,{className:"text-xl"})}),i.jsx("div",{className:"mb-4 flex justify-end",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:oe,disabled:k,className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md flex items-center",title:"Print Directory",children:[k?i.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i.jsx(Oe,{className:"mr-2"}),"Print All Academicians (",M.length,")"]}),i.jsxs("div",{className:"relative",ref:C,children:[i.jsxs("button",{onClick:()=>$(!E),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md flex items-center",children:[i.jsx(Fe,{className:"mr-2"})," Export ",i.jsx(we,{className:"ml-2"})]}),E&&i.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:i.jsx("div",{className:"py-1",children:i.jsxs("button",{onClick:pe,disabled:m.excel,className:"w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100 flex items-center",children:[m.excel?i.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i.jsx(Ie,{className:"mr-2 text-green-600"}),"Export to Excel"]})})})]})]})}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[i.jsxs("div",{ref:p,className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-white shadow-md border-r p-5 transition-transform duration-300 z-50 overflow-y-auto ${z?"translate-x-0":"-translate-x-full"} lg:translate-x-0 rounded-lg`,children:[i.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",i.jsx("button",{onClick:()=>ce(!1),className:"text-gray-600 lg:hidden",children:"✕"})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsx(Me,{label:"Research Expertise",options:_,selectedValues:F,setSelectedValues:U}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Status"}),i.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full",value:I,onChange:a=>{q(a.target.value),s(1)},children:[i.jsx("option",{value:"all",children:"All"}),i.jsx("option",{value:"verified",children:"Verified"}),i.jsx("option",{value:"unverified",children:"Unverified"})]})]})]})]}),i.jsxs("div",{className:"lg:w-3/4",children:[i.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",id:"printRef",ref:w,children:[i.jsxs("div",{className:"hidden print:block print:mb-4 print:px-6 print:pt-6",children:[i.jsxs("h1",{className:"text-xl font-bold",children:[J?.name," - Academicians Directory"]}),i.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[i.jsxs("p",{children:["Generated on: ",new Date().toLocaleDateString()]}),I!=="all"&&i.jsxs("p",{children:["Filtered by status: ",I==="verified"?"Verified":"Unverified"]}),F.length>0&&i.jsxs("p",{children:["Filtered by research areas: ",F.length," area(s) selected"]}),i.jsxs("p",{children:["Total academicians: ",M.length]})]})]}),ae.length===0?i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"No academicians match your filter criteria."})}):i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academician"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department & Position"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Expertise"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(L||window.matchMedia("print").matches?M:ae).map(a=>{const f=y[a.id]||!1;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden border border-gray-200",children:i.jsx("img",{src:`/storage/${a.profile_picture||"profile_pictures/default.jpg"}`,alt:a.full_name,className:"h-full w-full object-cover"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("span",{className:"font-medium text-gray-900 print:text-black",children:a.full_name||"N/A"}),i.jsx("div",{className:"text-sm text-gray-500 print:text-black",children:a.user?.email||"N/A"})]})]})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm text-gray-900 print:text-black",children:a.department||"N/A"}),i.jsx("div",{className:"text-sm text-gray-500 print:text-black",children:a.current_position||"N/A"})]}),i.jsx("td",{className:"px-6 py-4",children:a.research_expertise&&a.research_expertise.length>0?i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm text-gray-900 font-medium print:text-black",children:[a.research_expertise.length," area",a.research_expertise.length!==1?"s":""]}),i.jsx("button",{onClick:()=>G(a.id),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center print:hidden",children:f?i.jsxs(i.Fragment,{children:["Hide ",i.jsx(Le,{className:"ml-1"})]}):i.jsxs(i.Fragment,{children:["Show ",i.jsx(we,{className:"ml-1"})]})})]}),(f||L||window.matchMedia("print").matches)&&i.jsx("div",{className:"mt-2",children:i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto print:max-h-none print:overflow-visible",children:a.research_expertise.map((S,R)=>{const Q=de.find(P=>`${P.field_of_research_id}-${P.research_area_id}-${P.niche_domain_id}`===S);return Q?i.jsxs("p",{className:"text-sm text-gray-700 print:text-black",children:[R+1,". ",Q.field_of_research_name," - ",Q.research_area_name," - ",Q.niche_domain_name]},R):i.jsxs("p",{className:"text-sm text-gray-700 print:text-black",children:[R+1,". Unknown expertise (ID: ",S,")"]},R)})})})]}):i.jsx("div",{className:"text-sm text-gray-500 print:text-black",children:"No research expertise specified"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.verified?i.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 print:bg-transparent print:border print:border-green-800",children:[i.jsx(qe,{className:"mr-1"})," Verified"]}):i.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 print:bg-transparent print:border print:border-red-800",children:[i.jsx($e,{className:"mr-1"})," Unverified"]})})]},a.id)})})]})]}),H>1&&i.jsx("div",{className:"flex justify-center mt-6 print:hidden",children:i.jsxs("nav",{className:"inline-flex rounded-md shadow",children:[i.jsxs("button",{onClick:()=>s(a=>Math.max(a-1,1)),disabled:A===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border ${A===1?"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:[i.jsx("span",{className:"sr-only",children:"Previous"}),"«"]}),ne.map(a=>i.jsx("button",{onClick:()=>s(a),className:`relative inline-flex items-center px-4 py-2 border ${A===a?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:a},a)),i.jsxs("button",{onClick:()=>s(a=>Math.min(a+1,H)),disabled:A===H,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border ${A===H?"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:[i.jsx("span",{className:"sr-only",children:"Next"}),"»"]})]})})]})]})]}),i.jsx("style",{type:"text/css",media:"print",children:`
                @page {
                    size: auto;
                    margin: 0.5cm;
                }
                @media print {
                    html, body {
                        height: auto !important;
                        overflow: auto !important;
                    }
                    body * {
                        visibility: hidden;
                    }
                    #printRef, #printRef * {
                        visibility: visible !important;
                    }
                    .print\\:hidden {
                        display: none !important;
                    }
                    .print\\:block {
                        display: block !important;
                    }
                    .print\\:max-h-none {
                        max-height: none !important;
                    }
                    .print\\:overflow-visible {
                        overflow: visible !important;
                    }
                    .print\\:bg-transparent {
                        background-color: transparent !important;
                    }
                    .print\\:border {
                        border-width: 1px !important;
                    }
                    .print\\:border-green-800 {
                        border-color: #166534 !important;
                    }
                    .print\\:border-red-800 {
                        border-color: #991b1b !important;
                    }
                    .print\\:text-black {
                        color: #000 !important;
                    }
                    #printRef {
                        position: static !important;
                        left: 0;
                        top: 0;
                        width: 100% !important;
                        height: auto !important;
                        margin: 0;
                        padding: 0;
                        break-inside: auto;
                    }
                    .overflow-y-auto {
                        overflow: visible !important;
                        max-height: none !important;
                    }
                    table {
                        width: 100% !important;
                        page-break-inside: auto;
                        border-collapse: collapse !important;
                    }
                    tr {
                        page-break-inside: avoid;
                        page-break-after: auto;
                    }
                    td, th {
                        page-break-inside: avoid;
                    }
                    thead {
                        display: table-header-group;
                    }
                    tfoot {
                        display: table-footer-group;
                    }
                }
                `})]})};export{pr as default};
