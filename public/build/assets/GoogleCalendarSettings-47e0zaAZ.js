import{r as n,j as e}from"./app-BodExSbw.js";import{u as M}from"./useGoogleCalendar-Dt-LBfk8.js";import{c as $,a as z}from"./index-BNbWxI0H.js";import{u as k,P as S}from"./index-CuEpCwL6.js";import{u as D}from"./index-D7Nzv7pr.js";import{u as H}from"./index-BU_vkww_.js";import{u as U}from"./index-BbHqW-rW.js";import{c as N}from"./utils-D-KgF5mV.js";import{B as w}from"./button-DBoeCbAi.js";import{B as F}from"./badge-DjhgJA26.js";import{R as L,C as O,a as q}from"./index-Be6JEAup.js";import{C as W}from"./circle-alert-CQJiC0Ry.js";import{C}from"./calendar-B_CZibmO.js";import{C as X}from"./check-CzANbjxc.js";import{C as Y}from"./chevron-up-D-sgdM5K.js";import{C as J}from"./chevron-down-nQDcq6tx.js";import{R as K}from"./refresh-cw-DnL56jq1.js";import{E as Q}from"./external-link-D_semteh.js";import{f as V}from"./format-Dv9Rm441.js";import"./index-mDeC9k3u.js";import"./logError-D4ezqrCx.js";import"./index-CGrAONsN.js";import"./index-BBnFLmbe.js";import"./createLucideIcon-plmRflaj.js";import"./en-US-DNUEYIb-.js";var v="Switch",[Z,Ge]=$(v),[ee,se]=Z(v),E=n.forwardRef((a,s)=>{const{__scopeSwitch:t,name:m,checked:r,defaultChecked:u,required:l,disabled:c,value:d="on",onCheckedChange:f,form:o,...p}=a,[x,h]=n.useState(null),g=k(s,y=>h(y)),i=n.useRef(!1),j=x?o||!!x.closest("form"):!0,[b,_]=D({prop:r,defaultProp:u??!1,onChange:f,caller:v});return e.jsxs(ee,{scope:t,checked:b,disabled:c,children:[e.jsx(S.button,{type:"button",role:"switch","aria-checked":b,"aria-required":l,"data-state":B(b),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:g,onClick:z(a.onClick,y=>{_(I=>!I),j&&(i.current=y.isPropagationStopped(),i.current||y.stopPropagation())})}),j&&e.jsx(T,{control:x,bubbles:!i.current,name:m,value:d,checked:b,required:l,disabled:c,form:o,style:{transform:"translateX(-100%)"}})]})});E.displayName=v;var P="SwitchThumb",R=n.forwardRef((a,s)=>{const{__scopeSwitch:t,...m}=a,r=se(P,t);return e.jsx(S.span,{"data-state":B(r.checked),"data-disabled":r.disabled?"":void 0,...m,ref:s})});R.displayName=P;var te="SwitchBubbleInput",T=n.forwardRef(({__scopeSwitch:a,control:s,checked:t,bubbles:m=!0,...r},u)=>{const l=n.useRef(null),c=k(l,u),d=H(t),f=U(s);return n.useEffect(()=>{const o=l.current;if(!o)return;const p=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==t&&h){const g=new Event("click",{bubbles:m});h.call(o,t),o.dispatchEvent(g)}},[d,t,m]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:c,style:{...r.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});T.displayName=te;function B(a){return a?"checked":"unchecked"}var G=E,ae=R;const A=n.forwardRef(({className:a,...s},t)=>e.jsx(G,{className:N("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:e.jsx(ae,{className:N("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));A.displayName=G.displayName;const re=L,ne=O,oe=q;function Ae({className:a=""}){const{isConnected:s,isEnabled:t,isLoading:m,tokenExpiresAt:r,connect:u,disconnect:l,syncFromGoogle:c}=M(),[d,f]=n.useState(!1),[o,p]=n.useState(!1),x=async i=>{i&&!s?await u():!i&&s&&confirm("Are you sure you want to disconnect Google Calendar?")&&await l()},h=async()=>{p(!0);try{await c()}finally{p(!1)}},g=i=>{if(!i)return"N/A";try{return V(new Date(i),"PPp")}catch{return"Invalid date"}};return e.jsxs("div",{className:`space-y-6 ${a}`,children:[e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Temporarily Unavailable"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Google Calendar integration is currently unavailable while we complete the Google verification process. This feature will be restored soon. Thank you for your patience."})]})]})}),e.jsxs("div",{className:"filter grayscale opacity-60 pointer-events-none select-none",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg flex-shrink-0",children:e.jsx(C,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Google Calendar Sync"}),s&&e.jsxs(F,{variant:"success",className:"text-xs",children:[e.jsx(X,{className:"w-3 h-3 mr-1"}),"Connected"]})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Automatically sync your supervision meetings to Google Calendar"})]})]}),e.jsx(A,{checked:s,onCheckedChange:x,disabled:!0,className:"flex-shrink-0 ml-4"})]}),s&&e.jsxs(re,{open:d,onOpenChange:f,children:[e.jsx(ne,{className:"flex items-center gap-1 text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4"}),"Hide details"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),"Show details"]})}),e.jsxs(oe,{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Active"})]}),r&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Token Expires"}),e.jsx("span",{className:"font-medium text-gray-900",children:g(r)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Sync Enabled"}),e.jsx("span",{className:"font-medium text-gray-900",children:t?"Yes":"No"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:h,disabled:!0,className:"flex items-center gap-2",children:[e.jsx(K,{className:`w-4 h-4 ${o?"animate-spin":""}`}),o?"Syncing...":"Sync Now"]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to disconnect Google Calendar?")&&l()},disabled:!0,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Disconnect"})]}),e.jsx("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded-md",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," When you schedule a meeting through the supervision system, you'll be prompted to add it to your Google Calendar automatically."]})})]})]}),!s&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(C,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Connect Google Calendar"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"Meetings will be automatically added to your calendar when scheduled. Sync your supervision meetings seamlessly across all your devices."}),e.jsxs(w,{variant:"link",size:"sm",onClick:u,disabled:!0,className:"mt-2 text-blue-600 hover:text-blue-700 p-0 h-auto font-medium flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),"Connect Now"]})]})]})})]})]})}export{Ae as default};
