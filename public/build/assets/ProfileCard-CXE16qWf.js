import{q as X,r as o,j as r,a as C}from"./app-DPqpbpqy.js";import{F as w}from"./FilterDropdown-CJ8c-hPc.js";import{j as Z,y as D,F as K,z as L,p as ee}from"./index-BfVygIXG.js";const re=d=>typeof d!="string"?"":d.replace(/\w\S*/g,x=>x.charAt(0).toUpperCase()+x.substr(1).toLowerCase()),ie=({profilesData:d,supervisorAvailabilityKey:x,universitiesList:f,faculties:se,isPostgraduateList:c,isUndergraduateList:i,isFacultyAdminDashboard:F,users:P,researchOptions:u})=>{const{skills:N}=X().props,R=new Set(d.flatMap(e=>Array.isArray(e.skills)?e.skills:[])),U=(Array.isArray(N)?N:[]).filter(e=>R.has(e.id)).map(e=>({value:e.id,label:re(e.name)})),[_,z]=o.useState([]),[g,I]=o.useState([]),[p,V]=o.useState(""),[b,q]=o.useState([]),[y,k]=o.useState(1),[S,A]=o.useState(!1),[E,m]=o.useState(!1),[h,M]=o.useState(null),v=9,O=e=>{M(e),m(!0)},B=Array.from(new Set(d.flatMap(e=>{const s=Array.isArray(e.field_of_research)?e.field_of_research:[],l=Array.isArray(e.research_expertise)?e.research_expertise:[],a=Array.isArray(e.research_preference)?e.research_preference:[];return[...s,...l,...a]}))).map(e=>{const s=u.find(l=>`${l.field_of_research_id}-${l.research_area_id}-${l.niche_domain_id}`===e);return{value:e,label:s?`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`:"Unknown Research Area"}}),W=Array.from(new Set(d.map(e=>e.university))).map(e=>{const s=f.find(l=>l.id===e);return{value:e?e.toString():"",label:s?s.short_name:"Unknown University"}}),G=e=>e===null?"0":e===!0||e==="1"||e===1?"1":e===!1||e==="0"||e===0?"0":"",$=d.filter(e=>{const s=e.university?e.university.toString():"",l=_.length===0||(e.field_of_research||e.research_expertise||e.research_preference||[]).some(j=>_.includes(j)),a=g.length===0||g.includes(s),t=G(e[x]),n=p===""||t===p,J=b.length===0||e.skills&&e.skills.some(j=>b.includes(j));return l&&a&&n&&J}),Q=Math.ceil($.length/v),T=$.slice((y-1)*v,y*v),H=e=>{k(e)},Y=e=>{const s=f.find(l=>l.id===e);return s?s.full_name:"Unknown University"};return r.jsxs("div",{className:"min-h-screen flex",children:[r.jsx("button",{onClick:()=>A(!S),className:"fixed top-20 right-4 z-50 bg-blue-600 text-white p-2 rounded-full shadow-lg lg:hidden",children:r.jsx(Z,{className:"text-xl"})}),r.jsxs("div",{className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${S?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[r.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",r.jsx("button",{onClick:()=>A(!1),className:"text-gray-600 lg:hidden",children:"âœ•"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(w,{label:i?"Preferred Research Area":"Field of Research",options:B,selectedValues:_,setSelectedValues:z}),(c||i)&&r.jsx(w,{label:"Skills",options:U,selectedValues:b,setSelectedValues:q}),!F&&r.jsx(w,{label:"University",options:W,selectedValues:g,setSelectedValues:I}),!i&&r.jsxs("div",{children:[x==="availability_as_supervisor"?r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Available As Supervisor"}):r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Looking for a supervisor"}),r.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full pl-4",value:p,onChange:e=>{V(e.target.value),k(1)},children:[r.jsx("option",{value:"",children:"All"}),r.jsx("option",{value:"1",children:"Yes"}),r.jsx("option",{value:"0",children:"No"})]})]})]})]}),r.jsxs("div",{className:"flex-1 py-6 sm:py-4 lg:py-0 px-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:[T.map(e=>{var s,l;return r.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden relative",children:[r.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-[10px] font-semibold px-2.5 py-0.5 rounded-full",children:((s=f.find(a=>a.id===e.university))==null?void 0:s.short_name)||"Unknown University"}),!i&&r.jsxs("div",{className:"relative group",children:[e.verified===1&&r.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-purple-100 px-2.5 py-0.5 text-[10px] text-purple-700 cursor-pointer",children:"Verified"}),e.verified!==1&&r.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-red-100 px-2.5 py-0.5 text-[10px] text-red-700 cursor-pointer",children:"Not Verified"}),r.jsx("div",{className:"absolute top-8 right-0 hidden group-hover:flex items-center bg-gray-800 text-white text-xs rounded px-3 py-2 shadow-lg z-10",children:e.verified===1?`This account is verified by ${Y(e.university)}`:"This account is not verified"})]}),r.jsx("div",{className:"h-32",children:r.jsx("img",{src:e.background_image!==null?`/storage/${e.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Banner",className:"object-cover w-full h-full"})}),r.jsx("div",{className:"flex justify-center -mt-12",children:r.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg",children:r.jsx("img",{src:e.profile_picture!==null?`/storage/${e.profile_picture}`:"/storage/profile_pictures/default.jpg",alt:"Profile",className:"w-full h-full object-cover"})})}),r.jsxs("div",{className:"text-center mt-4",children:[r.jsx("h2",{className:"text-lg font-semibold truncate px-6",children:e.full_name}),r.jsx("p",{className:"text-gray-500 text-sm px-6",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"2.5rem"},children:Array.isArray(e.field_of_research)&&e.field_of_research.length>0?(()=>{const a=e.field_of_research[0],t=u.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===a);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():Array.isArray(e.research_expertise)&&e.research_expertise.length>0?(()=>{const a=e.research_expertise[0],t=u.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===a);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():Array.isArray(e.research_preference)&&e.research_preference.length>0?(()=>{const a=e.research_preference[0],t=u.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===a);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():"No Field of Research or Expertise"}),!c&&!i&&r.jsx("p",{className:"text-gray-500 text-sm",children:e.current_position?e.current_position:"No Position"}),r.jsxs("div",{className:"mt-2 flex justify-center gap-2",children:[r.jsx("button",{onClick:()=>O(e),className:"bg-blue-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-blue-600",children:"Quick Info"}),r.jsx(C,{href:!c&&!i?route("academicians.show",e.url):c&&!i?route("postgraduates.show",e.url):route("undergraduates.show",e.url),className:"bg-green-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-green-600",children:"Full Profile"})]})]}),r.jsxs("div",{className:"flex justify-around items-center mt-6 py-4 border-t px-10",children:[r.jsx(C,{href:route("email.compose",{to:(l=P.find(a=>a.unique_id===(e.academician_id||e.postgraduate_id||e.undergraduate_id)))==null?void 0:l.email}),className:"text-gray-500 text-sm cursor-pointer hover:text-blue-700",title:"Send Email",children:r.jsx(D,{})}),r.jsx("a",{href:e.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-red-700",title:"Google Scholar",children:r.jsx(K,{})}),r.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-green-700",title:"Website",children:r.jsx(L,{})}),r.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-blue-800",title:"LinkedIn",children:r.jsx(ee,{})})]})]},e.id)}),E&&h&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>m(!1),children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg relative max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[r.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Close",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:h.full_name}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:!c&&!i?"Research Expertise":c&&!i?"Field of Research":"Research Preference"}),r.jsx("div",{className:"pl-4 space-y-1",children:(()=>{let e=[];return!c&&!i?e=h.research_expertise||[]:c&&!i?e=h.field_of_research||[]:e=h.research_preference||[],Array.isArray(e)&&e.length>0?e.map((s,l)=>{const a=u.find(t=>`${t.field_of_research_id}-${t.research_area_id}-${t.niche_domain_id}`===s);return a?r.jsxs("p",{className:"text-gray-600",children:[l+1,". ",a.field_of_research_name," - ",a.research_area_name," - ",a.niche_domain_name]},l):null}):r.jsx("p",{className:"text-gray-600",children:"Not Provided"})})()})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Bio"}),r.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:h.bio||"Not Provided"})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:()=>m(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]}),r.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:Q},(e,s)=>r.jsx("button",{onClick:()=>H(s+1),className:`px-4 py-2 border rounded ${y===s+1?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:s+1},s))})]})]})};export{ie as P};
