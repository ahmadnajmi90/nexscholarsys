import{r as q,c as ke,d as Se,j as i,b as Ae}from"./app-6Mso6ff_.js";import{M as Ce}from"./MainLayout-4fYXnZoe.js";import{u as Te}from"./useRoles-BuIfRyVG.js";import{F as Re}from"./FilterDropdown-BBgEe7Cq.js";import{f as Me,V as De,W as Oe,B as ve,X as Fe,A as Ie,Q as Le,Y as We}from"./index-C5PP5upB.js";import"./house-B15LOvm9.js";import"./createLucideIcon-0mxtiCN6.js";import"./zap-CnVwHcZE.js";import"./users-CAwImzrg.js";import"./folder-open-BbZM_Xie.js";import"./settings--fF7Ge9U.js";import"./chevron-left-BMlcFa6l.js";import"./proxy-DasNDpcU.js";import"./user-round-zvcOGfWw.js";import"./clipboard-list-OAYc26iA.js";import"./log-out-D4t8jcT1.js";import"./dollar-sign-yEzN8T9I.js";import"./calendar-MpX7vt8t.js";import"./file-text-4p0jMZFr.js";import"./message-square-CYAqAF0i.js";import"./graduation-cap-BjeniEXY.js";import"./building-RFbkpxq_.js";import"./sparkles-fdcrkbyY.js";import"./building-2-BhiadZtY.js";import"./database-lYXWceda.js";import"./shield-C5IcJsfY.js";import"./index-CDFW-3Qu.js";import"./Dropdown-CiACl8tz.js";import"./transition-Cs9j0aDD.js";import"./analytics-BQ374C1C.js";import"./index-BySJLeBq.js";import"./Modal-DCOzAzqi.js";import"./dialog-BkZUmbcV.js";import"./PrimaryButton-8JwdnwwH.js";import"./SecondaryButton-DEbD0QvM.js";import"./x-Dck1i2Bc.js";import"./briefcase-Ck858LSJ.js";import"./user-NAEjtq3S.js";import"./react-select.esm-DMppx0GZ.js";import"./floating-ui.dom-eiE65J5j.js";import"./iconBase-CMTnGGm1.js";var we={exports:{}};(function(me,_e){(function(pe,ge){me.exports=ge(q,ke)})(typeof self<"u"?self:Se,function(pe,ge){return function(){var _={328:function(g,d,f){Object.defineProperty(d,"__esModule",{value:!0}),d.PrintContextConsumer=d.PrintContext=void 0;var w=f(496),S=Object.prototype.hasOwnProperty.call(w,"createContext");d.PrintContext=S?w.createContext({}):null,d.PrintContextConsumer=d.PrintContext?d.PrintContext.Consumer:function(){return null}},428:function(g,d,f){Object.defineProperty(d,"__esModule",{value:!0}),d.ReactToPrint=void 0;var w=f(316),S=f(496),V=f(190),F=f(328),G=f(940),I=function($){function C(){var s=$.apply(this,w.__spreadArray([],w.__read(arguments),!1))||this;return s.startPrint=function(p){var h=s.props,j=h.onAfterPrint,T=h.onPrintError,A=h.print,N=h.documentTitle;setTimeout(function(){var W,R;if(p.contentWindow)if(p.contentWindow.focus(),A)A(p).then(function(){return j==null?void 0:j()}).then(function(){return s.handleRemoveIframe()}).catch(function(H){T?T("print",H):s.logMessages(["An error was thrown by the specified `print` function"])});else{if(p.contentWindow.print){var B=(R=(W=p.contentDocument)===null||W===void 0?void 0:W.title)!==null&&R!==void 0?R:"",P=p.ownerDocument.title;N&&(p.ownerDocument.title=N,p.contentDocument&&(p.contentDocument.title=N)),p.contentWindow.print(),N&&(p.ownerDocument.title=P,p.contentDocument&&(p.contentDocument.title=B))}else s.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);j==null||j(),s.handleRemoveIframe()}else s.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},s.triggerPrint=function(p){var h=s.props,j=h.onBeforePrint,T=h.onPrintError;if(j){var A=j();A&&typeof A.then=="function"?A.then(function(){s.startPrint(p)}).catch(function(N){T&&T("onBeforePrint",N)}):s.startPrint(p)}else s.startPrint(p)},s.handlePrint=function(p){var h=s.props,j=h.bodyClass,T=h.content,A=h.copyStyles,N=h.fonts,W=h.pageStyle,R=h.nonce,B=typeof p=="function"?p():null;if(B&&typeof T=="function"&&s.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),B||typeof T!="function"||(B=T()),B!==void 0)if(B!==null){var P=document.createElement("iframe");P.width="".concat(document.documentElement.clientWidth,"px"),P.height="".concat(document.documentElement.clientHeight,"px"),P.style.position="absolute",P.style.top="-".concat(document.documentElement.clientHeight+100,"px"),P.style.left="-".concat(document.documentElement.clientWidth+100,"px"),P.id="printWindow",P.srcdoc="<!DOCTYPE html>";var H=(0,V.findDOMNode)(B);if(H){var M=H.cloneNode(!0),Y=M instanceof Text,le=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ie=Y?[]:M.querySelectorAll("img"),ae=Y?[]:M.querySelectorAll("video"),fe=N?N.length:0;s.numResourcesToLoad=le.length+ie.length+ae.length+fe,s.resourcesLoaded=[],s.resourcesErrored=[];var E=function(K,a){s.resourcesLoaded.includes(K)?s.logMessages(["Tried to mark a resource that has already been handled",K],"debug"):(a?(s.logMessages(w.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],w.__read(a),!1)),s.resourcesErrored.push(K)):s.resourcesLoaded.push(K),s.resourcesLoaded.length+s.resourcesErrored.length===s.numResourcesToLoad&&s.triggerPrint(P))};P.onload=function(){var K,a,x,L;P.onload=null;var b=P.contentDocument||((a=P.contentWindow)===null||a===void 0?void 0:a.document);if(b){b.body.appendChild(M),N&&(!((x=P.contentDocument)===null||x===void 0)&&x.fonts&&(!((L=P.contentWindow)===null||L===void 0)&&L.FontFace)?N.forEach(function(X){var v=new FontFace(X.family,X.source,{weight:X.weight,style:X.style});P.contentDocument.fonts.add(v),v.loaded.then(function(){E(v)}).catch(function(k){E(v,["Failed loading the font:",v,"Load error:",k])})}):(N.forEach(function(X){return E(X)}),s.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var ne=typeof W=="function"?W():W;if(typeof ne!="string")s.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof ne,'". Styles from `pageStyle` will not be applied.')]);else{var ee=b.createElement("style");R&&(ee.setAttribute("nonce",R),b.head.setAttribute("nonce",R)),ee.appendChild(b.createTextNode(ne)),b.head.appendChild(ee)}if(j&&(K=b.body.classList).add.apply(K,w.__spreadArray([],w.__read(j.split(" ")),!1)),!Y){for(var e=Y?[]:H.querySelectorAll("canvas"),t=b.querySelectorAll("canvas"),r=0;r<e.length;++r){var n=e[r],o=t[r].getContext("2d");o&&o.drawImage(n,0,0)}var u=function(X){var v=ie[X],k=v.getAttribute("src");if(k){var Z=new Image;Z.onload=function(){return E(v)},Z.onerror=function(ue,he,xe,re,z){return E(v,["Error loading <img>",v,"Error",z])},Z.src=k}else E(v,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',v])};for(r=0;r<ie.length;r++)u(r);var l=function(X){var v=ae[X];v.preload="auto";var k=v.getAttribute("poster");if(k){var Z=new Image;Z.onload=function(){return E(v)},Z.onerror=function(ue,he,xe,re,z){return E(v,["Error loading video poster",k,"for video",v,"Error:",z])},Z.src=k}else v.readyState>=2?E(v):(v.onloadeddata=function(){return E(v)},v.onerror=function(ue,he,xe,re,z){return E(v,["Error loading video",v,"Error",z])},v.onstalled=function(){return E(v,["Loading video stalled, skipping",v])})};for(r=0;r<ae.length;r++)l(r);var m="input",D=H.querySelectorAll(m),O=b.querySelectorAll(m);for(r=0;r<D.length;r++)O[r].value=D[r].value;var c="input[type=checkbox],input[type=radio]",y=H.querySelectorAll(c),Q=b.querySelectorAll(c);for(r=0;r<y.length;r++)Q[r].checked=y[r].checked;var J="select",te=H.querySelectorAll(J),se=b.querySelectorAll(J);for(r=0;r<te.length;r++)se[r].value=te[r].value}if(A)for(var oe=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),ce=function(X,v){var k=oe[X];if(k.tagName.toLowerCase()==="style"){var Z=b.createElement(k.tagName),ue=k.sheet;if(ue){var he="";try{for(var xe=ue.cssRules.length,re=0;re<xe;++re)typeof ue.cssRules[re].cssText=="string"&&(he+="".concat(ue.cssRules[re].cssText,`\r
`))}catch{s.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",k],"warning")}Z.setAttribute("id","react-to-print-".concat(X)),R&&Z.setAttribute("nonce",R),Z.appendChild(b.createTextNode(he)),b.head.appendChild(Z)}}else if(k.getAttribute("href"))if(k.hasAttribute("disabled"))s.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",k],"warning"),E(k);else{for(var z=b.createElement(k.tagName),Pe=(re=0,k.attributes.length);re<Pe;++re){var ye=k.attributes[re];ye&&z.setAttribute(ye.nodeName,ye.nodeValue||"")}z.onload=function(){return E(z)},z.onerror=function(Ne,qe,Ve,Be,Ee){return E(z,["Failed to load",z,"Error:",Ee])},R&&z.setAttribute("nonce",R),b.head.appendChild(z)}else s.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",k],"warning"),E(k)},je=(r=0,oe.length);r<je;++r)ce(r)}s.numResourcesToLoad!==0&&A||s.triggerPrint(P)},s.handleRemoveIframe(!0),document.body.appendChild(P)}else s.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else s.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else s.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},s.handleRemoveIframe=function(p){var h=s.props.removeAfterPrint;if(p||h){var j=document.getElementById("printWindow");j&&document.body.removeChild(j)}},s.logMessages=function(p,h){h===void 0&&(h="error"),s.props.suppressErrors||(h==="error"?console.error(p):h==="warning"?console.warn(p):h==="debug"&&console.debug(p))},s}return w.__extends(C,$),C.prototype.handleClick=function(s,p){var h=this,j=this.props,T=j.onBeforeGetContent,A=j.onPrintError;if(T){var N=T();N&&typeof N.then=="function"?N.then(function(){return h.handlePrint(p)}).catch(function(W){A&&A("onBeforeGetContent",W)}):this.handlePrint(p)}else this.handlePrint(p)},C.prototype.render=function(){var s=this.props,p=s.children,h=s.trigger;if(h)return S.cloneElement(h(),{onClick:this.handleClick.bind(this)});if(!F.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var j={handlePrint:this.handleClick.bind(this)};return S.createElement(F.PrintContext.Provider,{value:j},p)},C.defaultProps=G.defaultProps,C}(S.Component);d.ReactToPrint=I},940:function(g,d){Object.defineProperty(d,"__esModule",{value:!0}),d.defaultProps=void 0,d.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(g,d,f){Object.defineProperty(d,"__esModule",{value:!0}),d.useReactToPrint=void 0;var w=f(316),S=f(496),V=f(428),F=f(940),G=f(860),I=Object.prototype.hasOwnProperty.call(S,"useMemo")&&Object.prototype.hasOwnProperty.call(S,"useCallback");d.useReactToPrint=function($){if(!I)return $.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var C=S.useMemo(function(){return new V.ReactToPrint(w.__assign(w.__assign({},F.defaultProps),$))},[$]);return S.useCallback(function(s,p){return(0,G.wrapCallbackWithArgs)(C,C.handleClick,p)(s)},[C])}},860:function(g,d,f){Object.defineProperty(d,"__esModule",{value:!0}),d.wrapCallbackWithArgs=void 0;var w=f(316);d.wrapCallbackWithArgs=function(S,V){for(var F=[],G=2;G<arguments.length;G++)F[G-2]=arguments[G];return function(){for(var I=[],$=0;$<arguments.length;$++)I[$]=arguments[$];return V.apply(S,w.__spreadArray(w.__spreadArray([],w.__read(I),!1),w.__read(F),!1))}}},496:function(g){g.exports=pe},190:function(g){g.exports=ge},316:function(g,d,f){f.r(d),f.d(d,{__addDisposableResource:function(){return b},__assign:function(){return V},__asyncDelegator:function(){return le},__asyncGenerator:function(){return Y},__asyncValues:function(){return ie},__await:function(){return M},__awaiter:function(){return j},__classPrivateFieldGet:function(){return a},__classPrivateFieldIn:function(){return L},__classPrivateFieldSet:function(){return x},__createBinding:function(){return A},__decorate:function(){return G},__disposeResources:function(){return ee},__esDecorate:function(){return $},__exportStar:function(){return N},__extends:function(){return S},__generator:function(){return T},__importDefault:function(){return K},__importStar:function(){return E},__makeTemplateObject:function(){return ae},__metadata:function(){return h},__param:function(){return I},__propKey:function(){return s},__read:function(){return R},__rest:function(){return F},__runInitializers:function(){return C},__setFunctionName:function(){return p},__spread:function(){return B},__spreadArray:function(){return H},__spreadArrays:function(){return P},__values:function(){return W}});var w=function(e,t){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},w(e,t)};function S(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}w(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var V=function(){return V=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)};function F(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function G(e,t,r,n){var o,u=arguments.length,l=u<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,r,n);else for(var m=e.length-1;m>=0;m--)(o=e[m])&&(l=(u<3?o(l):u>3?o(t,r,l):o(t,r))||l);return u>3&&l&&Object.defineProperty(t,r,l),l}function I(e,t){return function(r,n){t(r,n,e)}}function $(e,t,r,n,o,u){function l(ce){if(ce!==void 0&&typeof ce!="function")throw new TypeError("Function expected");return ce}for(var m,D=n.kind,O=D==="getter"?"get":D==="setter"?"set":"value",c=!t&&e?n.static?e:e.prototype:null,y=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),Q=!1,J=r.length-1;J>=0;J--){var te={};for(var se in n)te[se]=se==="access"?{}:n[se];for(var se in n.access)te.access[se]=n.access[se];te.addInitializer=function(ce){if(Q)throw new TypeError("Cannot add initializers after decoration has completed");u.push(l(ce||null))};var oe=(0,r[J])(D==="accessor"?{get:y.get,set:y.set}:y[O],te);if(D==="accessor"){if(oe===void 0)continue;if(oe===null||typeof oe!="object")throw new TypeError("Object expected");(m=l(oe.get))&&(y.get=m),(m=l(oe.set))&&(y.set=m),(m=l(oe.init))&&o.unshift(m)}else(m=l(oe))&&(D==="field"?o.unshift(m):y[O]=m)}c&&Object.defineProperty(c,n.name,y),Q=!0}function C(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function s(e){return typeof e=="symbol"?e:"".concat(e)}function p(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function h(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function j(e,t,r,n){return new(r||(r=Promise))(function(o,u){function l(O){try{D(n.next(O))}catch(c){u(c)}}function m(O){try{D(n.throw(O))}catch(c){u(c)}}function D(O){var c;O.done?o(O.value):(c=O.value,c instanceof r?c:new r(function(y){y(c)})).then(l,m)}D((n=n.apply(e,t||[])).next())})}function T(e,t){var r,n,o,u,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function m(D){return function(O){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,c[0]&&(l=0)),l;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,n=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||c[0]!==6&&c[0]!==2)){l=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){l.label=c[1];break}if(c[0]===6&&l.label<o[1]){l.label=o[1],o=c;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(c);break}o[2]&&l.ops.pop(),l.trys.pop();continue}c=t.call(e,l)}catch(y){c=[6,y],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([D,O])}}}var A=Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function N(e,t){for(var r in e)r==="default"||Object.prototype.hasOwnProperty.call(t,r)||A(t,e,r)}function W(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n,o,u=r.call(e),l=[];try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)l.push(n.value)}catch(m){o={error:m}}finally{try{n&&!n.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}return l}function B(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(R(arguments[t]));return e}function P(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var u=arguments[t],l=0,m=u.length;l<m;l++,o++)n[o]=u[l];return n}function H(e,t,r){if(r||arguments.length===2)for(var n,o=0,u=t.length;o<u;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function M(e){return this instanceof M?(this.v=e,this):new M(e)}function Y(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),u=[];return n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n;function l(y){o[y]&&(n[y]=function(Q){return new Promise(function(J,te){u.push([y,Q,J,te])>1||m(y,Q)})})}function m(y,Q){try{(J=o[y](Q)).value instanceof M?Promise.resolve(J.value.v).then(D,O):c(u[0][2],J)}catch(te){c(u[0][3],te)}var J}function D(y){m("next",y)}function O(y){m("throw",y)}function c(y,Q){y(Q),u.shift(),u.length&&m(u[0][0],u[0][1])}}function le(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,u){t[o]=e[o]?function(l){return(r=!r)?{value:M(e[o](l)),done:!1}:u?u(l):l}:u}}function ie(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=W(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(u){return new Promise(function(l,m){(function(D,O,c,y){Promise.resolve(y).then(function(Q){D({value:Q,done:c})},O)})(l,m,(u=e[o](u)).done,u.value)})}}}function ae(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var fe=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function E(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&A(t,e,r);return fe(t,e),t}function K(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function x(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function L(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function b(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var ne=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function ee(e){function t(r){e.error=e.hasError?new ne(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,function(u){return t(u),r()})}catch(u){t(u)}}if(e.hasError)throw e.error}()}d.default={__extends:S,__assign:V,__rest:F,__decorate:G,__param:I,__metadata:h,__awaiter:j,__generator:T,__createBinding:A,__exportStar:N,__values:W,__read:R,__spread:B,__spreadArrays:P,__spreadArray:H,__await:M,__asyncGenerator:Y,__asyncDelegator:le,__asyncValues:ie,__makeTemplateObject:ae,__importStar:E,__importDefault:K,__classPrivateFieldGet:a,__classPrivateFieldSet:x,__classPrivateFieldIn:L,__addDisposableResource:b,__disposeResources:ee}}},be={};function U(g){var d=be[g];if(d!==void 0)return d.exports;var f=be[g]={exports:{}};return _[g](f,f.exports,U),f.exports}U.d=function(g,d){for(var f in d)U.o(d,f)&&!U.o(g,f)&&Object.defineProperty(g,f,{enumerable:!0,get:d[f]})},U.o=function(g,d){return Object.prototype.hasOwnProperty.call(g,d)},U.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var de={};return function(){var g=de;Object.defineProperty(g,"__esModule",{value:!0}),g.useReactToPrint=g.ReactToPrint=g.PrintContextConsumer=void 0;var d=U(328);Object.defineProperty(g,"PrintContextConsumer",{enumerable:!0,get:function(){return d.PrintContextConsumer}});var f=U(428);Object.defineProperty(g,"ReactToPrint",{enumerable:!0,get:function(){return f.ReactToPrint}});var w=U(892);Object.defineProperty(g,"useReactToPrint",{enumerable:!0,get:function(){return w.useReactToPrint}});var S=U(428);g.default=S.ReactToPrint}(),de}()})})(we);var $e=we.exports;const Tt=({academicians:me,faculties:_e,researchOptions:pe,universities:ge,faculty:_,users:be})=>{var E,K;Te();const[U,de]=q.useState(!1),[g,d]=q.useState({}),[f,w]=q.useState({excel:!1}),[S,V]=q.useState(!1),[F,G]=q.useState([]),[I,$]=q.useState("all"),[C,s]=q.useState(1),p=q.useRef(null),h=15,j=q.useRef(),T=q.useRef(null),[A,N]=q.useState(!1),[W,R]=q.useState(!1);q.useEffect(()=>{function a(x){T.current&&!T.current.contains(x.target)&&V(!1)}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),q.useEffect(()=>{function a(x){p.current&&!p.current.contains(x.target)&&window.innerWidth<1024&&de(!1)}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const B=new Set;me.forEach(a=>{Array.isArray(a.research_expertise)&&a.research_expertise.forEach(x=>{B.add(x)})});const P=Array.from(B).map(a=>{const x=pe.find(L=>`${L.field_of_research_id}-${L.research_area_id}-${L.niche_domain_id}`===a);return{value:a,label:x?`${x.field_of_research_name} - ${x.research_area_name} - ${x.niche_domain_name}`:`Unknown (${a})`}}),H=a=>{d(x=>({...x,[a]:!x[a]}))},M=me.filter(a=>{if(!a)return!1;let x=!0;F.length>0&&(x=Array.isArray(a.research_expertise)&&a.research_expertise.some(b=>F.includes(b)));const L=I==="all"||I==="verified"&&a.verified||I==="unverified"&&!a.verified;return x&&L}),Y=Math.ceil(M.length/h),le=M.slice((C-1)*h,C*h),ie=[];for(let a=1;a<=Y;a++)ie.push(a);const ae=$e.useReactToPrint({content:()=>j.current,documentTitle:`${(_==null?void 0:_.name)||"Faculty"} - Academicians Directory`,onBeforeGetContent:()=>{N(!0),R(!0);const a={};return M.forEach(x=>{a[x.id]=!0}),d(a),new Promise(x=>{setTimeout(()=>{x()},2e3)})},onPrintError:()=>{N(!1),R(!1),d({})},onAfterPrint:()=>{N(!1),R(!1),d({})},removeAfterPrint:!0,suppressErrors:!0}),fe=async()=>{w({...f,excel:!0});try{const a={researchAreas:F,verificationStatus:I,facultyId:_==null?void 0:_.id},x=await Ae.post(route("faculty-admin.export.excel"),a,{responseType:"blob"}),L=window.URL.createObjectURL(new Blob([x.data])),b=document.createElement("a");b.href=L,b.setAttribute("download",`${(_==null?void 0:_.name)||"Faculty"}_Academicians.xlsx`),document.body.appendChild(b),b.click(),document.body.removeChild(b)}catch(a){console.error("Error exporting to Excel:",a),alert("Failed to export to Excel. Please try again.")}finally{w({...f,excel:!1}),V(!1)}};return i.jsxs(Ce,{title:"",children:[i.jsxs("div",{className:"relative bg-gray-200",children:[i.jsx("div",{className:"w-full h-48 overflow-hidden",children:i.jsx("img",{src:(E=_==null?void 0:_.university)!=null&&E.background_image?`/storage/${_.university.background_image}`:"/storage/university_background_images/default.jpg",alt:"Faculty Banner",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"absolute top-28 left-1/2 transform -translate-x-1/2 w-full max-w-4xl text-center",children:[i.jsx("div",{className:"inline-block w-24 h-24 rounded-full overflow-hidden border-4 border-white",children:i.jsx("img",{src:(K=_==null?void 0:_.university)!=null&&K.profile_picture?`/storage/${_.university.profile_picture}`:"/storage/university_profile_pictures/default.jpg",alt:"University Logo",className:"w-full h-full object-cover"})}),i.jsxs("h1",{className:"mt-6 text-xl md:text-2xl font-bold text-gray-800",children:[_==null?void 0:_.name," - Academicians Directory"]})]})]}),i.jsxs("div",{className:"mt-28 px-4 lg:px-8 pb-12",children:[i.jsx("button",{onClick:()=>de(!U),className:"fixed top-20 right-4 z-50 bg-blue-600 text-white p-2 rounded-full shadow-lg lg:hidden",children:i.jsx(Me,{className:"text-xl"})}),i.jsx("div",{className:"mb-4 flex justify-end",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:ae,disabled:A,className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md flex items-center",title:"Print Directory",children:[A?i.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i.jsx(De,{className:"mr-2"}),"Print All Academicians (",M.length,")"]}),i.jsxs("div",{className:"relative",ref:T,children:[i.jsxs("button",{onClick:()=>V(!S),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md flex items-center",children:[i.jsx(Oe,{className:"mr-2"})," Export ",i.jsx(ve,{className:"ml-2"})]}),S&&i.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:i.jsx("div",{className:"py-1",children:i.jsxs("button",{onClick:fe,disabled:f.excel,className:"w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100 flex items-center",children:[f.excel?i.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i.jsx(Fe,{className:"mr-2 text-green-600"}),"Export to Excel"]})})})]})]})}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[i.jsxs("div",{ref:p,className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-white shadow-md border-r p-5 transition-transform duration-300 z-50 overflow-y-auto ${U?"translate-x-0":"-translate-x-full"} lg:translate-x-0 rounded-lg`,children:[i.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",i.jsx("button",{onClick:()=>de(!1),className:"text-gray-600 lg:hidden",children:"✕"})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsx(Re,{label:"Research Expertise",options:P,selectedValues:F,setSelectedValues:G}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Status"}),i.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full",value:I,onChange:a=>{$(a.target.value),s(1)},children:[i.jsx("option",{value:"all",children:"All"}),i.jsx("option",{value:"verified",children:"Verified"}),i.jsx("option",{value:"unverified",children:"Unverified"})]})]})]})]}),i.jsxs("div",{className:"lg:w-3/4",children:[i.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",id:"printRef",ref:j,children:[i.jsxs("div",{className:"hidden print:block print:mb-4 print:px-6 print:pt-6",children:[i.jsxs("h1",{className:"text-xl font-bold",children:[_==null?void 0:_.name," - Academicians Directory"]}),i.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[i.jsxs("p",{children:["Generated on: ",new Date().toLocaleDateString()]}),I!=="all"&&i.jsxs("p",{children:["Filtered by status: ",I==="verified"?"Verified":"Unverified"]}),F.length>0&&i.jsxs("p",{children:["Filtered by research areas: ",F.length," area(s) selected"]}),i.jsxs("p",{children:["Total academicians: ",M.length]})]})]}),le.length===0?i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{className:"text-gray-500",children:"No academicians match your filter criteria."})}):i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academician"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department & Position"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Expertise"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(W||window.matchMedia("print").matches?M:le).map(a=>{var L;const x=g[a.id]||!1;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden border border-gray-200",children:i.jsx("img",{src:`/storage/${a.profile_picture||"profile_pictures/default.jpg"}`,alt:a.full_name,className:"h-full w-full object-cover"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("span",{className:"font-medium text-gray-900 print:text-black",children:a.full_name||"N/A"}),i.jsx("div",{className:"text-sm text-gray-500 print:text-black",children:((L=a.user)==null?void 0:L.email)||"N/A"})]})]})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm text-gray-900 print:text-black",children:a.department||"N/A"}),i.jsx("div",{className:"text-sm text-gray-500 print:text-black",children:a.current_position||"N/A"})]}),i.jsx("td",{className:"px-6 py-4",children:a.research_expertise&&a.research_expertise.length>0?i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm text-gray-900 font-medium print:text-black",children:[a.research_expertise.length," area",a.research_expertise.length!==1?"s":""]}),i.jsx("button",{onClick:()=>H(a.id),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center print:hidden",children:x?i.jsxs(i.Fragment,{children:["Hide ",i.jsx(Ie,{className:"ml-1"})]}):i.jsxs(i.Fragment,{children:["Show ",i.jsx(ve,{className:"ml-1"})]})})]}),(x||W||window.matchMedia("print").matches)&&i.jsx("div",{className:"mt-2",children:i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto print:max-h-none print:overflow-visible",children:a.research_expertise.map((b,ne)=>{const ee=pe.find(e=>`${e.field_of_research_id}-${e.research_area_id}-${e.niche_domain_id}`===b);return ee?i.jsxs("p",{className:"text-sm text-gray-700 print:text-black",children:[ne+1,". ",ee.field_of_research_name," - ",ee.research_area_name," - ",ee.niche_domain_name]},ne):i.jsxs("p",{className:"text-sm text-gray-700 print:text-black",children:[ne+1,". Unknown expertise (ID: ",b,")"]},ne)})})})]}):i.jsx("div",{className:"text-sm text-gray-500 print:text-black",children:"No research expertise specified"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.verified?i.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 print:bg-transparent print:border print:border-green-800",children:[i.jsx(Le,{className:"mr-1"})," Verified"]}):i.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 print:bg-transparent print:border print:border-red-800",children:[i.jsx(We,{className:"mr-1"})," Unverified"]})})]},a.id)})})]})]}),Y>1&&i.jsx("div",{className:"flex justify-center mt-6 print:hidden",children:i.jsxs("nav",{className:"inline-flex rounded-md shadow",children:[i.jsxs("button",{onClick:()=>s(a=>Math.max(a-1,1)),disabled:C===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border ${C===1?"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:[i.jsx("span",{className:"sr-only",children:"Previous"}),"«"]}),ie.map(a=>i.jsx("button",{onClick:()=>s(a),className:`relative inline-flex items-center px-4 py-2 border ${C===a?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:a},a)),i.jsxs("button",{onClick:()=>s(a=>Math.min(a+1,Y)),disabled:C===Y,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border ${C===Y?"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:[i.jsx("span",{className:"sr-only",children:"Next"}),"»"]})]})})]})]})]}),i.jsx("style",{type:"text/css",media:"print",children:`
                @page {
                    size: auto;
                    margin: 0.5cm;
                }
                @media print {
                    html, body {
                        height: auto !important;
                        overflow: auto !important;
                    }
                    body * {
                        visibility: hidden;
                    }
                    #printRef, #printRef * {
                        visibility: visible !important;
                    }
                    .print\\:hidden {
                        display: none !important;
                    }
                    .print\\:block {
                        display: block !important;
                    }
                    .print\\:max-h-none {
                        max-height: none !important;
                    }
                    .print\\:overflow-visible {
                        overflow: visible !important;
                    }
                    .print\\:bg-transparent {
                        background-color: transparent !important;
                    }
                    .print\\:border {
                        border-width: 1px !important;
                    }
                    .print\\:border-green-800 {
                        border-color: #166534 !important;
                    }
                    .print\\:border-red-800 {
                        border-color: #991b1b !important;
                    }
                    .print\\:text-black {
                        color: #000 !important;
                    }
                    #printRef {
                        position: static !important;
                        left: 0;
                        top: 0;
                        width: 100% !important;
                        height: auto !important;
                        margin: 0;
                        padding: 0;
                        break-inside: auto;
                    }
                    .overflow-y-auto {
                        overflow: visible !important;
                        max-height: none !important;
                    }
                    table {
                        width: 100% !important;
                        page-break-inside: auto;
                        border-collapse: collapse !important;
                    }
                    tr {
                        page-break-inside: avoid;
                        page-break-after: auto;
                    }
                    td, th {
                        page-break-inside: avoid;
                    }
                    thead {
                        display: table-header-group;
                    }
                    tfoot {
                        display: table-footer-group;
                    }
                }
                `})]})};export{Tt as default};
