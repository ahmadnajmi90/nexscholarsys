import{r as m,j as r}from"./app-BsNwtNXo.js";import{l as q,m as D,n as Q,o as T}from"./index-DiYkTQf-.js";const P=({label:f,options:u,selectedValues:o,setSelectedValues:v})=>{const[x,_]=m.useState(!1),g=m.useRef(null),y=a=>{const h=o.includes(a)?o.filter(b=>b!==a):[...o,a];v(h)};return m.useEffect(()=>{const a=h=>{g.current&&!g.current.contains(h.target)&&_(!1)};return x?document.addEventListener("mousedown",a):document.removeEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[x]),r.jsxs("div",{ref:g,className:"relative",children:[r.jsx("label",{className:"block text-gray-700 font-medium",children:f}),r.jsx("div",{className:`relative mt-1 w-full rounded-lg border border-gray-200 p-4 text-sm cursor-pointer bg-white ${x?"shadow-lg":""}`,onClick:()=>_(!x),children:o&&o.length>0?u.filter(a=>o.includes(a.value)).map(a=>a.label).join(", "):`Select ${f}`}),x&&r.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded shadow-lg",children:r.jsx("div",{className:"p-2 space-y-2",children:u.map((a,h)=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",value:a.value,checked:o.includes(a.value),onChange:b=>y(b.target.value),className:"mr-2"}),a.label]},h))})})]})},V=({profilesData:f,supervisorAvailabilityKey:u,universitiesList:o,faculties:v,isPostgraduateList:x,isUndergraduateList:_,isFacultyAdminDashboard:g,users:y,researchOptions:a})=>{var C;const[h,b]=m.useState([]),[j,U]=m.useState([]),[p,E]=m.useState(""),[N,k]=m.useState(1),w=9,[R,$]=m.useState(!1),[l,F]=m.useState(null),B=e=>{F(e),$(!0)},O=[...new Set(f.flatMap(e=>{const s=Array.isArray(e.field_of_research)?e.field_of_research:[],t=Array.isArray(e.research_expertise)?e.research_expertise:[],n=Array.isArray(e.research_preference)?e.research_preference:[];return[...s,...t,...n]}))].map(e=>{const s=a.find(t=>`${t.field_of_research_id}-${t.research_area_id}-${t.niche_domain_id}`===e);return{value:e,label:s?`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`:"Unknown Research Area"}}),I=o.map(e=>({value:e.id.toString(),label:e.short_name})),L=e=>e===null?"0":e===!0||e==="1"||e===1?"1":e===!1||e==="0"||e===0?"0":"",A=f.filter(e=>{const s=e.university?e.university.toString():"",t=h.length===0||(e.field_of_research||e.research_expertise||e.research_preference||[]).some(d=>h.includes(d)),n=j.length===0||j.includes(s),i=L(e[u]);return t&&n&&(p===""||i===p)}),M=Math.ceil(A.length/w),z=A.slice((N-1)*w,N*w),W=e=>{k(e)},S=e=>{const s=o.find(t=>t.id===e);return s?s.full_name:"Unknown University"},G=e=>{const s=v.find(t=>t.id===e);return s?s.name:"Unknown University"};return console.log(u),console.log(p),r.jsxs("div",{className:"min-h-screen flex",children:[r.jsxs("div",{className:"w-1/4 p-4 bg-gray-100 border-r",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(P,{label:_?"Preferred Research Area":"Research Area",options:O,selectedValues:h,setSelectedValues:b}),!g&&r.jsx(P,{label:"University",options:I,selectedValues:j,setSelectedValues:U}),!_&&r.jsxs("div",{children:[u==="availability_as_supervisor"?r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Available As Supervisor"}):r.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Looking for supervisor"}),r.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full pl-4",value:p,onChange:e=>{E(e.target.value),k(1)},children:[r.jsx("option",{value:"",children:"All"}),r.jsx("option",{value:"1",children:"Yes"}),r.jsx("option",{value:"0",children:"No"})]})]})]})]}),r.jsxs("div",{className:"flex-1 px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:[z.map(e=>{var s;return r.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden relative",children:[r.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-[10px] font-semibold px-2.5 py-0.5 rounded-full",children:((s=o.find(t=>t.id===e.university))==null?void 0:s.short_name)||"Unknown University"}),!x&&r.jsxs("div",{className:"relative group",children:[e.verified===1&&r.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-purple-100 px-2.5 py-0.5 text-[10px] text-purple-700 cursor-pointer",children:"Verified"}),e.verified!==1&&r.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-red-100 px-2.5 py-0.5 text-[10px] text-red-700 cursor-pointer",children:"Not Verified"}),r.jsx("div",{className:"absolute top-8 right-0 hidden group-hover:flex items-center bg-gray-800 text-white text-xs rounded px-3 py-2 shadow-lg z-10",children:e.verified===1?`This account is verified by ${S(e.university)}`:"This account is not verified"})]}),r.jsx("div",{className:"h-32",children:r.jsx("img",{src:e.background_image!==null?`/storage/${e.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Banner",className:"object-cover w-full h-full"})}),r.jsx("div",{className:"flex justify-center -mt-12",children:r.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg",children:r.jsx("img",{src:e.profile_picture!==null?`/storage/${e.profile_picture}`:"/storage/profile_pictures/default.jpg",alt:"Profile",className:"w-full h-full object-cover"})})}),r.jsxs("div",{className:"text-center mt-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:e.full_name}),r.jsx("p",{className:"text-gray-500 text-sm",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",minHeight:"2.5rem"},children:Array.isArray(e.field_of_research)&&e.field_of_research.length>0?(()=>{const t=e.field_of_research[0],n=a.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===t);return n?`${n.field_of_research_name} - ${n.research_area_name} - ${n.niche_domain_name}`:"Unknown"})():Array.isArray(e.research_expertise)&&e.research_expertise.length>0?(()=>{const t=e.research_expertise[0],n=a.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===t);return n?`${n.field_of_research_name} - ${n.research_area_name} - ${n.niche_domain_name}`:"Unknown"})():Array.isArray(e.research_preference)&&e.research_preference.length>0?(()=>{const t=e.research_preference[0],n=a.find(i=>`${i.field_of_research_id}-${i.research_area_id}-${i.niche_domain_id}`===t);return n?`${n.field_of_research_name} - ${n.research_area_name} - ${n.niche_domain_name}`:"Unknown"})():"No Field of Research or Expertise"}),r.jsx("p",{className:"text-gray-500 text-sm",children:e.current_position?e.current_position:"No Position"}),r.jsx("button",{onClick:()=>B(e),className:"mt-2 bg-blue-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-blue-600",children:"Quick Info"})]}),r.jsxs("div",{className:"flex justify-around items-center mt-6 py-4 border-t px-10",children:[r.jsx(q,{className:"text-gray-500 text-sm cursor-pointer hover:text-blue-700",title:"Copy Email",onClick:()=>handleCopyEmail(e.email)}),r.jsx("a",{href:e.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-red-700",title:"Google Scholar",children:r.jsx(D,{})}),r.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-green-700",title:"Website",children:r.jsx(Q,{})}),r.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-blue-800",title:"LinkedIn",children:r.jsx(T,{})})]})]},e.id)}),R&&l&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg relative",children:[r.jsx("button",{onClick:()=>$(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Close",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:l.full_name}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:"University:"})," ",S(l.university)]}),r.jsxs("p",{className:"text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:"Faculty:"})," ",G(l.faculty)]}),r.jsxs("p",{className:"text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:"Bio:"})," ",l.bio||"No bio available."]}),r.jsxs("p",{className:"text-gray-600",children:[r.jsxs("span",{className:"font-semibold",children:[_?"Preferred Research Area":"Fields of Research",":"]})," ",(()=>{const e=Array.isArray(l.field_of_research)&&l.field_of_research.length>0?l.field_of_research.map(i=>{const c=a.find(d=>`${d.field_of_research_id}-${d.research_area_id}-${d.niche_domain_id}`===i);return c?`${c.field_of_research_name} - ${c.research_area_name} - ${c.niche_domain_name}`:null}).filter(Boolean):[],s=Array.isArray(l.research_expertise)&&l.research_expertise.length>0?l.research_expertise.map(i=>{const c=a.find(d=>`${d.field_of_research_id}-${d.research_area_id}-${d.niche_domain_id}`===i);return c?`${c.field_of_research_name} - ${c.research_area_name} - ${c.niche_domain_name}`:null}).filter(Boolean):[],t=Array.isArray(l.research_preference)&&l.research_preference.length>0?l.research_preference.map(i=>{const c=a.find(d=>`${d.field_of_research_id}-${d.research_area_id}-${d.niche_domain_id}`===i);return c?`${c.field_of_research_name} - ${c.research_area_name} - ${c.niche_domain_name}`:null}).filter(Boolean):[],n=[...e,...s,...t];return n.length>0?n.join(", "):"    "})()]}),!_&&r.jsxs("p",{className:"text-gray-600",children:[u=="availability_as_supervisor"?r.jsx("span",{className:"font-semibold",children:"Available as supervisor:"}):r.jsx("span",{className:"font-semibold",children:"Looking for a supervisor:"}),l[u]===1?" Yes":" No"]}),r.jsxs("p",{className:"text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:"Email:"})," ",((C=y.find(e=>e.unique_id===(l.academician_id||l.postgraduate_id||l.undergraduate_id)))==null?void 0:C.email)||"No email provided"]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:()=>$(!1),className:"px-6 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]}),r.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:M},(e,s)=>r.jsx("button",{onClick:()=>W(s+1),className:`px-4 py-2 border rounded ${N===s+1?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:s+1},s))})]})]})};export{V as P};
