import{W as N,r as d,j as e}from"./app-BxiTGdrP.js";import{M as S}from"./MainLayout-7NGkrEx3.js";import j from"./NationalityForm-ZqjlxVUP.js";import{S as C}from"./react-select.esm-CEk_cRpB.js";import{R as k}from"./quill.snow-cEeVy2rF.js";import{u as A}from"./useRoles-99FHkB5g.js";import{I as n}from"./InputLabel-Bd2_y-Zy.js";import"./index-DyoFRZ4A.js";function O({postProject:s,auth:u,researchOptions:m,universities:f}){var v;A();const{data:r,setData:l,post:b,processing:y,errors:i}=N({title:s.title||"",description:s.description||"",project_type:s.project_type||"",project_theme:s.project_theme||"",purpose:s.purpose||[],start_date:s.start_date||"",end_date:s.end_date||"",application_deadline:s.application_deadline||"",duration:s.duration||"",sponsored_by:s.sponsored_by||"",category:s.category||"",field_of_research:s.field_of_research||[],supervisor_category:s.supervisor_category||"",supervisor_name:s.supervisor_name||"",university:s.university||"",email:s.email||"",origin_country:s.origin_country||"",student_nationality:s.student_nationality||"",student_level:s.student_level||"",appointment_type:s.appointment_type||"",purpose_of_collaboration:s.purpose_of_collaboration||"",image:s.image||"",attachment:s.attachment||"",amount:s.amount||"",application_url:s.application_url||"",project_status:s.project_status||"draft"}),[_,w]=d.useState(r.university),[p,x]=d.useState(!1),h=d.useRef(null);d.useEffect(()=>{const a=o=>{h.current&&!h.current.contains(o.target)&&x(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const c=a=>{if(a==="For Showcase")r.purpose.includes("For Showcase")?l("purpose",[]):l("purpose",["For Showcase"]);else{const o=r.purpose.includes(a)?r.purpose.filter(t=>t!==a):[...r.purpose.filter(t=>t!=="For Showcase"),a];l("purpose",o)}};d.useState("");const g=async a=>{a&&a.preventDefault();const o=new FormData;Object.keys(r).forEach(t=>{t==="image"||t==="attachment"?(r[t]instanceof File||typeof r[t]=="string")&&o.append(t,r[t]):Array.isArray(r[t])?o.append(t,JSON.stringify(r[t])):o.append(t,r[t])}),console.log("Form Data Contents:");for(let t of o.entries())console.log(t[0]+": "+t[1]);b(route("post-projects.update",s.id),{data:o,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Project updated successfully!")},onError:t=>{console.error("Error updating Project:",t),alert("Failed to update the Project. Please try again.")}})};return e.jsx(S,{title:"",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"absolute top-4 left-4 text-gray-700 hover:text-gray-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Project"}),e.jsxs("div",{children:[e.jsxs(n,{children:["Project Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.title,onChange:a=>l("title",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Project Name"}),i.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.title})]}),e.jsxs("div",{children:[e.jsxs(n,{children:["Project Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",style:{height:"300px",overflowY:"auto"},children:e.jsx(k,{theme:"snow",value:r.description,onChange:a=>l("description",a),placeholder:"Enter description",style:{height:"300px",maxHeight:"300px"}})}),i.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{ref:h,children:[e.jsx(n,{children:"Purpose (Multiselect)"}),e.jsx("div",{className:`relative mt-1 w-full rounded-lg border border-gray-200 p-2 px-2.5 cursor-pointer bg-white ${p?"shadow-lg":""}`,onClick:()=>x(!p),children:r.purpose&&r.purpose.length>0?r.purpose.join(", "):"Select Purposes"}),p&&e.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded shadow-lg w-[37.5rem]",children:e.jsxs("div",{className:"p-2 space-y-2",children:[e.jsxs(n,{className:`flex items-center ${r.purpose.includes("For Showcase")?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("input",{type:"checkbox",value:"Seek for Postgraduate",checked:r.purpose.includes("Seek for Postgraduate"),onChange:a=>c(a.target.value),disabled:r.purpose.includes("For Showcase"),className:"mr-2"}),"Seek for Postgraduate"]}),e.jsxs(n,{className:`flex items-center ${r.purpose.includes("For Showcase")?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("input",{type:"checkbox",value:"Seek for Academician Collaboration",checked:r.purpose.includes("Seek for Academician Collaboration"),onChange:a=>c(a.target.value),disabled:r.purpose.includes("For Showcase"),className:"mr-2"}),"Seek for Academician Collaboration"]}),e.jsxs(n,{className:`flex items-center ${r.purpose.includes("For Showcase")?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("input",{type:"checkbox",value:"Seek for Industrial Collaboration",checked:r.purpose.includes("Seek for Industrial Collaboration"),onChange:a=>c(a.target.value),disabled:r.purpose.includes("For Showcase"),className:"mr-2"}),"Seek for Industrial Collaboration"]}),e.jsxs(n,{className:`flex items-center ${r.purpose.some(a=>a==="Seek for Postgraduate"||a==="Seek for Academician Collaboration"||a==="Seek for Industrial Collaboration")?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("input",{type:"checkbox",value:"For Showcase",checked:r.purpose.includes("For Showcase"),onChange:a=>c(a.target.value),disabled:r.purpose.some(a=>a==="Seek for Postgraduate"||a==="Seek for Academician Collaboration"||a==="Seek for Industrial Collaboration"),className:"mr-2"}),"For Showcase"]})]})}),i.purpose&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.purpose})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Project Theme"}),e.jsxs("select",{value:r.project_theme,onChange:a=>l("project_theme",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Project Theme"}),e.jsx("option",{value:"Science & Technology",children:"Science & Technology"}),e.jsx("option",{value:"Social Science",children:"Social Science"})]})]})]}),!r.purpose.includes("For Showcase")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Start Date"}),e.jsx("input",{type:"date",value:r.start_date,onChange:a=>l("start_date",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"End Date"}),e.jsx("input",{type:"date",value:r.end_date,min:r.start_date||"",onChange:a=>l("end_date",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Application Deadline"}),e.jsx("input",{type:"date",value:r.application_deadline,onChange:a=>l("application_deadline",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Duration (in months)"}),e.jsx("input",{type:"number",value:r.duration,onChange:a=>l("duration",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter grant duration"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Sponsored By"}),e.jsx("input",{type:"text",value:r.sponsored_by,onChange:a=>l("sponsored_by",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter sponsor"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:r.category,onChange:a=>l("category",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Category"}),e.jsx("option",{value:"Fundamental Research",children:"Fundamental Research"}),e.jsx("option",{value:"Applied Research",children:"Applied Research"}),e.jsx("option",{value:"Fundamental + Applied",children:"Fundamental + Applied"}),e.jsx("option",{value:"Knowledge Transfer Program (KTP)",children:"Knowledge Transfer Program (KTP)"}),e.jsx("option",{value:"CSR (Corporate Social Responsibility)",children:"CSR (Corporate Social Responsibility)"})]}),i.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.category})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[(r.category==="Fundamental Research"||r.category==="Applied Research"||r.category==="Fundamental + Applied")&&e.jsxs("div",{className:"w-full",children:[e.jsx(n,{children:"Field of Research Structure : Field of Research - Research Area - Niche Domain"}),e.jsx(C,{id:"field_of_research",isMulti:!0,options:m.map(a=>({value:`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`,label:`${a.field_of_research_name} - ${a.research_area_name} - ${a.niche_domain_name}`})),className:"mt-1",classNamePrefix:"select",value:(v=r.field_of_research)==null?void 0:v.map(a=>{const o=m.find(t=>`${t.field_of_research_id}-${t.research_area_id}-${t.niche_domain_id}`===a);return{value:a,label:o?`${o.field_of_research_name} - ${o.research_area_name} - ${o.niche_domain_name}`:a}}),onChange:a=>{const o=a.map(t=>t.value);l("field_of_research",o)},placeholder:"Search and select fields of research..."})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Project Supervisor / Project Leader"}),e.jsxs("select",{value:r.supervisor_category,onChange:a=>l("supervisor_category",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"Own Name",children:"Own Name"}),e.jsx("option",{value:"On Behalf",children:"On Behalf"})]})]})]}),r.supervisor_category==="On Behalf"&&e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Supervisor / Project Leader Name"}),e.jsx("input",{type:"text",value:r.supervisor_name,onChange:a=>l("supervisor_name",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"University"}),e.jsxs("select",{id:"university",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:_||"",onChange:a=>{const o=a.target.value;w(o),l("university",o)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select your University"}),f.map(a=>e.jsx("option",{value:a.id,children:a.full_name},a.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:a=>l("email",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter email"}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:r.email===u.email,onChange:a=>{a.target.checked?l("email",u.email):l("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsxs(n,{htmlFor:"usePersonalEmail",className:"ml-2",children:["Use personal email (",u.email,")"]})]})]}),e.jsx("div",{children:e.jsx(j,{title:"Project Origin Country",value:r.origin_country,onChange:a=>l("origin_country",a)})})]}),r.purpose.includes("Seek for Postgraduate")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(j,{title:"Student Nationality",value:r.student_nationality,isNotSpecify:!0,onChange:a=>l("student_nationality",a)})}),e.jsxs("div",{children:[e.jsx(n,{children:"Level of Study"}),e.jsxs("select",{value:r.student_level,onChange:a=>l("student_level",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Level of Study"}),e.jsx("option",{value:"Master",children:"Master"}),e.jsx("option",{value:"Ph.D.",children:"Ph.D."})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Appointment Type"}),e.jsxs("select",{value:r.appointment_type,onChange:a=>l("appointment_type",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Appointment Type"}),e.jsx("option",{value:"Research Assistant (RA)",children:"Research Assistant (RA)"}),e.jsx("option",{value:"Graduate Assistant (GA)",children:"Graduate Assistant (GA)"}),e.jsx("option",{value:"Teaching Assistant (TA)",children:"Teaching Assistant (TA)"}),e.jsx("option",{value:"Research Fellow (RF)",children:"Research Fellow (RF)"}),e.jsx("option",{value:"Project Assistant (PA)",children:"Project Assistant (PA)"}),e.jsx("option",{value:"Technical Assistant (TA)",children:"Technical Assistant (TA)"}),e.jsx("option",{value:"Graduate Research Assistant (GRA)",children:"Graduate Research Assistant (GRA)"}),e.jsx("option",{value:"Scholarship Recipient",children:"Scholarship Recipient"}),e.jsx("option",{value:"Intern",children:"Intern"})]})]})]}),r.purpose.includes("Seek for Academician Collaboration")&&r.purpose.includes("Seek for Industrial Collaboration")&&e.jsxs("div",{children:[e.jsx(n,{children:"Purpose of Collaboration"}),e.jsx("textarea",{value:r.purpose_of_collaboration,onChange:a=>l("purpose_of_collaboration",a.target.value||""),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Purpose of Collaboration"}),i.purpose_of_collaboration&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.purpose_of_collaboration})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>l("image",a.target.files[0]),className:"w-full rounded-lg border-gray-200 py-2 text-sm"}),s.image&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Image:"," ",e.jsx("a",{href:`/storage/${s.image}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Image"})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:a=>l("attachment",a.target.files[0]),className:"w-full rounded-lg border-gray-200 py-2 text-sm"}),s.attachment&&e.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Current Attachment:"," ",e.jsx("a",{href:`/storage/${s.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[r.purpose!=="Seek for Postgraduate"&&e.jsxs("div",{children:[e.jsx(n,{children:"Approved Project Amount"}),e.jsx("input",{type:"number",value:r.amount,onChange:a=>l("amount",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter amount (e.g., 5000.00)"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Application URL"}),e.jsx("input",{type:"url",value:r.application_url,onChange:a=>l("application_url",a.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter application URL"}),i.application_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.application_url})]})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:()=>g(),disabled:y,className:"inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"})})]})]})})}export{O as default};
