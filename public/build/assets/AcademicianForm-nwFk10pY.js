import{q as E,W as Ce,r as i,a as x,j as e}from"./app-iMgHp_eS.js";import{I as c,a as d}from"./InputError-BMVSv-U-.js";import{P as Se}from"./PrimaryButton-DP4M3mkB.js";import{T as g}from"./TextInput-PMIHhHcg.js";import{n as $,P as ke,g as Pe,R as Fe,S as Ve}from"./ResearchAreaSelector-BguJj3cC.js";import{S as X}from"./react-select.esm-6ABf47Ml.js";import Me from"./CVPreviewModal-CsayStZk.js";import{z as v}from"./transition-GCCCemnQ.js";import"./index-BqwRJOP_.js";import"./index-Chjiymov.js";import"./index-CdJFUDDL.js";import"./utils-CBfrqCZ4.js";import"./chevron-down-LlZn8pLr.js";import"./createLucideIcon-BXdi-pyk.js";import"./index-CPRTWrZv.js";import"./floating-ui.dom-D5EC_49c.js";function es({className:H="",researchOptions:Te,aiGenerationInProgress:I,aiGenerationMethod:J,generatedProfileData:m}){const o=E().props.academician,K=$(o?.phone_number),U=E().props.allPrograms||[],Y=E().props.currentProgramIds||[],{data:t,setData:l,post:y,errors:n,processing:Q,recentlySuccessful:Z}=Ce({phone_number:K||"",full_name:o?.full_name||"",profile_picture:o?.profile_picture||"",research_expertise:typeof o?.research_expertise=="string"?JSON.parse(o?.research_expertise):o?.research_expertise,field_of_study:o?.field_of_study||"",highest_degree:o?.highest_degree||"",personal_website:o?.personal_website||o?.website||"",institution_website:o?.institution_website||"",linkedin:o?.linkedin||"",google_scholar:o?.google_scholar||"",researchgate:o?.researchgate||"",bio:o?.bio||"",current_position:o?.current_position||"",department:o?.department||"",availability_as_supervisor:o?.availability_as_supervisor||!1,style_of_supervision:o?.style_of_supervision||"",background_image:o?.background_image||"",CV_file:o?.CV_file||"",postgraduate_program_ids:Y,skills:o?.skills||[]}),[D,w]=i.useState(!1),[N,ee]=i.useState("auto"),[C,R]=i.useState([""]),[j,h]=i.useState(!1),[se,S]=i.useState(!1),[z,k]=i.useState(!1),[G,L]=i.useState(!1),[Ae,Ee]=i.useState(!1),[Ie,ae]=i.useState(null),[Ue,te]=i.useState(null),[Re,re]=i.useState(!1),f=i.useRef(!1);i.useEffect(()=>{m&&!f.current&&(l(s=>({...s,full_name:t.full_name,phone_number:m.phone_number||s.phone_number,bio:m.bio||s.bio,current_position:m.current_position||s.current_position,department:m.department||s.department,highest_degree:m.highest_degree||s.highest_degree,field_of_study:m.field_of_study||s.field_of_study,research_expertise:m.research_expertise||s.research_expertise})),f.current=!0,window._profileSuccessShown||(window._profileSuccessShown=!0,alert("Profile successfully generated! Please review and save the changes.")))},[m]),i.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("generation_initiated")==="true";if(!m&&(a||I)&&!f.current&&!j){q();return}},[I,J,j,m]);const q=()=>{if(f.current)return;h(!0);const s=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");x.get(route("ai.status"),{headers:{"X-CSRF-TOKEN":s,Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(a=>{if(a.data.status==="in_progress")setTimeout(q,3e3);else if(a.data.status==="error")h(!1),alert("Profile generation failed: "+a.data.message);else if(a.data.status==="completed"||a.data.data||typeof a.data=="object"&&a.data.full_name){h(!1);let r=a.data;a.data.data?r=a.data.data:a.data.response&&(r=a.data.response),r&&(_(r),f.current=!0,window._profileSuccessShown||(window._profileSuccessShown=!0,alert("Profile successfully generated! Please review and save the changes.")))}else h(!1)}).catch(a=>{console.error("Error checking generation status:",a),h(!1)})};i.useEffect(()=>{t.google_scholar&&le()},[t.google_scholar]);const le=()=>{x.get("/api/scholar/status").then(s=>{s.data.success&&(ae(s.data),re(s.data.can_update),s.data.profile&&te(s.data.profile.last_updated_human))}).catch(s=>{console.error("Error fetching Google Scholar status:",s)})},oe=(s,a)=>{const r=[...C];r[s]=a,R(r)},ie=()=>{R([...C,""])},ne=async()=>{h(!0),p("Generating...");try{const s=await x.post(route("academician.generateProfile"),{mode:"auto"});if(s.status===200){const a=s.data;_(a),p("Profile generated successfully!"),setTimeout(()=>{p("")},3e3)}}catch(s){console.error("Error generating profile:",s),p("Error generating profile. Please try again.")}finally{h(!1)}},ce=async()=>{if(t.CV_file&&typeof t.CV_file=="string"){h(!0),p("Generating profile from existing CV...");try{const s=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),a=new FormData,r={"X-CSRF-TOKEN":s,Accept:"application/json"},u=await x.post(route("ai.generate.cv"),a,{headers:r});u.data&&(u.data.CV_file&&l(Ne=>({...Ne,CV_file:u.data.CV_file})),_(u.data),p("Profile generated successfully!"),h(!1))}catch(s){console.error("Error generating profile from CV:",s),p(`Error (${s.response?.status||"unknown"}): ${s.message}`),h(!1)}}else F(!0)},[b,P]=i.useState(null),[de,F]=i.useState(!1),[V,M]=i.useState(!1),ue=s=>{P(s.target.files[0])},me=async()=>{if(b){M(!0),p("Uploading CV and generating profile...");try{const s=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),a=new FormData;if(a.append("CV_file",b,b.name),b.size>5*1024*1024)throw new Error("File size exceeds 5MB. Please upload a smaller file.");const r=await x.post(route("ai.generate.cv"),a,{headers:{"X-CSRF-TOKEN":s,Accept:"application/json","Content-Type":"multipart/form-data"},responseType:"json",timeout:6e4});r.data&&(F(!1),P(null),r.data.CV_file&&l(u=>({...u,CV_file:r.data.CV_file})),_(r.data),p("Profile generated successfully!"),M(!1))}catch(s){console.error("Error uploading CV:",s),p(`Error (${s.response?.status||"unknown"}): ${s.message}`),M(!1)}}},he=s=>{if(s.preventDefault(),!t.profile_picture){alert("Please select a profile picture.");return}const a=new FormData;a.append("profile_picture",t.profile_picture),y(route("role.updateProfilePicture"),{data:a,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Profile picture updated successfully."),O(),window.location.reload()},onError:r=>{console.error("Error updating profile picture:",r),alert("Failed to update the profile picture. Please try again.")}})},pe=s=>{if(s.preventDefault(),!t.background_image){alert("Please select a background image.");return}const a=new FormData;a.append("background_image",t.background_image),y(route("role.updateBackgroundImage"),{data:a,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Background image updated successfully."),T(!1),window.location.reload()},onError:r=>{console.error("Error updating background image:",r),alert("Failed to update the background image. Please try again.")}})},ge=s=>{s.preventDefault();const a=new FormData;Object.keys(t).forEach(r=>{if(r!=="profile_picture"&&r!=="background_image"&&r!=="CV_file")if(r==="research_expertise")a.append(r,JSON.stringify(t[r]));else if(r==="availability_as_supervisor")a.append(r,t[r]===!0?1:0);else if(Array.isArray(t[r]))a.append(r,JSON.stringify(t[r]));else{const u=r==="phone_number"?$(t[r]):t[r];a.append(r,u)}}),t.CV_file&&typeof t.CV_file!="string"?a.append("CV_file",t.CV_file):t.CV_file===""&&a.append("CV_file",""),y(route("role.update"),{data:a,onStart:()=>{console.log("Starting profile update...")},onSuccess:()=>{alert(`âœ… Profile updated successfully!

ðŸ’¡ AI matching features are being prepared in the background and will be ready shortly.`)},onError:r=>{console.error("Form submission errors:",r),alert("âŒ Failed to update profile. Please check the form and try again.")},onFinish:()=>{console.log("Profile update request completed")}})},[fe,B]=i.useState(!1),xe=()=>B(!0),O=()=>B(!1),[be,T]=i.useState(!1),[A,ve]=i.useState("profiles"),je=s=>{k(!0),x.post(route("role.generateCV"),{customized_cv:s},{responseType:"blob"}).then(a=>{const r=window.URL.createObjectURL(new Blob([a.data])),u=document.createElement("a");u.href=r,u.setAttribute("download","cv.docx"),document.body.appendChild(u),u.click(),u.remove(),k(!1),S(!1)}).catch(a=>{console.error("CV generation failed"),alert("Failed to generate CV. Please try again."),k(!1)})},_e=()=>{L(!1),S(!0)},ye=()=>{f.current=!1},W=()=>{ye(),w(!0)},[we,p]=i.useState(""),_=s=>{l(a=>({...a,full_name:s.full_name||a.full_name,phone_number:s.phone_number||a.phone_number,bio:s.bio||a.bio,current_position:s.current_position||a.current_position,department:s.department||a.department,highest_degree:s.highest_degree||a.highest_degree,field_of_study:s.field_of_study||a.field_of_study,research_expertise:s.research_expertise&&s.research_expertise.length>0?s.research_expertise:a.research_expertise,personal_website:s.personal_website||a.personal_website,institution_website:s.institution_website||a.institution_website,linkedin:s.linkedin||a.linkedin,google_scholar:s.google_scholar||a.google_scholar,researchgate:s.researchgate||a.researchgate,CV_file:a.CV_file||s.CV_file}))};return e.jsxs("div",{className:"pb-8 border border-gray-200 rounded",children:[e.jsxs("div",{className:"w-full bg-white pb-12 shadow-md relative mb-4",children:[e.jsxs("div",{className:"relative w-full h-48 overflow-hidden",children:[e.jsx("img",{src:`/storage/${t.background_image||"default-background.jpg"}`,alt:"Background",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>T(!0),className:"absolute top-4 right-4 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Background Image",children:"âœï¸"})]}),e.jsxs("div",{className:"relative flex flex-col items-center -mt-16 z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`/storage/${t.profile_picture||"default-profile.jpg"}`,alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"}),e.jsx("button",{onClick:xe,className:"absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full shadow-lg text-white hover:bg-blue-600","aria-label":"Edit Profile Picture",children:"âœï¸"})]}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:t.full_name}),t.highest_degree&&e.jsxs("p",{className:"text-gray-500",children:[t.highest_degree," in ",t.field_of_study]}),e.jsx("p",{className:"text-gray-500",children:t.current_position})]})]})]}),be&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Background Image"}),e.jsxs("form",{onSubmit:pe,children:[e.jsx("input",{type:"file",accept:"image/*",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",onChange:s=>l("background_image",s.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 mr-2",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),fe&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Update Profile Picture"}),e.jsxs("form",{onSubmit:he,children:[e.jsx("input",{type:"file",accept:"image/*",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",onChange:s=>l("profile_picture",s.target.files[0])}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 mr-2",children:"Save"}),e.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-8xl mx-auto flex md:space-x-12 space-x-4 px-4 sm:px-8",children:["Profiles","Publications"].map(s=>e.jsx("button",{className:`py-4 px-3 md:text-lg text-base font-semibold ${A.toLowerCase()===s.toLowerCase()?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{s.toLowerCase()==="publications"?window.location.href=route("role.publications"):ve(s.toLowerCase())},children:s},s))})}),j&&e.jsx(v,{show:j,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-lg font-medium",children:we}),e.jsxs("svg",{className:"animate-spin h-8 w-8 mt-4 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})]})})}),e.jsx(v,{show:D,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>w(!1),children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Generation Method"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Choose method:"}),e.jsxs("select",{className:"block w-full border-gray-300 rounded-md shadow-sm",value:N,onChange:s=>ee(s.target.value),children:[e.jsx("option",{value:"auto",children:"Auto search from Internet"}),e.jsx("option",{value:"url",children:"Use my provided URL(s)"}),e.jsx("option",{value:"cv",children:"Generate from CV"})]})]}),N==="url"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"The system will use the Website, LinkedIn, Google Scholar, and ResearchGate fields from your profile. You can also add extra URL(s) below if you wish."}),C.map((s,a)=>e.jsx("input",{type:"text",className:"block w-full border-gray-300 rounded-md shadow-sm p-2 mb-2",value:s,onChange:r=>oe(a,r.target.value),placeholder:"https://example.com/extra-info"},a)),e.jsx("button",{type:"button",onClick:ie,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-800",children:"Add URL"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>{w(!1),N==="cv"?ce():ne()},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-800",children:"Submit"})})]})})}),e.jsxs("div",{className:"w-full px-4 py-8",children:[A==="profiles"&&e.jsxs("section",{className:`${H} px-4`,children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your personal information."})]}),e.jsx("div",{className:"hidden sm:flex space-x-2 absolute top-0 right-0 mt-2 mr-2",children:e.jsx("button",{type:"button",onClick:W,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-800",children:"AI Generated Profile"})}),e.jsx("div",{className:"sm:hidden mt-4",children:e.jsx("button",{type:"button",onClick:W,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-800",children:"AI Generated Profile"})})]}),e.jsxs("form",{onSubmit:ge,className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"full_name",value:e.jsxs(e.Fragment,{children:["Full Name (Without Salutation) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsx(g,{id:"full_name",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.full_name,onChange:s=>l("full_name",s.target.value),required:!0,isFocused:!0,autoComplete:"full_name"}),e.jsx(d,{className:"mt-2",message:n.full_name})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"phone_number",value:"Phone Number"}),e.jsx(ke,{id:"phone_number",name:"phone_number",value:t.phone_number,defaultCountry:Pe(t.phone_number),onChange:s=>l("phone_number",s??""),placeholder:"Enter phone number"}),e.jsx(d,{className:"mt-2",message:n.phone_number})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"highest_degree",value:e.jsxs(e.Fragment,{children:["Highest Degree ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsxs("select",{id:"highest_degree",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.highest_degree||"",onChange:s=>l("highest_degree",s.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select your Highest Degree"}),e.jsx("option",{value:"Certificate",children:"Certificate"}),e.jsx("option",{value:"Diploma",children:"Diploma"}),e.jsx("option",{value:"Bachelor's Degree",children:"Bachelor's Degree"}),e.jsx("option",{value:"Master's Degree",children:"Master's Degree"}),e.jsx("option",{value:"Ph.D.",children:"Ph.D."}),e.jsx("option",{value:"Postdoctoral",children:"Postdoctoral"})]}),e.jsx(d,{className:"mt-2",message:n.highest_degree})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"field_of_study",value:e.jsxs(e.Fragment,{children:["Field of Study ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsx(g,{id:"field_of_study",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.field_of_study,onChange:s=>l("field_of_study",s.target.value)}),e.jsx(d,{className:"mt-2",message:n.field_of_study})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"CV_file",value:"Upload CV (Max 5MB)"}),e.jsx("input",{type:"file",id:"CV_file",accept:".pdf,.doc,.docx",className:"mt-1 block w-full border-gray-300 rounded-md py-2",onChange:s=>{const a=s.target.files[0];a&&(a.size<=5*1024*1024?l("CV_file",a):alert("File size exceeds 5MB. Please upload a smaller file."))}}),t.CV_file&&e.jsxs("div",{className:"mt-2",children:[typeof t.CV_file=="string"?e.jsxs("a",{href:`/storage/${t.CV_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline",children:["View Current File: ",t.CV_file.split("/").pop()]}):e.jsxs("p",{className:"text-sm text-gray-500",children:["File Selected: ",t.CV_file.name]}),e.jsx("button",{type:"button",onClick:()=>l("CV_file",""),className:"ml-3 text-xs text-red-600 hover:text-red-800",children:"Remove"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload your CV to enable CV-based profile generation and enhance your academic profile."}),e.jsx(d,{className:"mt-2",message:n.CV_file})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"bio",value:e.jsxs(e.Fragment,{children:["Short Bio ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsx("textarea",{id:"bio",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.bio,onChange:s=>l("bio",s.target.value),rows:4}),e.jsx(d,{className:"mt-2",message:n.bio})]})}),e.jsx("div",{className:"w-full",children:e.jsx(Fe,{value:t.research_expertise,onChange:s=>l("research_expertise",s),error:n.research_expertise,required:!0,label:"Research Expertise",placeholder:"Select your research areas..."})}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"postgraduate_program_ids",className:"block text-sm font-medium text-gray-700",children:"Associated Postgraduate Programs"}),e.jsx(X,{id:"postgraduate_program_ids",isMulti:!0,options:U.map(s=>({value:s.id,label:s.name})),className:"mt-1 block w-full",classNamePrefix:"select",value:U.map(s=>({value:s.id,label:s.name})).filter(s=>t.postgraduate_program_ids?.includes(s.value)),onChange:s=>{const a=(s||[]).map(r=>r.value);l("postgraduate_program_ids",a)},placeholder:"Select associated programs...",menuPortalTarget:document.body,styles:{menuPortal:s=>({...s,zIndex:9999})}})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ve,{value:t.skills,onChange:s=>l("skills",s),error:n.skills,required:!0,label:"Skills",placeholder:"Select your skills..."})}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"current_position",value:e.jsxs(e.Fragment,{children:["Current Position ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsxs("select",{id:"current_position",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.current_position,onChange:s=>l("current_position",s.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Position"}),e.jsx("option",{value:"Lecturer",children:"Lecturer"}),e.jsx("option",{value:"Senior Lecturer",children:"Senior Lecturer"}),e.jsx("option",{value:"Assoc. Prof.",children:"Associate Professor"}),e.jsx("option",{value:"Professor",children:"Professor"}),e.jsx("option",{value:"Postdoctoral Researcher",children:"Postdoctoral Researcher"}),e.jsx("option",{value:"Researcher",children:"Researcher"})]}),e.jsx(d,{className:"mt-2",message:n.current_position})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"department",value:e.jsxs(e.Fragment,{children:["Department ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsx(g,{id:"department",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.department,onChange:s=>l("department",s.target.value)}),e.jsx(d,{className:"mt-2",message:n.department})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:"availability_as_supervisor",value:e.jsxs(e.Fragment,{children:["Availability as Supervisor ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsxs("select",{id:"availability_as_supervisor",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.availability_as_supervisor?"true":"false",onChange:s=>l("availability_as_supervisor",s.target.value==="true"),children:[e.jsx("option",{value:"true",children:"Available"}),e.jsx("option",{value:"false",children:"Not Available"})]}),e.jsx(d,{className:"mt-2",message:n.availability_as_supervisor})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{htmlFor:"style_of_supervision",value:e.jsxs(e.Fragment,{children:["Style of Supervision ",e.jsx("span",{className:"text-red-600",children:"*"})]}),required:!0}),e.jsxs("div",{className:"group relative",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-500 hover:text-gray-700 cursor-help",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),e.jsxs("div",{className:"absolute left-0 w-80 p-4 bg-gray-800 text-white text-sm rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 -translate-x-1/2 translate-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Directive:"})," Structured approach with active guidance and regular monitoring"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Facilitative:"})," Supportive approach encouraging student independence"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Coaching:"})," Focuses on personal development and academic growth"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Adaptive:"})," Flexible support based on student's changing needs"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Participatory:"})," Collaborative approach with shared decision-making"]})]}),e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2",children:e.jsx("div",{className:"border-8 border-transparent border-b-gray-800"})})]})]})]}),e.jsx(X,{id:"style_of_supervision",isMulti:!0,options:[{value:"Directive Supervision",label:"Directive Supervision"},{value:"Facilitative Supervision",label:"Facilitative Supervision"},{value:"Coaching Supervision",label:"Coaching Supervision"},{value:"Adaptive Supervision",label:"Adaptive Supervision"},{value:"Participatory Supervision",label:"Participatory Supervision"}],className:"mt-1 block w-full",classNamePrefix:"select",value:Array.isArray(t.style_of_supervision)?t.style_of_supervision.map(s=>({value:s,label:s})):[],onChange:s=>{const a=s?s.map(r=>r.value):[];l("style_of_supervision",a)},menuPortalTarget:document.body,styles:{menuPortal:s=>({...s,zIndex:9999})}}),e.jsx(d,{className:"mt-2",message:n.style_of_supervision})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"personal_website",value:"Personal Website"}),e.jsx(g,{id:"personal_website",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.personal_website,onChange:s=>l("personal_website",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:n.personal_website})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"institution_website",value:"Institutional Website"}),e.jsx(g,{id:"institution_website",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.institution_website,onChange:s=>l("institution_website",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:n.institution_website})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"linkedin",value:"LinkedIn"}),e.jsx(g,{id:"linkedin",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.linkedin,onChange:s=>l("linkedin",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:n.linkedin})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"google_scholar",value:"Google Scholar"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(g,{id:"google_scholar",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.google_scholar,onChange:s=>l("google_scholar",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:n.google_scholar})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"researchgate",value:"ResearchGate"}),e.jsx(g,{id:"researchgate",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:t.researchgate,onChange:s=>l("researchgate",s.target.value),autoComplete:"url"}),e.jsx(d,{className:"mt-2",message:n.researchgate})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Se,{disabled:Q,children:"Save"}),e.jsx(v,{show:Z,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]}),A==="projects"&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"})]}),se&&e.jsx(Me,{onClose:()=>S(!1),onDownload:je}),z&&e.jsx(v,{show:z,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"Downloading CV, please wait..."}),e.jsxs("svg",{className:"animate-spin h-8 w-8 mt-4 text-blue-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})]})})}),G&&e.jsx(v,{show:G,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reminder"}),e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:'The "Generate CV" feature requires that your Website and Google Scholar fields are filled so that the system can extract data from those URLs.'}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>L(!1),className:"mr-2 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:_e,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-700",children:"Proceed"})]})]})})}),de&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50"}),e.jsx("div",{className:"relative w-auto my-6 mx-auto max-w-3xl z-50",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Upload CV for Profile Generation"}),e.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"Upload your CV to generate your profile. We support PDF, DOCX, DOC, and image formats."}),e.jsx("input",{type:"file",className:"mb-4 p-2 border rounded w-full",onChange:ue,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.tiff"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",onClick:()=>{F(!1),P(null)},disabled:V,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:me,disabled:!b||V,children:V?"Uploading...":"Upload & Generate Profile"})]})]})})]})]})}export{es as default};
