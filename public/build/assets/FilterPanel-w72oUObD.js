import{r as y,j as e}from"./app-BfGWvB7w.js";import{S as j}from"./react-select.esm-CIDgqLz7.js";import{f as M,F as E,g as C}from"./index-K6AC9O36.js";import"./floating-ui.dom-eiE65J5j.js";import"./iconBase-C2IzehuB.js";function B({searchType:o,searchResults:i,universities:$,faculties:q,researchOptions:k,skills:N,selectedArea:b,setSelectedArea:w,selectedUniversity:p,setSelectedUniversity:_,selectedAvailability:v,setSelectedAvailability:A,selectedSkills:n,setSelectedSkills:F,isOpen:d=!1,onClose:l}){const g=y.useRef(null);if(y.useEffect(()=>{function r(t){g.current&&!g.current.contains(t.target)&&d&&l&&l()}return d&&(document.addEventListener("mousedown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",r),document.body.style.overflow="unset"}},[d,l]),y.useEffect(()=>{function r(t){t.key==="Escape"&&d&&l&&l()}return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[d,l]),!d)return null;const m=(()=>{if(!i||!i.matches)return{researchAreas:[],universities:[],skills:[]};const r=new Set,t=new Set;i.matches.forEach(a=>{const s=a.academician||a.student||{},c=o==="supervisor"||o==="collaborators"&&a.result_type==="academician"?s.research_expertise:s.student_type==="postgraduate"?s.field_of_research:s.research_preference;Array.isArray(c)&&c.forEach(x=>{r.add(x)}),Array.isArray(s.skills)&&s.skills.forEach(x=>{x&&x.id&&t.add(x.id)})});const f=(Array.isArray(N)?N:[]).filter(a=>t.has(a.id)).map(a=>{let s=a.name;return a.subdomain&&a.subdomain.domain?s=`${a.subdomain.domain.name} - ${a.subdomain.name} - ${a.name}`:a.full_name?s=a.full_name:s=a.name,{value:a.id,label:s}}),h=Array.from(r).map(a=>{const s=k.find(c=>`${c.field_of_research_id}-${c.research_area_id}-${c.niche_domain_id}`===a);return s?{value:a,label:`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`}:{value:a,label:`${a}`}}),u=new Set;i.matches.forEach(a=>{const s=a.academician||a.student||{};s.university&&u.add(s.university.toString())});const P=Array.from(u).map(a=>{const s=$.find(c=>c.id.toString()===a);return{value:a,label:s?s.short_name:"Unknown University"}});return{researchAreas:h,universities:P,skills:f}})(),L=()=>{var r,t;if(o==="supervisor")return"Available for Supervision";if(o==="students")return"Looking for Supervision";if(o==="collaborators"){const f=(r=i==null?void 0:i.matches)==null?void 0:r.some(u=>u.result_type==="academician"),h=(t=i==null?void 0:i.matches)==null?void 0:t.some(u=>u.result_type!=="academician");return f&&!h?"Available for Collaboration":!f&&h?"Looking for Supervision":"Availability"}return"Availability"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 animate-fadeIn",onClick:l,"aria-hidden":"true"}),e.jsxs("div",{ref:g,className:`fixed top-0 right-0 h-full w-full sm:w-[420px] md:w-[480px] lg:w-[520px] 
                   bg-white shadow-2xl z-50 animate-slideInRight flex flex-col
                   safe-area-inset-right`,role:"dialog","aria-modal":"true","aria-labelledby":"filter-modal-title",children:[e.jsx("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 px-4 sm:px-6 py-4 sm:py-5 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{id:"filter-modal-title",className:"text-xl sm:text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(M,{className:"text-lg sm:text-xl flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Filters"})]}),e.jsx("p",{className:"text-blue-100 text-xs sm:text-sm mt-1 truncate",children:"Refine your search results"})]}),e.jsx("button",{onClick:l,className:`p-2 sm:p-2.5 rounded-lg bg-white/20 hover:bg-white/30 active:bg-white/40 
                       text-white transition-all duration-200 hover:scale-110 active:scale-95 
                       flex-shrink-0 touch-manipulation`,"aria-label":"Close filters",children:e.jsx(E,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-4 sm:py-6 space-y-5 sm:space-y-6",children:[(b.length>0||p.length>0||(n==null?void 0:n.length)>0||v)&&e.jsxs("div",{className:`bg-blue-50 border border-blue-200 rounded-xl px-3 sm:px-4 py-2.5 sm:py-3 
                          flex items-center gap-2 shadow-sm`,children:[e.jsx(C,{className:"text-blue-600 flex-shrink-0"}),e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-blue-900",children:[b.length+p.length+((n==null?void 0:n.length)||0)+(v?1:0)," filter(s) active"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900",children:"Research Area"}),e.jsx(j,{isMulti:!0,name:"researchAreas",options:m.researchAreas,value:m.researchAreas.filter(r=>b.includes(r.value)),onChange:r=>w(r?r.map(t=>t.value):[]),placeholder:"Select research areas...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0,styles:{control:r=>({...r,borderRadius:"0.75rem",borderColor:"#e5e7eb","&:hover":{borderColor:"#3b82f6"}})}})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900",children:"University"}),e.jsx(j,{isMulti:!0,name:"universities",options:m.universities,value:m.universities.filter(r=>p.includes(r.value)),onChange:r=>_(r?r.map(t=>t.value):[]),placeholder:"Select universities...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0,styles:{control:r=>({...r,borderRadius:"0.75rem",borderColor:"#e5e7eb","&:hover":{borderColor:"#3b82f6"}})}})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})})}),(o==="students"||o==="collaborators")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900",children:"Skills"}),e.jsx(j,{isMulti:!0,name:"skills",options:m.skills,value:m.skills.filter(r=>n==null?void 0:n.includes(r.value)),onChange:r=>F(r?r.map(t=>t.value):[]),placeholder:"Select skills...",className:"basic-multi-select",classNamePrefix:"select",isSearchable:!0,styles:{control:r=>({...r,borderRadius:"0.75rem",borderColor:"#e5e7eb","&:hover":{borderColor:"#3b82f6"}})}})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})})})]}),o!=="collaborators"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900",children:L()}),e.jsxs("select",{className:`mt-1 block w-full px-4 py-3 text-base border-gray-300 
                            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                            rounded-xl shadow-sm transition-all duration-200 bg-white hover:border-blue-400`,value:v,onChange:r=>A(r.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})})})]})]}),e.jsxs("div",{className:`border-t border-gray-200 px-4 sm:px-6 py-3 sm:py-4 bg-gray-50 space-y-2.5 sm:space-y-3 
                      shadow-lg sm:shadow-xl`,children:[e.jsxs("button",{className:`w-full px-4 sm:px-5 py-3 sm:py-3.5 
                     bg-white border-2 border-gray-300 hover:border-gray-400 active:border-gray-500
                     rounded-xl text-xs sm:text-sm font-semibold text-gray-700 
                     transition-all duration-200 hover:shadow-md active:scale-98
                     flex items-center justify-center gap-2 
                     touch-manipulation`,onClick:()=>{w([]),_([]),A(""),F([])},children:[e.jsx(E,{className:"text-gray-500 flex-shrink-0"}),e.jsx("span",{children:"Reset All Filters"})]}),e.jsxs("button",{className:`w-full px-4 sm:px-5 py-3 sm:py-3.5 
                     bg-gradient-to-r from-blue-600 to-purple-600 
                     hover:from-blue-700 hover:to-purple-700
                     active:from-blue-800 active:to-purple-800
                     rounded-xl text-xs sm:text-sm font-semibold text-white 
                     transition-all duration-200 hover:shadow-lg active:scale-98
                     flex items-center justify-center gap-2
                     touch-manipulation`,onClick:l,children:[e.jsx(C,{className:"flex-shrink-0"}),e.jsx("span",{children:"Apply Filters"})]})]})]})]})}export{B as default};
