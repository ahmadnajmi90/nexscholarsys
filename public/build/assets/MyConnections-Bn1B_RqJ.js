import{r as l,j as e,Y as _,y as d,b as q}from"./app-CcL8mqJg.js";import{M as A}from"./MainLayout-BrhqOSxE.js";import{a9 as w,L as U,aa as L,F as Y}from"./index-D26INkXh.js";import{C as E}from"./ConfirmationModal-BHitAyku.js";import"./useRoles-CyoACi4S.js";import"./analytics-BQ374C1C.js";import"./index-CIAO3bRK.js";const H=({acceptedConnections:u,receivedRequests:m,sentRequests:x})=>{const[a,f]=l.useState("connections"),[c,C]=l.useState(""),[R,i]=l.useState([]),[S,h]=l.useState(!1),[v,j]=l.useState(null),k=t=>t.academician?route("academicians.show",t.academician.url):t.postgraduate?route("postgraduates.show",t.postgraduate.url):t.undergraduate?route("undergraduates.show",t.undergraduate.url):"#",g=t=>{j(t),h(!0)},F=()=>{if(!v)return;const t=v.connection_id;i(s=>[...s,t]),d.delete(route("connections.destroy",t),{},{onSuccess:()=>{d.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})},onFinish:()=>{i(s=>s.filter(n=>n!==t)),h(!1),j(null)}})},b=t=>c?t.filter(s=>s.user.name.toLowerCase().includes(c.toLowerCase())):t,N=(t,s)=>{if(s!=="destroy"){i(r=>[...r,t]);const n=route(`connections.${s}`,t);d[s==="accept"?"patch":"delete"](n,{},{onSuccess:()=>{d.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})},onFinish:()=>{i(r=>r.filter(T=>T!==t))}})}else[...u,...x,...m].find(o=>o.connection_id===t)&&g({connection_id:t})},P=()=>e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>f("connections"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="connections"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"mr-2"}),"Connections",e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-700 py-0.5 px-2.5 rounded-full text-xs",children:u.length})]})}),e.jsx("button",{onClick:()=>f("received"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="received"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"mr-2"}),"Received Requests",e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-700 py-0.5 px-2.5 rounded-full text-xs",children:m.length})]})}),e.jsx("button",{onClick:()=>f("sent"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="sent"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"mr-2"}),"Sent Requests",e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-700 py-0.5 px-2.5 rounded-full text-xs",children:x.length})]})})]})}),$=()=>e.jsxs("div",{className:"relative w-full md:w-64 mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Y,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search connections...",value:c,onChange:t=>C(t.target.value)})]}),p=t=>{const{user:s,connection_id:n,status:o}=t,r=R.includes(n);return e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("div",{className:"h-12 w-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:s.profile_photo_url?e.jsx("img",{src:s.profile_photo_url,alt:`${s.name}'s profile`,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-blue-100 text-blue-500",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),s.role&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-1",children:s.role})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[a==="connections"&&e.jsx("button",{onClick:()=>g({connection_id:n}),disabled:r,className:`inline-flex items-center px-3 py-2 border border-red-300 text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Remove Connection"}),a==="received"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(n,"accept"),disabled:r,className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Accept"}),e.jsx("button",{onClick:()=>N(n,"reject"),disabled:r,className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Reject"})]}),a==="sent"&&e.jsx("button",{onClick:()=>g({connection_id:n}),disabled:r,className:`inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Cancel Request"}),e.jsx(q,{href:k(s),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"View Profile"})]})]},n)},y=t=>e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx(w,{className:"h-full w-full"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t})]}),M=()=>{switch(a){case"connections":const t=b(u);return e.jsx("div",{className:"mt-6",children:t.length>0?t.map(o=>p(o)):y(c?"No connections match your search":"You have no connections yet")});case"received":const s=b(m);return e.jsx("div",{className:"mt-6",children:s.length>0?s.map(o=>p(o)):y(c?"No requests match your search":"You have no pending requests")});case"sent":const n=b(x);return e.jsx("div",{className:"mt-6",children:n.length>0?n.map(o=>p(o)):y(c?"No requests match your search":"You have no sent requests")});default:return null}};return e.jsxs(A,{title:"My Network",children:[e.jsx(_,{title:"My Network"}),e.jsxs("div",{className:"mt-6",children:[$(),P(),M()]}),e.jsx(E,{show:S,onClose:()=>h(!1),onConfirm:F,title:"Remove Connection",message:"Are you sure you want to remove this connection? This action cannot be undone.",confirmButtonText:"Remove"})]})};export{H as default};
