import{r as s,j as r}from"./app-ZtklitGL.js";import{C as y,D as w}from"./index-DadOpaiR.js";import{V as i}from"./index-ByTRDgTY.js";import{B as f}from"./BookmarkHandler-BzED0HQG.js";const E=({bookmarkableType:l,bookmarkableId:n,category:u="general",className:x="",iconSize:c="text-lg",showText:b=!1,tooltipPosition:t="bottom"})=>{const[o,d]=s.useState(!1),[m,a]=s.useState(!0),[g,k]=s.useState(!1);s.useEffect(()=>{h()},[n,l]);const h=async()=>{a(!0);try{const e=await f.checkBookmarkStatus(l,n);d(e.is_bookmarked)}catch(e){console.error("Error checking bookmark status:",e)}finally{a(!1)}},p=async()=>{if(!m){a(!0);try{const e=await f.toggleBookmark(l,n,u);d(e.is_bookmarked),i.success(e.is_bookmarked?"Added to bookmarks":"Removed from bookmarks")}catch(e){console.error("Error toggling bookmark:",e),i.error("Failed to update bookmark. Please try again.")}finally{a(!1)}}};return r.jsxs("div",{className:`relative cursor-pointer ${x}`,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:[r.jsxs("button",{onClick:p,className:`flex items-center focus:outline-none ${o?"text-yellow-500":"text-gray-500 hover:text-yellow-500"} transition duration-200`,disabled:m,"aria-label":o?"Remove bookmark":"Add bookmark",children:[m?r.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):r.jsx(r.Fragment,{children:o?r.jsx(y,{className:c}):r.jsx(w,{className:c})}),b&&r.jsx("span",{className:"ml-1",children:o?"Bookmarked":"Bookmark"})]}),g&&r.jsxs("div",{className:`
          absolute z-50 w-max 
          ${t==="bottom"?"top-full mt-2 left-1/2 transform -translate-x-1/2":t==="top"?"bottom-full mb-2 left-1/2 transform -translate-x-1/2":t==="right"?"left-full ml-2 top-1/2 transform -translate-y-1/2":"right-full mr-2 top-1/2 transform -translate-y-1/2"} 
          px-3 py-2 text-sm font-medium text-gray-800 bg-white border border-gray-200 rounded-lg shadow-lg whitespace-nowrap
        `,children:[r.jsx("div",{className:`
            absolute w-3 h-3 bg-white transform rotate-45 border-gray-200
            ${t==="bottom"?"top-0 -translate-y-1/2 border-t border-l left-1/2 -translate-x-1/2":t==="top"?"bottom-0 translate-y-1/2 border-b border-r left-1/2 -translate-x-1/2":t==="right"?"left-0 -translate-x-1/2 border-l border-t top-1/2 -translate-y-1/2":"right-0 translate-x-1/2 border-r border-b top-1/2 -translate-y-1/2"}
          `}),r.jsx("div",{className:"relative z-10",children:o?"Remove from bookmarks":"Add to bookmarks"})]})]})};export{E as B};
