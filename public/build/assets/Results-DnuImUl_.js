import{j as e,R as G,r as i,b as V,y as Y,Y as Me,a as de}from"./app-A8xQkvSk.js";import{z as W}from"./transition-Bvb6H6Z4.js";import{y as K}from"./dialog-BkDQGxoj.js";import{G as ge}from"./graduation-cap-the7C-yQ.js";import{M as Be}from"./map-pin-BrAZ_DvI.js";import{C as Fe}from"./clock-CrVAeSun.js";import{U as me}from"./users-BaMPipud.js";import{D as Le}from"./dollar-sign-Bq2kjMHF.js";import{S as ye}from"./sparkles-CGG6vdsp.js";import{H as Te}from"./heart-BG1YsFcU.js";import{E as Pe}from"./external-link-RAq8nM7x.js";import{M as Ee}from"./MainLayout-CjLgp52Q.js";import{c as q,V as Oe}from"./index-Km-vM6Jb.js";import{T as Re,a as J,b as X,c as Z}from"./tooltip-Oo0Wz_lE.js";import $e from"./ProposalModal-DJ2-O5wZ.js";import{B as Ve}from"./BookmarkHandler-C_QiK5Hm.js";import{l as D}from"./logError-D4ezqrCx.js";import{B as xe}from"./house-DIYSl52k.js";import{c as je}from"./createLucideIcon-DPzobtnR.js";import{C as ee}from"./circle-check-ddCD_g9w.js";import{B as qe}from"./book-open-BGEy-0ob.js";import{F as De}from"./folder-kanban-B_adFrTw.js";import{U}from"./user-plus-e-4IYQ9U.js";import{E as Ue}from"./eye-B05lsJ9f.js";import{S as ue}from"./send-CXXTO7CN.js";import{S as he}from"./search-DyWR4m4c.js";import{A as pe}from"./arrow-left-DZv5Syj6.js";import"./zap-Dak04NKO.js";import"./folder-open-Bj-Qb-PO.js";import"./settings-CbyQhbcQ.js";import"./useRoles-DnA4fsnD.js";import"./chevron-left-BruLJFfn.js";import"./proxy-CKd5URLT.js";import"./user-round-CEZUuFcg.js";import"./clipboard-list-BtJRjBIa.js";import"./log-out-BebSIB5g.js";import"./calendar-EpaZ4Aad.js";import"./file-text-BfC4OSQU.js";import"./message-square-C9nAneZj.js";import"./building-NTAK_MKf.js";import"./building-2-BCJzFzaK.js";import"./database-DpVHQPSB.js";import"./shield-D8lNzSRy.js";import"./index-B4VpFx6V.js";import"./Dropdown-DkOdv60-.js";import"./analytics-BQ374C1C.js";import"./Modal-D_n_zj3N.js";import"./PrimaryButton-Dxc_ynbL.js";import"./SecondaryButton-BW8D4TTl.js";import"./x-vL7g-LuD.js";import"./briefcase-CfUq1pnR.js";import"./user-yqODNyIj.js";import"./index-BEzQHz4a.js";import"./index-7Qlnuq3l.js";import"./index-BlKfbGK4.js";import"./index-OrEFxIKi.js";import"./index-DwuY8lh1.js";import"./index-Cp2nhW7C.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-Db3xrL5F.js";import"./index-DMPy21CI.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";import"./dialog-Bzt3rBy_.js";import"./Combination-Bf5eV4ml.js";import"./tslib.es6-CmEaCU22.js";import"./button-Dz_rydmG.js";import"./input-D2p8biwd.js";import"./textarea-DGdKxzUN.js";import"./label-BcrT7TVM.js";import"./index-Dp3B9jqt.js";import"./alert-BBFXwXFc.js";import"./checkbox-DDgIuOJc.js";import"./index-rTP0VXgG.js";import"./check-BeDd_wJ7.js";import"./lightbulb-CqLRSIqT.js";import"./cloud-upload-znqQn_dB.js";import"./paperclip-DJjI9uOh.js";import"./loader-circle-DkpR38mE.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],ze=je("BookmarkPlus",Ye);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],fe=je("Filter",He);function be({isOpen:t,onClose:l,title:r="AI Insight",content:h=""}){return e.jsx(W.Root,{show:t,as:G.Fragment,children:e.jsxs(K,{as:"div",className:"relative z-50",onClose:l,children:[e.jsx(W.Child,{as:G.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/30"})}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(W.Child,{as:G.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:e.jsxs(K.Panel,{className:"w-full max-w-lg transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(K.Title,{className:"text-lg font-semibold text-gray-900 mb-2",children:r}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed text-sm",children:h}),e.jsx("div",{className:"mt-6 text-right",children:e.jsx("button",{onClick:l,className:"inline-flex items-center px-4 py-2 text-sm rounded-md border border-gray-300 bg-white hover:bg-gray-50",children:"Close"})})]})})})})]})})}function Qe({rec:t,onViewSupervisors:l}){var S,j,k,g;const r=t.postgraduate_program;if(!r)return null;const h=r.name||"Postgraduate Program",p=((S=r.university)==null?void 0:S.name)||((j=r.university)==null?void 0:j.full_name)||((k=r.university)==null?void 0:k.short_name)||"Unknown University",d=((g=r.faculty)==null?void 0:g.name)||"",b=typeof t.match_score=="number"?Math.round(t.match_score*100):null,m=b!==null?`${b}%`:"-",[f,y]=i.useState(!1),N=t.justification||"",x=r.duration_years||"",_=r.funding_info||"",A=r.country||"";return e.jsxs("div",{className:"border rounded-xl p-5 bg-white flex flex-col h-full shadow-sm transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-50 border border-blue-200 flex items-center justify-center flex-shrink-0",children:e.jsx(ge,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",title:h,children:h}),e.jsx("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:e.jsx("span",{className:"truncate",title:d?`${d}, ${p}`:p,children:d?`${d}`:""})})]})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-green-50 border border-green-200 text-green-700 text-xs font-semibold text-right",children:[m," ",e.jsx("span",{className:"font-normal text-[11px] text-green-700",children:"Match"})]})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-x-4 gap-y-2 text-sm text-gray-700",children:[p&&e.jsxs("div",{className:"col-span-2 flex items-center",children:[e.jsx(Be,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsxs("span",{children:[p,", ",A]})]}),x&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsxs("span",{children:[x," years"]})]}),typeof r.supervisors_count=="number"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsxs("span",{children:[r.supervisors_count," Supervisors"]})]}),_&&e.jsxs("div",{className:"col-span-2 flex items-center text-green-600",children:[e.jsx(Le,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-green-700",children:_})]})]}),N&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-800 font-semibold",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"AI Insight"})]}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsx("p",{className:"leading-relaxed line-clamp-3",children:N})}),N.length>200&&e.jsx("button",{onClick:()=>y(!0),className:"mt-2 text-xs text-blue-700 hover:underline",children:"Show More…"}),e.jsx(be,{isOpen:f,onClose:()=>y(!1),title:"AI Insight",content:N})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>l(r),className:"inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:[e.jsx(me,{className:"w-4 h-4 mr-2"})," View Supervisors"]}),e.jsxs("button",{className:"px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50 flex items-center",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"})," Save"]}),r.application_url&&e.jsxs("a",{href:r.application_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border rounded text-sm hover:bg-gray-50",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"})," Program Details"]})]})]})}function Ge({supervisor:t,requests:l=[],activeRelationship:r=null,onRequestSubmitted:h}){var ae,ne,ie,le,oe,ce;if(!t)return null;const[p,d]=i.useState(!1),b=t.name||"Supervisor";console.log(t);const m=t.current_position||"",f=((ae=t.university)==null?void 0:ae.name)||((ne=t.university)==null?void 0:ne.full_name)||"",y=typeof t.match_score=="number"?Math.round(t.match_score*100):null,N=t.accepting_students!==!1,x=Array.isArray(t.research_areas)?t.research_areas:[],_=t.publications_count??0,A=t.post_projects_count??0,[S,j]=i.useState(!1),[k,g]=i.useState(!1),w=t.justification||"",s=t.academician||{},n=s.user||t.user||null,M=p?x:x.slice(0,1),[v,C]=i.useState(!1),[z,T]=i.useState(((ie=n==null?void 0:n.connection_status_with_auth_user)==null?void 0:ie.status)||"not_connected"),[P,E]=i.useState(((le=n==null?void 0:n.connection_status_with_auth_user)==null?void 0:le.connection_id)||null),[B,O]=i.useState(!0),[I,te]=i.useState(!1),[We,se]=i.useState(!0),[Ke,Ne]=i.useState(!1),we="academician",H=s.id||((ce=(oe=t==null?void 0:t.user)==null?void 0:oe.academician)==null?void 0:ce.academician_id)||t.academician_id||t.id,c=i.useMemo(()=>{var a,o;return((o=(a=t==null?void 0:t.user)==null?void 0:a.academician)==null?void 0:o.academician_id)??(s==null?void 0:s.academician_id)??(t==null?void 0:t.academician_id)??(t==null?void 0:t.id)},[t,s]),F=i.useMemo(()=>!Array.isArray(l)||!c?null:l.find(a=>["cancelled","auto_cancelled","rejected"].includes(a.status)?!1:String(a.academician_id??"")===String(c)),[l,c]),R=i.useMemo(()=>!r||!c?!1:String(r.academician_id)===String(c),[r,c]),$=!!r;i.useEffect(()=>{let a=!0;async function o(){var u;if(!c){O(!1);return}try{const L=await V.get(route("supervision.shortlist.index"));if(a){const Ie=(((u=L.data)==null?void 0:u.data)||[]).some(Ae=>String(Ae.academician_id)===String(c));te(Ie)}}catch{}finally{a&&O(!1)}}return o(),()=>{a=!1}},[c]),i.useEffect(()=>{let a=!0;async function o(){try{const u=await Ve.checkBookmarkStatus(we,H);a&&Ne(!!u.is_bookmarked)}catch{}finally{a&&se(!1)}}return H?o():se(!1),()=>{a=!1}},[H]);const ve=async()=>{if(n!=null&&n.id){C(!0);try{const a=await V.post(route("api.app.connections.store",n.id));a.data&&a.data.connection&&(T("pending_sent"),E(a.data.connection.id))}catch(a){D(a,"SupervisorCard connect")}finally{C(!1)}}},_e=async()=>{if(P){C(!0);try{await V.patch(route("api.app.connections.accept",P)),T("connected")}catch(a){D(a,"SupervisorCard acceptRequest")}finally{C(!1)}}},Se=async()=>{var a,o;if(!(B||I||$)){O(!0);try{if(!c){D(new Error("Missing academician identifier"),"SupervisorCard shortlist"),q.error("Cannot save supervisor right now. Please try again later.");return}await V.post(route("supervision.shortlist.store"),{academician_id:String(c),postgraduate_program_id:t.postgraduate_program_id??null}),te(!0),q.success("Added to Potential Supervisors")}catch(u){D(u,"SupervisorCard shortlist"),q.error(((o=(a=u.response)==null?void 0:a.data)==null?void 0:o.message)||"Failed to save")}finally{O(!1)}}},ke=()=>{g(!1),h==null||h()},re=()=>{if($&&!R){q.error("You already have an active supervision relationship.");return}F||R?(sessionStorage.setItem("openRequestId",(F==null?void 0:F.id)||""),Y.visit(route("supervision.student.index"),{preserveState:!1,preserveScroll:!1})):g(!0)},Ce=i.useMemo(()=>{var o,u,L,Q;return{...t,academician:{full_name:t.name||s.full_name||"Supervisor",current_position:t.current_position||s.current_position||m||"",university:t.university||{name:((o=t.university)==null?void 0:o.name)||((u=s.university)==null?void 0:u.name)||f||""},universityDetails:{full_name:((L=t.university)==null?void 0:L.full_name)||((Q=s.universityDetails)==null?void 0:Q.full_name)||f||""},research_domains:t.research_domains||s.research_domains||[],academician_id:c,url:s.url||t.url||null},user:n,postgraduate_program_id:t.postgraduate_program_id}},[t,s,c,n,m,f]);return s.url||t.url,t!=null&&t.email,e.jsxs(Re,{delayDuration:0,children:[e.jsxs("div",{className:"border rounded-xl p-5 bg-white shadow-sm transition-all duration-200 ease-in-out hover:shadow-lg hover:ring-2 hover:ring-indigo-200 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 border border-indigo-200 flex items-center justify-center",children:e.jsx("img",{src:t.avatar_url!==null?`/storage/${t.avatar_url}`:"/storage/profile_pictures/default.jpg",alt:b,className:"w-full h-full object-cover rounded-full"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:b}),m&&e.jsx("p",{className:"text-sm text-gray-600 truncate font-normal",children:m}),f&&e.jsx("p",{className:"text-xs text-gray-500 truncate font-normal",children:f})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!$&&e.jsxs(J,{children:[e.jsx(X,{asChild:!0,children:e.jsxs("button",{onClick:Se,disabled:B||I,className:`inline-flex items-center justify-center h-8 w-8 border rounded-md text-sm font-medium transition-colors ${I?"border-indigo-300 bg-indigo-50 text-indigo-600":"border-gray-300 bg-white text-gray-600 hover:bg-gray-50"} disabled:opacity-50`,children:[e.jsx("span",{className:"sr-only",children:I?"Already in potential supervisors":"Add to potential supervisors"}),I?e.jsx(xe,{className:"w-4 h-4 fill-current"}):e.jsx(ze,{className:"w-4 h-4"})]})}),e.jsx(Z,{children:e.jsx("p",{children:I?"Already in Potential Supervisors":"Add to Potential Supervisors"})})]}),R&&e.jsxs(J,{children:[e.jsx(X,{asChild:!0,children:e.jsxs("button",{disabled:!0,className:"inline-flex items-center justify-center h-8 w-8 border border-indigo-300 bg-indigo-50 text-indigo-600 rounded-md text-sm font-medium",children:[e.jsx("span",{className:"sr-only",children:"Your current supervisor"}),e.jsx(xe,{className:"w-4 h-4 fill-current"})]})}),e.jsx(Z,{children:e.jsx("p",{children:"Your Current Supervisor"})})]}),y!==null&&e.jsxs("div",{className:"px-2.5 py-1 rounded-full bg-green-50 border border-green-200 text-green-700 text-xs font-semibold",children:[y,"% ",e.jsx("span",{className:"font-normal text-[11px]",children:"Match"})]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm text-gray-600",children:[N&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 text-green-700",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Accepting Students"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"w-4 h-4 mr-1.5 text-gray-400"}),e.jsxs("span",{children:[_," Publications"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(De,{className:"w-4 h-4 mr-1.5 text-gray-400"}),e.jsxs("span",{children:[A," Projects"]})]})]}),x.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-2",children:"Research Areas:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.map((a,o)=>e.jsx("span",{className:"px-2.5 py-1 text-xs rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:a},o)),x.length>1&&e.jsx("button",{onClick:()=>d(!p),className:"px-2.5 py-1 text-xs rounded-full bg-indigo-50 text-indigo-700 border border-indigo-200 hover:bg-indigo-100 transition-colors",children:p?"Show less":`+${x.length-1} more`})]})]}),w&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-800 font-semibold",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"AI Insight"})]}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsx("p",{className:"leading-relaxed line-clamp-3",children:w})}),w.length>200&&e.jsx("button",{onClick:()=>j(!0),className:"mt-2 text-xs text-blue-700 hover:underline",children:"Show More…"}),e.jsx(be,{isOpen:S,onClose:()=>j(!1),title:"AI Insight",content:w})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 pt-4 border-t",children:[(()=>{if(v)return e.jsx("button",{className:"inline-flex items-center justify-center px-4 py-2 bg-gray-400 text-white rounded-md text-sm font-medium flex-1",disabled:!0,children:"Processing..."});switch(z){case"connected":return e.jsxs("button",{className:"inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium flex-1",disabled:!0,children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Connected"]});case"pending_sent":return e.jsxs("button",{className:"inline-flex items-center justify-center px-4 py-2 bg-gray-400 text-white rounded-md text-sm font-medium flex-1",disabled:!0,children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Pending"]});case"pending_received":return e.jsxs("button",{onClick:_e,className:"inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 flex-1",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Accept"]});case"not_connected":default:return e.jsxs("button",{onClick:ve,className:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 flex-1",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Connect"]})}})(),$?R?e.jsxs("button",{onClick:re,className:"inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium flex-1 border-2 border-green-500 bg-green-50 text-green-700",children:[e.jsx(ee,{className:"w-4 h-4 mr-2 fill-current"}),"Your Current Supervisor"]}):e.jsxs(J,{children:[e.jsx(X,{asChild:!0,children:e.jsxs("button",{disabled:!0,className:"inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium flex-1 border border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Request Supervision"]})}),e.jsx(Z,{children:e.jsx("p",{children:"You already have an active supervision relationship"})})]}):e.jsx("button",{onClick:re,className:"inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium flex-1 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",children:F?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"View Request"]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Request Supervision"]})})]})]}),e.jsx($e,{isOpen:k,supervisor:Ce,onClose:()=>g(!1),onSubmitted:ke})]})}function ws({recommendations:t=[],selectedProgram:l=null,supervisors:r=[],requests:h=[],activeRelationship:p=null}){var g,w;const[d,b]=i.useState(""),[m,f]=i.useState(""),[y,N]=i.useState("match_score_desc"),x=l?"Available Supervisors":"Postgraduate Program Recommendations",_=s=>{if(!(s!=null&&s.id))return Oe.error("Program not found");Y.get(route("postgraduate-recommendations.supervisors",s.id))},A=()=>{Y.get(route("postgraduate-recommendations.results"))},S=()=>{Y.reload()},j=i.useMemo(()=>{let s=Array.isArray(t)?t.slice():[];if(d){const n=d.toLowerCase();s=s.filter(M=>{var E,B;const v=M.postgraduate_program;if(!v)return!1;const C=(v.name||"").toLowerCase().includes(n),z=(((E=v.university)==null?void 0:E.name)||"").toLowerCase().includes(n),T=(((B=v.faculty)==null?void 0:B.name)||"").toLowerCase().includes(n),P=(v.country||"").toLowerCase().includes(n);return C||z||T||P})}return y==="match_score_desc"&&s.sort((n,M)=>(M.match_score||0)-(n.match_score||0)),s},[t,d,y]),k=i.useMemo(()=>{if(!m)return r;const s=m.toLowerCase();return r.filter(n=>(n.name||"").toLowerCase().includes(s))},[r,m]);return e.jsx(Ee,{title:x,children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsx(Me,{title:x}),l?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{className:"text-sm text-gray-600 hover:text-gray-900 flex items-center",onClick:A,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Back to All Programs"]}),e.jsx("div",{className:"mt-2 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{className:"flex flex-col ml-1",children:[e.jsx("h2",{className:"text-m font-normal text-blue-900",children:l==null?void 0:l.name}),e.jsxs("p",{className:"text-sm text-blue-600",children:[(g=l==null?void 0:l.faculty)==null?void 0:g.name,", ",(w=l==null?void 0:l.university)==null?void 0:w.full_name]})]})]})})]}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 w-full md:max-w-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 border border-gray-300 rounded-md px-3 bg-white",children:[e.jsx(he,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:m,onChange:s=>f(s.target.value),placeholder:"Search supervisors...",className:"border border-white w-full text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none"})]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(fe,{className:"w-4 h-4"}),"Filters"]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[k.map(s=>e.jsx(Ge,{supervisor:s,requests:h,activeRelationship:p,onRequestSubmitted:S},s.id)),r.length===0&&e.jsx("div",{className:"text-center text-gray-600 py-10 col-span-2",children:"No supervisors found for this program."})]}),r.length>0&&e.jsxs("div",{className:"text-center mt-12 py-8 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Want to explore other programs? Check out our other recommendations."}),e.jsxs(de,{href:route("postgraduate-recommendations.results"),className:"inline-flex items-center px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Back to All Programs"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-start gap-3 bg-green-50 border border-green-200 text-green-900 px-4 py-3 rounded-md mb-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex flex-col ml-1 text-sm",children:[e.jsx("p",{className:"font-semibold",children:"Analysis Complete!"}),e.jsxs("p",{children:["We found ",j.length," highly compatible Postgraduate Programs based on your profile and research interests."]})]})]})}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 w-full md:max-w-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 border border-gray-300 rounded-md px-3 bg-white",children:[e.jsx(he,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:d,onChange:s=>b(s.target.value),placeholder:"Search programs, universities, or research areas...",className:"border border-white w-full text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none"})]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md bg-white text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(fe,{className:"w-4 h-4"}),"Filters"]})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-5",children:j.map((s,n)=>e.jsx(Qe,{rec:s,onViewSupervisors:()=>_(s.postgraduate_program)},n))}),e.jsxs("div",{className:"text-center mt-12 py-8 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Not seeing the perfect program? Try refining your search or contact our academic advisors."}),e.jsx(de,{href:route("postgraduate-recommendations.index"),className:"inline-flex items-center px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Refine Search Criteria"})]})]})]})})}export{ws as default};
