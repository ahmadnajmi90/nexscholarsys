import{g as K,r as _,R as M,j as n,b as q,a as W}from"./app-DL56HMWY.js";import{U as je,I as se,J as ie,V as Ce,K as oe,W as Oe,X as Pe,Y as Re,n as Le,q as V}from"./index-DW3rINU9.js";import{u as ke}from"./useRoles-B57dLKL1.js";import{P as y}from"./index-SDNmfY3R.js";import{t as Ie,a as Me}from"./analytics-BQ374C1C.js";import{B as He}from"./BookmarkButton-tjS3yyCm.js";import{p as De}from"./purify.es-B2xYLbnv.js";import{c as le}from"./index-MIm5SXlJ.js";import"./iconBase-EXCUzhmP.js";import"./index-DKGVGZDq.js";import"./BookmarkHandler-7rTvVqmn.js";function Fe(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var ge=_,Ue=Fe(ge);function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Be(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var qe=!!(typeof window<"u"&&window.document&&window.document.createElement);function $e(e,t,a){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof a<"u"&&typeof a!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(s){return s.displayName||s.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var u=[],o;function l(){o=e(u.map(function(d){return d.props})),c.canUseDOM?t(o):a&&(o=a(o))}var c=function(d){Be(m,d);function m(){return d.apply(this,arguments)||this}m.peek=function(){return o},m.rewind=function(){if(m.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var T=o;return o=void 0,u=[],T};var p=m.prototype;return p.UNSAFE_componentWillMount=function(){u.push(this),l()},p.componentDidUpdate=function(){l()},p.componentWillUnmount=function(){var T=u.indexOf(this);u.splice(T,1),l()},p.render=function(){return Ue.createElement(i,this.props)},m}(ge.PureComponent);return ce(c,"displayName","SideEffect("+r(i)+")"),ce(c,"canUseDOM",qe),c}}var Ge=$e;const Ye=K(Ge);var ze=typeof Element<"u",We=typeof Map=="function",Ve=typeof Set=="function",Xe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function $(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var a,r,s;if(Array.isArray(e)){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!$(e[r],t[r]))return!1;return!0}var i;if(We&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;for(i=e.entries();!(r=i.next()).done;)if(!$(r.value[1],t.get(r.value[0])))return!1;return!0}if(Ve&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Xe&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(s=Object.keys(e),a=s.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;if(ze&&e instanceof Element)return!1;for(r=a;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&e.$$typeof)&&!$(e[s[r]],t[s[r]]))return!1;return!0}return e!==e&&t!==t}var Je=function(t,a){try{return $(t,a)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Qe=K(Je);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ue=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;function et(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function tt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;var r=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(r.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var nt=tt()?Object.assign:function(e,t){for(var a,r=et(e),s,i=1;i<arguments.length;i++){a=Object(arguments[i]);for(var u in a)Ze.call(a,u)&&(r[u]=a[u]);if(ue){s=ue(a);for(var o=0;o<s.length;o++)Ke.call(a,s[o])&&(r[s[o]]=a[s[o]])}}return r};const rt=K(nt);var P={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},f={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(f).map(function(e){return f[e]});var v={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},G={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},H={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},at=Object.keys(G).reduce(function(e,t){return e[G[t]]=t,e},{}),st=[f.NOSCRIPT,f.SCRIPT,f.STYLE],N="data-react-helmet",it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},lt=function(){function e(t,a){for(var r=0;r<a.length;r++){var s=a[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ct=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},de=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a},ut=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},J=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return a===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},dt=function(t){var a=L(t,f.TITLE),r=L(t,H.TITLE_TEMPLATE);if(r&&a)return r.replace(/%s/g,function(){return Array.isArray(a)?a.join(""):a});var s=L(t,H.DEFAULT_TITLE);return a||s||void 0},ft=function(t){return L(t,H.ON_CHANGE_CLIENT_STATE)||function(){}},X=function(t,a){return a.filter(function(r){return typeof r[t]<"u"}).map(function(r){return r[t]}).reduce(function(r,s){return x({},r,s)},{})},mt=function(t,a){return a.filter(function(r){return typeof r[f.BASE]<"u"}).map(function(r){return r[f.BASE]}).reverse().reduce(function(r,s){if(!r.length)for(var i=Object.keys(s),u=0;u<i.length;u++){var o=i[u],l=o.toLowerCase();if(t.indexOf(l)!==-1&&s[l])return r.concat(s)}return r},[])},k=function(t,a,r){var s={};return r.filter(function(i){return Array.isArray(i[t])?!0:(typeof i[t]<"u"&&yt("Helmet: "+t+' should be of type "Array". Instead found type "'+it(i[t])+'"'),!1)}).map(function(i){return i[t]}).reverse().reduce(function(i,u){var o={};u.filter(function(p){for(var g=void 0,T=Object.keys(p),w=0;w<T.length;w++){var E=T[w],A=E.toLowerCase();a.indexOf(A)!==-1&&!(g===v.REL&&p[g].toLowerCase()==="canonical")&&!(A===v.REL&&p[A].toLowerCase()==="stylesheet")&&(g=A),a.indexOf(E)!==-1&&(E===v.INNER_HTML||E===v.CSS_TEXT||E===v.ITEM_PROP)&&(g=E)}if(!g||!p[g])return!1;var C=p[g].toLowerCase();return s[g]||(s[g]={}),o[g]||(o[g]={}),s[g][C]?!1:(o[g][C]=!0,!0)}).reverse().forEach(function(p){return i.push(p)});for(var l=Object.keys(o),c=0;c<l.length;c++){var d=l[c],m=rt({},s[d],o[d]);s[d]=m}return i},[]).reverse()},L=function(t,a){for(var r=t.length-1;r>=0;r--){var s=t[r];if(s.hasOwnProperty(a))return s[a]}return null},ht=function(t){return{baseTag:mt([v.HREF,v.TARGET],t),bodyAttributes:X(P.BODY,t),defer:L(t,H.DEFER),encode:L(t,H.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:X(P.HTML,t),linkTags:k(f.LINK,[v.REL,v.HREF],t),metaTags:k(f.META,[v.NAME,v.CHARSET,v.HTTPEQUIV,v.PROPERTY,v.ITEM_PROP],t),noscriptTags:k(f.NOSCRIPT,[v.INNER_HTML],t),onChangeClientState:ft(t),scriptTags:k(f.SCRIPT,[v.SRC,v.INNER_HTML],t),styleTags:k(f.STYLE,[v.CSS_TEXT],t),title:dt(t),titleAttributes:X(P.TITLE,t)}},Q=function(){var e=Date.now();return function(t){var a=Date.now();a-e>16?(e=a,t(a)):setTimeout(function(){Q(t)},0)}}(),fe=function(t){return clearTimeout(t)},pt=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Q:global.requestAnimationFrame||Q,gt=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||fe:global.cancelAnimationFrame||fe,yt=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},I=null,vt=function(t){I&&gt(I),t.defer?I=pt(function(){me(t,function(){I=null})}):(me(t),I=null)},me=function(t,a){var r=t.baseTag,s=t.bodyAttributes,i=t.htmlAttributes,u=t.linkTags,o=t.metaTags,l=t.noscriptTags,c=t.onChangeClientState,d=t.scriptTags,m=t.styleTags,p=t.title,g=t.titleAttributes;Z(f.BODY,s),Z(f.HTML,i),xt(p,g);var T={baseTag:R(f.BASE,r),linkTags:R(f.LINK,u),metaTags:R(f.META,o),noscriptTags:R(f.NOSCRIPT,l),scriptTags:R(f.SCRIPT,d),styleTags:R(f.STYLE,m)},w={},E={};Object.keys(T).forEach(function(A){var C=T[A],S=C.newTags,D=C.oldTags;S.length&&(w[A]=S),D.length&&(E[A]=T[A].oldTags)}),a&&a(),c(t,w,E)},ye=function(t){return Array.isArray(t)?t.join(""):t},xt=function(t,a){typeof t<"u"&&document.title!==t&&(document.title=ye(t)),Z(f.TITLE,a)},Z=function(t,a){var r=document.getElementsByTagName(t)[0];if(r){for(var s=r.getAttribute(N),i=s?s.split(","):[],u=[].concat(i),o=Object.keys(a),l=0;l<o.length;l++){var c=o[l],d=a[c]||"";r.getAttribute(c)!==d&&r.setAttribute(c,d),i.indexOf(c)===-1&&i.push(c);var m=u.indexOf(c);m!==-1&&u.splice(m,1)}for(var p=u.length-1;p>=0;p--)r.removeAttribute(u[p]);i.length===u.length?r.removeAttribute(N):r.getAttribute(N)!==o.join(",")&&r.setAttribute(N,o.join(","))}},R=function(t,a){var r=document.head||document.querySelector(f.HEAD),s=r.querySelectorAll(t+"["+N+"]"),i=Array.prototype.slice.call(s),u=[],o=void 0;return a&&a.length&&a.forEach(function(l){var c=document.createElement(t);for(var d in l)if(l.hasOwnProperty(d))if(d===v.INNER_HTML)c.innerHTML=l.innerHTML;else if(d===v.CSS_TEXT)c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{var m=typeof l[d]>"u"?"":l[d];c.setAttribute(d,m)}c.setAttribute(N,"true"),i.some(function(p,g){return o=g,c.isEqualNode(p)})?i.splice(o,1):u.push(c)}),i.forEach(function(l){return l.parentNode.removeChild(l)}),u.forEach(function(l){return r.appendChild(l)}),{oldTags:i,newTags:u}},ve=function(t){return Object.keys(t).reduce(function(a,r){var s=typeof t[r]<"u"?r+'="'+t[r]+'"':""+r;return a?a+" "+s:s},"")},Tt=function(t,a,r,s){var i=ve(r),u=ye(a);return i?"<"+t+" "+N+'="true" '+i+">"+J(u,s)+"</"+t+">":"<"+t+" "+N+'="true">'+J(u,s)+"</"+t+">"},bt=function(t,a,r){return a.reduce(function(s,i){var u=Object.keys(i).filter(function(c){return!(c===v.INNER_HTML||c===v.CSS_TEXT)}).reduce(function(c,d){var m=typeof i[d]>"u"?d:d+'="'+J(i[d],r)+'"';return c?c+" "+m:m},""),o=i.innerHTML||i.cssText||"",l=st.indexOf(t)===-1;return s+"<"+t+" "+N+'="true" '+u+(l?"/>":">"+o+"</"+t+">")},"")},xe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,s){return r[G[s]||s]=t[s],r},a)},wt=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,s){return r[at[s]||s]=t[s],r},a)},Et=function(t,a,r){var s,i=(s={key:a},s[N]=!0,s),u=xe(r,i);return[M.createElement(f.TITLE,u,a)]},At=function(t,a){return a.map(function(r,s){var i,u=(i={key:s},i[N]=!0,i);return Object.keys(r).forEach(function(o){var l=G[o]||o;if(l===v.INNER_HTML||l===v.CSS_TEXT){var c=r.innerHTML||r.cssText;u.dangerouslySetInnerHTML={__html:c}}else u[l]=r[o]}),M.createElement(t,u)})},j=function(t,a,r){switch(t){case f.TITLE:return{toComponent:function(){return Et(t,a.title,a.titleAttributes)},toString:function(){return Tt(t,a.title,a.titleAttributes,r)}};case P.BODY:case P.HTML:return{toComponent:function(){return xe(a)},toString:function(){return ve(a)}};default:return{toComponent:function(){return At(t,a)},toString:function(){return bt(t,a,r)}}}},Te=function(t){var a=t.baseTag,r=t.bodyAttributes,s=t.encode,i=t.htmlAttributes,u=t.linkTags,o=t.metaTags,l=t.noscriptTags,c=t.scriptTags,d=t.styleTags,m=t.title,p=m===void 0?"":m,g=t.titleAttributes;return{base:j(f.BASE,a,s),bodyAttributes:j(P.BODY,r,s),htmlAttributes:j(P.HTML,i,s),link:j(f.LINK,u,s),meta:j(f.META,o,s),noscript:j(f.NOSCRIPT,l,s),script:j(f.SCRIPT,c,s),style:j(f.STYLE,d,s),title:j(f.TITLE,{title:p,titleAttributes:g},s)}},Nt=function(t){var a,r;return r=a=function(s){ct(i,s);function i(){return ot(this,i),ut(this,s.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(o){return!Qe(this.props,o)},i.prototype.mapNestedChildrenToProps=function(o,l){if(!l)return null;switch(o.type){case f.SCRIPT:case f.NOSCRIPT:return{innerHTML:l};case f.STYLE:return{cssText:l}}throw new Error("<"+o.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(o){var l,c=o.child,d=o.arrayTypeChildren,m=o.newChildProps,p=o.nestedChildren;return x({},d,(l={},l[c.type]=[].concat(d[c.type]||[],[x({},m,this.mapNestedChildrenToProps(c,p))]),l))},i.prototype.mapObjectTypeChildren=function(o){var l,c,d=o.child,m=o.newProps,p=o.newChildProps,g=o.nestedChildren;switch(d.type){case f.TITLE:return x({},m,(l={},l[d.type]=g,l.titleAttributes=x({},p),l));case f.BODY:return x({},m,{bodyAttributes:x({},p)});case f.HTML:return x({},m,{htmlAttributes:x({},p)})}return x({},m,(c={},c[d.type]=x({},p),c))},i.prototype.mapArrayTypeChildrenToProps=function(o,l){var c=x({},l);return Object.keys(o).forEach(function(d){var m;c=x({},c,(m={},m[d]=o[d],m))}),c},i.prototype.warnOnInvalidChildren=function(o,l){return!0},i.prototype.mapChildrenToProps=function(o,l){var c=this,d={};return M.Children.forEach(o,function(m){if(!(!m||!m.props)){var p=m.props,g=p.children,T=de(p,["children"]),w=wt(T);switch(c.warnOnInvalidChildren(m,g),m.type){case f.LINK:case f.META:case f.NOSCRIPT:case f.SCRIPT:case f.STYLE:d=c.flattenArrayTypeChildren({child:m,arrayTypeChildren:d,newChildProps:w,nestedChildren:g});break;default:l=c.mapObjectTypeChildren({child:m,newProps:l,newChildProps:w,nestedChildren:g});break}}}),l=this.mapArrayTypeChildrenToProps(d,l),l},i.prototype.render=function(){var o=this.props,l=o.children,c=de(o,["children"]),d=x({},c);return l&&(d=this.mapChildrenToProps(l,d)),M.createElement(t,d)},lt(i,null,[{key:"canUseDOM",set:function(o){t.canUseDOM=o}}]),i}(M.Component),a.propTypes={base:y.object,bodyAttributes:y.object,children:y.oneOfType([y.arrayOf(y.node),y.node]),defaultTitle:y.string,defer:y.bool,encodeSpecialCharacters:y.bool,htmlAttributes:y.object,link:y.arrayOf(y.object),meta:y.arrayOf(y.object),noscript:y.arrayOf(y.object),onChangeClientState:y.func,script:y.arrayOf(y.object),style:y.arrayOf(y.object),title:y.string,titleAttributes:y.object,titleTemplate:y.string},a.defaultProps={defer:!0,encodeSpecialCharacters:!0},a.peek=t.peek,a.rewind=function(){var s=t.rewind();return s||(s=Te({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),s},r},_t=function(){return null},St=Ye(ht,vt,Te)(_t),he=Nt(St);he.renderStatic=he.rewind;const pe=({html:e,className:t})=>{const a=De.sanitize(e||"",{ALLOWED_TAGS:["b","i","u","p","br","ul","ol","li","strong","em","a","h1","h2","h3","h4","h5","h6"],ALLOWED_ATTR:["href","target","rel"]});return!a||a.trim()===""?n.jsx("p",{className:t,children:"No content available"}):n.jsx("div",{className:t,dangerouslySetInnerHTML:{__html:a}})};function Ft({project:e,previous:t,next:a,academicians:r,researchOptions:s,universities:i,auth:u,isWelcome:o,relatedProjects:l,scholarLabProject:c,joinRequestStatus:d,isMember:m}){ke();const[p,g]=_.useState(e.total_likes||0),[T,w]=_.useState(e.total_shares||0),[E,A]=_.useState(e.liked||!1),[C,S]=_.useState(!1),[D,ee]=_.useState(!1),[te,be]=_.useState(d),Y=_.useRef(null);console.log(l),_.useEffect(()=>{const h=b=>{Y.current&&!Y.current.contains(b.target)&&S(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),_.useEffect(()=>{Ie(window.location.pathname),Me("Project","view",e.project_name,e.id)},[e]);const F=r&&r.find(h=>h.academician_id===e.author_id)||null,ne=()=>{if(!e.field_of_research)return null;const b=(Array.isArray(e.field_of_research)?e.field_of_research:[e.field_of_research]).map(B=>{const O=s.find(z=>`${z.field_of_research_id}-${z.research_area_id}-${z.niche_domain_id}`===B);return O?`${O.field_of_research_name} - ${O.research_area_name} - ${O.niche_domain_name}`:null}).filter(Boolean);return b.length?b.join(", "):null},re=()=>{if(!e.university)return null;const h=i.find(b=>String(b.id)===String(e.university));return h?h.full_name:null},we=()=>{if(!u){window.location.href=route("login");return}W.post(route("projects.toggleLike",e.url)).then(h=>{g(h.data.total_likes),A(h.data.liked)}).catch(h=>console.error(h))},U=h=>{h(),W.post(route("projects.share",e.url)).then(b=>{w(b.data.total_shares)}).catch(b=>console.error(b))},Ee=()=>{const h=route("welcome.projects.show",e.url);window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(h)}`,"_blank","width=600,height=400")},Ae=()=>{const h=route("welcome.projects.show",e.url);window.open(`https://wa.me/?text=${encodeURIComponent(h)}`,"_blank")},Ne=()=>{const h=route("welcome.projects.show",e.url);window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(h)}`,"_blank","width=600,height=400")},_e=()=>{const h=route("welcome.projects.show",e.url);navigator.clipboard.writeText(h).then(()=>{alert("Link copied to clipboard")})},ae=()=>{if(!u){window.location.href=route("login");return}ee(!0),W.post(route("projects.join.request",c.id)).then(h=>{le.success(h.data.message),be("pending")}).catch(h=>{var B,O;const b=((O=(B=h.response)==null?void 0:B.data)==null?void 0:O.message)||"Failed to send join request";le.error(b)}).finally(()=>{ee(!1)})},Se=()=>!c||m?null:te==="pending"?n.jsxs("button",{disabled:!0,className:"mt-4 px-6 py-2 bg-gray-300 text-gray-700 rounded-md flex items-center justify-center",children:[n.jsx(V,{className:"mr-2"})," Request Sent"]}):te==="rejected"?n.jsxs("button",{onClick:ae,disabled:D,className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center",children:[n.jsx(V,{className:"mr-2"})," Request Again"]}):n.jsxs("button",{onClick:ae,disabled:D,className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center",children:[n.jsx(V,{className:"mr-2"})," Request to Join Project"]});return n.jsx("div",{className:"px-6 md:px-8 lg:px-4",children:n.jsxs("div",{className:"max-w-8xl mx-auto py-4 lg:pt-4",children:[n.jsx("div",{className:"mb-6",children:n.jsxs(q,{onClick:()=>window.history.back(),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50","aria-label":"Go back to previous page",children:[n.jsx(je,{className:"text-sm"}),"Back"]})}),e.title&&n.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 text-left",children:e.title}),F?n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("img",{src:`/storage/${F.profile_picture}`,alt:F.full_name,className:"w-12 h-12 rounded-full object-cover shadow-md bg-gray-200 border-2 border-white"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold",children:F.full_name}),n.jsx("div",{className:"text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""})]})]}):n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("img",{src:"/storage/Admin.jpg",alt:"Admin",className:"w-12 h-12 rounded-full object-cover shadow-md border-2 border-white"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold",children:"Admin"}),n.jsx("div",{className:"text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""})]})]}),n.jsxs("div",{className:"my-4",children:[n.jsx("hr",{}),n.jsxs("div",{className:"flex flex-wrap items-center space-x-4 py-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(se,{className:"w-6 h-6 text-gray-600"}),n.jsx("span",{className:"ml-2 text-gray-600",children:e.total_views})]}),n.jsxs("button",{onClick:we,className:"flex items-center",children:[E?n.jsx(ie,{className:"w-6 h-6 text-red-600"}):n.jsx(Ce,{className:"w-6 h-6 text-gray-600"}),n.jsx("span",{className:"ml-2 text-gray-600",children:p})]}),n.jsxs("div",{className:"relative",ref:Y,children:[n.jsx("button",{onClick:()=>S(!C),className:"flex items-center",children:n.jsx(oe,{className:"w-6 h-6 text-gray-600"})}),C&&n.jsxs("div",{className:"absolute left-0 mt-2 w-40 bg-white shadow-lg rounded z-10",children:[n.jsxs("button",{onClick:()=>{U(_e),S(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[n.jsx(Oe,{className:"w-5 h-5 inline mr-2 text-gray-600"}),"Copy Link"]}),n.jsx("hr",{className:"my-1"}),n.jsxs("button",{onClick:()=>{U(Ee),S(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[n.jsx(Pe,{className:"w-5 h-5 inline mr-2 text-blue-600"}),"Facebook"]}),n.jsxs("button",{onClick:()=>{U(Ae),S(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[n.jsx(Re,{className:"w-5 h-5 inline mr-2 text-green-600"}),"WhatsApp"]}),n.jsxs("button",{onClick:()=>{U(Ne),S(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center",children:[n.jsx(Le,{className:"w-5 h-5 inline mr-2 text-blue-700"}),"LinkedIn"]})]})]}),n.jsx(He,{bookmarkableType:"project",bookmarkableId:e.id,category:"Projects",iconSize:"w-6 h-6",tooltipPosition:"top"})]}),n.jsx("hr",{})]}),n.jsx("div",{className:"my-4",children:Se()}),e.image&&n.jsx("img",{src:`/storage/${e.image}`,alt:"Banner",className:"w-full h-auto md:h-64 object-cover mb-4"}),e.description&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-2",children:"Description"}),n.jsx(pe,{html:e.description,className:"mb-4 text-gray-700 prose w-full text-left max-w-none break-words leading-relaxed"})]}),n.jsxs("div",{className:"mb-4 space-y-2",children:[e.project_theme&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Project Theme:"})," ",e.project_theme]}),e.purpose&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Purpose:"})," ",Array.isArray(e.purpose)?e.purpose.join(", "):e.purpose]}),e.start_date&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Start Date:"})," ",new Date(e.start_date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),e.end_date&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"End Date:"})," ",new Date(e.end_date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),e.application_deadline&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Application Deadline:"})," ",new Date(e.application_deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),e.duration&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Duration:"})," ",e.duration," ",n.jsx("span",{children:"(months)"})]}),e.sponsored_by&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Sponsored By:"})," ",e.sponsored_by]}),e.category&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Category:"})," ",e.category]}),e.field_of_research&&ne()&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Field of Research:"})," ",ne()]}),e.supervisor_category&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Supervisor Category:"})," ",e.supervisor_category]}),e.supervisor_name&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Supervisor Name:"})," ",e.supervisor_name]}),e.university&&re()&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"University:"})," ",re()]}),e.email&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",e.email]}),e.origin_country&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Origin Country:"})," ",e.origin_country]}),e.student_nationality&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Student Nationality:"})," ",e.student_nationality]}),e.student_level&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"This project is for:"})," ",Array.isArray(e.student_level)?e.student_level.join(", "):e.student_level]}),e.student_mode_study&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mode of Study:"})," ",Array.isArray(e.student_mode_study)?e.student_mode_study.join(", "):e.student_mode_study]}),e.appointment_type&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Appointment Type:"})," ",e.appointment_type]}),e.purpose_of_collaboration&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Purpose of Collaboration:"})," ",e.purpose_of_collaboration]}),e.amount&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Amount:"})," ",e.amount]}),e.application_url&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Application:"}),n.jsx("a",{href:e.application_url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-500 underline",children:"Apply"})]})]}),e.attachment&&n.jsx("div",{className:"mb-2",children:n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",n.jsx("a",{href:`/storage/${e.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"})]})}),n.jsx("hr",{className:"my-6 border-gray-200"}),l&&l.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Other Projects"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(h=>n.jsxs(q,{href:o?route("welcome.projects.show",h.url):route("projects.show",h.url),className:"block relative p-5 transform transition-opacity duration-500 rounded-2xl overflow-hidden h-[300px] flex flex-col justify-end hover:opacity-90",style:{backgroundImage:`url(${encodeURI(h.image?`/storage/${h.image}`:"/storage/default.jpg")})`,backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),n.jsxs("div",{className:"relative z-10 text-white pr-10",children:[n.jsx("h2",{className:"text-2xl font-bold truncate",title:h.title,children:h.title||"Untitled Project"}),h.description&&n.jsx(pe,{html:h.description,className:"text-sm line-clamp-2 mb-2"}),n.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[n.jsxs("p",{className:"text-xs",children:["Deadline: ",new Date(h.application_deadline).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("div",{className:"flex items-center text-xs",children:[n.jsx(se,{className:"w-4 h-4"}),n.jsx("span",{className:"ml-1",children:h.total_views||0})]}),n.jsxs("div",{className:"flex items-center text-xs",children:[n.jsx(ie,{className:"w-4 h-4 text-red-500"}),n.jsx("span",{className:"ml-1",children:h.total_likes||0})]}),n.jsxs("div",{className:"flex items-center text-xs",children:[n.jsx(oe,{className:"w-4 h-4"}),n.jsx("span",{className:"ml-1",children:h.total_shares||0})]})]})]})]})]},h.id))})]}),n.jsxs("div",{className:"max-w-3xl mx-auto py-6 flex justify-between",children:[t?n.jsx(q,{href:route("projects.show",t.url),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Previous"}):n.jsx("span",{}),a?n.jsx(q,{href:route("projects.show",a.url),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Next"}):n.jsx("span",{})]})]})})}export{Ft as default};
