import{r as a,j as r,Y as _,a as F}from"./app-DZMAG1Os.js";import{M as J}from"./MainLayout-pswa0FAN.js";import{G as K}from"./GuidedSearchInterface-2tnsy3dG.js";import V from"./ResultsGrid-Dk13AjYh.js";import W from"./SearchTypeTabs-C3sDF0lR.js";import N from"./FilterPanel-Bq8Q6BtW.js";import{c as X}from"./index-CjVDtbtg.js";import{u as Z}from"./useRoles-XsbMiLit.js";import"./analytics-B60H_cQS.js";import"./RecommendationModal-FoO6RnP1.js";import"./RecommendationDisplay-Bv9pLX-I.js";import"./BookmarkButton-CxpEWLil.js";import"./index-Dpgo5ZGF.js";import"./MatchIndicator-CA6O65_K.js";import"./react-select.esm-DD5_CwH9.js";function fe({auth:$,universities:c,faculties:l,users:R,researchOptions:n,skills:E}){const{isAdmin:O,isPostgraduate:L,isUndergraduate:P,isFacultyAdmin:T,isAcademician:p}=Z(),[f,C]=a.useState(""),[e,k]=a.useState("supervisor"),[g,x]=a.useState(!1),[o,d]=a.useState(null),[y,i]=a.useState(null),[Y,S]=a.useState(1),[b,j]=a.useState(!1),[u,v]=a.useState([]),[h,w]=a.useState([]),[m,A]=a.useState(""),[I,M]=a.useState(!1),D=s=>{if((s==="students"||s==="collaborators")&&!p){i("You need to be an academician to search for students or collaborators.");return}k(s),d(null),i(null)},q=async s=>{if(!(g||!s||s.trim()==="")){C(s),x(!0),i(null),S(1);try{const t=await F.post(route("ai.matching.search"),{query:s,searchType:e});t.data&&t.data.matches?(console.log("Search results:",t.data),d(t.data)):i("Received invalid search results")}catch(t){console.error("Search error:",t),t.response&&t.response.data&&t.response.data.error?i(t.response.data.error):i("Failed to perform search. Please try again later.")}finally{x(!1)}}},Q=async()=>{if(b||!o||!o.has_more)return;j(!0);const s=Y+1;try{const t=await F.post(route("ai.matching.search"),{query:f,searchType:e,page:s});t.data&&t.data.matches&&(d(H=>({...t.data,matches:[...H.matches,...t.data.matches]})),S(s))}catch(t){console.error("Error loading more results:",t)}finally{j(!1)}},U=()=>e==="supervisor"?['Be specific about your research area (e.g., "Machine Learning for Medical Imaging" rather than just "AI")','You can use vague queries like "recommend supervisors for me" to get results based on your profile',"Click on suggested research terms to quickly add them to your search"]:e==="students"?["Search for specific research topics to find students interested in those areas","Be specific about methodologies or techniques you're looking for","You can search for broader fields to get a wider range of potential students"]:e==="collaborators"?["Search for research topics that complement your expertise","Look for interdisciplinary opportunities by searching for topics outside your direct field","Use specific methodologies or techniques to find experts in those areas"]:[],G=()=>e==="supervisor"?"e.g., Artificial Intelligence in Healthcare, Design Science Research...":e==="students"?"e.g., Machine Learning, Quantum Computing, Climate Science...":e==="collaborators"?"e.g., Interdisciplinary AI, Sustainable Development, Data Science...":"Enter your search query...",B=()=>e==="supervisor"?"Find Your Perfect Research Supervisor":e==="students"?"Find Students for Your Research Projects":e==="collaborators"?"Find Research Collaborators":"AI Matching",z=()=>e==="supervisor"?"Enter your research interest, topic, or field of study below and we'll match you with supervisors who have relevant expertise.":e==="students"?"Enter research topics or methods you're interested in to find students who may be suitable for your research projects.":e==="collaborators"?"Enter research areas or methodologies to find potential collaborators for joint research projects.":"Enter your search query below to find matches.";return r.jsxs(J,{title:"AI Matching",isPostgraduate:L,isUndergraduate:P,isFacultyAdmin:T,children:[r.jsxs(_,{children:[r.jsx("title",{children:"AI Matching - Nexscholar"}),r.jsx("meta",{name:"description",content:"Find academic matches using AI-powered semantic search"})]}),r.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg",children:r.jsxs("div",{className:"p-6 pb-16",children:[r.jsx(W,{currentType:e,onTypeChange:D,isAcademician:p}),r.jsx(K,{onSearch:q,researchOptions:n,isSearching:g,initialQuery:f,pageTitle:B(),searchDescription:z(),placeholder:G(),tips:U()}),y&&r.jsx("div",{className:"mt-4 px-4 py-3 rounded-md bg-red-100 text-red-700 text-center",children:y}),o&&o.matches&&o.matches.length>0&&r.jsx("button",{onClick:()=>M(!I),className:"fixed bottom-8 right-4 z-50 bg-blue-600 text-white p-3 rounded-full shadow-lg lg:hidden",children:r.jsx(X,{className:"text-xl"})}),o&&o.matches&&r.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row gap-6",children:[r.jsx("div",{className:"hidden lg:block w-full lg:w-1/4 xl:w-1/5",children:r.jsx(N,{searchType:e,searchResults:o,universities:c,faculties:l,researchOptions:n,selectedArea:u,setSelectedArea:v,selectedUniversity:h,setSelectedUniversity:w,selectedAvailability:m,setSelectedAvailability:A})}),I&&r.jsx("div",{className:"lg:hidden w-full",children:r.jsx(N,{searchType:e,searchResults:o,universities:c,faculties:l,researchOptions:n,selectedArea:u,setSelectedArea:v,selectedUniversity:h,setSelectedUniversity:w,selectedAvailability:m,setSelectedAvailability:A,onClose:()=>M(!1)})}),r.jsx("div",{className:"w-full lg:w-3/4 xl:w-4/5",children:r.jsx(V,{searchType:e,searchResults:o,selectedArea:u,selectedUniversity:h,selectedAvailability:m,onLoadMore:Q,isLoadingMore:b,universitiesList:c,faculties:l,researchOptions:n,users:R,skills:E})})]})]})})]})}export{fe as default};
