import{q as y,r as d,W as j,j as e,b as m,y as w}from"./app-DsU7pvKN.js";import{L as N,M as v}from"./MainLayout-GuBlxWRA.js";import{C}from"./ConfirmationModal-DzwR7x3f.js";import{U as B,M as D}from"./ManageCollaboratorsModal-DY11Iy-6.js";import{p as M}from"./purify.es-B2xYLbnv.js";import{C as S}from"./chevron-left-CtfkqU0H.js";import{P as k,T as P}from"./trash-2-B2O9vY80.js";import"./index-BeC2I6AA.js";import"./useRoles-CLmbL5UR.js";import"./analytics-BQ374C1C.js";import"./index-DBD8zkwX.js";import"./Modal-rPXfVJrF.js";import"./transition-BqkobVdv.js";import"./InputLabel-CG8wkpC2.js";import"./InputError-BEnB6dyX.js";import"./PrimaryButton-DmBJ8vCL.js";import"./SecondaryButton-omwgRQgv.js";function L({project:s,connections:c}){const{auth:x}=y().props,[h,o]=d.useState(!1),[a,n]=d.useState(null),[u,l]=d.useState(!1),t=j({name:""}),g=r=>{if(r.preventDefault(),!s||!s.id){console.error("Project ID is missing, cannot create board.");return}t.post(route("projects.boards.store",s.id),{onSuccess:()=>{o(!1),t.reset()}})},b=(r,i)=>{r.preventDefault(),r.stopPropagation(),n(i)},p=()=>{a&&w.delete(route("boards.destroy",a.id),{onSuccess:()=>{n(null)}})},f=x.user.id===s.owner_id;return e.jsxs("div",{className:"w-full md:max-w-8xl md:mx-auto px-4 md:px-4 lg:px-2 py-4 md:py-6 lg:mt-2 mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(m,{href:route("project-hub.index"),className:"flex items-center text-gray-500 hover:text-gray-700 mb-2",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Back to projects"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),f&&e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Manage Members"]})]}),s.description&&e.jsx("p",{className:"mt-1 text-gray-500",dangerouslySetInnerHTML:{__html:M.sanitize(s.description)}})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Boards"})}),h?e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Create a new board"}),e.jsxs("form",{onSubmit:g,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:t.data.name,onChange:r=>t.setData("name",r.target.value),className:"w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-sm",placeholder:"Board name",disabled:t.processing,autoFocus:!0}),t.errors.name&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:t.errors.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),t.reset()},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:t.processing,children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md text-xs font-medium text-white bg-indigo-600 hover:bg-indigo-700",disabled:t.processing||!t.data.name.trim(),children:t.processing?"Creating...":"Create Board"})]})]})]}):e.jsxs("button",{type:"button",onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 mb-6 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Create new board"]}),s.boards&&s.boards.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.boards.map(r=>e.jsxs("div",{className:"relative bg-white shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:[e.jsxs(m,{href:route("project-hub.boards.show",r.id),className:"block p-5",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(N,{className:"w-5 h-5 text-indigo-500 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.name})]}),e.jsx("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:e.jsxs("span",{children:["Created ",new Date(r.created_at).toLocaleDateString()]})})]}),e.jsx("button",{onClick:i=>b(i,r),className:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-full",title:"Delete board",children:e.jsx(P,{className:"w-4 h-4"})})]},r.id))}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-500 mb-4",children:"No boards available. Create a board to get started."})})]}),e.jsx(C,{show:!!a,onClose:()=>n(null),onConfirm:p,title:"Delete Board",message:a?`Are you sure you want to delete the board "${a.name}"? This action cannot be undone and will delete all lists and tasks within this board.`:""}),e.jsx(D,{show:u,onClose:()=>l(!1),context:s,contextType:"project",connections:c||[]})]})}L.layout=s=>e.jsx(v,{title:"Project Boards",children:s,TopMenuOpen:!1});export{L as default};
