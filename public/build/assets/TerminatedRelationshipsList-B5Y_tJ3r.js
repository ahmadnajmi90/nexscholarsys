import{r as C,j as e,a as h}from"./app-A8xQkvSk.js";import{C as M,a as _,b as D,c as R}from"./card-DyHgWaPU.js";import{B as S}from"./button-Dz_rydmG.js";import{B as A}from"./badge-CFoP9Krf.js";import{A as g,a as j}from"./avatar-CbIr_OjG.js";import T from"./StudentRelationshipDetailModal-B0PYuNue.js";import{n as k}from"./en-US-DNUEYIb-.js";import{d as H,f as N}from"./format-hTuirObu.js";import{C as F}from"./calendar-EpaZ4Aad.js";import{C as B}from"./clock-CrVAeSun.js";import{C as E}from"./circle-x-R0AwPcda.js";import{H as U}from"./history-BxBz3cCN.js";import{f as $}from"./formatDistanceToNow-GKXiLTrL.js";import"./utils-CIsb_jhR.js";import"./clsx-B-dksMZM.js";import"./index-Dp3B9jqt.js";import"./tabs-Cbyzn-fX.js";import"./index-BEzQHz4a.js";import"./index-7Qlnuq3l.js";import"./index-CG1gsK_f.js";import"./index-DwuY8lh1.js";import"./index-OrEFxIKi.js";import"./index-DMPy21CI.js";import"./index-B0SlzLk6.js";import"./scroll-area-COMlVIOb.js";import"./ResearchTab-B4EYMRFM.js";import"./index-Km-vM6Jb.js";import"./input-D2p8biwd.js";import"./textarea-DGdKxzUN.js";import"./separator-B59s4oDI.js";import"./logError-D4ezqrCx.js";import"./loader-circle-DkpR38mE.js";import"./createLucideIcon-DPzobtnR.js";import"./plus-BqbQZKPX.js";import"./trash-2-XEAf-v5f.js";import"./circle-check-ddCD_g9w.js";import"./circle-eov79Dsa.js";import"./DocumentsTab-B11iV4A2.js";import"./select-BBDf1Ygo.js";import"./index-BlKfbGK4.js";import"./Combination-Bf5eV4ml.js";import"./tslib.es6-CmEaCU22.js";import"./index-Cp2nhW7C.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-Db3xrL5F.js";import"./index-rTP0VXgG.js";import"./chevron-down-qnEAqpL2.js";import"./chevron-up-hxgrcUwj.js";import"./check-BeDd_wJ7.js";import"./Modal-D_n_zj3N.js";import"./dialog-BkDQGxoj.js";import"./transition-Bvb6H6Z4.js";import"./DocumentPreviewModal-CPJtZlTY.js";import"./file-text-BfC4OSQU.js";import"./download-CMnE0euH.js";import"./x-vL7g-LuD.js";import"./upload-DLfp_NaM.js";import"./chevron-right-Mpml_Nmb.js";import"./folder-open-Bj-Qb-PO.js";import"./eye-B05lsJ9f.js";import"./ThreadPane-CPpSuURI.js";import"./AttachmentPreviewModal-CXErbNPv.js";import"./ScheduleMeetingDialog-C9eLZHwe.js";import"./label-BcrT7TVM.js";import"./alert-BBFXwXFc.js";import"./StudentOverviewTab-B7N66E49.js";import"./user-round-CEZUuFcg.js";import"./briefcase-CfUq1pnR.js";import"./mail-Dtimj1fp.js";import"./phone-D1xIudn-.js";import"./graduation-cap-the7C-yQ.js";import"./calendar-clock-BwBj7N73.js";import"./UnbindRequestModal-2eYhJEIj.js";import"./triangle-alert-BND9SWEh.js";import"./tooltip-Oo0Wz_lE.js";import"./video-DL3IJgDp.js";import"./external-link-RAq8nM7x.js";import"./constructNow-DtVD-0hX.js";function q(t,a,s){const[r,o]=k(s==null?void 0:s.in,t,a),m=v(r,o),i=Math.abs(H(r,o));r.setDate(r.getDate()-m*i);const l=+(v(r,o)===-m),n=m*(i-l);return n===0?0:n}function v(t,a){const s=t.getFullYear()-a.getFullYear()||t.getMonth()-a.getMonth()||t.getDate()-a.getDate()||t.getHours()-a.getHours()||t.getMinutes()-a.getMinutes()||t.getSeconds()-a.getSeconds()||t.getMilliseconds()-a.getMilliseconds();return s<0?-1:s>0?1:s}function ct({relationships:t=[],reload:a,isLoading:s=!1}){const[r,o]=C.useState(null),m=!s&&(!Array.isArray(t)||t.length===0);return s?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((i,l)=>e.jsxs("div",{className:"border border-dashed rounded-xl p-5 bg-white shadow-sm animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-slate-200"}),e.jsx("div",{className:"h-3 w-24 rounded bg-slate-100"})]})]}),e.jsx("div",{className:"h-6 w-24 rounded-full bg-slate-100"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"h-3 w-full rounded bg-slate-100"}),e.jsx("div",{className:"h-3 w-3/4 rounded bg-slate-100"})]}),e.jsx("div",{className:"mt-4 h-10 rounded bg-slate-200"})]},`terminated-skeleton-${l}`))}):m?e.jsxs(M,{className:"border-dashed border-slate-200",children:[e.jsx(_,{children:e.jsx(D,{className:"text-lg font-semibold text-slate-800",children:"No Terminated Relationships"})}),e.jsx(R,{className:"text-sm text-slate-600",children:"You don't have any terminated supervision relationships. All past relationships will appear here."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:t.map(i=>e.jsx(Y,{relationship:i,onViewHistory:()=>o(i)},i.id))}),r&&e.jsx(T,{relationship:r,onClose:()=>o(null),onUpdated:a,isReadOnly:!0})]})}function Y({relationship:t,onViewHistory:a}){var u,f;const s=(t==null?void 0:t.academician)??{},r=s.full_name??"Supervisor",o=s.profile_picture?`/storage/${s.profile_picture}`:null,m=s.url||null,i=(t==null?void 0:t.accepted_at)||(t==null?void 0:t.start_date),l=t==null?void 0:t.terminated_at,n=i?N(new Date(i),"dd/MM/yyyy"):"—",b=l?N(new Date(l),"dd/MM/yyyy"):"—",c=l?$(new Date(l),{addSuffix:!0}):null,d=i&&l?q(new Date(l),new Date(i)):0,w=d>0?`${Math.floor(d/30)} months, ${d%30} days`:"—",x=((u=t==null?void 0:t.unbind_requests)==null?void 0:u.length)>0?(f=t.unbind_requests[t.unbind_requests.length-1])==null?void 0:f.reason:"No reason provided",p=r.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,3);return e.jsxs("div",{className:"border rounded-xl p-5 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),className:"flex-shrink-0",children:e.jsx(g,{className:"h-10 w-10 border border-slate-200 hover:ring-2 hover:ring-slate-300 transition-all cursor-pointer",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})})}):e.jsx(g,{className:"h-10 w-10 border border-slate-200",children:o?e.jsx("img",{src:o,alt:r,className:"h-full w-full object-cover"}):e.jsx(j,{className:"bg-slate-100 text-slate-600 text-sm",children:p})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[m?e.jsx(h,{href:route("academicians.show",m),children:e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate hover:text-indigo-600 transition-colors cursor-pointer",children:r})}):e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:r}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.role==="main"?"Main Supervisor":"Co-Supervisor"}),c&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["Terminated ",c]})]})]}),e.jsx(A,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 flex-shrink-0",children:"Terminated"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(F,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:[n," → ",b]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(B,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{children:["Duration: ",w]})]})]}),x&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-red-900 mb-1",children:"Termination Reason:"}),e.jsx("p",{className:"text-xs text-red-800 line-clamp-2",children:x})]})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(S,{variant:"outline",className:"w-full",onClick:a,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"View History"]})})]})}export{ct as default};
