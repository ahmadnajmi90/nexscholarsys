import{r as x,j as e,a as l}from"./app-1xdDtbuK.js";import{p as v,q as C,r as k,s as N,F as b,t as q}from"./index-Cmq_fAnc.js";import{T as i,a as s,b as c,c as o}from"./tooltip-XObvIOmZ.js";const F=({user:t,onRemoveConnection:u})=>{var _,g;t&&!t.connection_status_with_auth_user&&console.warn("DATA MISSING: 'connection_status_with_auth_user' not found for user:",t.name||t.id);const[y,r]=x.useState(!1),[f,a]=x.useState(((_=t==null?void 0:t.connection_status_with_auth_user)==null?void 0:_.status)||"not_connected"),[d,h]=x.useState(((g=t==null?void 0:t.connection_status_with_auth_user)==null?void 0:g.connection_id)||null);if(!t||!t.connection_status_with_auth_user)return null;const j=async()=>{r(!0);try{const n=await l.post(route("api.app.connections.store",t.id));n.data&&n.data.connection&&(a("pending_sent"),h(n.data.connection.id))}catch(n){console.error("Error sending connection request:",n)}finally{r(!1)}},m=async()=>{r(!0);try{await l.patch(route("api.app.connections.accept",d)),a("connected")}catch(n){console.error("Error accepting connection request:",n)}finally{r(!1)}},w=async()=>{r(!0);try{await l.delete(route("api.app.connections.reject",d)),a("not_connected"),h(null)}catch(n){console.error("Error rejecting connection request:",n)}finally{r(!1)}},p=async()=>{if(u){u(t.connection_status_with_auth_user);return}r(!0);try{await l.delete(route("api.app.connections.destroy",d)),a("not_connected"),h(null)}catch(n){console.error("Error removing connection:",n)}finally{r(!1)}};if(y)return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("div",{className:"text-gray-500 text-lg cursor-wait",children:e.jsx(v,{className:"animate-spin"})})}),e.jsx(o,{children:e.jsx("p",{children:"Processing..."})})]})});switch(f){case"not_connected":return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:j,className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",children:e.jsx(C,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Connect"})})]})});case"pending_sent":return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:p,className:"text-yellow-500 text-lg cursor-pointer hover:text-red-500",children:e.jsx(q,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Request Sent (Click to withdraw)"})})]})});case"pending_received":return e.jsx(i,{delayDuration:0,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:m,className:"text-green-500 text-lg cursor-pointer hover:text-green-700",children:e.jsx(N,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Accept Request"})})]}),e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:w,className:"text-red-500 text-lg cursor-pointer hover:text-red-700",children:e.jsx(b,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Reject Request"})})]})]})});case"connected":return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:p,className:"text-green-600 text-lg cursor-pointer hover:text-red-600",children:e.jsx(k,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Connected (Click to remove)"})})]})});case"is_self":return null;default:return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:j,className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",children:e.jsx(C,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Connect"})})]})})}};export{F as C};
