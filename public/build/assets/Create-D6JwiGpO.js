import{q as u,W as h,j as e,Y as g,b as j,r as f}from"./app-C9aRItHR.js";import{M as b}from"./MainLayout-Bl5NjS0P.js";import{R as v}from"./quill.snow-iVbDGrvv.js";import{B as y}from"./BackButton-TySNEt5X.js";import{u as N}from"./useRoles-BMgrdTWk.js";import"./house-iIzYry7D.js";import"./createLucideIcon-BKESxhZR.js";import"./zap-BO9SNPWd.js";import"./users-7wE4kwZt.js";import"./folder-open-BMedN5wh.js";import"./settings-CD-0zKD9.js";import"./chevron-left-CXvSSDf-.js";import"./proxy-oGTuy5le.js";import"./user-round-B6zt5dYE.js";import"./clipboard-list-D9RZIGl3.js";import"./dollar-sign-CTMVi4zP.js";import"./calendar-DOmFwYBu.js";import"./file-text-Dda2OPaZ.js";import"./message-square-s9PQcdgL.js";import"./graduation-cap-CUV5l_Ya.js";import"./building-BKwJ3Rui.js";import"./Dropdown-DGvLC90N.js";import"./transition-BcdIoExo.js";import"./sparkles-DW7Sg1pI.js";import"./bookmark-ZSjg04_i.js";import"./folder-kanban-CYtcX4dA.js";import"./building-2-leVI2yfI.js";import"./database-DSHZfPnC.js";import"./shield-BFWgtyat.js";import"./index-BXuOt4X-.js";import"./analytics-BQ374C1C.js";import"./index-XngfYQdO.js";import"./iconBase-BnDH7fxV.js";import"./index-DWLkSDCh.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-CBfrqCZ4.js";import"./ThreadPane-DwcafS7d.js";import"./Modal-Du6oGZ4g.js";import"./dialog-vzj-go99.js";import"./index-CCAZcmHJ.js";import"./scroll-area-BASTW5Mn.js";import"./index-CC4PcrzS.js";import"./index-CrClJLlY.js";import"./index-D5McE1bZ.js";import"./index-DQC-i451.js";import"./index-BdQq_4o_.js";import"./format-BOijCLBA.js";import"./en-US-DIdCsyf3.js";import"./button-CSPEol7l.js";import"./download-DQFhyGLE.js";import"./x-CwXSr9E4.js";import"./isSameDay-BHs4V-zU.js";import"./constructNow-6bIQB1GK.js";import"./addDays-KHeCUDUr.js";import"./PrimaryButton-DJiSt9ES.js";import"./SecondaryButton-DlgSMzLL.js";import"./search-4BAlCTpi.js";import"./circle-check-big-D9q7hdhw.js";import"./chevron-right-D08KHBfF.js";import"./tooltip-Bumx2StD.js";import"./index-DFuKqaZl.js";import"./index-COgthb8O.js";import"./index-KT7cPyEo.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-0pjh7AqE.js";import"./index-eZvGyRKK.js";import"./index-DJhbDaIo.js";import"./index-Chjiymov.js";import"./dialog-D6CAw3_0.js";import"./index-hob4XtTs.js";import"./index-CPPgYV_S.js";import"./briefcase-Drgw6UyA.js";import"./user-gcgZPnph.js";import"./arrow-left-DF5iCzrg.js";function w({tags:c,setTags:l}){const[o,m]=f.useState(""),p=a=>{if(a.key==="Enter"||a.key===","){a.preventDefault();const n=o.trim();n&&!c.includes(n)&&l([...c,n]),m("")}else a.key==="Backspace"&&!o.length&&c.length&&l(c.slice(0,c.length-1))},r=a=>{l(c.filter((n,t)=>t!==a))};return e.jsxs("div",{className:"flex flex-wrap items-center border rounded-lg p-2",children:[c.map((a,n)=>e.jsxs("div",{className:"bg-blue-200 text-blue-800 rounded-full px-3 py-1 m-1 flex items-center",children:[e.jsx("span",{children:a}),e.jsx("button",{type:"button",onClick:()=>r(n),className:"ml-2 text-sm text-blue-800",children:"Ã—"})]},n)),e.jsx("input",{type:"text",value:o,onChange:a=>m(a.target.value),onKeyDown:p,className:"flex-grow outline-none p-1",placeholder:"Type a tag and press enter"})]})}function Ye(){const{auth:c}=u().props;N();const{data:l,setData:o,post:m,processing:p,errors:r}=h({title:"",url:"",content:"",category:"",tags:[],images:[],featured_image:null,attachment:null,status:"published"}),a=t=>{o("tags",t)};function n(t){t.preventDefault();const i=new FormData;Object.keys(l).forEach(s=>{s==="tags"?i.append(s,JSON.stringify(l[s])):s==="images"&&Array.isArray(l[s])?l[s].forEach((d,x)=>{i.append(`images[${x}]`,d)}):(l[s]instanceof File,i.append(s,l[s]))}),m(route("create-posts.store"),{data:i,headers:{"Content-Type":"multipart/form-data"},preserveScroll:!0,onSuccess:()=>{alert("Post created successfully.")},onError:s=>{console.error("Error creating Post:",s),alert("Failed to create the Post. Please check the form for errors.")}})}return e.jsxs(b,{title:"",children:[e.jsx(g,{title:"Add New Post"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(y,{})}),e.jsxs("form",{onSubmit:n,className:"bg-white p-6 lg:p-0 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Post"}),Object.keys(r).length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Please fix the following errors:"}),e.jsx("ul",{className:"mt-2 list-disc list-inside",children:Object.entries(r).map(([t,i])=>e.jsx("li",{children:t==="images"?Object.entries(i).map(([s,d])=>e.jsxs("span",{children:["Image ",parseInt(s)+1,": ",d]},s)):i},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-10 gap-4 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Post Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:l.title,onChange:t=>o("title",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter Post Title"}),r.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.title})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Category ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"category",name:"category",value:l.category,onChange:t=>o("category",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Category"}),e.jsx("option",{value:"General Discussion",children:"General Discussion"}),e.jsx("option",{value:"Academic Research",children:"Academic Research"}),e.jsx("option",{value:"Student Life",children:"Student Life"}),e.jsx("option",{value:"Career Opportunities",children:"Career Opportunities"}),e.jsx("option",{value:"News",children:"News"}),e.jsx("option",{value:"Startup",children:"Startup"}),e.jsx("option",{value:"Technology",children:"Technology"}),e.jsx("option",{value:"Research Methodology",children:"Research Methodology"}),e.jsx("option",{value:"Research Paradigm",children:"Research Paradigm"}),e.jsx("option",{value:"Science & Technology",children:"Science & Technology"}),e.jsx("option",{value:"Social Science",children:"Social Science"}),e.jsx("option",{value:"Community",children:"Community"}),e.jsx("option",{value:"Award",children:"Award"}),e.jsx("option",{value:"Achievement",children:"Achievement"}),e.jsx("option",{value:"Business",children:"Business"}),e.jsx("option",{value:"Economy",children:"Economy"}),e.jsx("option",{value:"Health",children:"Health"}),e.jsx("option",{value:"Science",children:"Science"}),e.jsx("option",{value:"Sport",children:"Sport"}),e.jsx("option",{value:"Corporate Social Responsibility",children:"Corporate Social Responsibility"}),e.jsx("option",{value:"Knowledge Transfer Program",children:"Knowledge Transfer Program"})]}),r.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.category})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-10 gap-4 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 w-full rounded-lg border border-gray-200",style:{height:"300px",overflowY:"auto"},children:e.jsx(v,{theme:"snow",value:l.content,onChange:t=>o("content",t),placeholder:"Enter content",style:{height:"300px",maxHeight:"300px"}})}),r.content&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.content})]}),e.jsxs("div",{className:"lg:col-span-3 flex flex-col space-y-4 lg:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Tags"}),e.jsx(w,{tags:l.tags,setTags:a}),r.tags&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.tags})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Images (Multiple Allowed)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t=>{const i=Array.from(t.target.files);o("images",i)},className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),r.images&&e.jsx("div",{className:"mt-1",children:Object.entries(r.images).map(([t,i])=>e.jsxs("p",{className:"text-red-500 text-xs",children:["Image ",parseInt(t)+1,": ",i]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Featured Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>o("featured_image",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),r.featured_image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.featured_image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:t=>o("attachment",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),r.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.attachment})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:space-x-4",children:[e.jsx("button",{type:"submit",disabled:p,className:"w-full sm:w-auto inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"}),e.jsx(j,{href:route("create-posts.index"),className:"w-full sm:w-auto inline-block rounded-lg bg-gray-300 px-5 py-3 text-sm font-medium text-gray-700 hover:bg-gray-400 text-center",children:"Cancel"})]})]})]})]})}export{Ye as default};
