import{j as c,b as ja,r as K,q as Tr,R as Pa,e as Lr,a as _t}from"./app-DlrLkdql.js";import{c as _e}from"./utils-CBfrqCZ4.js";import{M as wp}from"./Modal-Cu2styYL.js";import{S as yp}from"./scroll-area-CcD72brL.js";import{f as es}from"./format-BOijCLBA.js";import{B as bp}from"./button-CmAFW6Q4.js";import{y as Ap,D as Np,j as Sp}from"./dialog-C4T7sENw.js";import{F as Ea}from"./file-text-DuT2_NhJ.js";import{D as Ia}from"./download-C9BmgKLA.js";import{X as Lp}from"./x-CaP1GlTY.js";import{z as Vi}from"./transition-CrpKBowS.js";import{c as Ma}from"./index-B_EXF9H_.js";import{i as Oa}from"./isSameDay-BHs4V-zU.js";function Cr({src:x,alt:N="",size:a=36,className:te="",...M}){const B={width:`${a}px`,height:`${a}px`};return c.jsx("div",{className:_e("rounded-full overflow-hidden bg-gray-200 shrink-0",te),style:B,...M,children:x?c.jsx("img",{src:x,alt:N,className:"h-full w-full object-cover object-center",loading:"lazy"}):c.jsx("div",{className:"h-full w-full flex items-center justify-center bg-muted text-muted-foreground font-medium text-xs",children:N.charAt(0).toUpperCase()||"?"})})}function Cp({show:x,onClose:N,participants:a=[]}){const te=M=>{const B=M?.role?.toLowerCase();let H=null;return B==="academician"&&M?.academician?.url?H=route("academicians.show",M.academician.url):B==="postgraduate"&&M?.postgraduate?.url?H=route("postgraduates.show",M.postgraduate.url):B==="undergraduate"&&M?.undergraduate?.url&&(H=route("undergraduates.show",M.undergraduate.url)),H};return c.jsx(wp,{show:x,onClose:N,maxWidth:"md",children:c.jsxs("div",{className:"bg-white",children:[c.jsxs("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Group Participants (",a.length,")"]}),c.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600",children:c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto px-6 py-4",children:c.jsx("div",{className:"space-y-3",children:a.map(M=>{const B=M.user,H=te(B),ye=M.role==="owner"?"Owner":M.role==="admin"?"Admin":"Member";return c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Cr,{src:B?.avatar_url??B?.profile_photo_url,alt:B?.full_name??B?.name,size:40}),c.jsxs("div",{className:"flex-1 min-w-0",children:[H?c.jsx(ja,{href:H,className:"block font-medium text-gray-900 hover:text-blue-600 truncate",children:B?.full_name??B?.name??"Unknown User"}):c.jsx("span",{className:"block font-medium text-gray-900 truncate",children:B?.full_name??B?.name??"Unknown User"}),c.jsx("span",{className:"text-sm text-gray-500 capitalize",children:ye})]})]},M.id)})})}),c.jsx("div",{className:"border-t px-6 py-4",children:c.jsx("button",{onClick:N,className:"w-full rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200",children:"Close"})})]})})}function Tp({conversation:x,onArchive:N}){const[a,te]=K.useState(!1),[M,B]=K.useState(!1),{auth:H}=Tr().props,ye=H.user.id,{id:Le,title:V,type:X,participants:ne=[]}=x,k=ne.filter(A=>A.user_id!==ye),J=X==="direct"&&k.length>0?k[0]?.user:null,ae=J?.full_name??J?.name??V,le=X==="direct"&&k.length>0&&k[0]?.user?.is_online,Y=X==="direct"&&k.length>0&&k[0]?.user?.last_seen_at,se=()=>{if(!Y)return"Offline";const A=new Date(Y),F=Math.floor((new Date-A)/(1e3*60));if(F<1)return"Just now";if(F<60)return`${F}m ago`;const Ee=Math.floor(F/60);return Ee<24?`${Ee}h ago`:`${Math.floor(Ee/24)}d ago`},Ae=()=>{if(X==="direct"&&J){const A=J.avatar_url??J.profile_photo_url;return c.jsx(Cr,{src:A,alt:J.full_name??J.name,size:40})}return c.jsx(Cr,{src:null,alt:V,size:40})},de=()=>{te(!a)},S=A=>{A.target.closest(".menu-container")||te(!1)};Pa.useEffect(()=>(a?document.addEventListener("click",S):document.removeEventListener("click",S),()=>{document.removeEventListener("click",S)}),[a]);const q=()=>{B(!0)},ve=()=>{B(!1)};return c.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[Ae(),le&&c.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-medium",children:ae}),X==="direct"&&c.jsx("p",{className:"text-xs text-muted-foreground",children:le?"Online":Y?`Last seen ${se()}`:"Offline"}),X==="group"&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:[ne.length," participants"]})]})]}),c.jsxs("div",{className:"relative menu-container",children:[c.jsx("button",{onClick:de,className:"p-2 rounded-full hover:bg-muted",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),a&&c.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:c.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[X==="direct"&&c.jsx(ja,{href:(()=>{const A=k[0]?.user,j=A?.role?.toLowerCase();let F=null;return j==="academician"&&A?.academician?.url?F=route("academicians.show",A.academician.url):j==="postgraduate"&&A?.postgraduate?.url?F=route("postgraduates.show",A.postgraduate.url):j==="undergraduate"&&A?.undergraduate?.url&&(F=route("undergraduates.show",A.undergraduate.url)),F})(),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"View Profile"}),X==="group"&&c.jsx("button",{onClick:()=>{q(),te(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"View Participants"})]})})]}),c.jsx(Cp,{show:M,onClose:ve,participants:ne})]})}function Da({attachment:x,isDark:N=!1,isGrouped:a=!1,onClick:te}){const{id:M,mime:B,filename:H,size:ye,human_size:Le,url:V,thumbnail_url:X,width:ne,height:k}=x,J=B?.startsWith("image/"),ae=B?.startsWith("video/"),le=B?.startsWith("audio/"),Y=se=>{se.preventDefault(),se.stopPropagation(),te?te(x):window.open(V,"_blank")};return J?c.jsx("div",{className:"relative group",children:c.jsx("img",{src:V,alt:H,className:"max-h-60 max-w-full rounded-md cursor-pointer object-contain",onClick:Y,loading:"lazy"})}):ae?c.jsx("div",{className:"relative group",children:c.jsx("video",{src:V,controls:!0,className:"max-h-60 max-w-full rounded-md cursor-pointer",onClick:Y,preload:"metadata"})}):le?c.jsxs("div",{className:"w-full",children:[c.jsx("audio",{src:V,controls:!0,className:"w-full cursor-pointer",onClick:Y,preload:"metadata"}),c.jsxs("div",{className:"flex justify-between items-center mt-1 text-xs",children:[c.jsx("span",{className:N?"text-white/70":"text-gray-500",children:H}),c.jsx("button",{onClick:Y,className:_e("p-1 rounded-md",N?"hover:bg-white/10":"hover:bg-gray-100"),children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}):c.jsxs("div",{className:_e("flex items-center gap-3 p-3 rounded-md cursor-pointer",N?"bg-indigo-700/90 hover:bg-indigo-700 text-white":"bg-gray-100 hover:bg-gray-200",a?"ml-0":""),onClick:Y,children:[c.jsx("div",{className:_e("p-2 rounded-md",N?"bg-indigo-600/80":"bg-white"),children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_e("h-6 w-6",N?"text-white":"text-gray-600"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:_e("text-sm font-medium truncate",N?"text-white":"text-gray-900"),children:H}),c.jsx("div",{className:_e("text-xs",N?"text-indigo-100":"text-muted-foreground"),children:Le})]})]})}function Rp({message:x,isOwn:N,showAvatar:a=!0,isRead:te=!1,onMessageAppear:M,onAttachmentClick:B,previousMessage:H,nextMessage:ye,shouldIndent:Le=!1,isGroupedWithPrev:V=!1,isGroupedWithNext:X=!1,isGroupHead:ne=!0,isGroupTail:k=!0,conversationType:J="direct"}){const{id:ae,body:le,type:Y,sender:se,created_at:Ae,edited_at:de,attachments:S=[],deleted_at:q}=x,{auth:ve}=Tr().props;ve.user.id;const A=J==="group",j=A&&!N&&ne,F=A&&!N&&ne,Ee=k,qe=Ae?es(new Date(Ae),"h:mm aa"):"";return Pa.useEffect(()=>{if(M&&!N&&!te){const Ie=new IntersectionObserver(([Bn])=>{Bn.isIntersecting&&(M(x),Ie.disconnect())},{threshold:.5}),Qn=document.getElementById(`message-${ae}`);return Qn&&Ie.observe(Qn),()=>Ie.disconnect()}},[ae,N,te,M]),q?c.jsxs("div",{id:`message-${ae}`,className:"py-1",children:[c.jsx("div",{className:_e("flex items-end gap-2",N?"justify-end":"justify-start"),children:c.jsx("div",{className:_e("px-4 py-2 rounded-lg text-muted-foreground text-sm italic","bg-muted/30"),children:"Message was deleted"})}),c.jsx("div",{className:_e("flex mt-1",N?"justify-end":"justify-start"),children:c.jsx("div",{className:_e("text-[11px] leading-4 text-gray-500 select-none",Le?"ml-10":""),children:qe})})]}):c.jsx("div",{id:`message-${ae}`,className:"py-1",children:c.jsxs("div",{className:_e("w-full",N?"justify-end flex":"flex"),children:[!N&&A&&c.jsxs("div",{className:"flex w-full",children:[c.jsx("div",{className:"mr-3 w-10 flex justify-center items-start",children:j?c.jsx(Cr,{src:se?.avatar_url??se?.profile_photo_url,alt:se?.full_name??se?.name,size:40}):c.jsx("div",{className:"h-10 w-10"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[F&&c.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:se?.full_name??se?.name??"Unknown"}),c.jsx("div",{className:"flex",children:c.jsxs("div",{className:_e("max-w-[75%] sm:max-w-[70%] rounded-2xl px-3 py-2 text-sm break-words whitespace-pre-wrap","bg-gray-100 text-gray-900",V&&"rounded-tl-md",X&&"rounded-bl-md",V?"mt-0":"mt-1"),children:[le&&c.jsx("div",{className:"whitespace-pre-wrap",children:le}),S&&S.length>0&&c.jsx("div",{className:_e("flex flex-col gap-2 my-2",le?"border-t border-gray-200/30":""),children:S.map(Ie=>c.jsx(Da,{attachment:Ie,isDark:!1,isGrouped:V,onClick:()=>B&&B(Ie)},Ie.id))}),de&&c.jsx("div",{className:"text-xs opacity-70 mt-1",children:"(edited)"})]})}),Ee&&c.jsx("div",{className:"flex mt-1",children:c.jsx("div",{className:"text-[11px] leading-4 text-gray-700 select-none",children:qe})})]})]}),(N||!A)&&c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:_e("flex",N?"justify-end":"justify-start"),children:c.jsxs("div",{className:_e("max-w-[75%] sm:max-w-[70%] rounded-2xl px-3 py-2 text-sm break-words whitespace-pre-wrap",N?"bg-indigo-600 text-white":"bg-gray-100 text-gray-900",!N&&V&&"rounded-tl-md",!N&&X&&"rounded-bl-md",N&&V&&"rounded-tr-md",N&&X&&"rounded-br-md",V?"mt-0":"mt-1"),children:[le&&c.jsx("div",{className:"whitespace-pre-wrap",children:le}),S&&S.length>0&&c.jsx("div",{className:_e("flex flex-col gap-2 my-2",le?"border-t border-white/10":""),children:S.map(Ie=>c.jsx(Da,{attachment:Ie,isDark:N,isGrouped:!N&&V,onClick:()=>B&&B(Ie)},Ie.id))}),de&&c.jsx("div",{className:"text-xs opacity-70 mt-1",children:"(edited)"})]})}),Ee&&c.jsx("div",{className:_e("flex mt-1",N?"justify-end":"justify-start"),children:c.jsxs("div",{className:_e("text-[11px] leading-4 select-none","text-gray-700"),children:[qe,N&&c.jsx("span",{className:"ml-1",children:te?"âœ“âœ“":"âœ“"})]})})]})]})})}function Ep({users:x=[]}){if(x.length===0)return null;const N=()=>x.length===1?`${x[0].name} is typing...`:x.length===2?`${x[0].name} and ${x[1].name} are typing...`:`${x[0].name} and ${x.length-1} others are typing...`;return c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground/70 animate-bounce",style:{animationDelay:"0ms"}}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground/70 animate-bounce",style:{animationDelay:"300ms"}}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground/70 animate-bounce",style:{animationDelay:"600ms"}})]}),c.jsx("span",{children:N()})]})}function Ip({messages:x=[],conversationId:N,conversationType:a="direct",participants:te=[],isLoadingMore:M=!1,hasMore:B=!1,onLoadMore:H,onMessageRead:ye,onAttachmentClick:Le,onScrollPositionChange:V,typingUsers:X=[]}){const ne=K.useRef(null),k=K.useRef(null),[J,ae]=K.useState(!0),[le,Y]=K.useState(!1),{auth:se}=Tr().props,Ae=se.user.id;te.reduce((A,j)=>(A[j.user_id]=j.last_read_message_id,A),{});const de=A=>A.user_id===Ae?te.filter(j=>j.user_id!==Ae).every(j=>j.last_read_message_id>=A.id):!1,S=A=>{const{scrollTop:j,scrollHeight:F,clientHeight:Ee}=A.currentTarget,qe=F-j-Ee<100;ae(qe),V&&V(qe),qe&&le&&Y(!1),j<50&&B&&!M&&H&&H()};K.useEffect(()=>{if(J&&k.current)k.current.scrollIntoView({behavior:"smooth"});else if(!J&&x.length>0){const A=x[x.length-1];A&&A.user_id!==Ae&&Y(!0)}},[x,J]);const q=A=>{ye&&ye(A.id)},ve=()=>{k.current&&(k.current.scrollIntoView({behavior:"smooth"}),Y(!1),ae(!0))};return c.jsxs("div",{className:"relative flex flex-col h-full",children:[c.jsxs(yp,{ref:ne,className:"flex-1 p-4",onScroll:S,children:[M&&c.jsx("div",{className:"flex justify-center py-2",children:c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"})}),x.length===0&&!M&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[c.jsx("div",{className:"text-4xl mb-2",children:"ğŸ‘‹"}),c.jsx("h3",{className:"text-xl font-medium",children:"No messages yet"}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Send a message to start the conversation"})]}),c.jsx("div",{className:"space-y-1",children:x.map((A,j)=>{if(A.type==="separator")return c.jsx("div",{className:"flex justify-center py-2",children:c.jsx("div",{className:"bg-muted px-3 py-1 rounded-full text-xs text-muted-foreground",children:A.label})},A.id);const F=A;return c.jsx(Rp,{message:F,isOwn:F.isOwn!==void 0?F.isOwn:F.user_id===Ae,isRead:de(F),onMessageAppear:q,onAttachmentClick:Le,previousMessage:j>0?x[j-1]:null,nextMessage:j<x.length-1?x[j+1]:null,shouldIndent:F.shouldIndent||!1,isGroupedWithPrev:F.isGroupedWithPrev||!1,isGroupedWithNext:F.isGroupedWithNext||!1,isGroupHead:F.isGroupHead!==void 0?F.isGroupHead:!0,isGroupTail:F.isGroupTail!==void 0?F.isGroupTail:!0,conversationType:a},F.id)})}),X.length>0&&c.jsx("div",{className:"mt-2",children:c.jsx(Ep,{users:X})}),c.jsx("div",{ref:k})]}),le&&c.jsx("button",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-primary text-primary-foreground px-4 py-2 rounded-full shadow-lg text-sm font-medium",onClick:ve,children:"New messages â†“"})]})}var Dt={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Mp=Dt.exports,Wa;function Op(){return Wa||(Wa=1,(function(x,N){(function(){var a,te="4.17.21",M=200,B="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",H="Expected a function",ye="Invalid `variable` option passed into `_.template`",Le="__lodash_hash_undefined__",V=500,X="__lodash_placeholder__",ne=1,k=2,J=4,ae=1,le=2,Y=1,se=2,Ae=4,de=8,S=16,q=32,ve=64,A=128,j=256,F=512,Ee=30,qe="...",Ie=800,Qn=16,Bn=1,me=2,Un=3,gn=1/0,fn=9007199254740991,Rr=17976931348623157e292,ke=NaN,Ye=4294967295,Er=Ye-1,Wt=Ye>>>1,vt=[["ary",A],["bind",Y],["bindKey",se],["curry",de],["curryRight",S],["flip",F],["partial",q],["partialRight",ve],["rearg",j]],Sn="[object Arguments]",Vn="[object Array]",jt="[object AsyncFunction]",Fn="[object Boolean]",Gn="[object Date]",y="[object DOMException]",C="[object Error]",O="[object Function]",$="[object GeneratorFunction]",oe="[object Map]",Ce="[object Number]",Ln="[object Null]",Ze="[object Object]",et="[object Promise]",mt="[object Proxy]",Cn="[object RegExp]",Me="[object Set]",Tn="[object String]",Hn="[object Symbol]",Pt="[object Undefined]",sn="[object WeakMap]",Ir="[object WeakSet]",pn="[object ArrayBuffer]",nt="[object DataView]",Mr="[object Float32Array]",Or="[object Float64Array]",Dr="[object Int8Array]",Wr="[object Int16Array]",jr="[object Int32Array]",Pr="[object Uint8Array]",Br="[object Uint8ClampedArray]",Ur="[object Uint16Array]",Fr="[object Uint32Array]",Ua=/\b__p \+= '';/g,Fa=/\b(__p \+=) '' \+/g,Ga=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ns=/&(?:amp|lt|gt|quot|#39);/g,ts=/[&<>"']/g,Ha=RegExp(ns.source),$a=RegExp(ts.source),za=/<%-([\s\S]+?)%>/g,Ka=/<%([\s\S]+?)%>/g,rs=/<%=([\s\S]+?)%>/g,qa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ka=/^\w*$/,Ya=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gr=/[\\^$.*+?()[\]{}|]/g,Za=RegExp(Gr.source),Hr=/^\s+/,Xa=/\s/,Ja=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qa=/\{\n\/\* \[wrapped with (.+)\] \*/,Va=/,? & /,el=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nl=/[()=,{}\[\]\/\s]/,tl=/\\(\\)?/g,rl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,is=/\w*$/,il=/^[-+]0x[0-9a-f]+$/i,sl=/^0b[01]+$/i,ul=/^\[object .+?Constructor\]$/,al=/^0o[0-7]+$/i,ll=/^(?:0|[1-9]\d*)$/,ol=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bt=/($^)/,fl=/['\n\r\u2028\u2029\\]/g,Ut="\\ud800-\\udfff",cl="\\u0300-\\u036f",hl="\\ufe20-\\ufe2f",dl="\\u20d0-\\u20ff",ss=cl+hl+dl,us="\\u2700-\\u27bf",as="a-z\\xdf-\\xf6\\xf8-\\xff",gl="\\xac\\xb1\\xd7\\xf7",pl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_l="\\u2000-\\u206f",vl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ls="A-Z\\xc0-\\xd6\\xd8-\\xde",os="\\ufe0e\\ufe0f",fs=gl+pl+_l+vl,$r="['â€™]",ml="["+Ut+"]",cs="["+fs+"]",Ft="["+ss+"]",hs="\\d+",xl="["+us+"]",ds="["+as+"]",gs="[^"+Ut+fs+hs+us+as+ls+"]",zr="\\ud83c[\\udffb-\\udfff]",wl="(?:"+Ft+"|"+zr+")",ps="[^"+Ut+"]",Kr="(?:\\ud83c[\\udde6-\\uddff]){2}",qr="[\\ud800-\\udbff][\\udc00-\\udfff]",tt="["+ls+"]",_s="\\u200d",vs="(?:"+ds+"|"+gs+")",yl="(?:"+tt+"|"+gs+")",ms="(?:"+$r+"(?:d|ll|m|re|s|t|ve))?",xs="(?:"+$r+"(?:D|LL|M|RE|S|T|VE))?",ws=wl+"?",ys="["+os+"]?",bl="(?:"+_s+"(?:"+[ps,Kr,qr].join("|")+")"+ys+ws+")*",Al="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bs=ys+ws+bl,Sl="(?:"+[xl,Kr,qr].join("|")+")"+bs,Ll="(?:"+[ps+Ft+"?",Ft,Kr,qr,ml].join("|")+")",Cl=RegExp($r,"g"),Tl=RegExp(Ft,"g"),kr=RegExp(zr+"(?="+zr+")|"+Ll+bs,"g"),Rl=RegExp([tt+"?"+ds+"+"+ms+"(?="+[cs,tt,"$"].join("|")+")",yl+"+"+xs+"(?="+[cs,tt+vs,"$"].join("|")+")",tt+"?"+vs+"+"+ms,tt+"+"+xs,Nl,Al,hs,Sl].join("|"),"g"),El=RegExp("["+_s+Ut+ss+os+"]"),Il=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ml=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ol=-1,ue={};ue[Mr]=ue[Or]=ue[Dr]=ue[Wr]=ue[jr]=ue[Pr]=ue[Br]=ue[Ur]=ue[Fr]=!0,ue[Sn]=ue[Vn]=ue[pn]=ue[Fn]=ue[nt]=ue[Gn]=ue[C]=ue[O]=ue[oe]=ue[Ce]=ue[Ze]=ue[Cn]=ue[Me]=ue[Tn]=ue[sn]=!1;var ie={};ie[Sn]=ie[Vn]=ie[pn]=ie[nt]=ie[Fn]=ie[Gn]=ie[Mr]=ie[Or]=ie[Dr]=ie[Wr]=ie[jr]=ie[oe]=ie[Ce]=ie[Ze]=ie[Cn]=ie[Me]=ie[Tn]=ie[Hn]=ie[Pr]=ie[Br]=ie[Ur]=ie[Fr]=!0,ie[C]=ie[O]=ie[sn]=!1;var Dl={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Å:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},Wl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bl=parseFloat,Ul=parseInt,As=typeof Lr=="object"&&Lr&&Lr.Object===Object&&Lr,Fl=typeof self=="object"&&self&&self.Object===Object&&self,Ne=As||Fl||Function("return this")(),Yr=N&&!N.nodeType&&N,$n=Yr&&!0&&x&&!x.nodeType&&x,Ns=$n&&$n.exports===Yr,Zr=Ns&&As.process,Xe=(function(){try{var f=$n&&$n.require&&$n.require("util").types;return f||Zr&&Zr.binding&&Zr.binding("util")}catch{}})(),Ss=Xe&&Xe.isArrayBuffer,Ls=Xe&&Xe.isDate,Cs=Xe&&Xe.isMap,Ts=Xe&&Xe.isRegExp,Rs=Xe&&Xe.isSet,Es=Xe&&Xe.isTypedArray;function Fe(f,g,d){switch(d.length){case 0:return f.call(g);case 1:return f.call(g,d[0]);case 2:return f.call(g,d[0],d[1]);case 3:return f.call(g,d[0],d[1],d[2])}return f.apply(g,d)}function Gl(f,g,d,w){for(var E=-1,Z=f==null?0:f.length;++E<Z;){var xe=f[E];g(w,xe,d(xe),f)}return w}function Je(f,g){for(var d=-1,w=f==null?0:f.length;++d<w&&g(f[d],d,f)!==!1;);return f}function Hl(f,g){for(var d=f==null?0:f.length;d--&&g(f[d],d,f)!==!1;);return f}function Is(f,g){for(var d=-1,w=f==null?0:f.length;++d<w;)if(!g(f[d],d,f))return!1;return!0}function Rn(f,g){for(var d=-1,w=f==null?0:f.length,E=0,Z=[];++d<w;){var xe=f[d];g(xe,d,f)&&(Z[E++]=xe)}return Z}function Gt(f,g){var d=f==null?0:f.length;return!!d&&rt(f,g,0)>-1}function Xr(f,g,d){for(var w=-1,E=f==null?0:f.length;++w<E;)if(d(g,f[w]))return!0;return!1}function fe(f,g){for(var d=-1,w=f==null?0:f.length,E=Array(w);++d<w;)E[d]=g(f[d],d,f);return E}function En(f,g){for(var d=-1,w=g.length,E=f.length;++d<w;)f[E+d]=g[d];return f}function Jr(f,g,d,w){var E=-1,Z=f==null?0:f.length;for(w&&Z&&(d=f[++E]);++E<Z;)d=g(d,f[E],E,f);return d}function $l(f,g,d,w){var E=f==null?0:f.length;for(w&&E&&(d=f[--E]);E--;)d=g(d,f[E],E,f);return d}function Qr(f,g){for(var d=-1,w=f==null?0:f.length;++d<w;)if(g(f[d],d,f))return!0;return!1}var zl=Vr("length");function Kl(f){return f.split("")}function ql(f){return f.match(el)||[]}function Ms(f,g,d){var w;return d(f,function(E,Z,xe){if(g(E,Z,xe))return w=Z,!1}),w}function Ht(f,g,d,w){for(var E=f.length,Z=d+(w?1:-1);w?Z--:++Z<E;)if(g(f[Z],Z,f))return Z;return-1}function rt(f,g,d){return g===g?io(f,g,d):Ht(f,Os,d)}function kl(f,g,d,w){for(var E=d-1,Z=f.length;++E<Z;)if(w(f[E],g))return E;return-1}function Os(f){return f!==f}function Ds(f,g){var d=f==null?0:f.length;return d?ni(f,g)/d:ke}function Vr(f){return function(g){return g==null?a:g[f]}}function ei(f){return function(g){return f==null?a:f[g]}}function Ws(f,g,d,w,E){return E(f,function(Z,xe,re){d=w?(w=!1,Z):g(d,Z,xe,re)}),d}function Yl(f,g){var d=f.length;for(f.sort(g);d--;)f[d]=f[d].value;return f}function ni(f,g){for(var d,w=-1,E=f.length;++w<E;){var Z=g(f[w]);Z!==a&&(d=d===a?Z:d+Z)}return d}function ti(f,g){for(var d=-1,w=Array(f);++d<f;)w[d]=g(d);return w}function Zl(f,g){return fe(g,function(d){return[d,f[d]]})}function js(f){return f&&f.slice(0,Fs(f)+1).replace(Hr,"")}function Ge(f){return function(g){return f(g)}}function ri(f,g){return fe(g,function(d){return f[d]})}function xt(f,g){return f.has(g)}function Ps(f,g){for(var d=-1,w=f.length;++d<w&&rt(g,f[d],0)>-1;);return d}function Bs(f,g){for(var d=f.length;d--&&rt(g,f[d],0)>-1;);return d}function Xl(f,g){for(var d=f.length,w=0;d--;)f[d]===g&&++w;return w}var Jl=ei(Dl),Ql=ei(Wl);function Vl(f){return"\\"+Pl[f]}function eo(f,g){return f==null?a:f[g]}function it(f){return El.test(f)}function no(f){return Il.test(f)}function to(f){for(var g,d=[];!(g=f.next()).done;)d.push(g.value);return d}function ii(f){var g=-1,d=Array(f.size);return f.forEach(function(w,E){d[++g]=[E,w]}),d}function Us(f,g){return function(d){return f(g(d))}}function In(f,g){for(var d=-1,w=f.length,E=0,Z=[];++d<w;){var xe=f[d];(xe===g||xe===X)&&(f[d]=X,Z[E++]=d)}return Z}function $t(f){var g=-1,d=Array(f.size);return f.forEach(function(w){d[++g]=w}),d}function ro(f){var g=-1,d=Array(f.size);return f.forEach(function(w){d[++g]=[w,w]}),d}function io(f,g,d){for(var w=d-1,E=f.length;++w<E;)if(f[w]===g)return w;return-1}function so(f,g,d){for(var w=d+1;w--;)if(f[w]===g)return w;return w}function st(f){return it(f)?ao(f):zl(f)}function un(f){return it(f)?lo(f):Kl(f)}function Fs(f){for(var g=f.length;g--&&Xa.test(f.charAt(g)););return g}var uo=ei(jl);function ao(f){for(var g=kr.lastIndex=0;kr.test(f);)++g;return g}function lo(f){return f.match(kr)||[]}function oo(f){return f.match(Rl)||[]}var fo=(function f(g){g=g==null?Ne:ut.defaults(Ne.Object(),g,ut.pick(Ne,Ml));var d=g.Array,w=g.Date,E=g.Error,Z=g.Function,xe=g.Math,re=g.Object,si=g.RegExp,co=g.String,Qe=g.TypeError,zt=d.prototype,ho=Z.prototype,at=re.prototype,Kt=g["__core-js_shared__"],qt=ho.toString,ee=at.hasOwnProperty,go=0,Gs=(function(){var e=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),kt=at.toString,po=qt.call(re),_o=Ne._,vo=si("^"+qt.call(ee).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yt=Ns?g.Buffer:a,Mn=g.Symbol,Zt=g.Uint8Array,Hs=Yt?Yt.allocUnsafe:a,Xt=Us(re.getPrototypeOf,re),$s=re.create,zs=at.propertyIsEnumerable,Jt=zt.splice,Ks=Mn?Mn.isConcatSpreadable:a,wt=Mn?Mn.iterator:a,zn=Mn?Mn.toStringTag:a,Qt=(function(){try{var e=Zn(re,"defineProperty");return e({},"",{}),e}catch{}})(),mo=g.clearTimeout!==Ne.clearTimeout&&g.clearTimeout,xo=w&&w.now!==Ne.Date.now&&w.now,wo=g.setTimeout!==Ne.setTimeout&&g.setTimeout,Vt=xe.ceil,er=xe.floor,ui=re.getOwnPropertySymbols,yo=Yt?Yt.isBuffer:a,qs=g.isFinite,bo=zt.join,Ao=Us(re.keys,re),we=xe.max,Te=xe.min,No=w.now,So=g.parseInt,ks=xe.random,Lo=zt.reverse,ai=Zn(g,"DataView"),yt=Zn(g,"Map"),li=Zn(g,"Promise"),lt=Zn(g,"Set"),bt=Zn(g,"WeakMap"),At=Zn(re,"create"),nr=bt&&new bt,ot={},Co=Xn(ai),To=Xn(yt),Ro=Xn(li),Eo=Xn(lt),Io=Xn(bt),tr=Mn?Mn.prototype:a,Nt=tr?tr.valueOf:a,Ys=tr?tr.toString:a;function s(e){if(he(e)&&!I(e)&&!(e instanceof G)){if(e instanceof Ve)return e;if(ee.call(e,"__wrapped__"))return Zu(e)}return new Ve(e)}var ft=(function(){function e(){}return function(n){if(!ce(n))return{};if($s)return $s(n);e.prototype=n;var t=new e;return e.prototype=a,t}})();function rr(){}function Ve(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=a}s.templateSettings={escape:za,evaluate:Ka,interpolate:rs,variable:"",imports:{_:s}},s.prototype=rr.prototype,s.prototype.constructor=s,Ve.prototype=ft(rr.prototype),Ve.prototype.constructor=Ve;function G(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ye,this.__views__=[]}function Mo(){var e=new G(this.__wrapped__);return e.__actions__=je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=je(this.__views__),e}function Oo(){if(this.__filtered__){var e=new G(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Do(){var e=this.__wrapped__.value(),n=this.__dir__,t=I(e),r=n<0,i=t?e.length:0,u=kf(0,i,this.__views__),l=u.start,o=u.end,h=o-l,p=r?o:l-1,_=this.__iteratees__,v=_.length,m=0,b=Te(h,this.__takeCount__);if(!t||!r&&i==h&&b==h)return mu(e,this.__actions__);var T=[];e:for(;h--&&m<b;){p+=n;for(var W=-1,R=e[p];++W<v;){var U=_[W],z=U.iteratee,ze=U.type,We=z(R);if(ze==me)R=We;else if(!We){if(ze==Bn)continue e;break e}}T[m++]=R}return T}G.prototype=ft(rr.prototype),G.prototype.constructor=G;function Kn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Wo(){this.__data__=At?At(null):{},this.size=0}function jo(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Po(e){var n=this.__data__;if(At){var t=n[e];return t===Le?a:t}return ee.call(n,e)?n[e]:a}function Bo(e){var n=this.__data__;return At?n[e]!==a:ee.call(n,e)}function Uo(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=At&&n===a?Le:n,this}Kn.prototype.clear=Wo,Kn.prototype.delete=jo,Kn.prototype.get=Po,Kn.prototype.has=Bo,Kn.prototype.set=Uo;function _n(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Fo(){this.__data__=[],this.size=0}function Go(e){var n=this.__data__,t=ir(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():Jt.call(n,t,1),--this.size,!0}function Ho(e){var n=this.__data__,t=ir(n,e);return t<0?a:n[t][1]}function $o(e){return ir(this.__data__,e)>-1}function zo(e,n){var t=this.__data__,r=ir(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}_n.prototype.clear=Fo,_n.prototype.delete=Go,_n.prototype.get=Ho,_n.prototype.has=$o,_n.prototype.set=zo;function vn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Ko(){this.size=0,this.__data__={hash:new Kn,map:new(yt||_n),string:new Kn}}function qo(e){var n=_r(this,e).delete(e);return this.size-=n?1:0,n}function ko(e){return _r(this,e).get(e)}function Yo(e){return _r(this,e).has(e)}function Zo(e,n){var t=_r(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}vn.prototype.clear=Ko,vn.prototype.delete=qo,vn.prototype.get=ko,vn.prototype.has=Yo,vn.prototype.set=Zo;function qn(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new vn;++n<t;)this.add(e[n])}function Xo(e){return this.__data__.set(e,Le),this}function Jo(e){return this.__data__.has(e)}qn.prototype.add=qn.prototype.push=Xo,qn.prototype.has=Jo;function an(e){var n=this.__data__=new _n(e);this.size=n.size}function Qo(){this.__data__=new _n,this.size=0}function Vo(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}function ef(e){return this.__data__.get(e)}function nf(e){return this.__data__.has(e)}function tf(e,n){var t=this.__data__;if(t instanceof _n){var r=t.__data__;if(!yt||r.length<M-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new vn(r)}return t.set(e,n),this.size=t.size,this}an.prototype.clear=Qo,an.prototype.delete=Vo,an.prototype.get=ef,an.prototype.has=nf,an.prototype.set=tf;function Zs(e,n){var t=I(e),r=!t&&Jn(e),i=!t&&!r&&Pn(e),u=!t&&!r&&!i&&gt(e),l=t||r||i||u,o=l?ti(e.length,co):[],h=o.length;for(var p in e)(n||ee.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||u&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||yn(p,h)))&&o.push(p);return o}function Xs(e){var n=e.length;return n?e[xi(0,n-1)]:a}function rf(e,n){return vr(je(e),kn(n,0,e.length))}function sf(e){return vr(je(e))}function oi(e,n,t){(t!==a&&!ln(e[n],t)||t===a&&!(n in e))&&mn(e,n,t)}function St(e,n,t){var r=e[n];(!(ee.call(e,n)&&ln(r,t))||t===a&&!(n in e))&&mn(e,n,t)}function ir(e,n){for(var t=e.length;t--;)if(ln(e[t][0],n))return t;return-1}function uf(e,n,t,r){return On(e,function(i,u,l){n(r,i,t(i),l)}),r}function Js(e,n){return e&&hn(n,be(n),e)}function af(e,n){return e&&hn(n,Be(n),e)}function mn(e,n,t){n=="__proto__"&&Qt?Qt(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function fi(e,n){for(var t=-1,r=n.length,i=d(r),u=e==null;++t<r;)i[t]=u?a:zi(e,n[t]);return i}function kn(e,n,t){return e===e&&(t!==a&&(e=e<=t?e:t),n!==a&&(e=e>=n?e:n)),e}function en(e,n,t,r,i,u){var l,o=n&ne,h=n&k,p=n&J;if(t&&(l=i?t(e,r,i,u):t(e)),l!==a)return l;if(!ce(e))return e;var _=I(e);if(_){if(l=Zf(e),!o)return je(e,l)}else{var v=Re(e),m=v==O||v==$;if(Pn(e))return yu(e,o);if(v==Ze||v==Sn||m&&!i){if(l=h||m?{}:Fu(e),!o)return h?Bf(e,af(l,e)):Pf(e,Js(l,e))}else{if(!ie[v])return i?e:{};l=Xf(e,v,o)}}u||(u=new an);var b=u.get(e);if(b)return b;u.set(e,l),pa(e)?e.forEach(function(R){l.add(en(R,n,t,R,e,u))}):da(e)&&e.forEach(function(R,U){l.set(U,en(R,n,t,U,e,u))});var T=p?h?Ei:Ri:h?Be:be,W=_?a:T(e);return Je(W||e,function(R,U){W&&(U=R,R=e[U]),St(l,U,en(R,n,t,U,e,u))}),l}function lf(e){var n=be(e);return function(t){return Qs(t,e,n)}}function Qs(e,n,t){var r=t.length;if(e==null)return!r;for(e=re(e);r--;){var i=t[r],u=n[i],l=e[i];if(l===a&&!(i in e)||!u(l))return!1}return!0}function Vs(e,n,t){if(typeof e!="function")throw new Qe(H);return Mt(function(){e.apply(a,t)},n)}function Lt(e,n,t,r){var i=-1,u=Gt,l=!0,o=e.length,h=[],p=n.length;if(!o)return h;t&&(n=fe(n,Ge(t))),r?(u=Xr,l=!1):n.length>=M&&(u=xt,l=!1,n=new qn(n));e:for(;++i<o;){var _=e[i],v=t==null?_:t(_);if(_=r||_!==0?_:0,l&&v===v){for(var m=p;m--;)if(n[m]===v)continue e;h.push(_)}else u(n,v,r)||h.push(_)}return h}var On=Lu(cn),eu=Lu(hi,!0);function of(e,n){var t=!0;return On(e,function(r,i,u){return t=!!n(r,i,u),t}),t}function sr(e,n,t){for(var r=-1,i=e.length;++r<i;){var u=e[r],l=n(u);if(l!=null&&(o===a?l===l&&!$e(l):t(l,o)))var o=l,h=u}return h}function ff(e,n,t,r){var i=e.length;for(t=D(t),t<0&&(t=-t>i?0:i+t),r=r===a||r>i?i:D(r),r<0&&(r+=i),r=t>r?0:va(r);t<r;)e[t++]=n;return e}function nu(e,n){var t=[];return On(e,function(r,i,u){n(r,i,u)&&t.push(r)}),t}function Se(e,n,t,r,i){var u=-1,l=e.length;for(t||(t=Qf),i||(i=[]);++u<l;){var o=e[u];n>0&&t(o)?n>1?Se(o,n-1,t,r,i):En(i,o):r||(i[i.length]=o)}return i}var ci=Cu(),tu=Cu(!0);function cn(e,n){return e&&ci(e,n,be)}function hi(e,n){return e&&tu(e,n,be)}function ur(e,n){return Rn(n,function(t){return bn(e[t])})}function Yn(e,n){n=Wn(n,e);for(var t=0,r=n.length;e!=null&&t<r;)e=e[dn(n[t++])];return t&&t==r?e:a}function ru(e,n,t){var r=n(e);return I(e)?r:En(r,t(e))}function Oe(e){return e==null?e===a?Pt:Ln:zn&&zn in re(e)?qf(e):sc(e)}function di(e,n){return e>n}function cf(e,n){return e!=null&&ee.call(e,n)}function hf(e,n){return e!=null&&n in re(e)}function df(e,n,t){return e>=Te(n,t)&&e<we(n,t)}function gi(e,n,t){for(var r=t?Xr:Gt,i=e[0].length,u=e.length,l=u,o=d(u),h=1/0,p=[];l--;){var _=e[l];l&&n&&(_=fe(_,Ge(n))),h=Te(_.length,h),o[l]=!t&&(n||i>=120&&_.length>=120)?new qn(l&&_):a}_=e[0];var v=-1,m=o[0];e:for(;++v<i&&p.length<h;){var b=_[v],T=n?n(b):b;if(b=t||b!==0?b:0,!(m?xt(m,T):r(p,T,t))){for(l=u;--l;){var W=o[l];if(!(W?xt(W,T):r(e[l],T,t)))continue e}m&&m.push(T),p.push(b)}}return p}function gf(e,n,t,r){return cn(e,function(i,u,l){n(r,t(i),u,l)}),r}function Ct(e,n,t){n=Wn(n,e),e=zu(e,n);var r=e==null?e:e[dn(tn(n))];return r==null?a:Fe(r,e,t)}function iu(e){return he(e)&&Oe(e)==Sn}function pf(e){return he(e)&&Oe(e)==pn}function _f(e){return he(e)&&Oe(e)==Gn}function Tt(e,n,t,r,i){return e===n?!0:e==null||n==null||!he(e)&&!he(n)?e!==e&&n!==n:vf(e,n,t,r,Tt,i)}function vf(e,n,t,r,i,u){var l=I(e),o=I(n),h=l?Vn:Re(e),p=o?Vn:Re(n);h=h==Sn?Ze:h,p=p==Sn?Ze:p;var _=h==Ze,v=p==Ze,m=h==p;if(m&&Pn(e)){if(!Pn(n))return!1;l=!0,_=!1}if(m&&!_)return u||(u=new an),l||gt(e)?Pu(e,n,t,r,i,u):zf(e,n,h,t,r,i,u);if(!(t&ae)){var b=_&&ee.call(e,"__wrapped__"),T=v&&ee.call(n,"__wrapped__");if(b||T){var W=b?e.value():e,R=T?n.value():n;return u||(u=new an),i(W,R,t,r,u)}}return m?(u||(u=new an),Kf(e,n,t,r,i,u)):!1}function mf(e){return he(e)&&Re(e)==oe}function pi(e,n,t,r){var i=t.length,u=i,l=!r;if(e==null)return!u;for(e=re(e);i--;){var o=t[i];if(l&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<u;){o=t[i];var h=o[0],p=e[h],_=o[1];if(l&&o[2]){if(p===a&&!(h in e))return!1}else{var v=new an;if(r)var m=r(p,_,h,e,n,v);if(!(m===a?Tt(_,p,ae|le,r,v):m))return!1}}return!0}function su(e){if(!ce(e)||ec(e))return!1;var n=bn(e)?vo:ul;return n.test(Xn(e))}function xf(e){return he(e)&&Oe(e)==Cn}function wf(e){return he(e)&&Re(e)==Me}function yf(e){return he(e)&&Ar(e.length)&&!!ue[Oe(e)]}function uu(e){return typeof e=="function"?e:e==null?Ue:typeof e=="object"?I(e)?ou(e[0],e[1]):lu(e):Ta(e)}function _i(e){if(!It(e))return Ao(e);var n=[];for(var t in re(e))ee.call(e,t)&&t!="constructor"&&n.push(t);return n}function bf(e){if(!ce(e))return ic(e);var n=It(e),t=[];for(var r in e)r=="constructor"&&(n||!ee.call(e,r))||t.push(r);return t}function vi(e,n){return e<n}function au(e,n){var t=-1,r=Pe(e)?d(e.length):[];return On(e,function(i,u,l){r[++t]=n(i,u,l)}),r}function lu(e){var n=Mi(e);return n.length==1&&n[0][2]?Hu(n[0][0],n[0][1]):function(t){return t===e||pi(t,e,n)}}function ou(e,n){return Di(e)&&Gu(n)?Hu(dn(e),n):function(t){var r=zi(t,e);return r===a&&r===n?Ki(t,e):Tt(n,r,ae|le)}}function ar(e,n,t,r,i){e!==n&&ci(n,function(u,l){if(i||(i=new an),ce(u))Af(e,n,l,t,ar,r,i);else{var o=r?r(ji(e,l),u,l+"",e,n,i):a;o===a&&(o=u),oi(e,l,o)}},Be)}function Af(e,n,t,r,i,u,l){var o=ji(e,t),h=ji(n,t),p=l.get(h);if(p){oi(e,t,p);return}var _=u?u(o,h,t+"",e,n,l):a,v=_===a;if(v){var m=I(h),b=!m&&Pn(h),T=!m&&!b&&gt(h);_=h,m||b||T?I(o)?_=o:ge(o)?_=je(o):b?(v=!1,_=yu(h,!0)):T?(v=!1,_=bu(h,!0)):_=[]:Ot(h)||Jn(h)?(_=o,Jn(o)?_=ma(o):(!ce(o)||bn(o))&&(_=Fu(h))):v=!1}v&&(l.set(h,_),i(_,h,r,u,l),l.delete(h)),oi(e,t,_)}function fu(e,n){var t=e.length;if(t)return n+=n<0?t:0,yn(n,t)?e[n]:a}function cu(e,n,t){n.length?n=fe(n,function(u){return I(u)?function(l){return Yn(l,u.length===1?u[0]:u)}:u}):n=[Ue];var r=-1;n=fe(n,Ge(L()));var i=au(e,function(u,l,o){var h=fe(n,function(p){return p(u)});return{criteria:h,index:++r,value:u}});return Yl(i,function(u,l){return jf(u,l,t)})}function Nf(e,n){return hu(e,n,function(t,r){return Ki(e,r)})}function hu(e,n,t){for(var r=-1,i=n.length,u={};++r<i;){var l=n[r],o=Yn(e,l);t(o,l)&&Rt(u,Wn(l,e),o)}return u}function Sf(e){return function(n){return Yn(n,e)}}function mi(e,n,t,r){var i=r?kl:rt,u=-1,l=n.length,o=e;for(e===n&&(n=je(n)),t&&(o=fe(e,Ge(t)));++u<l;)for(var h=0,p=n[u],_=t?t(p):p;(h=i(o,_,h,r))>-1;)o!==e&&Jt.call(o,h,1),Jt.call(e,h,1);return e}function du(e,n){for(var t=e?n.length:0,r=t-1;t--;){var i=n[t];if(t==r||i!==u){var u=i;yn(i)?Jt.call(e,i,1):bi(e,i)}}return e}function xi(e,n){return e+er(ks()*(n-e+1))}function Lf(e,n,t,r){for(var i=-1,u=we(Vt((n-e)/(t||1)),0),l=d(u);u--;)l[r?u:++i]=e,e+=t;return l}function wi(e,n){var t="";if(!e||n<1||n>fn)return t;do n%2&&(t+=e),n=er(n/2),n&&(e+=e);while(n);return t}function P(e,n){return Pi($u(e,n,Ue),e+"")}function Cf(e){return Xs(pt(e))}function Tf(e,n){var t=pt(e);return vr(t,kn(n,0,t.length))}function Rt(e,n,t,r){if(!ce(e))return e;n=Wn(n,e);for(var i=-1,u=n.length,l=u-1,o=e;o!=null&&++i<u;){var h=dn(n[i]),p=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=l){var _=o[h];p=r?r(_,h,o):a,p===a&&(p=ce(_)?_:yn(n[i+1])?[]:{})}St(o,h,p),o=o[h]}return e}var gu=nr?function(e,n){return nr.set(e,n),e}:Ue,Rf=Qt?function(e,n){return Qt(e,"toString",{configurable:!0,enumerable:!1,value:ki(n),writable:!0})}:Ue;function Ef(e){return vr(pt(e))}function nn(e,n,t){var r=-1,i=e.length;n<0&&(n=-n>i?0:i+n),t=t>i?i:t,t<0&&(t+=i),i=n>t?0:t-n>>>0,n>>>=0;for(var u=d(i);++r<i;)u[r]=e[r+n];return u}function If(e,n){var t;return On(e,function(r,i,u){return t=n(r,i,u),!t}),!!t}function lr(e,n,t){var r=0,i=e==null?r:e.length;if(typeof n=="number"&&n===n&&i<=Wt){for(;r<i;){var u=r+i>>>1,l=e[u];l!==null&&!$e(l)&&(t?l<=n:l<n)?r=u+1:i=u}return i}return yi(e,n,Ue,t)}function yi(e,n,t,r){var i=0,u=e==null?0:e.length;if(u===0)return 0;n=t(n);for(var l=n!==n,o=n===null,h=$e(n),p=n===a;i<u;){var _=er((i+u)/2),v=t(e[_]),m=v!==a,b=v===null,T=v===v,W=$e(v);if(l)var R=r||T;else p?R=T&&(r||m):o?R=T&&m&&(r||!b):h?R=T&&m&&!b&&(r||!W):b||W?R=!1:R=r?v<=n:v<n;R?i=_+1:u=_}return Te(u,Er)}function pu(e,n){for(var t=-1,r=e.length,i=0,u=[];++t<r;){var l=e[t],o=n?n(l):l;if(!t||!ln(o,h)){var h=o;u[i++]=l===0?0:l}}return u}function _u(e){return typeof e=="number"?e:$e(e)?ke:+e}function He(e){if(typeof e=="string")return e;if(I(e))return fe(e,He)+"";if($e(e))return Ys?Ys.call(e):"";var n=e+"";return n=="0"&&1/e==-gn?"-0":n}function Dn(e,n,t){var r=-1,i=Gt,u=e.length,l=!0,o=[],h=o;if(t)l=!1,i=Xr;else if(u>=M){var p=n?null:Hf(e);if(p)return $t(p);l=!1,i=xt,h=new qn}else h=n?[]:o;e:for(;++r<u;){var _=e[r],v=n?n(_):_;if(_=t||_!==0?_:0,l&&v===v){for(var m=h.length;m--;)if(h[m]===v)continue e;n&&h.push(v),o.push(_)}else i(h,v,t)||(h!==o&&h.push(v),o.push(_))}return o}function bi(e,n){return n=Wn(n,e),e=zu(e,n),e==null||delete e[dn(tn(n))]}function vu(e,n,t,r){return Rt(e,n,t(Yn(e,n)),r)}function or(e,n,t,r){for(var i=e.length,u=r?i:-1;(r?u--:++u<i)&&n(e[u],u,e););return t?nn(e,r?0:u,r?u+1:i):nn(e,r?u+1:0,r?i:u)}function mu(e,n){var t=e;return t instanceof G&&(t=t.value()),Jr(n,function(r,i){return i.func.apply(i.thisArg,En([r],i.args))},t)}function Ai(e,n,t){var r=e.length;if(r<2)return r?Dn(e[0]):[];for(var i=-1,u=d(r);++i<r;)for(var l=e[i],o=-1;++o<r;)o!=i&&(u[i]=Lt(u[i]||l,e[o],n,t));return Dn(Se(u,1),n,t)}function xu(e,n,t){for(var r=-1,i=e.length,u=n.length,l={};++r<i;){var o=r<u?n[r]:a;t(l,e[r],o)}return l}function Ni(e){return ge(e)?e:[]}function Si(e){return typeof e=="function"?e:Ue}function Wn(e,n){return I(e)?e:Di(e,n)?[e]:Yu(Q(e))}var Mf=P;function jn(e,n,t){var r=e.length;return t=t===a?r:t,!n&&t>=r?e:nn(e,n,t)}var wu=mo||function(e){return Ne.clearTimeout(e)};function yu(e,n){if(n)return e.slice();var t=e.length,r=Hs?Hs(t):new e.constructor(t);return e.copy(r),r}function Li(e){var n=new e.constructor(e.byteLength);return new Zt(n).set(new Zt(e)),n}function Of(e,n){var t=n?Li(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}function Df(e){var n=new e.constructor(e.source,is.exec(e));return n.lastIndex=e.lastIndex,n}function Wf(e){return Nt?re(Nt.call(e)):{}}function bu(e,n){var t=n?Li(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function Au(e,n){if(e!==n){var t=e!==a,r=e===null,i=e===e,u=$e(e),l=n!==a,o=n===null,h=n===n,p=$e(n);if(!o&&!p&&!u&&e>n||u&&l&&h&&!o&&!p||r&&l&&h||!t&&h||!i)return 1;if(!r&&!u&&!p&&e<n||p&&t&&i&&!r&&!u||o&&t&&i||!l&&i||!h)return-1}return 0}function jf(e,n,t){for(var r=-1,i=e.criteria,u=n.criteria,l=i.length,o=t.length;++r<l;){var h=Au(i[r],u[r]);if(h){if(r>=o)return h;var p=t[r];return h*(p=="desc"?-1:1)}}return e.index-n.index}function Nu(e,n,t,r){for(var i=-1,u=e.length,l=t.length,o=-1,h=n.length,p=we(u-l,0),_=d(h+p),v=!r;++o<h;)_[o]=n[o];for(;++i<l;)(v||i<u)&&(_[t[i]]=e[i]);for(;p--;)_[o++]=e[i++];return _}function Su(e,n,t,r){for(var i=-1,u=e.length,l=-1,o=t.length,h=-1,p=n.length,_=we(u-o,0),v=d(_+p),m=!r;++i<_;)v[i]=e[i];for(var b=i;++h<p;)v[b+h]=n[h];for(;++l<o;)(m||i<u)&&(v[b+t[l]]=e[i++]);return v}function je(e,n){var t=-1,r=e.length;for(n||(n=d(r));++t<r;)n[t]=e[t];return n}function hn(e,n,t,r){var i=!t;t||(t={});for(var u=-1,l=n.length;++u<l;){var o=n[u],h=r?r(t[o],e[o],o,t,e):a;h===a&&(h=e[o]),i?mn(t,o,h):St(t,o,h)}return t}function Pf(e,n){return hn(e,Oi(e),n)}function Bf(e,n){return hn(e,Bu(e),n)}function fr(e,n){return function(t,r){var i=I(t)?Gl:uf,u=n?n():{};return i(t,e,L(r,2),u)}}function ct(e){return P(function(n,t){var r=-1,i=t.length,u=i>1?t[i-1]:a,l=i>2?t[2]:a;for(u=e.length>3&&typeof u=="function"?(i--,u):a,l&&De(t[0],t[1],l)&&(u=i<3?a:u,i=1),n=re(n);++r<i;){var o=t[r];o&&e(n,o,r,u)}return n})}function Lu(e,n){return function(t,r){if(t==null)return t;if(!Pe(t))return e(t,r);for(var i=t.length,u=n?i:-1,l=re(t);(n?u--:++u<i)&&r(l[u],u,l)!==!1;);return t}}function Cu(e){return function(n,t,r){for(var i=-1,u=re(n),l=r(n),o=l.length;o--;){var h=l[e?o:++i];if(t(u[h],h,u)===!1)break}return n}}function Uf(e,n,t){var r=n&Y,i=Et(e);function u(){var l=this&&this!==Ne&&this instanceof u?i:e;return l.apply(r?t:this,arguments)}return u}function Tu(e){return function(n){n=Q(n);var t=it(n)?un(n):a,r=t?t[0]:n.charAt(0),i=t?jn(t,1).join(""):n.slice(1);return r[e]()+i}}function ht(e){return function(n){return Jr(La(Sa(n).replace(Cl,"")),e,"")}}function Et(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=ft(e.prototype),r=e.apply(t,n);return ce(r)?r:t}}function Ff(e,n,t){var r=Et(e);function i(){for(var u=arguments.length,l=d(u),o=u,h=dt(i);o--;)l[o]=arguments[o];var p=u<3&&l[0]!==h&&l[u-1]!==h?[]:In(l,h);if(u-=p.length,u<t)return Ou(e,n,cr,i.placeholder,a,l,p,a,a,t-u);var _=this&&this!==Ne&&this instanceof i?r:e;return Fe(_,this,l)}return i}function Ru(e){return function(n,t,r){var i=re(n);if(!Pe(n)){var u=L(t,3);n=be(n),t=function(o){return u(i[o],o,i)}}var l=e(n,t,r);return l>-1?i[u?n[l]:l]:a}}function Eu(e){return wn(function(n){var t=n.length,r=t,i=Ve.prototype.thru;for(e&&n.reverse();r--;){var u=n[r];if(typeof u!="function")throw new Qe(H);if(i&&!l&&pr(u)=="wrapper")var l=new Ve([],!0)}for(r=l?r:t;++r<t;){u=n[r];var o=pr(u),h=o=="wrapper"?Ii(u):a;h&&Wi(h[0])&&h[1]==(A|de|q|j)&&!h[4].length&&h[9]==1?l=l[pr(h[0])].apply(l,h[3]):l=u.length==1&&Wi(u)?l[o]():l.thru(u)}return function(){var p=arguments,_=p[0];if(l&&p.length==1&&I(_))return l.plant(_).value();for(var v=0,m=t?n[v].apply(this,p):_;++v<t;)m=n[v].call(this,m);return m}})}function cr(e,n,t,r,i,u,l,o,h,p){var _=n&A,v=n&Y,m=n&se,b=n&(de|S),T=n&F,W=m?a:Et(e);function R(){for(var U=arguments.length,z=d(U),ze=U;ze--;)z[ze]=arguments[ze];if(b)var We=dt(R),Ke=Xl(z,We);if(r&&(z=Nu(z,r,i,b)),u&&(z=Su(z,u,l,b)),U-=Ke,b&&U<p){var pe=In(z,We);return Ou(e,n,cr,R.placeholder,t,z,pe,o,h,p-U)}var on=v?t:this,Nn=m?on[e]:e;return U=z.length,o?z=uc(z,o):T&&U>1&&z.reverse(),_&&h<U&&(z.length=h),this&&this!==Ne&&this instanceof R&&(Nn=W||Et(Nn)),Nn.apply(on,z)}return R}function Iu(e,n){return function(t,r){return gf(t,e,n(r),{})}}function hr(e,n){return function(t,r){var i;if(t===a&&r===a)return n;if(t!==a&&(i=t),r!==a){if(i===a)return r;typeof t=="string"||typeof r=="string"?(t=He(t),r=He(r)):(t=_u(t),r=_u(r)),i=e(t,r)}return i}}function Ci(e){return wn(function(n){return n=fe(n,Ge(L())),P(function(t){var r=this;return e(n,function(i){return Fe(i,r,t)})})})}function dr(e,n){n=n===a?" ":He(n);var t=n.length;if(t<2)return t?wi(n,e):n;var r=wi(n,Vt(e/st(n)));return it(n)?jn(un(r),0,e).join(""):r.slice(0,e)}function Gf(e,n,t,r){var i=n&Y,u=Et(e);function l(){for(var o=-1,h=arguments.length,p=-1,_=r.length,v=d(_+h),m=this&&this!==Ne&&this instanceof l?u:e;++p<_;)v[p]=r[p];for(;h--;)v[p++]=arguments[++o];return Fe(m,i?t:this,v)}return l}function Mu(e){return function(n,t,r){return r&&typeof r!="number"&&De(n,t,r)&&(t=r=a),n=An(n),t===a?(t=n,n=0):t=An(t),r=r===a?n<t?1:-1:An(r),Lf(n,t,r,e)}}function gr(e){return function(n,t){return typeof n=="string"&&typeof t=="string"||(n=rn(n),t=rn(t)),e(n,t)}}function Ou(e,n,t,r,i,u,l,o,h,p){var _=n&de,v=_?l:a,m=_?a:l,b=_?u:a,T=_?a:u;n|=_?q:ve,n&=~(_?ve:q),n&Ae||(n&=-4);var W=[e,n,i,b,v,T,m,o,h,p],R=t.apply(a,W);return Wi(e)&&Ku(R,W),R.placeholder=r,qu(R,e,n)}function Ti(e){var n=xe[e];return function(t,r){if(t=rn(t),r=r==null?0:Te(D(r),292),r&&qs(t)){var i=(Q(t)+"e").split("e"),u=n(i[0]+"e"+(+i[1]+r));return i=(Q(u)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return n(t)}}var Hf=lt&&1/$t(new lt([,-0]))[1]==gn?function(e){return new lt(e)}:Xi;function Du(e){return function(n){var t=Re(n);return t==oe?ii(n):t==Me?ro(n):Zl(n,e(n))}}function xn(e,n,t,r,i,u,l,o){var h=n&se;if(!h&&typeof e!="function")throw new Qe(H);var p=r?r.length:0;if(p||(n&=-97,r=i=a),l=l===a?l:we(D(l),0),o=o===a?o:D(o),p-=i?i.length:0,n&ve){var _=r,v=i;r=i=a}var m=h?a:Ii(e),b=[e,n,t,r,i,_,v,u,l,o];if(m&&rc(b,m),e=b[0],n=b[1],t=b[2],r=b[3],i=b[4],o=b[9]=b[9]===a?h?0:e.length:we(b[9]-p,0),!o&&n&(de|S)&&(n&=-25),!n||n==Y)var T=Uf(e,n,t);else n==de||n==S?T=Ff(e,n,o):(n==q||n==(Y|q))&&!i.length?T=Gf(e,n,t,r):T=cr.apply(a,b);var W=m?gu:Ku;return qu(W(T,b),e,n)}function Wu(e,n,t,r){return e===a||ln(e,at[t])&&!ee.call(r,t)?n:e}function ju(e,n,t,r,i,u){return ce(e)&&ce(n)&&(u.set(n,e),ar(e,n,a,ju,u),u.delete(n)),e}function $f(e){return Ot(e)?a:e}function Pu(e,n,t,r,i,u){var l=t&ae,o=e.length,h=n.length;if(o!=h&&!(l&&h>o))return!1;var p=u.get(e),_=u.get(n);if(p&&_)return p==n&&_==e;var v=-1,m=!0,b=t&le?new qn:a;for(u.set(e,n),u.set(n,e);++v<o;){var T=e[v],W=n[v];if(r)var R=l?r(W,T,v,n,e,u):r(T,W,v,e,n,u);if(R!==a){if(R)continue;m=!1;break}if(b){if(!Qr(n,function(U,z){if(!xt(b,z)&&(T===U||i(T,U,t,r,u)))return b.push(z)})){m=!1;break}}else if(!(T===W||i(T,W,t,r,u))){m=!1;break}}return u.delete(e),u.delete(n),m}function zf(e,n,t,r,i,u,l){switch(t){case nt:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case pn:return!(e.byteLength!=n.byteLength||!u(new Zt(e),new Zt(n)));case Fn:case Gn:case Ce:return ln(+e,+n);case C:return e.name==n.name&&e.message==n.message;case Cn:case Tn:return e==n+"";case oe:var o=ii;case Me:var h=r&ae;if(o||(o=$t),e.size!=n.size&&!h)return!1;var p=l.get(e);if(p)return p==n;r|=le,l.set(e,n);var _=Pu(o(e),o(n),r,i,u,l);return l.delete(e),_;case Hn:if(Nt)return Nt.call(e)==Nt.call(n)}return!1}function Kf(e,n,t,r,i,u){var l=t&ae,o=Ri(e),h=o.length,p=Ri(n),_=p.length;if(h!=_&&!l)return!1;for(var v=h;v--;){var m=o[v];if(!(l?m in n:ee.call(n,m)))return!1}var b=u.get(e),T=u.get(n);if(b&&T)return b==n&&T==e;var W=!0;u.set(e,n),u.set(n,e);for(var R=l;++v<h;){m=o[v];var U=e[m],z=n[m];if(r)var ze=l?r(z,U,m,n,e,u):r(U,z,m,e,n,u);if(!(ze===a?U===z||i(U,z,t,r,u):ze)){W=!1;break}R||(R=m=="constructor")}if(W&&!R){var We=e.constructor,Ke=n.constructor;We!=Ke&&"constructor"in e&&"constructor"in n&&!(typeof We=="function"&&We instanceof We&&typeof Ke=="function"&&Ke instanceof Ke)&&(W=!1)}return u.delete(e),u.delete(n),W}function wn(e){return Pi($u(e,a,Qu),e+"")}function Ri(e){return ru(e,be,Oi)}function Ei(e){return ru(e,Be,Bu)}var Ii=nr?function(e){return nr.get(e)}:Xi;function pr(e){for(var n=e.name+"",t=ot[n],r=ee.call(ot,n)?t.length:0;r--;){var i=t[r],u=i.func;if(u==null||u==e)return i.name}return n}function dt(e){var n=ee.call(s,"placeholder")?s:e;return n.placeholder}function L(){var e=s.iteratee||Yi;return e=e===Yi?uu:e,arguments.length?e(arguments[0],arguments[1]):e}function _r(e,n){var t=e.__data__;return Vf(n)?t[typeof n=="string"?"string":"hash"]:t.map}function Mi(e){for(var n=be(e),t=n.length;t--;){var r=n[t],i=e[r];n[t]=[r,i,Gu(i)]}return n}function Zn(e,n){var t=eo(e,n);return su(t)?t:a}function qf(e){var n=ee.call(e,zn),t=e[zn];try{e[zn]=a;var r=!0}catch{}var i=kt.call(e);return r&&(n?e[zn]=t:delete e[zn]),i}var Oi=ui?function(e){return e==null?[]:(e=re(e),Rn(ui(e),function(n){return zs.call(e,n)}))}:Ji,Bu=ui?function(e){for(var n=[];e;)En(n,Oi(e)),e=Xt(e);return n}:Ji,Re=Oe;(ai&&Re(new ai(new ArrayBuffer(1)))!=nt||yt&&Re(new yt)!=oe||li&&Re(li.resolve())!=et||lt&&Re(new lt)!=Me||bt&&Re(new bt)!=sn)&&(Re=function(e){var n=Oe(e),t=n==Ze?e.constructor:a,r=t?Xn(t):"";if(r)switch(r){case Co:return nt;case To:return oe;case Ro:return et;case Eo:return Me;case Io:return sn}return n});function kf(e,n,t){for(var r=-1,i=t.length;++r<i;){var u=t[r],l=u.size;switch(u.type){case"drop":e+=l;break;case"dropRight":n-=l;break;case"take":n=Te(n,e+l);break;case"takeRight":e=we(e,n-l);break}}return{start:e,end:n}}function Yf(e){var n=e.match(Qa);return n?n[1].split(Va):[]}function Uu(e,n,t){n=Wn(n,e);for(var r=-1,i=n.length,u=!1;++r<i;){var l=dn(n[r]);if(!(u=e!=null&&t(e,l)))break;e=e[l]}return u||++r!=i?u:(i=e==null?0:e.length,!!i&&Ar(i)&&yn(l,i)&&(I(e)||Jn(e)))}function Zf(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&ee.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function Fu(e){return typeof e.constructor=="function"&&!It(e)?ft(Xt(e)):{}}function Xf(e,n,t){var r=e.constructor;switch(n){case pn:return Li(e);case Fn:case Gn:return new r(+e);case nt:return Of(e,t);case Mr:case Or:case Dr:case Wr:case jr:case Pr:case Br:case Ur:case Fr:return bu(e,t);case oe:return new r;case Ce:case Tn:return new r(e);case Cn:return Df(e);case Me:return new r;case Hn:return Wf(e)}}function Jf(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(Ja,`{
/* [wrapped with `+n+`] */
`)}function Qf(e){return I(e)||Jn(e)||!!(Ks&&e&&e[Ks])}function yn(e,n){var t=typeof e;return n=n??fn,!!n&&(t=="number"||t!="symbol"&&ll.test(e))&&e>-1&&e%1==0&&e<n}function De(e,n,t){if(!ce(t))return!1;var r=typeof n;return(r=="number"?Pe(t)&&yn(n,t.length):r=="string"&&n in t)?ln(t[n],e):!1}function Di(e,n){if(I(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||$e(e)?!0:ka.test(e)||!qa.test(e)||n!=null&&e in re(n)}function Vf(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function Wi(e){var n=pr(e),t=s[n];if(typeof t!="function"||!(n in G.prototype))return!1;if(e===t)return!0;var r=Ii(t);return!!r&&e===r[0]}function ec(e){return!!Gs&&Gs in e}var nc=Kt?bn:Qi;function It(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||at;return e===t}function Gu(e){return e===e&&!ce(e)}function Hu(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==a||e in re(t))}}function tc(e){var n=yr(e,function(r){return t.size===V&&t.clear(),r}),t=n.cache;return n}function rc(e,n){var t=e[1],r=n[1],i=t|r,u=i<(Y|se|A),l=r==A&&t==de||r==A&&t==j&&e[7].length<=n[8]||r==(A|j)&&n[7].length<=n[8]&&t==de;if(!(u||l))return e;r&Y&&(e[2]=n[2],i|=t&Y?0:Ae);var o=n[3];if(o){var h=e[3];e[3]=h?Nu(h,o,n[4]):o,e[4]=h?In(e[3],X):n[4]}return o=n[5],o&&(h=e[5],e[5]=h?Su(h,o,n[6]):o,e[6]=h?In(e[5],X):n[6]),o=n[7],o&&(e[7]=o),r&A&&(e[8]=e[8]==null?n[8]:Te(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=i,e}function ic(e){var n=[];if(e!=null)for(var t in re(e))n.push(t);return n}function sc(e){return kt.call(e)}function $u(e,n,t){return n=we(n===a?e.length-1:n,0),function(){for(var r=arguments,i=-1,u=we(r.length-n,0),l=d(u);++i<u;)l[i]=r[n+i];i=-1;for(var o=d(n+1);++i<n;)o[i]=r[i];return o[n]=t(l),Fe(e,this,o)}}function zu(e,n){return n.length<2?e:Yn(e,nn(n,0,-1))}function uc(e,n){for(var t=e.length,r=Te(n.length,t),i=je(e);r--;){var u=n[r];e[r]=yn(u,t)?i[u]:a}return e}function ji(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Ku=ku(gu),Mt=wo||function(e,n){return Ne.setTimeout(e,n)},Pi=ku(Rf);function qu(e,n,t){var r=n+"";return Pi(e,Jf(r,ac(Yf(r),t)))}function ku(e){var n=0,t=0;return function(){var r=No(),i=Qn-(r-t);if(t=r,i>0){if(++n>=Ie)return arguments[0]}else n=0;return e.apply(a,arguments)}}function vr(e,n){var t=-1,r=e.length,i=r-1;for(n=n===a?r:n;++t<n;){var u=xi(t,i),l=e[u];e[u]=e[t],e[t]=l}return e.length=n,e}var Yu=tc(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Ya,function(t,r,i,u){n.push(i?u.replace(tl,"$1"):r||t)}),n});function dn(e){if(typeof e=="string"||$e(e))return e;var n=e+"";return n=="0"&&1/e==-gn?"-0":n}function Xn(e){if(e!=null){try{return qt.call(e)}catch{}try{return e+""}catch{}}return""}function ac(e,n){return Je(vt,function(t){var r="_."+t[0];n&t[1]&&!Gt(e,r)&&e.push(r)}),e.sort()}function Zu(e){if(e instanceof G)return e.clone();var n=new Ve(e.__wrapped__,e.__chain__);return n.__actions__=je(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function lc(e,n,t){(t?De(e,n,t):n===a)?n=1:n=we(D(n),0);var r=e==null?0:e.length;if(!r||n<1)return[];for(var i=0,u=0,l=d(Vt(r/n));i<r;)l[u++]=nn(e,i,i+=n);return l}function oc(e){for(var n=-1,t=e==null?0:e.length,r=0,i=[];++n<t;){var u=e[n];u&&(i[r++]=u)}return i}function fc(){var e=arguments.length;if(!e)return[];for(var n=d(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return En(I(t)?je(t):[t],Se(n,1))}var cc=P(function(e,n){return ge(e)?Lt(e,Se(n,1,ge,!0)):[]}),hc=P(function(e,n){var t=tn(n);return ge(t)&&(t=a),ge(e)?Lt(e,Se(n,1,ge,!0),L(t,2)):[]}),dc=P(function(e,n){var t=tn(n);return ge(t)&&(t=a),ge(e)?Lt(e,Se(n,1,ge,!0),a,t):[]});function gc(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===a?1:D(n),nn(e,n<0?0:n,r)):[]}function pc(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===a?1:D(n),n=r-n,nn(e,0,n<0?0:n)):[]}function _c(e,n){return e&&e.length?or(e,L(n,3),!0,!0):[]}function vc(e,n){return e&&e.length?or(e,L(n,3),!0):[]}function mc(e,n,t,r){var i=e==null?0:e.length;return i?(t&&typeof t!="number"&&De(e,n,t)&&(t=0,r=i),ff(e,n,t,r)):[]}function Xu(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:D(t);return i<0&&(i=we(r+i,0)),Ht(e,L(n,3),i)}function Ju(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return t!==a&&(i=D(t),i=t<0?we(r+i,0):Te(i,r-1)),Ht(e,L(n,3),i,!0)}function Qu(e){var n=e==null?0:e.length;return n?Se(e,1):[]}function xc(e){var n=e==null?0:e.length;return n?Se(e,gn):[]}function wc(e,n){var t=e==null?0:e.length;return t?(n=n===a?1:D(n),Se(e,n)):[]}function yc(e){for(var n=-1,t=e==null?0:e.length,r={};++n<t;){var i=e[n];r[i[0]]=i[1]}return r}function Vu(e){return e&&e.length?e[0]:a}function bc(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:D(t);return i<0&&(i=we(r+i,0)),rt(e,n,i)}function Ac(e){var n=e==null?0:e.length;return n?nn(e,0,-1):[]}var Nc=P(function(e){var n=fe(e,Ni);return n.length&&n[0]===e[0]?gi(n):[]}),Sc=P(function(e){var n=tn(e),t=fe(e,Ni);return n===tn(t)?n=a:t.pop(),t.length&&t[0]===e[0]?gi(t,L(n,2)):[]}),Lc=P(function(e){var n=tn(e),t=fe(e,Ni);return n=typeof n=="function"?n:a,n&&t.pop(),t.length&&t[0]===e[0]?gi(t,a,n):[]});function Cc(e,n){return e==null?"":bo.call(e,n)}function tn(e){var n=e==null?0:e.length;return n?e[n-1]:a}function Tc(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r;return t!==a&&(i=D(t),i=i<0?we(r+i,0):Te(i,r-1)),n===n?so(e,n,i):Ht(e,Os,i,!0)}function Rc(e,n){return e&&e.length?fu(e,D(n)):a}var Ec=P(ea);function ea(e,n){return e&&e.length&&n&&n.length?mi(e,n):e}function Ic(e,n,t){return e&&e.length&&n&&n.length?mi(e,n,L(t,2)):e}function Mc(e,n,t){return e&&e.length&&n&&n.length?mi(e,n,a,t):e}var Oc=wn(function(e,n){var t=e==null?0:e.length,r=fi(e,n);return du(e,fe(n,function(i){return yn(i,t)?+i:i}).sort(Au)),r});function Dc(e,n){var t=[];if(!(e&&e.length))return t;var r=-1,i=[],u=e.length;for(n=L(n,3);++r<u;){var l=e[r];n(l,r,e)&&(t.push(l),i.push(r))}return du(e,i),t}function Bi(e){return e==null?e:Lo.call(e)}function Wc(e,n,t){var r=e==null?0:e.length;return r?(t&&typeof t!="number"&&De(e,n,t)?(n=0,t=r):(n=n==null?0:D(n),t=t===a?r:D(t)),nn(e,n,t)):[]}function jc(e,n){return lr(e,n)}function Pc(e,n,t){return yi(e,n,L(t,2))}function Bc(e,n){var t=e==null?0:e.length;if(t){var r=lr(e,n);if(r<t&&ln(e[r],n))return r}return-1}function Uc(e,n){return lr(e,n,!0)}function Fc(e,n,t){return yi(e,n,L(t,2),!0)}function Gc(e,n){var t=e==null?0:e.length;if(t){var r=lr(e,n,!0)-1;if(ln(e[r],n))return r}return-1}function Hc(e){return e&&e.length?pu(e):[]}function $c(e,n){return e&&e.length?pu(e,L(n,2)):[]}function zc(e){var n=e==null?0:e.length;return n?nn(e,1,n):[]}function Kc(e,n,t){return e&&e.length?(n=t||n===a?1:D(n),nn(e,0,n<0?0:n)):[]}function qc(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===a?1:D(n),n=r-n,nn(e,n<0?0:n,r)):[]}function kc(e,n){return e&&e.length?or(e,L(n,3),!1,!0):[]}function Yc(e,n){return e&&e.length?or(e,L(n,3)):[]}var Zc=P(function(e){return Dn(Se(e,1,ge,!0))}),Xc=P(function(e){var n=tn(e);return ge(n)&&(n=a),Dn(Se(e,1,ge,!0),L(n,2))}),Jc=P(function(e){var n=tn(e);return n=typeof n=="function"?n:a,Dn(Se(e,1,ge,!0),a,n)});function Qc(e){return e&&e.length?Dn(e):[]}function Vc(e,n){return e&&e.length?Dn(e,L(n,2)):[]}function eh(e,n){return n=typeof n=="function"?n:a,e&&e.length?Dn(e,a,n):[]}function Ui(e){if(!(e&&e.length))return[];var n=0;return e=Rn(e,function(t){if(ge(t))return n=we(t.length,n),!0}),ti(n,function(t){return fe(e,Vr(t))})}function na(e,n){if(!(e&&e.length))return[];var t=Ui(e);return n==null?t:fe(t,function(r){return Fe(n,a,r)})}var nh=P(function(e,n){return ge(e)?Lt(e,n):[]}),th=P(function(e){return Ai(Rn(e,ge))}),rh=P(function(e){var n=tn(e);return ge(n)&&(n=a),Ai(Rn(e,ge),L(n,2))}),ih=P(function(e){var n=tn(e);return n=typeof n=="function"?n:a,Ai(Rn(e,ge),a,n)}),sh=P(Ui);function uh(e,n){return xu(e||[],n||[],St)}function ah(e,n){return xu(e||[],n||[],Rt)}var lh=P(function(e){var n=e.length,t=n>1?e[n-1]:a;return t=typeof t=="function"?(e.pop(),t):a,na(e,t)});function ta(e){var n=s(e);return n.__chain__=!0,n}function oh(e,n){return n(e),e}function mr(e,n){return n(e)}var fh=wn(function(e){var n=e.length,t=n?e[0]:0,r=this.__wrapped__,i=function(u){return fi(u,e)};return n>1||this.__actions__.length||!(r instanceof G)||!yn(t)?this.thru(i):(r=r.slice(t,+t+(n?1:0)),r.__actions__.push({func:mr,args:[i],thisArg:a}),new Ve(r,this.__chain__).thru(function(u){return n&&!u.length&&u.push(a),u}))});function ch(){return ta(this)}function hh(){return new Ve(this.value(),this.__chain__)}function dh(){this.__values__===a&&(this.__values__=_a(this.value()));var e=this.__index__>=this.__values__.length,n=e?a:this.__values__[this.__index__++];return{done:e,value:n}}function gh(){return this}function ph(e){for(var n,t=this;t instanceof rr;){var r=Zu(t);r.__index__=0,r.__values__=a,n?i.__wrapped__=r:n=r;var i=r;t=t.__wrapped__}return i.__wrapped__=e,n}function _h(){var e=this.__wrapped__;if(e instanceof G){var n=e;return this.__actions__.length&&(n=new G(this)),n=n.reverse(),n.__actions__.push({func:mr,args:[Bi],thisArg:a}),new Ve(n,this.__chain__)}return this.thru(Bi)}function vh(){return mu(this.__wrapped__,this.__actions__)}var mh=fr(function(e,n,t){ee.call(e,t)?++e[t]:mn(e,t,1)});function xh(e,n,t){var r=I(e)?Is:of;return t&&De(e,n,t)&&(n=a),r(e,L(n,3))}function wh(e,n){var t=I(e)?Rn:nu;return t(e,L(n,3))}var yh=Ru(Xu),bh=Ru(Ju);function Ah(e,n){return Se(xr(e,n),1)}function Nh(e,n){return Se(xr(e,n),gn)}function Sh(e,n,t){return t=t===a?1:D(t),Se(xr(e,n),t)}function ra(e,n){var t=I(e)?Je:On;return t(e,L(n,3))}function ia(e,n){var t=I(e)?Hl:eu;return t(e,L(n,3))}var Lh=fr(function(e,n,t){ee.call(e,t)?e[t].push(n):mn(e,t,[n])});function Ch(e,n,t,r){e=Pe(e)?e:pt(e),t=t&&!r?D(t):0;var i=e.length;return t<0&&(t=we(i+t,0)),Nr(e)?t<=i&&e.indexOf(n,t)>-1:!!i&&rt(e,n,t)>-1}var Th=P(function(e,n,t){var r=-1,i=typeof n=="function",u=Pe(e)?d(e.length):[];return On(e,function(l){u[++r]=i?Fe(n,l,t):Ct(l,n,t)}),u}),Rh=fr(function(e,n,t){mn(e,t,n)});function xr(e,n){var t=I(e)?fe:au;return t(e,L(n,3))}function Eh(e,n,t,r){return e==null?[]:(I(n)||(n=n==null?[]:[n]),t=r?a:t,I(t)||(t=t==null?[]:[t]),cu(e,n,t))}var Ih=fr(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]});function Mh(e,n,t){var r=I(e)?Jr:Ws,i=arguments.length<3;return r(e,L(n,4),t,i,On)}function Oh(e,n,t){var r=I(e)?$l:Ws,i=arguments.length<3;return r(e,L(n,4),t,i,eu)}function Dh(e,n){var t=I(e)?Rn:nu;return t(e,br(L(n,3)))}function Wh(e){var n=I(e)?Xs:Cf;return n(e)}function jh(e,n,t){(t?De(e,n,t):n===a)?n=1:n=D(n);var r=I(e)?rf:Tf;return r(e,n)}function Ph(e){var n=I(e)?sf:Ef;return n(e)}function Bh(e){if(e==null)return 0;if(Pe(e))return Nr(e)?st(e):e.length;var n=Re(e);return n==oe||n==Me?e.size:_i(e).length}function Uh(e,n,t){var r=I(e)?Qr:If;return t&&De(e,n,t)&&(n=a),r(e,L(n,3))}var Fh=P(function(e,n){if(e==null)return[];var t=n.length;return t>1&&De(e,n[0],n[1])?n=[]:t>2&&De(n[0],n[1],n[2])&&(n=[n[0]]),cu(e,Se(n,1),[])}),wr=xo||function(){return Ne.Date.now()};function Gh(e,n){if(typeof n!="function")throw new Qe(H);return e=D(e),function(){if(--e<1)return n.apply(this,arguments)}}function sa(e,n,t){return n=t?a:n,n=e&&n==null?e.length:n,xn(e,A,a,a,a,a,n)}function ua(e,n){var t;if(typeof n!="function")throw new Qe(H);return e=D(e),function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=a),t}}var Fi=P(function(e,n,t){var r=Y;if(t.length){var i=In(t,dt(Fi));r|=q}return xn(e,r,n,t,i)}),aa=P(function(e,n,t){var r=Y|se;if(t.length){var i=In(t,dt(aa));r|=q}return xn(n,r,e,t,i)});function la(e,n,t){n=t?a:n;var r=xn(e,de,a,a,a,a,a,n);return r.placeholder=la.placeholder,r}function oa(e,n,t){n=t?a:n;var r=xn(e,S,a,a,a,a,a,n);return r.placeholder=oa.placeholder,r}function fa(e,n,t){var r,i,u,l,o,h,p=0,_=!1,v=!1,m=!0;if(typeof e!="function")throw new Qe(H);n=rn(n)||0,ce(t)&&(_=!!t.leading,v="maxWait"in t,u=v?we(rn(t.maxWait)||0,n):u,m="trailing"in t?!!t.trailing:m);function b(pe){var on=r,Nn=i;return r=i=a,p=pe,l=e.apply(Nn,on),l}function T(pe){return p=pe,o=Mt(U,n),_?b(pe):l}function W(pe){var on=pe-h,Nn=pe-p,Ra=n-on;return v?Te(Ra,u-Nn):Ra}function R(pe){var on=pe-h,Nn=pe-p;return h===a||on>=n||on<0||v&&Nn>=u}function U(){var pe=wr();if(R(pe))return z(pe);o=Mt(U,W(pe))}function z(pe){return o=a,m&&r?b(pe):(r=i=a,l)}function ze(){o!==a&&wu(o),p=0,r=h=i=o=a}function We(){return o===a?l:z(wr())}function Ke(){var pe=wr(),on=R(pe);if(r=arguments,i=this,h=pe,on){if(o===a)return T(h);if(v)return wu(o),o=Mt(U,n),b(h)}return o===a&&(o=Mt(U,n)),l}return Ke.cancel=ze,Ke.flush=We,Ke}var Hh=P(function(e,n){return Vs(e,1,n)}),$h=P(function(e,n,t){return Vs(e,rn(n)||0,t)});function zh(e){return xn(e,F)}function yr(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Qe(H);var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],u=t.cache;if(u.has(i))return u.get(i);var l=e.apply(this,r);return t.cache=u.set(i,l)||u,l};return t.cache=new(yr.Cache||vn),t}yr.Cache=vn;function br(e){if(typeof e!="function")throw new Qe(H);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function Kh(e){return ua(2,e)}var qh=Mf(function(e,n){n=n.length==1&&I(n[0])?fe(n[0],Ge(L())):fe(Se(n,1),Ge(L()));var t=n.length;return P(function(r){for(var i=-1,u=Te(r.length,t);++i<u;)r[i]=n[i].call(this,r[i]);return Fe(e,this,r)})}),Gi=P(function(e,n){var t=In(n,dt(Gi));return xn(e,q,a,n,t)}),ca=P(function(e,n){var t=In(n,dt(ca));return xn(e,ve,a,n,t)}),kh=wn(function(e,n){return xn(e,j,a,a,a,n)});function Yh(e,n){if(typeof e!="function")throw new Qe(H);return n=n===a?n:D(n),P(e,n)}function Zh(e,n){if(typeof e!="function")throw new Qe(H);return n=n==null?0:we(D(n),0),P(function(t){var r=t[n],i=jn(t,0,n);return r&&En(i,r),Fe(e,this,i)})}function Xh(e,n,t){var r=!0,i=!0;if(typeof e!="function")throw new Qe(H);return ce(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),fa(e,n,{leading:r,maxWait:n,trailing:i})}function Jh(e){return sa(e,1)}function Qh(e,n){return Gi(Si(n),e)}function Vh(){if(!arguments.length)return[];var e=arguments[0];return I(e)?e:[e]}function ed(e){return en(e,J)}function nd(e,n){return n=typeof n=="function"?n:a,en(e,J,n)}function td(e){return en(e,ne|J)}function rd(e,n){return n=typeof n=="function"?n:a,en(e,ne|J,n)}function id(e,n){return n==null||Qs(e,n,be(n))}function ln(e,n){return e===n||e!==e&&n!==n}var sd=gr(di),ud=gr(function(e,n){return e>=n}),Jn=iu((function(){return arguments})())?iu:function(e){return he(e)&&ee.call(e,"callee")&&!zs.call(e,"callee")},I=d.isArray,ad=Ss?Ge(Ss):pf;function Pe(e){return e!=null&&Ar(e.length)&&!bn(e)}function ge(e){return he(e)&&Pe(e)}function ld(e){return e===!0||e===!1||he(e)&&Oe(e)==Fn}var Pn=yo||Qi,od=Ls?Ge(Ls):_f;function fd(e){return he(e)&&e.nodeType===1&&!Ot(e)}function cd(e){if(e==null)return!0;if(Pe(e)&&(I(e)||typeof e=="string"||typeof e.splice=="function"||Pn(e)||gt(e)||Jn(e)))return!e.length;var n=Re(e);if(n==oe||n==Me)return!e.size;if(It(e))return!_i(e).length;for(var t in e)if(ee.call(e,t))return!1;return!0}function hd(e,n){return Tt(e,n)}function dd(e,n,t){t=typeof t=="function"?t:a;var r=t?t(e,n):a;return r===a?Tt(e,n,a,t):!!r}function Hi(e){if(!he(e))return!1;var n=Oe(e);return n==C||n==y||typeof e.message=="string"&&typeof e.name=="string"&&!Ot(e)}function gd(e){return typeof e=="number"&&qs(e)}function bn(e){if(!ce(e))return!1;var n=Oe(e);return n==O||n==$||n==jt||n==mt}function ha(e){return typeof e=="number"&&e==D(e)}function Ar(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fn}function ce(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function he(e){return e!=null&&typeof e=="object"}var da=Cs?Ge(Cs):mf;function pd(e,n){return e===n||pi(e,n,Mi(n))}function _d(e,n,t){return t=typeof t=="function"?t:a,pi(e,n,Mi(n),t)}function vd(e){return ga(e)&&e!=+e}function md(e){if(nc(e))throw new E(B);return su(e)}function xd(e){return e===null}function wd(e){return e==null}function ga(e){return typeof e=="number"||he(e)&&Oe(e)==Ce}function Ot(e){if(!he(e)||Oe(e)!=Ze)return!1;var n=Xt(e);if(n===null)return!0;var t=ee.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&qt.call(t)==po}var $i=Ts?Ge(Ts):xf;function yd(e){return ha(e)&&e>=-fn&&e<=fn}var pa=Rs?Ge(Rs):wf;function Nr(e){return typeof e=="string"||!I(e)&&he(e)&&Oe(e)==Tn}function $e(e){return typeof e=="symbol"||he(e)&&Oe(e)==Hn}var gt=Es?Ge(Es):yf;function bd(e){return e===a}function Ad(e){return he(e)&&Re(e)==sn}function Nd(e){return he(e)&&Oe(e)==Ir}var Sd=gr(vi),Ld=gr(function(e,n){return e<=n});function _a(e){if(!e)return[];if(Pe(e))return Nr(e)?un(e):je(e);if(wt&&e[wt])return to(e[wt]());var n=Re(e),t=n==oe?ii:n==Me?$t:pt;return t(e)}function An(e){if(!e)return e===0?e:0;if(e=rn(e),e===gn||e===-gn){var n=e<0?-1:1;return n*Rr}return e===e?e:0}function D(e){var n=An(e),t=n%1;return n===n?t?n-t:n:0}function va(e){return e?kn(D(e),0,Ye):0}function rn(e){if(typeof e=="number")return e;if($e(e))return ke;if(ce(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=ce(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=js(e);var t=sl.test(e);return t||al.test(e)?Ul(e.slice(2),t?2:8):il.test(e)?ke:+e}function ma(e){return hn(e,Be(e))}function Cd(e){return e?kn(D(e),-fn,fn):e===0?e:0}function Q(e){return e==null?"":He(e)}var Td=ct(function(e,n){if(It(n)||Pe(n)){hn(n,be(n),e);return}for(var t in n)ee.call(n,t)&&St(e,t,n[t])}),xa=ct(function(e,n){hn(n,Be(n),e)}),Sr=ct(function(e,n,t,r){hn(n,Be(n),e,r)}),Rd=ct(function(e,n,t,r){hn(n,be(n),e,r)}),Ed=wn(fi);function Id(e,n){var t=ft(e);return n==null?t:Js(t,n)}var Md=P(function(e,n){e=re(e);var t=-1,r=n.length,i=r>2?n[2]:a;for(i&&De(n[0],n[1],i)&&(r=1);++t<r;)for(var u=n[t],l=Be(u),o=-1,h=l.length;++o<h;){var p=l[o],_=e[p];(_===a||ln(_,at[p])&&!ee.call(e,p))&&(e[p]=u[p])}return e}),Od=P(function(e){return e.push(a,ju),Fe(wa,a,e)});function Dd(e,n){return Ms(e,L(n,3),cn)}function Wd(e,n){return Ms(e,L(n,3),hi)}function jd(e,n){return e==null?e:ci(e,L(n,3),Be)}function Pd(e,n){return e==null?e:tu(e,L(n,3),Be)}function Bd(e,n){return e&&cn(e,L(n,3))}function Ud(e,n){return e&&hi(e,L(n,3))}function Fd(e){return e==null?[]:ur(e,be(e))}function Gd(e){return e==null?[]:ur(e,Be(e))}function zi(e,n,t){var r=e==null?a:Yn(e,n);return r===a?t:r}function Hd(e,n){return e!=null&&Uu(e,n,cf)}function Ki(e,n){return e!=null&&Uu(e,n,hf)}var $d=Iu(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=kt.call(n)),e[n]=t},ki(Ue)),zd=Iu(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=kt.call(n)),ee.call(e,n)?e[n].push(t):e[n]=[t]},L),Kd=P(Ct);function be(e){return Pe(e)?Zs(e):_i(e)}function Be(e){return Pe(e)?Zs(e,!0):bf(e)}function qd(e,n){var t={};return n=L(n,3),cn(e,function(r,i,u){mn(t,n(r,i,u),r)}),t}function kd(e,n){var t={};return n=L(n,3),cn(e,function(r,i,u){mn(t,i,n(r,i,u))}),t}var Yd=ct(function(e,n,t){ar(e,n,t)}),wa=ct(function(e,n,t,r){ar(e,n,t,r)}),Zd=wn(function(e,n){var t={};if(e==null)return t;var r=!1;n=fe(n,function(u){return u=Wn(u,e),r||(r=u.length>1),u}),hn(e,Ei(e),t),r&&(t=en(t,ne|k|J,$f));for(var i=n.length;i--;)bi(t,n[i]);return t});function Xd(e,n){return ya(e,br(L(n)))}var Jd=wn(function(e,n){return e==null?{}:Nf(e,n)});function ya(e,n){if(e==null)return{};var t=fe(Ei(e),function(r){return[r]});return n=L(n),hu(e,t,function(r,i){return n(r,i[0])})}function Qd(e,n,t){n=Wn(n,e);var r=-1,i=n.length;for(i||(i=1,e=a);++r<i;){var u=e==null?a:e[dn(n[r])];u===a&&(r=i,u=t),e=bn(u)?u.call(e):u}return e}function Vd(e,n,t){return e==null?e:Rt(e,n,t)}function eg(e,n,t,r){return r=typeof r=="function"?r:a,e==null?e:Rt(e,n,t,r)}var ba=Du(be),Aa=Du(Be);function ng(e,n,t){var r=I(e),i=r||Pn(e)||gt(e);if(n=L(n,4),t==null){var u=e&&e.constructor;i?t=r?new u:[]:ce(e)?t=bn(u)?ft(Xt(e)):{}:t={}}return(i?Je:cn)(e,function(l,o,h){return n(t,l,o,h)}),t}function tg(e,n){return e==null?!0:bi(e,n)}function rg(e,n,t){return e==null?e:vu(e,n,Si(t))}function ig(e,n,t,r){return r=typeof r=="function"?r:a,e==null?e:vu(e,n,Si(t),r)}function pt(e){return e==null?[]:ri(e,be(e))}function sg(e){return e==null?[]:ri(e,Be(e))}function ug(e,n,t){return t===a&&(t=n,n=a),t!==a&&(t=rn(t),t=t===t?t:0),n!==a&&(n=rn(n),n=n===n?n:0),kn(rn(e),n,t)}function ag(e,n,t){return n=An(n),t===a?(t=n,n=0):t=An(t),e=rn(e),df(e,n,t)}function lg(e,n,t){if(t&&typeof t!="boolean"&&De(e,n,t)&&(n=t=a),t===a&&(typeof n=="boolean"?(t=n,n=a):typeof e=="boolean"&&(t=e,e=a)),e===a&&n===a?(e=0,n=1):(e=An(e),n===a?(n=e,e=0):n=An(n)),e>n){var r=e;e=n,n=r}if(t||e%1||n%1){var i=ks();return Te(e+i*(n-e+Bl("1e-"+((i+"").length-1))),n)}return xi(e,n)}var og=ht(function(e,n,t){return n=n.toLowerCase(),e+(t?Na(n):n)});function Na(e){return qi(Q(e).toLowerCase())}function Sa(e){return e=Q(e),e&&e.replace(ol,Jl).replace(Tl,"")}function fg(e,n,t){e=Q(e),n=He(n);var r=e.length;t=t===a?r:kn(D(t),0,r);var i=t;return t-=n.length,t>=0&&e.slice(t,i)==n}function cg(e){return e=Q(e),e&&$a.test(e)?e.replace(ts,Ql):e}function hg(e){return e=Q(e),e&&Za.test(e)?e.replace(Gr,"\\$&"):e}var dg=ht(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),gg=ht(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),pg=Tu("toLowerCase");function _g(e,n,t){e=Q(e),n=D(n);var r=n?st(e):0;if(!n||r>=n)return e;var i=(n-r)/2;return dr(er(i),t)+e+dr(Vt(i),t)}function vg(e,n,t){e=Q(e),n=D(n);var r=n?st(e):0;return n&&r<n?e+dr(n-r,t):e}function mg(e,n,t){e=Q(e),n=D(n);var r=n?st(e):0;return n&&r<n?dr(n-r,t)+e:e}function xg(e,n,t){return t||n==null?n=0:n&&(n=+n),So(Q(e).replace(Hr,""),n||0)}function wg(e,n,t){return(t?De(e,n,t):n===a)?n=1:n=D(n),wi(Q(e),n)}function yg(){var e=arguments,n=Q(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var bg=ht(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()});function Ag(e,n,t){return t&&typeof t!="number"&&De(e,n,t)&&(n=t=a),t=t===a?Ye:t>>>0,t?(e=Q(e),e&&(typeof n=="string"||n!=null&&!$i(n))&&(n=He(n),!n&&it(e))?jn(un(e),0,t):e.split(n,t)):[]}var Ng=ht(function(e,n,t){return e+(t?" ":"")+qi(n)});function Sg(e,n,t){return e=Q(e),t=t==null?0:kn(D(t),0,e.length),n=He(n),e.slice(t,t+n.length)==n}function Lg(e,n,t){var r=s.templateSettings;t&&De(e,n,t)&&(n=a),e=Q(e),n=Sr({},n,r,Wu);var i=Sr({},n.imports,r.imports,Wu),u=be(i),l=ri(i,u),o,h,p=0,_=n.interpolate||Bt,v="__p += '",m=si((n.escape||Bt).source+"|"+_.source+"|"+(_===rs?rl:Bt).source+"|"+(n.evaluate||Bt).source+"|$","g"),b="//# sourceURL="+(ee.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ol+"]")+`
`;e.replace(m,function(R,U,z,ze,We,Ke){return z||(z=ze),v+=e.slice(p,Ke).replace(fl,Vl),U&&(o=!0,v+=`' +
__e(`+U+`) +
'`),We&&(h=!0,v+=`';
`+We+`;
__p += '`),z&&(v+=`' +
((__t = (`+z+`)) == null ? '' : __t) +
'`),p=Ke+R.length,R}),v+=`';
`;var T=ee.call(n,"variable")&&n.variable;if(!T)v=`with (obj) {
`+v+`
}
`;else if(nl.test(T))throw new E(ye);v=(h?v.replace(Ua,""):v).replace(Fa,"$1").replace(Ga,"$1;"),v="function("+(T||"obj")+`) {
`+(T?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(o?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+v+`return __p
}`;var W=Ca(function(){return Z(u,b+"return "+v).apply(a,l)});if(W.source=v,Hi(W))throw W;return W}function Cg(e){return Q(e).toLowerCase()}function Tg(e){return Q(e).toUpperCase()}function Rg(e,n,t){if(e=Q(e),e&&(t||n===a))return js(e);if(!e||!(n=He(n)))return e;var r=un(e),i=un(n),u=Ps(r,i),l=Bs(r,i)+1;return jn(r,u,l).join("")}function Eg(e,n,t){if(e=Q(e),e&&(t||n===a))return e.slice(0,Fs(e)+1);if(!e||!(n=He(n)))return e;var r=un(e),i=Bs(r,un(n))+1;return jn(r,0,i).join("")}function Ig(e,n,t){if(e=Q(e),e&&(t||n===a))return e.replace(Hr,"");if(!e||!(n=He(n)))return e;var r=un(e),i=Ps(r,un(n));return jn(r,i).join("")}function Mg(e,n){var t=Ee,r=qe;if(ce(n)){var i="separator"in n?n.separator:i;t="length"in n?D(n.length):t,r="omission"in n?He(n.omission):r}e=Q(e);var u=e.length;if(it(e)){var l=un(e);u=l.length}if(t>=u)return e;var o=t-st(r);if(o<1)return r;var h=l?jn(l,0,o).join(""):e.slice(0,o);if(i===a)return h+r;if(l&&(o+=h.length-o),$i(i)){if(e.slice(o).search(i)){var p,_=h;for(i.global||(i=si(i.source,Q(is.exec(i))+"g")),i.lastIndex=0;p=i.exec(_);)var v=p.index;h=h.slice(0,v===a?o:v)}}else if(e.indexOf(He(i),o)!=o){var m=h.lastIndexOf(i);m>-1&&(h=h.slice(0,m))}return h+r}function Og(e){return e=Q(e),e&&Ha.test(e)?e.replace(ns,uo):e}var Dg=ht(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),qi=Tu("toUpperCase");function La(e,n,t){return e=Q(e),n=t?a:n,n===a?no(e)?oo(e):ql(e):e.match(n)||[]}var Ca=P(function(e,n){try{return Fe(e,a,n)}catch(t){return Hi(t)?t:new E(t)}}),Wg=wn(function(e,n){return Je(n,function(t){t=dn(t),mn(e,t,Fi(e[t],e))}),e});function jg(e){var n=e==null?0:e.length,t=L();return e=n?fe(e,function(r){if(typeof r[1]!="function")throw new Qe(H);return[t(r[0]),r[1]]}):[],P(function(r){for(var i=-1;++i<n;){var u=e[i];if(Fe(u[0],this,r))return Fe(u[1],this,r)}})}function Pg(e){return lf(en(e,ne))}function ki(e){return function(){return e}}function Bg(e,n){return e==null||e!==e?n:e}var Ug=Eu(),Fg=Eu(!0);function Ue(e){return e}function Yi(e){return uu(typeof e=="function"?e:en(e,ne))}function Gg(e){return lu(en(e,ne))}function Hg(e,n){return ou(e,en(n,ne))}var $g=P(function(e,n){return function(t){return Ct(t,e,n)}}),zg=P(function(e,n){return function(t){return Ct(e,t,n)}});function Zi(e,n,t){var r=be(n),i=ur(n,r);t==null&&!(ce(n)&&(i.length||!r.length))&&(t=n,n=e,e=this,i=ur(n,be(n)));var u=!(ce(t)&&"chain"in t)||!!t.chain,l=bn(e);return Je(i,function(o){var h=n[o];e[o]=h,l&&(e.prototype[o]=function(){var p=this.__chain__;if(u||p){var _=e(this.__wrapped__),v=_.__actions__=je(this.__actions__);return v.push({func:h,args:arguments,thisArg:e}),_.__chain__=p,_}return h.apply(e,En([this.value()],arguments))})}),e}function Kg(){return Ne._===this&&(Ne._=_o),this}function Xi(){}function qg(e){return e=D(e),P(function(n){return fu(n,e)})}var kg=Ci(fe),Yg=Ci(Is),Zg=Ci(Qr);function Ta(e){return Di(e)?Vr(dn(e)):Sf(e)}function Xg(e){return function(n){return e==null?a:Yn(e,n)}}var Jg=Mu(),Qg=Mu(!0);function Ji(){return[]}function Qi(){return!1}function Vg(){return{}}function ep(){return""}function np(){return!0}function tp(e,n){if(e=D(e),e<1||e>fn)return[];var t=Ye,r=Te(e,Ye);n=L(n),e-=Ye;for(var i=ti(r,n);++t<e;)n(t);return i}function rp(e){return I(e)?fe(e,dn):$e(e)?[e]:je(Yu(Q(e)))}function ip(e){var n=++go;return Q(e)+n}var sp=hr(function(e,n){return e+n},0),up=Ti("ceil"),ap=hr(function(e,n){return e/n},1),lp=Ti("floor");function op(e){return e&&e.length?sr(e,Ue,di):a}function fp(e,n){return e&&e.length?sr(e,L(n,2),di):a}function cp(e){return Ds(e,Ue)}function hp(e,n){return Ds(e,L(n,2))}function dp(e){return e&&e.length?sr(e,Ue,vi):a}function gp(e,n){return e&&e.length?sr(e,L(n,2),vi):a}var pp=hr(function(e,n){return e*n},1),_p=Ti("round"),vp=hr(function(e,n){return e-n},0);function mp(e){return e&&e.length?ni(e,Ue):0}function xp(e,n){return e&&e.length?ni(e,L(n,2)):0}return s.after=Gh,s.ary=sa,s.assign=Td,s.assignIn=xa,s.assignInWith=Sr,s.assignWith=Rd,s.at=Ed,s.before=ua,s.bind=Fi,s.bindAll=Wg,s.bindKey=aa,s.castArray=Vh,s.chain=ta,s.chunk=lc,s.compact=oc,s.concat=fc,s.cond=jg,s.conforms=Pg,s.constant=ki,s.countBy=mh,s.create=Id,s.curry=la,s.curryRight=oa,s.debounce=fa,s.defaults=Md,s.defaultsDeep=Od,s.defer=Hh,s.delay=$h,s.difference=cc,s.differenceBy=hc,s.differenceWith=dc,s.drop=gc,s.dropRight=pc,s.dropRightWhile=_c,s.dropWhile=vc,s.fill=mc,s.filter=wh,s.flatMap=Ah,s.flatMapDeep=Nh,s.flatMapDepth=Sh,s.flatten=Qu,s.flattenDeep=xc,s.flattenDepth=wc,s.flip=zh,s.flow=Ug,s.flowRight=Fg,s.fromPairs=yc,s.functions=Fd,s.functionsIn=Gd,s.groupBy=Lh,s.initial=Ac,s.intersection=Nc,s.intersectionBy=Sc,s.intersectionWith=Lc,s.invert=$d,s.invertBy=zd,s.invokeMap=Th,s.iteratee=Yi,s.keyBy=Rh,s.keys=be,s.keysIn=Be,s.map=xr,s.mapKeys=qd,s.mapValues=kd,s.matches=Gg,s.matchesProperty=Hg,s.memoize=yr,s.merge=Yd,s.mergeWith=wa,s.method=$g,s.methodOf=zg,s.mixin=Zi,s.negate=br,s.nthArg=qg,s.omit=Zd,s.omitBy=Xd,s.once=Kh,s.orderBy=Eh,s.over=kg,s.overArgs=qh,s.overEvery=Yg,s.overSome=Zg,s.partial=Gi,s.partialRight=ca,s.partition=Ih,s.pick=Jd,s.pickBy=ya,s.property=Ta,s.propertyOf=Xg,s.pull=Ec,s.pullAll=ea,s.pullAllBy=Ic,s.pullAllWith=Mc,s.pullAt=Oc,s.range=Jg,s.rangeRight=Qg,s.rearg=kh,s.reject=Dh,s.remove=Dc,s.rest=Yh,s.reverse=Bi,s.sampleSize=jh,s.set=Vd,s.setWith=eg,s.shuffle=Ph,s.slice=Wc,s.sortBy=Fh,s.sortedUniq=Hc,s.sortedUniqBy=$c,s.split=Ag,s.spread=Zh,s.tail=zc,s.take=Kc,s.takeRight=qc,s.takeRightWhile=kc,s.takeWhile=Yc,s.tap=oh,s.throttle=Xh,s.thru=mr,s.toArray=_a,s.toPairs=ba,s.toPairsIn=Aa,s.toPath=rp,s.toPlainObject=ma,s.transform=ng,s.unary=Jh,s.union=Zc,s.unionBy=Xc,s.unionWith=Jc,s.uniq=Qc,s.uniqBy=Vc,s.uniqWith=eh,s.unset=tg,s.unzip=Ui,s.unzipWith=na,s.update=rg,s.updateWith=ig,s.values=pt,s.valuesIn=sg,s.without=nh,s.words=La,s.wrap=Qh,s.xor=th,s.xorBy=rh,s.xorWith=ih,s.zip=sh,s.zipObject=uh,s.zipObjectDeep=ah,s.zipWith=lh,s.entries=ba,s.entriesIn=Aa,s.extend=xa,s.extendWith=Sr,Zi(s,s),s.add=sp,s.attempt=Ca,s.camelCase=og,s.capitalize=Na,s.ceil=up,s.clamp=ug,s.clone=ed,s.cloneDeep=td,s.cloneDeepWith=rd,s.cloneWith=nd,s.conformsTo=id,s.deburr=Sa,s.defaultTo=Bg,s.divide=ap,s.endsWith=fg,s.eq=ln,s.escape=cg,s.escapeRegExp=hg,s.every=xh,s.find=yh,s.findIndex=Xu,s.findKey=Dd,s.findLast=bh,s.findLastIndex=Ju,s.findLastKey=Wd,s.floor=lp,s.forEach=ra,s.forEachRight=ia,s.forIn=jd,s.forInRight=Pd,s.forOwn=Bd,s.forOwnRight=Ud,s.get=zi,s.gt=sd,s.gte=ud,s.has=Hd,s.hasIn=Ki,s.head=Vu,s.identity=Ue,s.includes=Ch,s.indexOf=bc,s.inRange=ag,s.invoke=Kd,s.isArguments=Jn,s.isArray=I,s.isArrayBuffer=ad,s.isArrayLike=Pe,s.isArrayLikeObject=ge,s.isBoolean=ld,s.isBuffer=Pn,s.isDate=od,s.isElement=fd,s.isEmpty=cd,s.isEqual=hd,s.isEqualWith=dd,s.isError=Hi,s.isFinite=gd,s.isFunction=bn,s.isInteger=ha,s.isLength=Ar,s.isMap=da,s.isMatch=pd,s.isMatchWith=_d,s.isNaN=vd,s.isNative=md,s.isNil=wd,s.isNull=xd,s.isNumber=ga,s.isObject=ce,s.isObjectLike=he,s.isPlainObject=Ot,s.isRegExp=$i,s.isSafeInteger=yd,s.isSet=pa,s.isString=Nr,s.isSymbol=$e,s.isTypedArray=gt,s.isUndefined=bd,s.isWeakMap=Ad,s.isWeakSet=Nd,s.join=Cc,s.kebabCase=dg,s.last=tn,s.lastIndexOf=Tc,s.lowerCase=gg,s.lowerFirst=pg,s.lt=Sd,s.lte=Ld,s.max=op,s.maxBy=fp,s.mean=cp,s.meanBy=hp,s.min=dp,s.minBy=gp,s.stubArray=Ji,s.stubFalse=Qi,s.stubObject=Vg,s.stubString=ep,s.stubTrue=np,s.multiply=pp,s.nth=Rc,s.noConflict=Kg,s.noop=Xi,s.now=wr,s.pad=_g,s.padEnd=vg,s.padStart=mg,s.parseInt=xg,s.random=lg,s.reduce=Mh,s.reduceRight=Oh,s.repeat=wg,s.replace=yg,s.result=Qd,s.round=_p,s.runInContext=f,s.sample=Wh,s.size=Bh,s.snakeCase=bg,s.some=Uh,s.sortedIndex=jc,s.sortedIndexBy=Pc,s.sortedIndexOf=Bc,s.sortedLastIndex=Uc,s.sortedLastIndexBy=Fc,s.sortedLastIndexOf=Gc,s.startCase=Ng,s.startsWith=Sg,s.subtract=vp,s.sum=mp,s.sumBy=xp,s.template=Lg,s.times=tp,s.toFinite=An,s.toInteger=D,s.toLength=va,s.toLower=Cg,s.toNumber=rn,s.toSafeInteger=Cd,s.toString=Q,s.toUpper=Tg,s.trim=Rg,s.trimEnd=Eg,s.trimStart=Ig,s.truncate=Mg,s.unescape=Og,s.uniqueId=ip,s.upperCase=Dg,s.upperFirst=qi,s.each=ra,s.eachRight=ia,s.first=Vu,Zi(s,(function(){var e={};return cn(s,function(n,t){ee.call(s.prototype,t)||(e[t]=n)}),e})(),{chain:!1}),s.VERSION=te,Je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){s[e].placeholder=s}),Je(["drop","take"],function(e,n){G.prototype[e]=function(t){t=t===a?1:we(D(t),0);var r=this.__filtered__&&!n?new G(this):this.clone();return r.__filtered__?r.__takeCount__=Te(t,r.__takeCount__):r.__views__.push({size:Te(t,Ye),type:e+(r.__dir__<0?"Right":"")}),r},G.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Je(["filter","map","takeWhile"],function(e,n){var t=n+1,r=t==Bn||t==Un;G.prototype[e]=function(i){var u=this.clone();return u.__iteratees__.push({iteratee:L(i,3),type:t}),u.__filtered__=u.__filtered__||r,u}}),Je(["head","last"],function(e,n){var t="take"+(n?"Right":"");G.prototype[e]=function(){return this[t](1).value()[0]}}),Je(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");G.prototype[e]=function(){return this.__filtered__?new G(this):this[t](1)}}),G.prototype.compact=function(){return this.filter(Ue)},G.prototype.find=function(e){return this.filter(e).head()},G.prototype.findLast=function(e){return this.reverse().find(e)},G.prototype.invokeMap=P(function(e,n){return typeof e=="function"?new G(this):this.map(function(t){return Ct(t,e,n)})}),G.prototype.reject=function(e){return this.filter(br(L(e)))},G.prototype.slice=function(e,n){e=D(e);var t=this;return t.__filtered__&&(e>0||n<0)?new G(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),n!==a&&(n=D(n),t=n<0?t.dropRight(-n):t.take(n-e)),t)},G.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},G.prototype.toArray=function(){return this.take(Ye)},cn(G.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),i=s[r?"take"+(n=="last"?"Right":""):n],u=r||/^find/.test(n);i&&(s.prototype[n]=function(){var l=this.__wrapped__,o=r?[1]:arguments,h=l instanceof G,p=o[0],_=h||I(l),v=function(U){var z=i.apply(s,En([U],o));return r&&m?z[0]:z};_&&t&&typeof p=="function"&&p.length!=1&&(h=_=!1);var m=this.__chain__,b=!!this.__actions__.length,T=u&&!m,W=h&&!b;if(!u&&_){l=W?l:new G(this);var R=e.apply(l,o);return R.__actions__.push({func:mr,args:[v],thisArg:a}),new Ve(R,m)}return T&&W?e.apply(this,o):(R=this.thru(v),T?r?R.value()[0]:R.value():R)})}),Je(["pop","push","shift","sort","splice","unshift"],function(e){var n=zt[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);s.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var u=this.value();return n.apply(I(u)?u:[],i)}return this[t](function(l){return n.apply(I(l)?l:[],i)})}}),cn(G.prototype,function(e,n){var t=s[n];if(t){var r=t.name+"";ee.call(ot,r)||(ot[r]=[]),ot[r].push({name:n,func:t})}}),ot[cr(a,se).name]=[{name:"wrapper",func:a}],G.prototype.clone=Mo,G.prototype.reverse=Oo,G.prototype.value=Do,s.prototype.at=fh,s.prototype.chain=ch,s.prototype.commit=hh,s.prototype.next=dh,s.prototype.plant=ph,s.prototype.reverse=_h,s.prototype.toJSON=s.prototype.valueOf=s.prototype.value=vh,s.prototype.first=s.prototype.head,wt&&(s.prototype[wt]=gh),s}),ut=fo();$n?(($n.exports=ut)._=ut,Yr._=ut):Ne._=ut}).call(Mp)})(Dt,Dt.exports)),Dt.exports}var Ba=Op();function Dp({conversationId:x,onSendMessage:N,onTypingChange:a,onAfterSend:te,isSubmitting:M=!1}){const[B,H]=K.useState(""),[ye,Le]=K.useState([]),[V,X]=K.useState({}),ne=K.useRef(null),k=K.useRef(null),J=K.useRef(Ba.debounce(S=>{a&&a(S)},500)).current,ae=S=>{const q=S.target.value;H(q),q.length>0?J(!0):J(!1),se()},le=S=>{const q=Array.from(S.target.files);Le(ve=>[...ve,...q]),ne.current&&(ne.current.value="")},Y=S=>{Le(q=>q.filter((ve,A)=>A!==S))},se=()=>{const S=k.current;S&&(S.style.height="auto",S.style.height=`${Math.min(S.scrollHeight,150)}px`)},Ae=async S=>{if(S.preventDefault(),B.trim()===""&&ye.length===0||M)return;const q=new FormData;q.append("body",B),ye.forEach(j=>{q.append("files[]",j)});const ve=`temp-${Date.now()}`;q.append("client_id",ve);let A=null;if(N)try{A=await N(q,{onUploadProgress:j=>{const F=Math.round(j.loaded*100/j.total);X(Ee=>({...Ee,[ve]:F}))}})}catch(j){console.error("Error sending message:",j),window.toast&&window.toast.error("Failed to send message. Please try again.")}H(""),Le([]),X({}),k.current&&(k.current.style.height="auto"),J(!1),te&&A&&te(x,A)},de=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),Ae(S))};return K.useEffect(()=>()=>{J.cancel()},[J]),c.jsxs("form",{onSubmit:Ae,className:"p-3 border-t",children:[ye.length>0&&c.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:ye.map((S,q)=>c.jsxs("div",{className:"relative group bg-muted p-2 rounded-md flex items-center gap-2",children:[S.type.startsWith("image/")?c.jsx("img",{src:URL.createObjectURL(S),alt:S.name,className:"h-10 w-10 object-cover rounded"}):c.jsx("div",{className:"h-10 w-10 flex items-center justify-center bg-muted-foreground/10 rounded",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm truncate max-w-[150px]",children:S.name}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[(S.size/1024).toFixed(1)," KB"]})]}),c.jsx("button",{type:"button",onClick:()=>Y(q),className:"text-muted-foreground hover:text-foreground p-1 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},q))}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("textarea",{ref:k,value:B,onChange:ae,onKeyDown:de,placeholder:"Type a message...",className:_e("w-full p-3 pr-10 text-sm bg-muted/50 rounded-lg resize-none","focus:ring-1 focus:ring-primary focus:outline-none","min-h-[40px] max-h-[150px]"),rows:1,disabled:M}),c.jsx("button",{type:"button",onClick:()=>ne.current?.click(),className:"absolute right-3 bottom-3 text-muted-foreground hover:text-foreground",disabled:M,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),c.jsx("input",{ref:ne,type:"file",multiple:!0,onChange:le,className:"hidden",disabled:M})]}),c.jsx(bp,{type:"submit",disabled:M||B.trim()===""&&ye.length===0,className:_e("px-3 py-2 h-10 mb-2",M&&"opacity-50 cursor-not-allowed"),children:M?c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})}function Wp({file:x,onClose:N}){if(!x)return null;const a=x.mime_type&&x.mime_type.startsWith("image/"),te=x.mime_type==="application/pdf",M=a||te;return c.jsx(Vi,{appear:!0,show:!!x,as:K.Fragment,children:c.jsx(Ap,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:N,children:c.jsxs("div",{className:"min-h-screen px-4 text-center",children:[c.jsx(Vi.Child,{as:K.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:c.jsx(Np,{className:"fixed inset-0 bg-black bg-opacity-50"})}),c.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"â€‹"}),c.jsx(Vi.Child,{as:K.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:c.jsxs(Sp,{className:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ea,{className:"w-5 h-5 mr-2 text-gray-500"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:x.original_name})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("a",{href:x.url,download:x.original_name,className:"p-2 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",target:"_blank",rel:"noopener noreferrer",children:c.jsx(Ia,{className:"w-5 h-5"})}),c.jsx("button",{type:"button",className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-full transition-colors",onClick:N,children:c.jsx(Lp,{className:"w-5 h-5"})})]})]}),c.jsx("div",{className:"mt-4 bg-gray-50 rounded-lg overflow-hidden flex justify-center items-center",children:M?c.jsxs("div",{className:"w-full",children:[a&&c.jsx("img",{src:x.url,alt:x.original_name,className:"max-w-full max-h-[70vh] mx-auto object-contain"}),te&&c.jsx("iframe",{src:x.url,className:"w-full h-[70vh]",title:x.original_name})]}):c.jsxs("div",{className:"py-16 text-center",children:[c.jsx(Ea,{className:"w-16 h-16 mx-auto text-gray-400"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"This file type cannot be previewed. Please download to view."}),c.jsxs("a",{href:x.url,download:x.original_name,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",target:"_blank",rel:"noopener noreferrer",children:[c.jsx(Ia,{className:"w-4 h-4 mr-2"}),"Download File"]})]})}),c.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[x.size_formatted&&c.jsxs("p",{children:["Size: ",x.size_formatted]}),x.created_at&&c.jsxs("p",{children:["Uploaded: ",new Date(x.created_at).toLocaleString()]})]})]})})]})})})}function Zp({conversationId:x,conversation:N=null,auth:a,isPanel:te=!1,onConversationRead:M,onConversationIncrementUnread:B,onAfterSend:H}){const ye=Tr(),Le=a||ye.props.auth,[V,X]=K.useState(N),[ne,k]=K.useState([]),[J,ae]=K.useState(!0),[le,Y]=K.useState(!1),[se,Ae]=K.useState(!0),[de,S]=K.useState(null),[q,ve]=K.useState(!1),[A,j]=K.useState([]),[F,Ee]=K.useState(null),[qe,Ie]=K.useState(!0),[Qn,Bn]=K.useState(null),me=K.useRef(null),Un=Le.user.id,gn=y=>{const C=y.url||y.download_url,O=y.filename||y.original_name||(y.path?y.path.split("/").pop():"file");return{url:C,original_name:O,mime_type:y.mime,size_formatted:y.human_size||(y.bytes?`${(y.bytes/1024).toFixed(1)} KB`:void 0),created_at:y.created_at}},fn=y=>{Bn(gn(y))},Rr=K.useMemo(()=>{if(!ne||ne.length===0)return[];const y=[...ne].sort(($,oe)=>{const Ce=new Date($.created_at).getTime(),Ln=new Date(oe.created_at).getTime();return Ce!==Ln?Ce-Ln:($.id??0)-(oe.id??0)}),C=[];let O=null;return y.forEach(($,oe)=>{const Ce=new Date($.created_at),Ln=es(Ce,"yyyy-MM-dd");if(O!==Ln){const sn=Oa(Ce,new Date)?"Today":Oa(Ce,new Date(Date.now()-864e5))?"Yesterday":es(Ce,"dd/MM/yyyy");C.push({id:`separator-${Ln}`,type:"separator",label:sn,date:Ce}),O=Ln}const Ze=$.user_id===Un,et=oe>0?y[oe-1]:null,mt=oe<y.length-1?y[oe+1]:null;let Cn=!1,Me=!1,Tn=!1,Hn=!0,Pt=!0;if(et){const sn=et.user_id===$.user_id,pn=new Date($.created_at)-new Date(et.created_at)<300*1e3;sn&&pn&&(Me=!0,Hn=!1)}if(mt){const sn=mt.user_id===$.user_id,pn=new Date(mt.created_at)-new Date($.created_at)<300*1e3;sn&&pn&&(Tn=!0,Pt=!1)}Cn=!Ze&&Me,C.push({...$,shouldIndent:Cn,isOwn:Ze,isGroupedWithPrev:Me,isGroupedWithNext:Tn,isGroupHead:Hn,isGroupTail:Pt})}),C},[ne,Un]),ke=K.useRef(new Map),Ye=y=>{j(O=>O.some($=>$.id===y.id)?O:[...O,y]),ke.current.has(y.id)&&clearTimeout(ke.current.get(y.id));const C=setTimeout(()=>{j(O=>O.filter($=>$.id!==y.id)),ke.current.delete(y.id)},3e3);ke.current.set(y.id,C)},Er=y=>{ke.current.has(y)&&(clearTimeout(ke.current.get(y)),ke.current.delete(y)),j(C=>C.filter(O=>O.id!==y))};K.useEffect(()=>(X(null),k([]),ae(!0),S(null),j([]),Ee(null),me.current&&(me.current.stopListening(".MessageSent"),me.current.stopListening(".MessageEdited"),me.current.stopListening(".MessageDeleted"),me.current.stopListening(".ReadAdvanced"),me.current.stopListening(".TypingChanged"),me.current.stopListening(".ConversationUpdated"),me.current.unsubscribe(),me.current=null),Wt(),vt(),()=>{me.current&&(me.current.stopListening(".MessageSent"),me.current.stopListening(".MessageEdited"),me.current.stopListening(".MessageDeleted"),me.current.stopListening(".ReadAdvanced"),me.current.stopListening(".TypingChanged"),me.current.stopListening(".ConversationUpdated"),me.current.unsubscribe())}),[x]),K.useEffect(()=>{if(!V)return;const y=window.Echo.private(`conversation.${x}`);me.current=y,y.listen(".MessageSent",C=>{const O=C.message;k($=>$.some(Ce=>Ce.id===O.id)?$:(O.user_id!==Un&&qe&&jt(O.id),[...$,O]))}),y.listen(".MessageEdited",C=>{k(O=>O.map($=>$.id===C.id?{...$,body:C.body,edited_at:C.edited_at}:$))}),y.listen(".MessageDeleted",C=>{C.scope==="all"&&k(O=>O.map($=>$.id===C.id?{...$,deleted_at:new Date().toISOString()}:$))}),y.listen(".ReadAdvanced",C=>{C.user_id!==Un&&X(O=>{if(!O)return O;const $=O.participants.map(oe=>oe.user_id===C.user_id?{...oe,last_read_message_id:C.last_read_message_id}:oe);return{...O,participants:$}})}),y.listen(".TypingChanged",C=>{if(C.user_id!==Un)if(C.is_typing){const O=V.participants.find($=>$.user_id===C.user_id)?.user;O&&Ye(O)}else Er(C.user_id)}),y.listen(".ConversationUpdated",C=>{X(C.conversation)})},[V,x]);const Wt=async()=>{try{const y=await _t.get(`/api/v1/app/messaging/conversations/${x}`);X(y.data.data)}catch(y){if(console.error("Error fetching conversation:",y),y.response&&y.response.status===403){Ma.error("You do not have access to this conversation."),S("You do not have access to this conversation.");return}S("Failed to load conversation details.")}},vt=async(y=null)=>{y?Y(!0):ae(!0);try{const C=await _t.get(`/api/v1/app/messaging/conversations/${x}/messages`,{params:{before:y,limit:50}}),O=C.data.data||[];k(y?$=>[...O,...$]:O),Ae(C.data.meta?.has_more||!1),O.length>0&&Ee(C.data.meta?.next_before)}catch(C){if(console.error("Error fetching messages:",C),C.response&&C.response.status===403){Ma.error("You do not have access to this conversation."),S("You do not have access to this conversation.");return}S("Failed to load messages.")}finally{ae(!1),Y(!1)}},Sn=()=>{se&&!le&&F&&vt(F)},Vn=async(y,C={})=>{ve(!0);try{return(await _t.post(`/api/v1/app/messaging/conversations/${x}/messages`,y,C)).data.data}catch(O){console.error("Error sending message:",O),S("Failed to send message. Please try again.")}finally{ve(!1)}},jt=async y=>{try{await _t.post(`/api/v1/app/messaging/conversations/${x}/read`,{last_read_message_id:y}),M&&M(x)}catch(C){console.error("Error marking message as read:",C)}},Fn=Ba.debounce(async y=>{try{await _t.post(`/api/v1/app/messaging/conversations/${x}/typing`,{is_typing:y})}catch(C){console.error("Error updating typing status:",C)}},300),Gn=async()=>{try{const y=await _t.post(`/api/v1/app/messaging/conversations/${x}/archive`);X(C=>({...C,archived_at:y.data.archived?new Date().toISOString():null}))}catch(y){console.error("Error toggling archive status:",y)}};return c.jsxs("div",{className:"flex flex-col h-full w-full",children:[!te&&(V?c.jsx(Tp,{conversation:V,onArchive:Gn}):c.jsxs("div",{className:"p-3 border-b flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"h-5 w-32 bg-muted animate-pulse rounded"}),c.jsx("div",{className:"h-4 w-24 bg-muted animate-pulse rounded mt-1"})]})]})),c.jsx("div",{className:"flex-1 overflow-hidden",children:J?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):de?c.jsx("div",{className:"flex items-center justify-center h-full text-center p-4",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-red-500 mb-2",children:de}),c.jsx("button",{onClick:()=>{S(null),Wt(),vt()},className:"text-primary hover:underline",children:"Try again"})]})}):c.jsx(Ip,{messages:Rr,conversationId:x,conversationType:V?.type??"direct",participants:V?.participants||[],isLoadingMore:le,hasMore:se,onLoadMore:Sn,onMessageRead:jt,onAttachmentClick:fn,onScrollPositionChange:y=>Ie(y),typingUsers:A})}),c.jsx(Dp,{conversationId:x,onSendMessage:Vn,onTypingChange:Fn,onAfterSend:H,isSubmitting:q}),c.jsx(Wp,{file:Qn,onClose:()=>Bn(null)})]})}export{Cr as A,Zp as T,Wp as a,Ba as l};
