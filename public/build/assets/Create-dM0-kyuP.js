import{q as P,W as A,r as i,j as e}from"./app-sIQhOOZ9.js";import{M as F}from"./MainLayout-BwQc6VDm.js";import v from"./NationalityForm-Bar_LWm_.js";import{S as d}from"./react-select.esm-C9H53Ycp.js";import{R}from"./quill.snow-DqTnUKTG.js";import{u as M}from"./useRoles-sWzUl438.js";import{I as o}from"./InputLabel-CpfdcINc.js";import"./index-BLkkzL3J.js";import"./createLucideIcon-b-9fSxrP.js";import"./analytics-BQ374C1C.js";import"./index-DrB6TMgS.js";import"./InputError-C90gG8XZ.js";function z(){var g,j,f;const{auth:c,researchOptions:u,universities:b}=P().props;M();const{data:t,setData:r,post:y,processing:_,errors:a}=A({title:"",description:"",project_type:"",project_theme:"",purpose:[],start_date:"",end_date:"",application_deadline:"",duration:"",sponsored_by:"",category:"",field_of_research:[],supervisor_category:"",supervisor_name:"",university:"",email:"",origin_country:"",student_nationality:"",student_level:[],student_mode_study:[],appointment_type:"",purpose_of_collaboration:"",image:null,attachment:null,amount:"",application_url:"",project_status:"published",create_scholarlab_project:!1}),[N,w]=i.useState(t.university),[D,k]=i.useState(!1),p=i.useRef(null);i.useEffect(()=>{const s=l=>{p.current&&!p.current.contains(l.target)&&k(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),i.useState("");function h(s){s&&s.preventDefault();const l=new FormData;Object.keys(t).forEach(n=>{t[n]instanceof File?l.append(n,t[n]):Array.isArray(t[n])?l.append(n,JSON.stringify(t[n])):l.append(n,t[n])}),y(route("post-projects.store"),{data:l,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>alert("Project posted successfully."),onError:n=>{console.error("Error updating Project:",n),alert("Failed to post the Project. Please try again.")}})}const x=[{value:"Seek for Postgraduate",label:"Seek for Postgraduate"},{value:"Seek for Undergraduate",label:"Seek for Undergraduate"},{value:"Seek for Academician Collaboration",label:"Seek for Academician Collaboration"},{value:"Seek for Industrial Collaboration",label:"Seek for Industrial Collaboration"},{value:"For Showcase",label:"For Showcase"}],S=s=>{if(!s){r("purpose",[]);return}const l=s.map(m=>m.value);if(l.includes("For Showcase")){r("purpose",["For Showcase"]);return}const n=l.filter(m=>m!=="For Showcase");r("purpose",n)},C=s=>s.value==="For Showcase"?t.purpose.some(l=>l==="Seek for Postgraduate"||l==="Seek for Undergraduate"||l==="Seek for Academician Collaboration"||l==="Seek for Industrial Collaboration"):t.purpose.includes("For Showcase");return e.jsx(F,{title:"",children:e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"absolute top-4 left-4 text-gray-700 hover:text-gray-900",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsxs("form",{onSubmit:h,className:"bg-white p-4 sm:p-6 rounded-lg max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Project"}),e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Project Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.title,onChange:s=>r("title",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Project Name"}),a.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.title})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Project Description ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"mt-1 w-full rounded-lg border border-gray-200",style:{height:"300px",overflowY:"auto"},children:e.jsx(R,{theme:"snow",value:t.description,onChange:s=>r("description",s),placeholder:"Enter description",style:{height:"300px",maxHeight:"300px"}})}),a.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Project Theme ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{value:t.project_theme,onChange:s=>r("project_theme",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Project Theme"}),e.jsx("option",{value:"Science & Technology",children:"Science & Technology"}),e.jsx("option",{value:"Social Science",children:"Social Science"})]}),a.project_theme&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.project_theme})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Purpose (Multiselect) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(d,{isMulti:!0,options:x,value:x.filter(s=>t.purpose.includes(s.value)),onChange:S,isOptionDisabled:C,className:"mt-1 block w-full",classNamePrefix:"select",menuPortalTarget:document.body,styles:{menuPortal:s=>({...s,zIndex:9999})}}),a.purpose&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.purpose})]})]}),!t.purpose.includes("For Showcase")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Start Date ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",value:t.start_date,onChange:s=>r("start_date",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),a.start_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.start_date})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["End Date ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",value:t.end_date,min:t.start_date||"",onChange:s=>r("end_date",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),a.end_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.end_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"mt-1 block text-gray-700 font-medium",children:["Application Deadline ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",value:t.application_deadline,onChange:s=>r("application_deadline",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),a.application_deadline&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.application_deadline})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"mt-1 block text-gray-700 font-medium",children:["Duration (in months) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",value:t.duration,onChange:s=>r("duration",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter grant duration"}),a.duration&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.duration})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Sponsored By ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.sponsored_by,onChange:s=>r("sponsored_by",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter sponsor"}),a.sponsored_by&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.sponsored_by})]}),e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"category",className:"block text-gray-700 font-medium",children:["Category ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"category",name:"category",value:t.category,onChange:s=>r("category",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select a Category"}),e.jsx("option",{value:"Fundamental Research",children:"Fundamental Research"}),e.jsx("option",{value:"Applied Research",children:"Applied Research"}),e.jsx("option",{value:"Fundamental + Applied",children:"Fundamental + Applied"}),e.jsx("option",{value:"Knowledge Transfer Program (KTP)",children:"Knowledge Transfer Program (KTP)"}),e.jsx("option",{value:"CSR (Corporate Social Responsibility)",children:"CSR (Corporate Social Responsibility)"})]}),a.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.category})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[(t.category==="Fundamental Research"||t.category==="Applied Research"||t.category==="Fundamental + Applied")&&e.jsxs("div",{className:"w-full",children:[e.jsxs(o,{htmlFor:"field_of_research",className:"block text-sm font-medium text-gray-700",children:["Field of Research Structure: Field of Research - Research Area - Niche Domain ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(d,{id:"field_of_research",isMulti:!0,options:u.map(s=>({value:`${s.field_of_research_id}-${s.research_area_id}-${s.niche_domain_id}`,label:`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`})),className:"mt-1",classNamePrefix:"select",value:(g=t.field_of_research)==null?void 0:g.map(s=>{const l=u.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===s);return{value:s,label:l?`${l.field_of_research_name} - ${l.research_area_name} - ${l.niche_domain_name}`:s}}),onChange:s=>{const l=s.map(n=>n.value);r("field_of_research",l)},placeholder:"Search and select fields of research..."}),a.field_of_research&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.field_of_research})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Project Supervisor / Project Leader ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{value:t.supervisor_category,onChange:s=>r("supervisor_category",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"Own Name",children:"Own Name"}),e.jsx("option",{value:"On Behalf",children:"On Behalf"})]}),a.supervisor_category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.supervisor_category})]})]}),t.supervisor_category==="On Behalf"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"mt-1 block text-gray-700 font-medium",children:["Supervisor / Project Leader Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:t.supervisor_name,onChange:s=>r("supervisor_name",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),a.supervisor_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.supervisor_name})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"mt-1 block text-gray-700 font-medium",children:["University ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{id:"university",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",value:N||"",onChange:s=>{const l=s.target.value;w(l),r("university",l)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select your University"}),b.map(s=>e.jsx("option",{value:s.id,children:s.full_name},s.id))]}),a.university&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.university})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Email ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",value:t.email,onChange:s=>r("email",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter email"}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:t.email===c.email,onChange:s=>{s.target.checked?r("email",c.email):r("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsxs(o,{htmlFor:"usePersonalEmail",className:"ml-2 text-gray-700",children:["Use personal email (",c.email,")"]})]}),a.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.email})]}),e.jsxs("div",{children:[e.jsx(v,{title:"Project Origin Country",value:t.origin_country,onChange:s=>r("origin_country",s),errors:a}),a.origin_country&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.origin_country})]})]}),(t.purpose.includes("Seek for Postgraduate")||t.purpose.includes("Seek for Undergraduate"))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Please select the criteria for student"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(v,{title:"Student Nationality",value:t.student_nationality,isNotSpecify:!0,onChange:s=>r("student_nationality",s),errors:a}),a.student_nationality&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.student_nationality})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["This project is for? ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(d,{isMulti:!0,options:[...t.purpose.includes("Seek for Undergraduate")?[{value:"Undergraduate",label:"Undergraduate"}]:[],...t.purpose.includes("Seek for Postgraduate")?[{value:"Master",label:"Master"},{value:"Ph.D.",label:"Ph.D."}]:[]],value:((j=t.student_level)==null?void 0:j.map(s=>({value:s,label:s})))||[],onChange:s=>{r("student_level",s.map(l=>l.value))},className:"mt-1 block w-full",classNamePrefix:"select"}),a.student_level&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.student_level})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Mode of Study ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(d,{isMulti:!0,options:[...t.purpose.includes("Seek for Undergraduate")?[{value:"No Mode of Study (For Undergraduate)",label:"No Mode of Study (For Undergraduate)"}]:[],...t.purpose.includes("Seek for Postgraduate")?[{value:"Master - Full Research",label:"Master - Full Research"},{value:"Master - Coursework",label:"Master - Coursework"},{value:"Master - Mixed Mode",label:"Master - Mixed Mode"},{value:"Master - Full Research - ODL",label:"Master - Full Research - ODL"},{value:"Master - Coursework - ODL",label:"Master - Coursework - ODL"},{value:"Master - Mixed Mode - ODL",label:"Master - Mixed Mode - ODL"},{value:"PhD - Full Research",label:"PhD - Full Research"},{value:"PhD - Industry",label:"PhD - Industry"},{value:"Doctor of Business Administration",label:"Doctor of Business Administration"}]:[]],value:((f=t.student_mode_study)==null?void 0:f.map(s=>({value:s,label:s})))||[],onChange:s=>{r("student_mode_study",s.map(l=>l.value))},className:"mt-1 block w-full",classNamePrefix:"select"}),a.student_mode_study&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.student_mode_study})]}),t.purpose.includes("Seek for Postgraduate")&&e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Appointment Type (For Postgraduate) ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{value:t.appointment_type,onChange:s=>r("appointment_type",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Appointment Type"}),e.jsx("option",{value:"Research Assistant (RA)",children:"Research Assistant (RA)"}),e.jsx("option",{value:"Graduate Assistant (GA)",children:"Graduate Assistant (GA)"}),e.jsx("option",{value:"Teaching Assistant (TA)",children:"Teaching Assistant (TA)"}),e.jsx("option",{value:"Research Fellow (RF)",children:"Research Fellow (RF)"}),e.jsx("option",{value:"Project Assistant (PA)",children:"Project Assistant (PA)"}),e.jsx("option",{value:"Technical Assistant (TA)",children:"Technical Assistant (TA)"}),e.jsx("option",{value:"Graduate Research Assistant (GRA)",children:"Graduate Research Assistant (GRA)"}),e.jsx("option",{value:"Scholarship Recipient",children:"Scholarship Recipient"}),e.jsx("option",{value:"Intern",children:"Intern"})]}),a.appointment_type&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.appointment_type})]})]})]}),(t.purpose.includes("Seek for Academician Collaboration")||t.purpose.includes("Seek for Industrial Collaboration"))&&e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Purpose of Collaboration ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{value:t.purpose_of_collaboration,onChange:s=>r("purpose_of_collaboration",s.target.value||""),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Purpose of Collaboration"}),a.purpose_of_collaboration&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.purpose_of_collaboration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(o,{className:"block text-gray-700 font-medium",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>r("image",s.target.files[0]),className:"w-full rounded-lg border-gray-200 py-2 text-sm"}),a.image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.image})]}),e.jsxs("div",{children:[e.jsx(o,{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:s=>r("attachment",s.target.files[0]),className:"w-full rounded-lg border-gray-200 py-2 text-sm"}),a.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.attachment})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[t.purpose!=="Seek for Postgraduate"&&e.jsxs("div",{children:[e.jsxs(o,{className:"block text-gray-700 font-medium",children:["Approved Project Amount ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",value:t.amount,onChange:s=>r("amount",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter amount (e.g., 5000.00)"}),a.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.amount})]}),!t.purpose.includes("For Showcase")&&e.jsxs("div",{children:[e.jsx(o,{className:"block text-gray-700 font-medium",children:"Application URL"}),e.jsx("input",{type:"url",value:t.application_url,onChange:s=>r("application_url",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter application URL"}),a.application_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.application_url})]})]}),!t.purpose.includes("For Showcase")&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"create_scholarlab_project",checked:t.create_scholarlab_project,onChange:s=>r("create_scholarlab_project",s.target.checked),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"create_scholarlab_project",className:"ml-2 block text-sm text-gray-900",children:"Also create a collaborative project for this publication in ScholarLab"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will create a project in ScholarLab where you can collaborate with others on tasks related to this research."})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:()=>{h()},disabled:_,className:"w-full sm:w-auto inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"})})]})]})})}export{z as default};
