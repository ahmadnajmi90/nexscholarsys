import{r as d,y as v,a as k,j as e}from"./app-D4sU-mOt.js";import{V as u}from"./index-DCM_u3Zp.js";import{M as I}from"./MainLayout-BkVTvOdV.js";import{B as j}from"./brain-48lgHzYy.js";import{S}from"./sparkles-DEmRHzkq.js";import{F as _}from"./file-text-CRbNrC0p.js";import{S as C}from"./search-CLauVtFZ.js";import{c as x}from"./createLucideIcon-BD4YQUgP.js";import{C as A}from"./circle-check-D6p9z8bn.js";import"./index-rTanxS3a.js";import"./useRoles-BvXrkWBh.js";import"./analytics-BQ374C1C.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],E=x("ChartLine",M);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],T=x("Circle",P);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],z=x("RotateCw",L),a=["started","analyzing_cv","creating_profile","searching_database","generating_recommendations","completed"];function Q({jobKey:h,isCached:p=!1}){const[c,m]=d.useState("started"),[g,f]=d.useState(null),b=d.useMemo(()=>{const t=Math.max(0,a.indexOf(c)),r=a.length-1;return Math.min(100,Math.round(t/r*100))},[c]);d.useEffect(()=>{let t,r;const o=(s,l)=>{let i=1;t=setInterval(()=>{i<a.length-1?(m(a[i]),i++):(l&&m(a[i]),clearInterval(t))},s)};if(p){o(300,!1);const s=300*a.length;setTimeout(()=>{u.success("Found your previous results!"),v.visit(route("phd-recommendations.results"))},s)}else o(1500,!0),r=setInterval(()=>{k.get(route("phd-recommendations.status",{jobId:h})).then(s=>{const{status:l,error:i}=s.data;l==="completed"?(clearInterval(r),m("completed"),u.success("Analysis complete!"),setTimeout(()=>{v.visit(route("phd-recommendations.results"))},1e3)):l==="failed"&&(clearInterval(r),f(i||"An unknown error occurred."),u.error("Analysis failed."))}).catch(s=>{console.error("Polling error:",s),f("Could not get analysis status."),clearInterval(r)})},3e3);return()=>{clearInterval(t),clearInterval(r)}},[h,p]);const N=[{key:"analyzing_cv",title:"Analyzing your CV",description:"Extracting skills, experience, and academic background...",icon:_},{key:"creating_profile",title:"Understanding research interests",description:"Processing your research keywords and preferences...",icon:j},{key:"searching_database",title:"Searching supervisor database",description:"Matching with 15,000+ academic profiles worldwide...",icon:C},{key:"generating_recommendations",title:"Calculating compatibility",description:"Computing match scores based on research alignment...",icon:E}],w=t=>t==="completed"?e.jsx(A,{className:"w-5 h-5 text-green-600"}):t==="active"?e.jsx(z,{className:"w-5 h-5 text-blue-600 animate-spin"}):e.jsx(T,{className:"w-5 h-5 text-gray-300"}),y=Math.max(0,a.indexOf(c));return e.jsx(I,{title:"Processing Request",children:e.jsx("div",{className:"min-h-[70vh] bg-gray-50 py-10",children:e.jsxs("div",{className:"w-full max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{className:"w-20 h-20 rounded-full bg-blue-50 border border-blue-200 flex items-center justify-center relative",children:[e.jsx(j,{className:"w-10 h-10 text-blue-600"}),e.jsx("span",{className:"absolute inset-0 rounded-full border-2 border-blue-100 animate-pulse"})]}),e.jsx("h1",{className:"mt-4 text-3xl font-bold text-gray-900",children:"AI is analyzing your profile"}),e.jsx("p",{className:"mt-2 text-gray-600 max-w-2xl",children:"Please wait while we match you with suitable PhD programs and supervisors"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-end justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-700",children:[b,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:e.jsx("div",{className:"h-2 bg-blue-600 rounded transition-all",style:{width:`${b}%`}})})]}),e.jsx("div",{className:"mt-6 space-y-4",children:N.map((t,r)=>{const o=t.icon,s=a.indexOf(t.key),n=y>s?"completed":y===s||c==="started"&&r===0?"active":"pending";return e.jsxs("div",{className:"flex items-start p-4 rounded-xl border transition-colors "+(n==="completed"?"bg-green-50 border-green-200":n==="active"?"bg-blue-50 border-blue-200":"bg-white border-gray-200"),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(n==="completed"?"bg-green-100":n==="active"?"bg-blue-100":"bg-gray-100"),children:e.jsx(o,{className:"w-5 h-5 "+(n==="completed"?"text-green-600":n==="active"?"text-blue-600":"text-gray-400")})})}),e.jsx("div",{className:"ml-4 flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]}),e.jsx("div",{className:"ml-4",children:w(n)})]})})]},t.key)})}),e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"border rounded-lg bg-blue-50 border-blue-200 p-4 flex items-start",children:[e.jsx(S,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("p",{className:"ml-3 text-sm text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:"Did you know?"})," Our AI analyzes over 50 research parameters to find the perfect supervisor match, including publication patterns, funding history, and research collaboration networks."]})]})}),g&&e.jsxs("div",{className:"mt-8 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-md",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"An Error Occurred"}),e.jsx("p",{className:"text-sm mt-1",children:g})]})]})})})}export{Q as default};
