import{q as b,r as c,W as f,j as e,Y as N}from"./app-xmIh42KO.js";import{M as S}from"./MainLayout-CPl0HUIu.js";import w from"./NationalityForm-D20VvU6P.js";import{R as C}from"./quill.snow-xllMKbuR.js";import{u as F}from"./useRoles-PJeD2Kzi.js";import{I as n}from"./InputError-BgseXp0P.js";import{B as G}from"./BackButton-sTxjGrDq.js";import"./house-B_klPfw3.js";import"./createLucideIcon-DVFNR6_B.js";import"./zap-Bw3u2y3o.js";import"./users-BZFyQrBm.js";import"./folder-open-oQe88qJA.js";import"./settings-P6EtBnQ_.js";import"./chevron-left-CugAg8G6.js";import"./proxy-BAb5Dv9p.js";import"./user-round-CY-SkVGZ.js";import"./clipboard-list-ClXo_Dhd.js";import"./dollar-sign-Bn4bobhp.js";import"./calendar-s4DfQJnn.js";import"./file-text--rlsk2LO.js";import"./message-square-BBXQLeGc.js";import"./graduation-cap-scGiYA0W.js";import"./building-BY7nxrbx.js";import"./Dropdown-DwtwI7E_.js";import"./transition-wZyx5jV7.js";import"./sparkles-oh8aEPVE.js";import"./bookmark-BdJwoyC4.js";import"./folder-kanban-CN2KbaLX.js";import"./building-2-Ch3P9sYq.js";import"./database-Bq9LZVHr.js";import"./shield-CE5hrWmU.js";import"./index-gVQqUwf4.js";import"./analytics-BQ374C1C.js";import"./index-DjSnSkN9.js";import"./iconBase-CmbK3yE2.js";import"./index-D9eridZg.js";import"./supervisionConstants-BuM5-H5X.js";import"./utils-CBfrqCZ4.js";import"./ThreadPane-B1UkgXx6.js";import"./Modal-9xzh__1a.js";import"./dialog-B-e007Fb.js";import"./index-CLSrQ3eM.js";import"./scroll-area-AuKSir-5.js";import"./index-C-SKuI93.js";import"./index-CfHh2K1o.js";import"./index-DxyQ96zj.js";import"./index-D3U9SMCW.js";import"./index-BdQq_4o_.js";import"./format-BOijCLBA.js";import"./en-US-DIdCsyf3.js";import"./button-BxlM9Ynt.js";import"./download-DhGNF5t8.js";import"./x-CqhkXXcI.js";import"./isSameDay-BHs4V-zU.js";import"./constructNow-6bIQB1GK.js";import"./addDays-KHeCUDUr.js";import"./PrimaryButton-gsFALqdO.js";import"./SecondaryButton-sarh4spo.js";import"./search-ZOwBQLRx.js";import"./circle-check-big-DJvx1MoU.js";import"./chevron-right-W86pD0Cb.js";import"./tooltip-D_lGOzep.js";import"./index-CFWEupJ2.js";import"./index-Jct0HHTX.js";import"./index-C0RVqtAt.js";import"./floating-ui.dom-D5EC_49c.js";import"./index-C_m7Z3So.js";import"./index-Cn5-Ykwo.js";import"./index-DiD6aHt-.js";import"./index-Chjiymov.js";import"./dialog-Cc-SgjeX.js";import"./index-aBJ4ZnJk.js";import"./index-BayBrQ5A.js";import"./briefcase-DNLVAK73.js";import"./user-DqDDY9eD.js";import"./react-select.esm-D3B9IQQc.js";import"./arrow-left-D3IbPUQw.js";const k=["Merit-Based Scholarship","Dean's Scholarship","Academic Excellence Scholarship","Need-Based Scholarship","Hardship Scholarship","First-Generation Scholarship","STEM Scholarship","Arts & Humanities Scholarship","Business/Finance Scholarship","Medical/Healthcare Scholarship","Minority Scholarship","Women in STEM Scholarship","International Student Scholarship","Disability Scholarship","Athletic Scholarship","Artistic/Creative Scholarship","Leadership Scholarship"],E=["Matching Grant","Seed Grant","Research Grant","Travel Grant","Innovation Grant","Collaboration Grant","Training Grant","Capacity-Building Grant","Community Grant","Development Grant","Pilot Grant","Commercialization Grant","Technology Grant","Sponsorship Grant","Social Impact Grant","Emergency or Relief Grant","International Grant","Equipment Grant","Small Business Grant"];function at(){const{auth:m,type:y}=b().props;F();const[s,h]=c.useState(y||"grant"),{data:a,setData:i,post:j,processing:v,errors:r}=f({type:s,title:"",description:"",start_date:"",end_date:"",application_deadline:"",grant_type:"",grant_theme:[],scholarship_type:"",scholarship_theme:[],cycle:"",sponsored_by:"",email:"",website:"",country:"",image:null,attachment:null,status:"published"}),[T,D]=c.useState(a.university),[d,x]=c.useState(!1),p=c.useRef(null);c.useEffect(()=>{const t=o=>{p.current&&!p.current.contains(o.target)&&x(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[d]),c.useEffect(()=>{a.type!==s&&(i("type",s),s==="scholarship"?(a.cycle&&i("cycle",""),a.grant_type&&i("grant_type",""),a.grant_theme&&a.grant_theme.length>0&&i("grant_theme",[])):s==="grant"&&(a.scholarship_type&&i("scholarship_type",""),a.scholarship_theme&&a.scholarship_theme.length>0&&i("scholarship_theme",[])))},[s,i,a.type,a.cycle,a.grant_type,a.grant_theme,a.scholarship_type,a.scholarship_theme]);const g=t=>{const o=s==="grant"?"grant_theme":"scholarship_theme";a[o].includes(t)?i(o,a[o].filter(l=>l!==t)):i(o,[...a[o],t])},u=()=>{const t={type:s,title:a.title,description:a.description,start_date:a.start_date,end_date:a.end_date,application_deadline:a.application_deadline,sponsored_by:a.sponsored_by,email:a.email,website:a.website,country:a.country,status:a.status};a.image instanceof File&&(t.image=a.image),a.attachment instanceof File&&(t.attachment=a.attachment),s==="grant"?(t.grant_type=a.grant_type,t.grant_theme=a.grant_theme,t.cycle=a.cycle):(t.scholarship_type=a.scholarship_type,t.scholarship_theme=a.scholarship_theme);const o=new FormData;Object.keys(t).forEach(l=>{t[l]instanceof File?o.append(l,t[l]):Array.isArray(t[l])?o.append(l,JSON.stringify(t[l])):t[l]!==null&&t[l]!==void 0&&o.append(l,t[l])}),console.log("Submitting payload for:",s);for(let[l,_]of o.entries())console.log(`${l}: ${_}`);j(route("funding.admin.store"),{data:o,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert(`${s==="grant"?"Grant":"Scholarship"} created successfully.`)},onError:l=>{console.error("Error creating funding:",l),alert(`Failed to create the ${s==="grant"?"grant":"scholarship"}. Please try again.`)}})};return e.jsxs(S,{title:"",children:[e.jsx(N,{title:`Add New ${s==="grant"?"Grant":"Scholarship"}`}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(G,{})}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),u()},className:"bg-white p-6 lg:p-0 rounded-lg max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-700 text-center",children:["Add New ",s==="grant"?"Grant":"Scholarship"]}),e.jsxs("div",{children:[e.jsx(n,{value:"Type"}),e.jsxs("div",{className:"mt-2 flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"grant",checked:s==="grant",onChange:t=>h(t.target.value),className:"mr-2"}),"Grant"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"scholarship",checked:s==="scholarship",onChange:t=>h(t.target.value),className:"mr-2"}),"Scholarship"]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",value:e.jsxs(e.Fragment,{children:[s==="grant"?"Grant":"Scholarship"," Name ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"title",type:"text",value:a.title,onChange:t=>i("title",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:`Enter ${s==="grant"?"grant":"scholarship"} title`}),r.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.title})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"description",value:e.jsxs(e.Fragment,{children:[s==="grant"?"Grant":"Scholarship"," Description ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("div",{id:"description",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",style:{height:"300px",overflowY:"auto"},children:e.jsx(C,{theme:"snow",value:a.description,onChange:t=>i("description",t),placeholder:"Enter description",style:{height:"300px",maxHeight:"300px"}})}),r.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"start_date",value:e.jsxs(e.Fragment,{children:["Start Date (Grant) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"start_date",type:"date",value:a.start_date,onChange:t=>i("start_date",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),r.start_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.start_date})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"end_date",value:e.jsxs(e.Fragment,{children:["End Date (Grant) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"end_date",type:"date",value:a.end_date,min:a.start_date||"",onChange:t=>i("end_date",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),r.end_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.end_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"application_deadline",value:e.jsxs(e.Fragment,{children:["Application Deadline ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"application_deadline",type:"date",value:a.application_deadline,onChange:t=>i("application_deadline",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),r.application_deadline&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.application_deadline})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:s==="grant"?"grant_type":"scholarship_type",value:e.jsxs(e.Fragment,{children:[s==="grant"?"Grant":"Scholarship"," Type ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsxs("select",{id:s==="grant"?"grant_type":"scholarship_type",value:a[s==="grant"?"grant_type":"scholarship_type"],onChange:t=>i(s==="grant"?"grant_type":"scholarship_type",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsxs("option",{value:"",disabled:!0,hidden:!0,children:["Select a ",s==="grant"?"Grant":"Scholarship"," Type"]}),s==="grant"?E.map(t=>e.jsx("option",{value:t,children:t},t)):k.map(t=>e.jsx("option",{value:t,children:t},t))]}),r[s==="grant"?"grant_type":"scholarship_type"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r[s==="grant"?"grant_type":"scholarship_type"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{ref:p,children:[e.jsx(n,{value:e.jsxs(e.Fragment,{children:[s==="grant"?"Grant":"Scholarship"," Theme (Multiselect) ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("div",{className:`relative mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 px-2.5 cursor-pointer bg-white ${d?"shadow-lg":""}`,onClick:()=>x(!d),children:a[s==="grant"?"grant_theme":"scholarship_theme"]&&a[s==="grant"?"grant_theme":"scholarship_theme"].length>0?a[s==="grant"?"grant_theme":"scholarship_theme"].join(", "):`Select ${s==="grant"?"Grant":"Scholarship"} Themes`}),d&&e.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-300 rounded shadow-lg w-[37.5rem]",children:e.jsxs("div",{className:"p-2 space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:"Science & Technology",checked:a[s==="grant"?"grant_theme":"scholarship_theme"].includes("Science & Technology"),onChange:t=>g(t.target.value),className:"mr-2"}),e.jsx("span",{children:"Science & Technology"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:"Social Science",checked:a[s==="grant"?"grant_theme":"scholarship_theme"].includes("Social Science"),onChange:t=>g(t.target.value),className:"mr-2"}),e.jsx("span",{children:"Social Science"})]})]})}),r[s==="grant"?"grant_theme":"scholarship_theme"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r[s==="grant"?"grant_theme":"scholarship_theme"]})]}),s==="grant"&&e.jsxs("div",{children:[e.jsx(n,{htmlFor:"cycle",value:e.jsxs(e.Fragment,{children:["Cycle ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsxs("select",{id:"cycle",value:a.cycle,onChange:t=>i("cycle",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Cycle"}),e.jsx("option",{value:"No Cycle",children:"No Cycle"}),e.jsx("option",{value:"Cycle 1",children:"Cycle 1"}),e.jsx("option",{value:"Cycle 2",children:"Cycle 2"}),e.jsx("option",{value:"Cycle 3",children:"Cycle 3"})]}),r.cycle&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.cycle})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"sponsored_by",value:e.jsxs(e.Fragment,{children:["Sponsored By ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"sponsored_by",type:"text",value:a.sponsored_by,onChange:t=>i("sponsored_by",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter sponsor"}),r.sponsored_by&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.sponsored_by})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",value:e.jsxs(e.Fragment,{children:["Contact Email ",e.jsx("span",{className:"text-red-600",children:"*"})]})}),e.jsx("input",{id:"email",type:"email",value:a.email,onChange:t=>i("email",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter email"}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"usePersonalEmail",checked:a.email===m.user.email,onChange:t=>{t.target.checked?i("email",m.user.email):i("email","")},className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsxs("label",{htmlFor:"usePersonalEmail",className:"ml-2 text-gray-700",children:["Use personal email (",m.user.email,")"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"website",value:"Website / Link"}),e.jsx("input",{id:"website",type:"url",value:a.website,onChange:t=>i("website",t.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter Website / Link"}),r.website&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.website})]}),e.jsxs("div",{children:[e.jsx(w,{title:"Country",value:a.country,isNotSpecify:!0,onChange:t=>i("country",t),errors:r}),r.country&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.country})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"image",value:"Upload Image"}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:t=>i("image",t.target.files[0]),className:"mt-1 block w-full border-gray-300 rounded-md py-2 text-sm"}),r.image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.image})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"attachment",value:"Upload Attachment"}),e.jsx("input",{id:"attachment",type:"file",onChange:t=>i("attachment",t.target.files[0]),className:"mt-1 block w-full border-gray-300 rounded-md py-2 text-sm"}),r.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.attachment})]})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:()=>{u()},disabled:v,className:"w-full sm:w-auto inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"})})]})]})]})}export{at as default};
