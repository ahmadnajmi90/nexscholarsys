import{r as s,j as e,a as re}from"./app-BodExSbw.js";import{c as D}from"./index-mDeC9k3u.js";import{D as se,a as ie,b as le,c as v,d as j}from"./dropdown-menu-Cro64dXV.js";import{b as w}from"./button-DBoeCbAi.js";import{c as ne,a as ce}from"./index-BNbWxI0H.js";import{u as b,c as de}from"./index-CuEpCwL6.js";import{c as _,b as pe,O as me,W as ge,C as fe,T as ue,D as xe,a as R,R as Ae,P as he}from"./index-UyMSTuQx.js";import{c as n}from"./utils-D-KgF5mV.js";import{u as De}from"./useGoogleCalendar-Dt-LBfk8.js";import{E as ve}from"./ellipsis-vertical-C16tpVvO.js";import{V as ye}from"./video-M2uVkNtU.js";import{c as Ne}from"./createLucideIcon-plmRflaj.js";import{L as C}from"./loader-circle-Cw7Nqhid.js";import{C as je}from"./check-CzANbjxc.js";import{C as Ce}from"./calendar-B_CZibmO.js";import{T as we}from"./trash-2-CDTv5Cmp.js";import"./index-D7Nzv7pr.js";import"./index-D4c9OpUc.js";import"./index-DVO2p-KC.js";import"./index-BJkGQNDv.js";import"./index-CtmDxyuO.js";import"./index---8uu-Q5.js";import"./tslib.es6-CmEaCU22.js";import"./index-C0YnOByL.js";import"./floating-ui.dom-eiE65J5j.js";import"./index-BbHqW-rW.js";import"./index-B08zmKDA.js";import"./index-BBnFLmbe.js";import"./chevron-right-R9vm_i8s.js";import"./circle-BPjIECXT.js";import"./logError-D4ezqrCx.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_e=Ne("SquarePen",be);var S="AlertDialog",[Re,Da]=ne(S,[_]),l=_(),T=a=>{const{__scopeAlertDialog:o,...t}=a,r=l(o);return e.jsx(Ae,{...r,...t,modal:!0})};T.displayName=S;var Se="AlertDialogTrigger",Te=s.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...r}=a,i=l(t);return e.jsx(pe,{...i,...r,ref:o})});Te.displayName=Se;var Me="AlertDialogPortal",M=a=>{const{__scopeAlertDialog:o,...t}=a,r=l(o);return e.jsx(he,{...r,...t})};M.displayName=Me;var Ee="AlertDialogOverlay",E=s.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...r}=a,i=l(t);return e.jsx(me,{...i,...r,ref:o})});E.displayName=Ee;var m="AlertDialogContent",[Pe,Oe]=Re(m),ke=de("AlertDialogContent"),P=s.forwardRef((a,o)=>{const{__scopeAlertDialog:t,children:r,...i}=a,c=l(t),d=s.useRef(null),u=b(o,d),g=s.useRef(null);return e.jsx(ge,{contentName:m,titleName:O,docsSlug:"alert-dialog",children:e.jsx(Pe,{scope:t,cancelRef:g,children:e.jsxs(fe,{role:"alertdialog",...c,...i,ref:u,onOpenAutoFocus:ce(i.onOpenAutoFocus,p=>{var x;p.preventDefault(),(x=g.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(ke,{children:r}),e.jsx($e,{contentRef:d})]})})})});P.displayName=m;var O="AlertDialogTitle",k=s.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...r}=a,i=l(t);return e.jsx(ue,{...i,...r,ref:o})});k.displayName=O;var I="AlertDialogDescription",$=s.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...r}=a,i=l(t);return e.jsx(xe,{...i,...r,ref:o})});$.displayName=I;var Ie="AlertDialogAction",G=s.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...r}=a,i=l(t);return e.jsx(R,{...i,...r,ref:o})});G.displayName=Ie;var L="AlertDialogCancel",F=s.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...r}=a,{cancelRef:i}=Oe(L,t),c=l(t),d=b(o,i);return e.jsx(R,{...c,...r,ref:d})});F.displayName=L;var $e=({contentRef:a})=>{const o=`\`${m}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${m}\` by passing a \`${I}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${m}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{var r;document.getElementById((r=a.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(o)},[o,a]),null},Ge=T,Le=M,z=E,V=P,H=G,q=F,J=k,W=$;const Fe=Ge,ze=Le,B=s.forwardRef(({className:a,...o},t)=>e.jsx(z,{className:n("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...o,ref:t}));B.displayName=z.displayName;const Y=s.forwardRef(({className:a,...o},t)=>e.jsxs(ze,{children:[e.jsx(B,{}),e.jsx(V,{ref:t,className:n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o})]}));Y.displayName=V.displayName;const K=({className:a,...o})=>e.jsx("div",{className:n("flex flex-col space-y-2 text-center sm:text-left",a),...o});K.displayName="AlertDialogHeader";const Q=({className:a,...o})=>e.jsx("div",{className:n("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...o});Q.displayName="AlertDialogFooter";const X=s.forwardRef(({className:a,...o},t)=>e.jsx(J,{ref:t,className:n("text-lg font-semibold",a),...o}));X.displayName=J.displayName;const Z=s.forwardRef(({className:a,...o},t)=>e.jsx(W,{ref:t,className:n("text-sm text-muted-foreground",a),...o}));Z.displayName=W.displayName;const U=s.forwardRef(({className:a,...o},t)=>e.jsx(H,{ref:t,className:n(w(),a),...o}));U.displayName=H.displayName;const ee=s.forwardRef(({className:a,...o},t)=>e.jsx(q,{ref:t,className:n(w({variant:"outline"}),"mt-2 sm:mt-0",a),...o}));ee.displayName=q.displayName;function va({meeting:a,onUpdate:o,onCancel:t}){const[r,i]=s.useState(!1),[c,d]=s.useState(!1),[u,g]=s.useState(!1),{isConnected:p,addMeetingToCalendar:x}=De(),y=!!a.location_link,A=a.external_event_id&&a.external_provider==="google",ae=()=>{y&&window.open(a.location_link,"_blank","noopener,noreferrer")},oe=async()=>{if(!p){D.error("Please connect Google Calendar in your profile settings first");return}if(A){D("This meeting is already in your Google Calendar",{icon:"ℹ️",duration:3e3});return}g(!0);try{const f=await x(a.id);(f.success||f.alreadyExists)&&(t==null||t())}finally{g(!1)}},te=async()=>{var f,N;d(!0);try{await re.delete(route("supervision.meetings.destroy",a.id)),D.success("Meeting cancelled"),t==null||t(),i(!1)}catch(h){console.error("Cancel meeting error:",h),D.error(((N=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:N.message)||"Failed to cancel meeting")}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsx(ie,{className:"inline-flex items-center justify-center h-8 w-8 rounded-md text-sm font-medium hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsxs(le,{align:"end",children:[y&&e.jsxs(v,{onClick:ae,children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Join Meeting"]}),e.jsxs(v,{onClick:()=>o==null?void 0:o(a),children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Reschedule"]}),e.jsx(j,{}),e.jsxs(v,{onClick:oe,disabled:u||A,children:[u?e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}):A?e.jsx(je,{className:"mr-2 h-4 w-4 text-green-600"}):e.jsx(Ce,{className:"mr-2 h-4 w-4"}),A?"Added to Google Calendar":"Add to Google Calendar"]}),e.jsx(j,{}),e.jsxs(v,{onClick:()=>i(!0),className:"text-red-600",children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),"Cancel Meeting"]})]})]}),e.jsx(Fe,{open:r,onOpenChange:i,children:e.jsxs(Y,{children:[e.jsxs(K,{children:[e.jsx(X,{children:"Cancel meeting?"}),e.jsxs(Z,{children:['This will cancel "',a.title,'" scheduled for'," ",new Date(a.scheduled_for).toLocaleString(),". The other party will be notified."]})]}),e.jsxs(Q,{children:[e.jsx(ee,{disabled:c,children:"Keep Meeting"}),e.jsxs(U,{onClick:te,disabled:c,className:"bg-red-600 hover:bg-red-700",children:[c&&e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancel Meeting"]})]})]})})]})}export{va as default};
