import{r as _,j as e}from"./app-cV1DjFGj.js";import{l as W,m as D,n as L,o as Q}from"./index-TBKI98wJ.js";const C=({label:f,options:m,selectedValues:d,setSelectedValues:p})=>{const[g,u]=_.useState(!1),b=c=>{const o=d.includes(c)?d.filter(x=>x!==c):[...d,c];p(o)};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:f}),e.jsx("div",{className:`relative mt-1 w-full rounded-lg border border-gray-200 p-4 text-sm cursor-pointer bg-white ${g?"shadow-lg":""}`,onClick:()=>u(!g),children:d&&d.length>0?m.filter(c=>d.includes(c.value)).map(c=>c.label).join(", "):`Select ${f}`}),g&&e.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded shadow-lg",children:e.jsx("div",{className:"p-2 space-y-2",children:m.map((c,o)=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:c.value,checked:d.includes(c.value),onChange:x=>b(x.target.value),className:"mr-2"}),c.label]},o))})})]})},V=({profilesData:f,supervisorAvailabilityKey:m,universitiesList:d,faculties:p,isPostgraduateList:g,isUndergraduateList:u,isFacultyAdminDashboard:b,users:c,researchOptions:o})=>{var S;const[x,P]=_.useState([]),[v,U]=_.useState([]),[j,F]=_.useState(""),[y,$]=_.useState(1),N=9,[R,w]=_.useState(!1),[l,E]=_.useState(null),B=r=>{E(r),w(!0)},O=[...new Set(f.flatMap(r=>{const s=Array.isArray(r.field_of_research)?r.field_of_research:[],a=Array.isArray(r.research_expertise)?r.research_expertise:[],t=Array.isArray(r.research_preference)?r.research_preference:[];return[...s,...a,...t]}))].map(r=>{const s=o.find(a=>`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`===r);return{value:r,label:s?`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`:"Unknown Research Area"}}),I=d.map(r=>({value:r.id.toString(),label:r.short_name})),k=f.filter(r=>{var n;const s=x.length===0||(r.field_of_research||r.research_expertise||r.research_preference||[]).some(i=>x.includes(i)),a=v.length===0||v.includes(r.university.toString()),t=j===""||((n=r[m])==null?void 0:n.toString())===j;return s&&a&&t}),M=Math.ceil(k.length/N),G=k.slice((y-1)*N,y*N),q=r=>{$(r)},A=r=>{const s=d.find(a=>a.id===r);return s?s.full_name:"Unknown University"},z=r=>{const s=p.find(a=>a.id===r);return s?s.name:"Unknown University"};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"w-1/4 p-4 bg-gray-100 border-r",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{label:u?"Preferred Research Area":"Research Area",options:O,selectedValues:x,setSelectedValues:P}),!b&&e.jsx(C,{label:"University",options:I,selectedValues:v,setSelectedValues:U}),!u&&e.jsxs("div",{children:[m==="availability_as_supervisor"?e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Available As Supervisor"}):e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Looking for supervisor"}),e.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full pl-4",value:j,onChange:r=>{F(r.target.value),$(1)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]})]})]}),e.jsxs("div",{className:"flex-1 px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:[G.map(r=>{var s;return e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-[10px] font-semibold px-2.5 py-0.5 rounded-full",children:((s=d.find(a=>a.id===r.university))==null?void 0:s.short_name)||"Unknown University"}),!g&&e.jsxs("div",{className:"relative group",children:[r.verified===1&&e.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-purple-100 px-2.5 py-0.5 text-[10px] text-purple-700 cursor-pointer",children:"Verified"}),r.verified!==1&&e.jsx("span",{className:"absolute top-2 right-2 whitespace-nowrap rounded-full bg-red-100 px-2.5 py-0.5 text-[10px] text-red-700 cursor-pointer",children:"Not Verified"}),e.jsx("div",{className:"absolute top-8 right-0 hidden group-hover:flex items-center bg-gray-800 text-white text-xs rounded px-3 py-2 shadow-lg z-10",children:r.verified===1?`This account is verified by ${A(r.university)}`:"This account is not verified"})]}),e.jsx("div",{className:"h-32",children:e.jsx("img",{src:r.background_image!==null?`/storage/${r.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Banner",className:"object-cover w-full h-full"})}),e.jsx("div",{className:"flex justify-center -mt-12",children:e.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg",children:e.jsx("img",{src:r.profile_picture!==null?`/storage/${r.profile_picture}`:"/storage/profile_pictures/default.jpg",alt:"Profile",className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:r.full_name}),e.jsx("p",{className:"text-gray-500 text-sm",children:Array.isArray(r.field_of_research)&&r.field_of_research.length>0?(()=>{const a=r.field_of_research[0],t=o.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===a);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():Array.isArray(r.research_expertise)&&r.research_expertise.length>0?(()=>{const a=r.research_expertise[0],t=o.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===a);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():Array.isArray(r.research_preference)&&r.research_preference.length>0?(()=>{const a=r.research_preference[0],t=o.find(n=>`${n.field_of_research_id}-${n.research_area_id}-${n.niche_domain_id}`===a);return t?`${t.field_of_research_name} - ${t.research_area_name} - ${t.niche_domain_name}`:"Unknown"})():"No Field of Research or Expertise"}),e.jsx("p",{className:"text-gray-500 text-sm",children:r.current_position}),e.jsx("button",{onClick:()=>B(r),className:"mt-2 bg-blue-500 text-white text-[10px] px-2 font-semibold py-1 rounded-full hover:bg-blue-600",children:"Quick Info"})]}),e.jsxs("div",{className:"flex justify-around items-center mt-6 py-4 border-t px-10",children:[e.jsx(W,{className:"text-gray-500 text-sm cursor-pointer hover:text-blue-700",title:"Copy Email",onClick:()=>handleCopyEmail(r.email)}),e.jsx("a",{href:r.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-red-700",title:"Google Scholar",children:e.jsx(D,{})}),e.jsx("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-green-700",title:"Website",children:e.jsx(L,{})}),e.jsx("a",{href:r.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 text-sm hover:text-blue-800",title:"LinkedIn",children:e.jsx(Q,{})})]})]},r.id)}),R&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg relative",children:[e.jsx("button",{onClick:()=>w(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Close",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:l.full_name}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"University:"})," ",A(l.university)]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Faculty:"})," ",z(l.faculty)]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Bio:"})," ",l.bio||"No bio available."]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsxs("span",{className:"font-semibold",children:[u?"Preferred Research Area":"Fields of Research",":"]})," ",(()=>{const r=Array.isArray(l.field_of_research)&&l.field_of_research.length>0?l.field_of_research.map(n=>{const i=o.find(h=>`${h.field_of_research_id}-${h.research_area_id}-${h.niche_domain_id}`===n);return i?`${i.field_of_research_name} - ${i.research_area_name} - ${i.niche_domain_name}`:null}).filter(Boolean):[],s=Array.isArray(l.research_expertise)&&l.research_expertise.length>0?l.research_expertise.map(n=>{const i=o.find(h=>`${h.field_of_research_id}-${h.research_area_id}-${h.niche_domain_id}`===n);return i?`${i.field_of_research_name} - ${i.research_area_name} - ${i.niche_domain_name}`:null}).filter(Boolean):[],a=Array.isArray(l.research_preference)&&l.research_preference.length>0?l.research_preference.map(n=>{const i=o.find(h=>`${h.field_of_research_id}-${h.research_area_id}-${h.niche_domain_id}`===n);return i?`${i.field_of_research_name} - ${i.research_area_name} - ${i.niche_domain_name}`:null}).filter(Boolean):[],t=[...r,...s,...a];return t.length>0?t.join(", "):"No fields of study or expertise"})()]}),!u&&e.jsxs("p",{className:"text-gray-600",children:[m=="availability_as_supervisor"?e.jsx("span",{className:"font-semibold",children:"Available as supervisor:"}):e.jsx("span",{className:"font-semibold",children:"Looking for a supervisor:"}),l[m]===1?" Yes":" No"]}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",((S=c.find(r=>r.unique_id===(l.academician_id||l.postgraduate_id||l.undergraduate_id)))==null?void 0:S.email)||"No email provided"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]}),e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:Array.from({length:M},(r,s)=>e.jsx("button",{onClick:()=>q(s+1),className:`px-4 py-2 border rounded ${y===s+1?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:s+1},s))})]})]})};export{V as P};
