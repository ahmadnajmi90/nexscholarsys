import{r as s,a as k,j as e,y as M}from"./app-aw24HfLq.js";import{V as m}from"./index-0do38g4T.js";import{F as D,h as O,r as A,s as E}from"./index-DR0ykaNB.js";import I from"./ConfirmationModal-DRkpmVdQ.js";import T from"./PostgraduateProgramFormModal-DC-ib5RM.js";import"./iconBase-BeqrMiLs.js";import"./NationalityForm-DMSgkdNr.js";import"./InputLabel-CSLgfq5f.js";import"./react-select.esm-BWhp9l7K.js";import"./InputError-DIn1WeZZ.js";import"./dialog-CvrE2Vmf.js";import"./transition-vi0MMpfy.js";function U(){const[x,f]=s.useState([]),[j,u]=s.useState(!0),[o,b]=s.useState(""),[a,l]=s.useState({current_page:1,per_page:10,total:0,last_page:1}),[N,n]=s.useState(!1),[v,i]=s.useState(!1),[c,d]=s.useState(null),[_,g]=s.useState("create");s.useEffect(()=>{p()},[a.current_page,o]);const p=async()=>{u(!0);try{const t=await k.get("/api/v1/app/postgraduate-programs",{params:{page:a.current_page,per_page:a.per_page,search:o||void 0}});f(t.data.data),l({current_page:t.data.meta.current_page,per_page:t.data.meta.per_page,total:t.data.meta.total,last_page:t.data.meta.last_page})}catch(t){console.error(t),m.error("Failed to load Postgraduate Programs")}finally{u(!1)}},P=()=>{d(null),g("create"),n(!0)},w=t=>{d(t),g("edit"),n(!0)},S=t=>{d(t),i(!0)},C=async()=>{if(c)try{M.delete(`/admin/data-management/postgraduate-programs/${c.id}`),m.success("Postgraduate Program deleted"),i(!1),p()}catch(t){console.error(t),m.error("Delete failed")}},h=t=>l(r=>({...r,current_page:t})),F=t=>{t.preventDefault(),l(r=>({...r,current_page:1}))};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("form",{onSubmit:F,className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"border rounded-md py-2 pl-8 pr-3 w-64",placeholder:"Search programs...",value:o,onChange:t=>b(t.target.value)}),e.jsx(D,{className:"absolute left-2 top-3 text-gray-400"})]}),e.jsx("button",{type:"submit",className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Search"})]}),e.jsxs("button",{onClick:P,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring ring-blue-300",children:[e.jsx(O,{className:"mr-2"})," Add New Postgraduate Program"]})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institution"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funding"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-4",colSpan:"6",children:"Loading..."})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-4",colSpan:"6",children:"No programs found."})}):x.map(t=>{var r,y;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 align-top",children:t.name}),e.jsxs("td",{className:"px-4 py-2 text-sm align-top",children:[e.jsx("div",{className:"font-medium text-gray-900",children:((r=t.university)==null?void 0:r.full_name)||"-"}),e.jsx("div",{className:"text-xs text-gray-500",children:((y=t.faculty)==null?void 0:y.name)||"N/A Faculty"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.country||""})]}),e.jsx("td",{className:"px-4 py-2 text-sm align-top",children:t.duration_years||"-"}),e.jsx("td",{className:"px-4 py-2 text-sm align-top",children:t.funding_info||"-"}),e.jsxs("td",{className:"px-4 py-2 text-sm align-top",children:[e.jsx("button",{onClick:()=>w(t),className:"inline-flex items-center px-2 py-1 text-blue-600",children:e.jsx(A,{})}),e.jsx("button",{onClick:()=>S(t),className:"inline-flex items-center px-2 py-1 text-red-600",children:e.jsx(E,{})})]})]},t.id)})})]})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",a.current_page," of ",a.last_page]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{disabled:a.current_page<=1,onClick:()=>h(a.current_page-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),e.jsx("button",{disabled:a.current_page>=a.last_page,onClick:()=>h(a.current_page+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}),e.jsx(T,{isOpen:N,onClose:()=>n(!1),mode:_,currentProgram:c,onSuccess:()=>{n(!1),p()}}),e.jsx(I,{isOpen:v,title:"Delete Postgraduate Program",message:"Are you sure you want to delete this Postgraduate Program? This action cannot be undone.",onCancel:()=>i(!1),onConfirm:C})]})}export{U as default};
