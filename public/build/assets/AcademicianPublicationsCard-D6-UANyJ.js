import{r as n,a as k,j as e,b as m}from"./app-DQ4-jIOt.js";import{$ as L,a8 as C,a9 as D,aa as I,ab as E,w as M,x as O}from"./index-Dg7JG-ST.js";import"./iconBase-DhpVv-bT.js";const Q=({academician:t,university:g,faculty:b,user:R,publications:c,scholarProfile:o,researchOptions:Y,isEditing:d=!1,hideNavigation:N=!1,hideProfile:u=!1})=>{const[r,y]=n.useState(1),[v,U]=n.useState({}),[l,p]=n.useState(!1),[j,F]=n.useState(null),[f,P]=n.useState(!1),i=10,h=Math.ceil(c.length/i),A=c.slice((r-1)*i,r*i),$=c.reduce((s,a)=>{const x=a.year||"Unknown";return s[x]=(s[x]||0)+1,s},{}),w=Object.entries($).sort(([s],[a])=>s==="Unknown"?1:a==="Unknown"?-1:parseInt(a)-parseInt(s)),G=s=>{U(a=>({...a,[s]:!a[s]}))};n.useEffect(()=>{d&&(t!=null&&t.google_scholar)&&S()},[d,t==null?void 0:t.google_scholar]);const S=()=>{k.get("/api/scholar/status").then(s=>{s.data.success&&(F(s.data),P(s.data.can_update))}).catch(s=>{console.error("Error fetching Google Scholar status:",s)})},_=()=>{if(!t.google_scholar){alert("Please add your Google Scholar URL first in your profile settings.");return}p(!0),k.post("/api/scholar/scrape").then(s=>{p(!1),s.data.success?(alert(s.data.message),S(),window.location.reload()):alert(s.data.message||"Failed to update Google Scholar profile.")}).catch(s=>{var a,x;p(!1),console.error("Error scraping Google Scholar:",s),alert(((x=(a=s.response)==null?void 0:a.data)==null?void 0:x.message)||"An error occurred while updating your Google Scholar profile.")})};return e.jsxs("div",{className:`${u?"":"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8"}`,children:[!N&&e.jsx("div",{className:"absolute top-[2rem] left-6 md:top-[3rem] md:left-[20.2rem] z-10",children:e.jsx(m,{onClick:()=>window.history.back(),className:"flex items-center justify-center w-8 h-8 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-colors",children:e.jsx(L,{className:"text-xl"})})}),!u&&e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-4 sm:mb-6",children:[e.jsxs("div",{className:"relative h-48 sm:h-64",children:[e.jsx("img",{src:t.background_image?`/storage/${t.background_image}`:"/storage/profile_background_images/default.jpg",alt:"Background",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute -bottom-16 left-4 sm:left-8",children:e.jsx("img",{src:t.profile_picture?`/storage/${t.profile_picture}`:"/images/default-avatar.jpg",alt:t.full_name,className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full border-4 border-white shadow-lg object-cover"})})]}),e.jsxs("div",{className:"px-4 sm:px-8 pt-20 pb-4 sm:pb-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:t.full_name}),t.current_position&&e.jsx("p",{className:"text-base sm:text-lg text-gray-600 mt-1",children:t.current_position}),e.jsx("div",{className:"mt-2 flex flex-wrap items-center text-gray-500",children:e.jsxs("p",{className:"text-sm sm:text-base",children:[g==null?void 0:g.full_name," - ",b==null?void 0:b.name]})})]})]}),!N&&e.jsx("div",{className:"border-b border-gray-300 mb-6",children:e.jsxs("div",{className:"flex md:space-x-12 space-x-4 px-4 sm:px-8",children:[e.jsx(m,{href:route("academicians.show",t.url),className:"md:text-lg text-base font-semibold text-gray-600 hover:text-blue-600 pb-2",children:"Profile"}),e.jsx(m,{href:route("academicians.publications",t.url),className:"md:text-lg text-base font-semibold text-blue-600 hover:text-blue-800 border-b-2 border-blue-600 pb-2",children:"Publications"}),e.jsx(m,{href:route("academicians.projects",t.url),className:"md:text-lg text-base font-semibold text-gray-600 hover:text-blue-600 pb-2",children:"Projects"}),e.jsx(m,{href:"#",className:"md:text-lg text-base font-semibold text-gray-600 hover:text-blue-600 pb-2",children:"Supervisors"})]})}),e.jsx("div",{className:u?"":"min-h-screen",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Overview"}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Total Citations"}),e.jsx("p",{className:"text-xl font-semibold",children:o.total_citations})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"h-index"}),e.jsx("p",{className:"text-xl font-semibold",children:o.h_index})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"i10-index"}),e.jsx("p",{className:"text-xl font-semibold",children:o.i10_index})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-700",children:o.last_scraped_at?new Date(o.last_scraped_at).toLocaleDateString():"Not available"})]}),d&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{type:"button",onClick:_,disabled:l||!f,className:`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium 
                          ${l||!f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors`,children:[e.jsx(C,{className:`mr-2 ${l?"animate-spin":""}`}),l?"Updating...":"Update Google Scholar Data"]}),j&&!f&&j.latest_scraping&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Profile was recently updated. Next update available ",j.latest_scraping.created_at_human,"."]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Scholar profile information not available"}),d&&t.google_scholar&&e.jsxs("button",{type:"button",onClick:_,disabled:l,className:`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium 
                        ${l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors`,children:[e.jsx(C,{className:`mr-2 ${l?"animate-spin":""}`}),l?"Updating...":"Import Google Scholar Data"]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publications by Year"}),w.length>0?e.jsx("div",{className:"space-y-2",children:w.map(([s,a])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:s}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:a})]},s))}):e.jsx("p",{className:"text-gray-500",children:"No publication data available"})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Publications"}),t.google_scholar&&e.jsxs("a",{href:t.google_scholar,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx("span",{className:"mr-2",children:"View on Google Scholar"}),e.jsx(D,{})]})]}),c.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No Publications Found"}),e.jsx("p",{className:"text-gray-500",children:d?"You don't have any recorded publications yet. Add your Google Scholar URL in the profile tab and click the Update button to import your publications.":"This academician has no recorded publications yet."})]}):e.jsxs("div",{className:"space-y-8",children:[A.map((s,a)=>e.jsxs("div",{className:"border-b pb-6 last:border-0 last:pb-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 hover:text-blue-600 mb-2",children:s.url?e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:s.title}):s.title}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:s.authors}),e.jsxs("div",{className:"flex items-center text-sm text-gray-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:s.venue}),s.year&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{children:s.year})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.citations>0&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(I,{className:"mr-2 text-xs"}),e.jsxs("span",{children:["Cited by ",s.citations]})]}),s.abstract&&e.jsxs("button",{onClick:()=>G(s.id),className:"flex items-center text-gray-600 hover:text-blue-600",children:[e.jsx(E,{className:"mr-2 text-xs"}),e.jsx("span",{children:"Abstract"}),v[s.id]?e.jsx(M,{className:"ml-1 text-xs"}):e.jsx(O,{className:"ml-1 text-xs"})]})]}),v[s.id]&&s.abstract&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded text-sm text-gray-700",children:s.abstract})]},a)),c.length>i&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("nav",{className:"flex items-center","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>y(s=>Math.max(s-1,1)),disabled:r===1,className:`px-3 py-1 rounded-md mr-2 ${r===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Previous"}),e.jsxs("span",{className:"text-gray-700 mx-2",children:["Page ",r," of ",h]}),e.jsx("button",{onClick:()=>y(s=>Math.min(s+1,h)),disabled:r===h,className:`px-3 py-1 rounded-md ml-2 ${r===h?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Next"})]})})]})]})})]})})]})};export{Q as default};
