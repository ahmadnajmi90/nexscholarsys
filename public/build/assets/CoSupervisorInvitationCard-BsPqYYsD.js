import{q as C,j as e}from"./app-BrPd_5NA.js";import{C as S,a as k}from"./card-C7v1DCeU.js";import{B as U}from"./badge-C-rv9uJ4.js";import{B as A}from"./button-D_c8cCUP.js";import{U as y}from"./user-XOKCZTSF.js";import{U as b}from"./users-Bm8PtVb1.js";import{C as v}from"./calendar-g0DizSmb.js";import{C as x}from"./circle-check-C8NnlNDG.js";import{C as _}from"./clock-CaREutQX.js";import{f as B}from"./formatDistanceToNow-CZclDLe0.js";import"./utils-CBfrqCZ4.js";import"./index-CdJFUDDL.js";import"./createLucideIcon-BuUp2DP1.js";import"./constructNow-6bIQB1GK.js";import"./en-US-DIdCsyf3.js";const O=({invitation:s,onClick:o})=>{const{auth:w}=C().props,r=s.relationship?.student,u=s.relationship?.academician,t=s.cosupervisor,p=s.relationship?.supervisionRequest?.proposal_title||s.relationship?.supervision_request?.proposal_title,g=w.user?.unique_id===s.cosupervisor_academician_id;let a,n,c,m;g?(a=r?.full_name||r?.user?.name||"Student",n=r?.profile_picture?`/storage/${r.profile_picture}`:null,c=r?.universityDetails?.name||r?.universityDetails?.full_name||r?.university_details?.name||r?.university_details?.full_name||null,m=a.split(" ").map(l=>l[0]).join("").slice(0,2).toUpperCase()):(a=t?.full_name||t?.user?.name||"Co-Supervisor",n=t?.profile_picture?`/storage/${t.profile_picture}`:null,c=t?.universityDetails?.name||t?.universityDetails?.full_name||t?.university?.name||t?.university?.full_name||t?.university_details?.name||t?.university_details?.full_name||null,m=a.split(" ").map(l=>l[0]).join("").slice(0,2).toUpperCase());const f=r?.full_name||r?.user?.name||"Student",d=u?.full_name||u?.user?.name||"Main Supervisor",h=s.initiated_by==="student"?f:d,j=s.created_at?B(new Date(s.created_at),{addSuffix:!0}):null,N=s.cancelled_at?{text:"Cancelled",className:"bg-gray-100 text-gray-700"}:s.cosupervisor_status==="rejected"?{text:"Rejected",className:"bg-red-100 text-red-700"}:s.approver_status==="rejected"?{text:"Not Approved",className:"bg-red-100 text-red-700"}:s.completed_at?{text:"Completed",className:"bg-green-100 text-green-700"}:s.cosupervisor_status==="accepted"&&s.approver_status==="pending"?{text:"Awaiting Approval",className:"bg-yellow-100 text-yellow-700"}:s.cosupervisor_status==="pending"?{text:"Pending Response",className:"bg-blue-100 text-blue-700"}:{text:"Pending",className:"bg-blue-100 text-blue-700"},i=s.completed_at||s.approver_status==="accepted"?100:s.cosupervisor_status==="accepted"?50:0;return e.jsx(S,{className:"hover:shadow-lg transition-all cursor-pointer border border-gray-200",onClick:o,children:e.jsxs(k,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 border border-indigo-200 flex items-center justify-center overflow-hidden flex-shrink-0",children:n?e.jsx("img",{src:n,alt:a,className:"w-full h-full object-cover rounded-full"}):e.jsx("div",{className:"bg-indigo-100 text-indigo-700 w-full h-full flex items-center justify-center text-xs font-semibold",children:m})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-[1.05rem] font-semibold text-gray-900 leading-snug truncate",children:a}),c&&e.jsx("p",{className:"text-sm text-gray-600 truncate font-normal",children:c}),j&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:j})]})]}),e.jsx(U,{className:`${N.className} flex-shrink-0`,children:N.text})]}),p&&e.jsx("div",{className:"mb-4",children:e.jsx("h4",{className:"text-base font-semibold text-slate-900 line-clamp-2 leading-snug",children:p})}),e.jsx("div",{className:"space-y-2 mb-4",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(y,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Student:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:f})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(b,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Main Supervisor:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:d})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Invited by:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:h})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(y,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Co-Supervisor:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:t?.full_name||t?.user?.name||"Co-Supervisor"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(b,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Main Supervisor:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:d})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-500",children:"Invited by:"}),e.jsx("span",{className:"text-gray-900 font-medium truncate flex-1",children:h})]})]})}),!s.cancelled_at&&(s.cosupervisor_status==="pending"||s.approver_status==="pending")&&e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[e.jsx("span",{children:"Approval Progress"}),e.jsxs("span",{children:[i,"%"]})]}),e.jsx("div",{className:"relative h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute inset-y-0 left-0 rounded-full transition-all duration-300 ${i===100?"bg-green-500":i===50?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${i}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[s.cosupervisor_status==="accepted"?e.jsx(x,{className:"w-3 h-3 text-green-600"}):e.jsx(_,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:s.cosupervisor_status==="accepted"?"text-green-700":"text-gray-500",children:"Co-supervisor"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.approver_status==="accepted"?e.jsx(x,{className:"w-3 h-3 text-green-600"}):e.jsx(_,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:s.approver_status==="accepted"?"text-green-700":"text-gray-500",children:"Approver"})]})]})]}),s.invitation_message&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"Personal Message:"}),e.jsxs("p",{className:"text-sm text-blue-800 italic line-clamp-2",children:['"',s.invitation_message,'"']})]}),s.rejection_reason&&e.jsxs("div",{className:"mt-3 bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-red-900 mb-1",children:"Rejection Reason:"}),e.jsxs("p",{className:"text-sm text-red-800 line-clamp-2",children:['"',s.rejection_reason,'"']})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs(A,{variant:"outline",size:"sm",className:"w-full text-xs sm:text-sm",onClick:l=>{l.stopPropagation(),o?.()},children:[e.jsx(x,{className:"mr-1.5 sm:mr-2 h-3.5 w-3.5 sm:h-4 sm:w-4"}),"View Details"]})})]})})};export{O as default};
