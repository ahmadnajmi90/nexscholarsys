import{r as d,j as e,Y as T,y as u,b as U}from"./app-DsU7pvKN.js";import{M as E}from"./MainLayout-GuBlxWRA.js";import{a9 as R,L,aa as Y,F as V}from"./index-BeC2I6AA.js";import{C as B}from"./ConfirmationModal-DzwR7x3f.js";import{D as x}from"./Dropdown-BhaNgZSH.js";import{E as D}from"./ellipsis-vertical-DLlxfRCP.js";import"./useRoles-CLmbL5UR.js";import"./analytics-BQ374C1C.js";import"./index-DBD8zkwX.js";import"./transition-BqkobVdv.js";const Z=({acceptedConnections:f,receivedRequests:h,sentRequests:g})=>{const[l,b]=d.useState("connections"),[i,P]=d.useState(""),[N,m]=d.useState([]),[S,p]=d.useState(!1),[w,C]=d.useState(null),k=s=>s.academician?route("academicians.show",s.academician.url):s.postgraduate?route("postgraduates.show",s.postgraduate.url):s.undergraduate?route("undergraduates.show",s.undergraduate.url):"#",a=s=>{C(s),p(!0)},_=()=>{if(!w)return;const s=w.connection_id;m(t=>[...t,s]),u.delete(route("connections.destroy",s),{},{onSuccess:()=>{u.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})},onFinish:()=>{m(t=>t.filter(n=>n!==s)),p(!1),C(null)}})},y=s=>i?s.filter(t=>t.user.name.toLowerCase().includes(i.toLowerCase())):s,c=(s,t)=>{if(t!=="destroy"){m(r=>[...r,s]);const n=route(`connections.${t}`,s);u[t==="accept"?"patch":"delete"](n,{},{onSuccess:()=>{u.reload({only:["acceptedConnections","receivedRequests","sentRequests"]})},onFinish:()=>{m(r=>r.filter(A=>A!==s))}})}else[...f,...g,...h].find(o=>o.connection_id===s)&&a({connection_id:s})},$=()=>e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex overflow-x-auto scrollbar-hide","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>b("connections"),className:`py-4 px-2 md:px-4 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${l==="connections"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Connections"}),e.jsx("span",{className:"sm:hidden",children:"Connect"}),e.jsx("span",{className:"ml-1 md:ml-2 bg-gray-100 text-gray-700 py-0.5 px-1.5 md:px-2.5 rounded-full text-xs",children:f.length})]})}),e.jsx("button",{onClick:()=>b("received"),className:`py-4 px-2 md:px-4 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${l==="received"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Received Requests"}),e.jsx("span",{className:"sm:hidden",children:"Received"}),e.jsx("span",{className:"ml-1 md:ml-2 bg-gray-100 text-gray-700 py-0.5 px-1.5 md:px-2.5 rounded-full text-xs",children:h.length})]})}),e.jsx("button",{onClick:()=>b("sent"),className:`py-4 px-2 md:px-4 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${l==="sent"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sent Requests"}),e.jsx("span",{className:"sm:hidden",children:"Sent"}),e.jsx("span",{className:"ml-1 md:ml-2 bg-gray-100 text-gray-700 py-0.5 px-1.5 md:px-2.5 rounded-full text-xs",children:g.length})]})})]})}),F=()=>e.jsxs("div",{className:"relative w-full md:w-96 w-[25rem] mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search connections...",value:i,onChange:s=>P(s.target.value)})]}),q=s=>{const{user:t,connection_id:n}=s,o=N.includes(n);return e.jsx("div",{className:"md:hidden",children:e.jsxs(x,{children:[e.jsx(x.Trigger,{children:e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o,children:e.jsx(D,{className:"w-5 h-5 text-gray-500"})})}),e.jsxs(x.Content,{align:"right",width:"48",children:[e.jsx(x.Link,{href:k(t),children:"View Profile"}),l==="connections"&&e.jsx("button",{onClick:()=>a({connection_id:n}),disabled:o,className:"block w-full px-4 py-2 text-start text-sm text-red-600 hover:bg-red-50 focus:bg-red-50 focus:outline-none disabled:opacity-50",children:o?"Processing...":"Remove Connection"}),l==="received"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c(n,"accept"),disabled:o,className:"block w-full px-4 py-2 text-start text-sm text-green-600 hover:bg-green-50 focus:bg-green-50 focus:outline-none disabled:opacity-50",children:o?"Processing...":"Accept Request"}),e.jsx("button",{onClick:()=>c(n,"reject"),disabled:o,className:"block w-full px-4 py-2 text-start text-sm text-red-600 hover:bg-red-50 focus:bg-red-50 focus:outline-none disabled:opacity-50",children:o?"Processing...":"Reject Request"})]}),l==="sent"&&e.jsx("button",{onClick:()=>a({connection_id:n}),disabled:o,className:"block w-full px-4 py-2 text-start text-sm text-red-600 hover:bg-red-50 focus:bg-red-50 focus:outline-none disabled:opacity-50",children:o?"Processing...":"Cancel Request"})]})]})})},j=s=>{const{user:t,connection_id:n,status:o}=s,r=N.includes(n);return e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:"h-12 w-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:t.profile_photo_url?e.jsx("img",{src:t.profile_photo_url,alt:`${t.name}'s profile`,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-blue-100 text-blue-500",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 truncate",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.email}),t.role&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-1",children:t.role})]})]}),q(s)]}),l==="received"&&e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx("button",{onClick:()=>c(n,"accept"),disabled:r,className:`flex-1 inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Accept"}),e.jsx("button",{onClick:()=>c(n,"reject"),disabled:r,className:`flex-1 inline-flex justify-center items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Reject"})]})]}),e.jsxs("div",{className:"hidden md:flex md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:t.profile_photo_url?e.jsx("img",{src:t.profile_photo_url,alt:`${t.name}'s profile`,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-blue-100 text-blue-500",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.email}),t.role&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-1",children:t.role})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[l==="connections"&&e.jsx("button",{onClick:()=>a({connection_id:n}),disabled:r,className:`inline-flex items-center px-3 py-2 border border-red-300 text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Remove Connection"}),l==="received"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c(n,"accept"),disabled:r,className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Accept"}),e.jsx("button",{onClick:()=>c(n,"reject"),disabled:r,className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Reject"})]}),l==="sent"&&e.jsx("button",{onClick:()=>a({connection_id:n}),disabled:r,className:`inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Processing...":"Cancel Request"}),e.jsx(U,{href:k(t),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"View Profile"})]})]})]},n)},v=s=>e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx(R,{className:"h-full w-full"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:s})]}),M=()=>{switch(l){case"connections":const s=y(f);return e.jsx("div",{className:"mt-6",children:s.length>0?s.map(o=>j(o)):v(i?"No connections match your search":"You have no connections yet")});case"received":const t=y(h);return e.jsx("div",{className:"mt-6",children:t.length>0?t.map(o=>j(o)):v(i?"No requests match your search":"You have no pending requests")});case"sent":const n=y(g);return e.jsx("div",{className:"mt-6",children:n.length>0?n.map(o=>j(o)):v(i?"No requests match your search":"You have no sent requests")});default:return null}};return e.jsxs(E,{title:"My Network",children:[e.jsx(T,{title:"My Network"}),e.jsxs("div",{className:"md:mt-6 px-2 md:px-0 mt-20 ml-1",children:[F(),$(),M()]}),e.jsx(B,{show:S,onClose:()=>p(!1),onConfirm:_,title:"Remove Connection",message:"Are you sure you want to remove this connection? This action cannot be undone.",confirmButtonText:"Remove"})]})};export{Z as default};
