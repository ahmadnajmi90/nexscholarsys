import{r as h,j as e,a as l}from"./app-C9aRItHR.js";import{q as m,r as _,s as w,g as v,F as k,t as N}from"./index-DWLkSDCh.js";import{T as i,a as s,b as c,c as o}from"./tooltip-Bumx2StD.js";const T=({user:n,onRemoveConnection:x})=>{n&&!n.connection_status_with_auth_user&&console.warn("DATA MISSING: 'connection_status_with_auth_user' not found for user:",n.name||n.id);const[g,r]=h.useState(!1),[C,a]=h.useState(n?.connection_status_with_auth_user?.status||"not_connected"),[d,u]=h.useState(n?.connection_status_with_auth_user?.connection_id||null);if(!n||!n.connection_status_with_auth_user)return null;const j=async()=>{r(!0);try{const t=await l.post(route("api.app.connections.store",n.id));t.data&&t.data.connection&&(a("pending_sent"),u(t.data.connection.id))}catch(t){console.error("Error sending connection request:",t)}finally{r(!1)}},y=async()=>{r(!0);try{await l.patch(route("api.app.connections.accept",d)),a("connected")}catch(t){console.error("Error accepting connection request:",t)}finally{r(!1)}},f=async()=>{r(!0);try{await l.delete(route("api.app.connections.reject",d)),a("not_connected"),u(null)}catch(t){console.error("Error rejecting connection request:",t)}finally{r(!1)}},p=async()=>{if(x){x(n.connection_status_with_auth_user);return}r(!0);try{await l.delete(route("api.app.connections.destroy",d)),a("not_connected"),u(null)}catch(t){console.error("Error removing connection:",t)}finally{r(!1)}};if(g)return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("div",{className:"text-gray-500 text-lg cursor-wait",children:e.jsx(m,{className:"animate-spin"})})}),e.jsx(o,{children:e.jsx("p",{children:"Processing..."})})]})});switch(C){case"not_connected":return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:j,className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",children:e.jsx(_,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Connect"})})]})});case"pending_sent":return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:p,className:"text-yellow-500 text-lg cursor-pointer hover:text-red-500",children:e.jsx(N,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Request Sent (Click to withdraw)"})})]})});case"pending_received":return e.jsx(i,{delayDuration:0,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:y,className:"text-green-500 text-lg cursor-pointer hover:text-green-700",children:e.jsx(v,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Accept Request"})})]}),e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:f,className:"text-red-500 text-lg cursor-pointer hover:text-red-700",children:e.jsx(k,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Reject Request"})})]})]})});case"connected":return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:p,className:"text-green-600 text-lg cursor-pointer hover:text-red-600",children:e.jsx(w,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Connected (Click to remove)"})})]})});case"is_self":return null;default:return e.jsx(i,{delayDuration:0,children:e.jsxs(s,{children:[e.jsx(c,{asChild:!0,children:e.jsx("button",{onClick:j,className:"text-gray-500 text-lg cursor-pointer hover:text-blue-700",children:e.jsx(_,{})})}),e.jsx(o,{children:e.jsx("p",{children:"Connect"})})]})})}};export{T as C};
