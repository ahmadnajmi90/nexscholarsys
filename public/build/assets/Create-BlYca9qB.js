import{q as m,W as x,j as e,a as u,r as p}from"./app-CzpsuqeG.js";import{M as h}from"./MainLayout-BSURtHpd.js";import{R as g}from"./quill.snow-C1x3saMU.js";import{u as f}from"./useRoles-CTO8899N.js";import"./index-B91U74sB.js";function j({tags:s,setTags:r}){const[c,o]=p.useState(""),a=l=>{if(l.key==="Enter"||l.key===","){l.preventDefault();const t=c.trim();t&&!s.includes(t)&&r([...s,t]),o("")}else l.key==="Backspace"&&!c.length&&s.length&&r(s.slice(0,s.length-1))},d=l=>{r(s.filter((t,i)=>i!==l))};return e.jsxs("div",{className:"flex flex-wrap items-center border rounded-lg p-2",children:[s.map((l,t)=>e.jsxs("div",{className:"bg-blue-200 text-blue-800 rounded-full px-3 py-1 m-1 flex items-center",children:[e.jsx("span",{children:l}),e.jsx("button",{type:"button",onClick:()=>d(t),className:"ml-2 text-sm text-blue-800",children:"Ã—"})]},t)),e.jsx("input",{type:"text",value:c,onChange:l=>o(l.target.value),onKeyDown:a,className:"flex-grow outline-none p-1",placeholder:"Type a tag and press enter"})]})}function C(){m().props,f();const{data:s,setData:r,post:c,processing:o,errors:a}=x({title:"",url:"",content:"",category:"",tags:[],images:[],featured_image:null,attachment:null,status:"published"}),d=t=>{r("tags",t)};function l(t){t.preventDefault();const i=new FormData;Object.keys(s).forEach(n=>{n==="tags"?i.append(n,JSON.stringify(s[n])):(s[n]instanceof File,i.append(n,s[n]))}),c(route("create-posts.store"),{data:i,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Post created successfully.")},onError:n=>{console.error("Error creating Post:",n),alert("Failed to create the Post. Please try again.")}})}return e.jsx(h,{title:"",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:l,className:"bg-white p-6 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Post"}),e.jsxs("div",{className:"grid grid-cols-10 gap-8",children:[e.jsxs("div",{className:"col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Post Title",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.title,onChange:t=>r("title",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter Post Title"}),a.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.title})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:s.category,onChange:t=>r("category",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Category"}),e.jsx("option",{value:"General Discussion",children:"General Discussion"}),e.jsx("option",{value:"Academic Research",children:"Academic Research"}),e.jsx("option",{value:"Student Life",children:"Student Life"}),e.jsx("option",{value:"Career Opportunities",children:"Career Opportunities"}),e.jsx("option",{value:"Events & Workshops",children:"Events & Workshops"}),e.jsx("option",{value:"Scholarships & Funding",children:"Scholarships & Funding"})]}),a.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.category})]})]}),e.jsxs("div",{className:"grid grid-cols-10 gap-8",children:[e.jsxs("div",{className:"col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 w-full rounded-lg border border-gray-200",style:{height:"300px",overflowY:"auto"},children:e.jsx(g,{theme:"snow",value:s.content,onChange:t=>r("content",t),placeholder:"Enter content",style:{height:"300px",maxHeight:"300px"}})}),a.content&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.content})]}),e.jsxs("div",{className:"col-span-3 flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Tags"}),e.jsx(j,{tags:s.tags,setTags:d}),a.tags&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.tags})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Images (Multiple Allowed)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t=>r("images",t.target.files),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),a.images&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.images})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Featured Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>r("featured_image",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),a.featured_image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.featured_image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:t=>r("attachment",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),a.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.attachment})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:l,disabled:o,className:"inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"}),e.jsx(u,{href:route("create-posts.index"),className:"inline-block rounded-lg bg-gray-300 px-5 py-3 text-sm font-medium text-gray-700 hover:bg-gray-400",children:"Cancel"})]})]})})})}export{C as default};
