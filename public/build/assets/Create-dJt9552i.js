import{q as m,W as x,j as e,a as u,r as p}from"./app-DhymobgW.js";import{M as h}from"./MainLayout-wYc4NLwN.js";import{R as g}from"./quill.snow-EzgNA293.js";import{u as j}from"./useRoles-saWj06XF.js";import"./index-DK8kKjYZ.js";function f({tags:a,setTags:n}){const[i,c]=p.useState(""),s=l=>{if(l.key==="Enter"||l.key===","){l.preventDefault();const t=i.trim();t&&!a.includes(t)&&n([...a,t]),c("")}else l.key==="Backspace"&&!i.length&&a.length&&n(a.slice(0,a.length-1))},d=l=>{n(a.filter((t,o)=>o!==l))};return e.jsxs("div",{className:"flex flex-wrap items-center border rounded-lg p-2",children:[a.map((l,t)=>e.jsxs("div",{className:"bg-blue-200 text-blue-800 rounded-full px-3 py-1 m-1 flex items-center",children:[e.jsx("span",{children:l}),e.jsx("button",{type:"button",onClick:()=>d(t),className:"ml-2 text-sm text-blue-800",children:"Ã—"})]},t)),e.jsx("input",{type:"text",value:i,onChange:l=>c(l.target.value),onKeyDown:s,className:"flex-grow outline-none p-1",placeholder:"Type a tag and press enter"})]})}function S(){m().props,j();const{data:a,setData:n,post:i,processing:c,errors:s}=x({title:"",url:"",content:"",category:"",tags:[],images:[],featured_image:null,attachment:null,status:"published"}),d=t=>{n("tags",t)};function l(t){t.preventDefault();const o=new FormData;Object.keys(a).forEach(r=>{r==="tags"?o.append(r,JSON.stringify(a[r])):(a[r]instanceof File,o.append(r,a[r]))}),i(route("create-posts.store"),{data:o,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{alert("Post created successfully.")},onError:r=>{console.error("Error creating Post:",r),alert("Failed to create the Post. Please try again.")}})}return e.jsx(h,{title:"",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:l,className:"bg-white p-6 rounded-lg max-w-7xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 text-center",children:"Add New Post"}),e.jsxs("div",{className:"grid grid-cols-10 gap-8",children:[e.jsxs("div",{className:"col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Post Title",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:t=>n("title",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",placeholder:"Enter Post Title"}),s.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.title})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:a.category,onChange:t=>n("category",t.target.value),className:"mt-1 w-full rounded-lg border-gray-200 p-4 text-sm",children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select Category"}),e.jsx("option",{value:"General Discussion",children:"General Discussion"}),e.jsx("option",{value:"Academic Research",children:"Academic Research"}),e.jsx("option",{value:"Student Life",children:"Student Life"}),e.jsx("option",{value:"Career Opportunities",children:"Career Opportunities"}),e.jsx("option",{value:"News",children:"News"}),e.jsx("option",{value:"Startup",children:"Startup"}),e.jsx("option",{value:"Technology",children:"Technology"}),e.jsx("option",{value:"Research Methodology",children:"Research Methodology"}),e.jsx("option",{value:"Research Paradigm",children:"Research Paradigm"}),e.jsx("option",{value:"Science & Technology",children:"Science & Technology"}),e.jsx("option",{value:"Social Science",children:"Social Science"}),e.jsx("option",{value:"Community",children:"Community"}),e.jsx("option",{value:"Award",children:"Award"}),e.jsx("option",{value:"Achievement",children:"Achievement"}),e.jsx("option",{value:"Business",children:"Business"}),e.jsx("option",{value:"Economy",children:"Economy"}),e.jsx("option",{value:"Health",children:"Health"}),e.jsx("option",{value:"Science",children:"Science"}),e.jsx("option",{value:"Sport",children:"Sport"}),e.jsx("option",{value:"Corporate Social Responsibility",children:"Corporate Social Responsibility"}),e.jsx("option",{value:"Knowledge Transfer Program",children:"Knowledge Transfer Program"})]}),s.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.category})]})]}),e.jsxs("div",{className:"grid grid-cols-10 gap-8",children:[e.jsxs("div",{className:"col-span-7",children:[e.jsxs("label",{className:"block text-gray-700 font-medium",children:["Content ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-1 w-full rounded-lg border border-gray-200",style:{height:"300px",overflowY:"auto"},children:e.jsx(g,{theme:"snow",value:a.content,onChange:t=>n("content",t),placeholder:"Enter content",style:{height:"300px",maxHeight:"300px"}})}),s.content&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.content})]}),e.jsxs("div",{className:"col-span-3 flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Tags"}),e.jsx(f,{tags:a.tags,setTags:d}),s.tags&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.tags})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Images (Multiple Allowed)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t=>n("images",t.target.files),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),s.images&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.images})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Featured Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>n("featured_image",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),s.featured_image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.featured_image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Upload Attachment"}),e.jsx("input",{type:"file",onChange:t=>n("attachment",t.target.files[0]),className:"mt-1 w-full rounded-lg border-gray-200 p-2 text-sm"}),s.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.attachment})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:l,disabled:c,className:"inline-block rounded-lg bg-blue-500 px-5 py-3 text-sm font-medium text-white hover:bg-blue-600",children:"Publish"}),e.jsx(u,{href:route("create-posts.index"),className:"inline-block rounded-lg bg-gray-300 px-5 py-3 text-sm font-medium text-gray-700 hover:bg-gray-400",children:"Cancel"})]})]})})})}export{S as default};
