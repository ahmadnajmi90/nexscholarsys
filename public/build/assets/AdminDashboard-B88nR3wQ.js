import{r as j,j as e,d as y,q as P}from"./app-Cx8sLjBG.js";import{H as F,F as k,P as E,U as S}from"./UpcomingEvents-ByFHjp0x.js";import{L as A,j as R,M as T,q as U,N as C,H as I,I as f,O as L,P as O,Q as _}from"./index-D03AkpJD.js";import"./book-open-D8BP4kej.js";import"./createLucideIcon-XOTv6yJT.js";import"./trending-up-BzOJM9Rb.js";import"./award-U_C_V_zz.js";import"./users-X_7-5rNv.js";import"./eye-BQ7pELow.js";import"./heart-iAtztiup.js";import"./share-2-BAzaPiY5.js";import"./folder-open-UA0NQKDf.js";import"./globe-piL6OnFX.js";import"./calendar-hjfoOF6A.js";import"./clock-Go9wPmL8.js";import"./chevron-left-DUoEb6Mn.js";import"./chevron-right-DlcMU4X7.js";import"./iconBase-zCntBYDL.js";const $=({motivationData:t})=>{var x,o;const[r,s]=j.useState("mainReason");if(!t||!((x=t.mainReasons)!=null&&x.length)&&!((o=t.featuresInterested)!=null&&o.length))return null;const d=[{id:"mainReason",label:"Main Reasons for Joining",icon:e.jsx(A,{})},{id:"features",label:"Most Anticipated Features",icon:e.jsx(R,{})},{id:"feedback",label:"Recent Feedback",icon:e.jsx(T,{})}],m=()=>{switch(r){case"mainReason":return e.jsx(N,{data:t.mainReasons});case"features":return e.jsx(N,{data:t.featuresInterested});case"feedback":return e.jsx(G,{data:t.latestFeedback});default:return null}};return e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6",children:[e.jsx("div",{className:"border-b border-gray-200 mb-4",children:e.jsx("nav",{className:"-mb-px flex space-x-2 sm:space-x-6","aria-label":"Tabs",children:d.map(a=>e.jsxs("button",{onClick:()=>s(a.id),className:`${r===a.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 px-2 sm:px-1 border-b-2 font-medium text-sm flex items-center`,title:a.label,children:[y.cloneElement(a.icon,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:a.label})]},a.id))})}),e.jsx("div",{children:m()})]})},N=({data:t})=>{if(!t||t.length===0)return e.jsx("p",{className:"text-sm text-gray-500",children:"No data available for this category."});const r=Math.max(...t.map(s=>s.count),0);return e.jsx("div",{className:"space-y-4 max-h-[300px] overflow-y-auto pr-2",children:t.map((s,d)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[e.jsxs("p",{className:"text-sm text-gray-700 flex-1 min-w-0",title:s.label,children:[e.jsx("span",{className:"block sm:hidden",children:s.label.length>60?`${s.label.substring(0,60)}...`:s.label}),e.jsx("span",{className:"hidden sm:block",children:s.label})]}),e.jsx("p",{className:"text-sm font-bold text-gray-800 flex-shrink-0",children:s.count})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:`${s.count/r*100}%`}})})]},d))})},G=({data:t})=>!t||t.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No recent feedback submitted."}):e.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2",children:t.map((r,s)=>e.jsxs("blockquote",{className:"border-l-4 border-gray-200 pl-3 sm:pl-4 text-sm text-gray-600 italic",children:[e.jsxs("span",{className:"block sm:hidden",children:['"',r.length>100?`${r.substring(0,100)}...`:r,'"']}),e.jsxs("span",{className:"hidden sm:block",children:['"',r,'"']})]},s))}),M=({totalUsers:t,topViewedAcademicians:r,analyticsData:s,userMotivationData:d})=>{const[m,x]=j.useState(!1);j.useEffect(()=>{const l=s&&typeof s=="object"&&"activeUsers"in s&&"avgSessionDuration"in s&&"topPages"in s&&"pageViewsOverTime"in s;x(l),s&&!l&&console.warn("Analytics data has an unexpected format",s)},[s]);const o=()=>s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500",children:"ACTIVE USERS NOW"}),e.jsx("p",{className:"text-3xl font-bold",children:s.activeUsers||0})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(U,{className:"text-blue-500 text-xl"})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500",children:"AVG. SESSION"}),e.jsxs("p",{className:"text-3xl font-bold",children:[s.avgSessionDuration||0,"s"]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(C,{className:"text-green-500 text-xl"})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500",children:"REGISTERED USERS"}),e.jsx("p",{className:"text-3xl font-bold",children:t})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(I,{className:"text-purple-500 text-xl"})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500",children:"TOP PROFILE VIEWS"}),e.jsx("p",{className:"text-3xl font-bold",children:r&&r.length>0?r[0].total_views:0})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(f,{className:"text-yellow-500 text-xl"})})]})]}):e.jsx("div",{className:"bg-red-50 text-red-500 p-4 rounded-lg",children:e.jsx("p",{children:"Unable to load Google Analytics data. Please check your configuration."})}),a=({academicians:l})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Top Viewed Academicians"}),e.jsx(L,{className:"text-indigo-500"})]}),e.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto max-h-[350px] sm:max-h-none",children:l&&l.length>0?l.map((i,n)=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-indigo-500 font-bold",children:n+1})}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-cover bg-center mr-2",style:{backgroundImage:`url(${encodeURI(i.profile_picture?`/storage/${i.profile_picture}`:"/storage/profile_pictures/default.jpg")})`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm truncate max-w-[150px]",title:i.full_name||"Unknown",children:i.full_name||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",title:i.current_position||"No position",children:i.current_position||"No position"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-3 h-3 text-indigo-500 mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:i.total_views})]})]},i.id)):e.jsx("p",{className:"text-sm text-gray-500",children:"No view data available"})})]}),p=({pages:l})=>e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Top Pages"}),e.jsx(O,{className:"text-indigo-500"})]}),l&&l.length>0?e.jsx("div",{className:"space-y-3",children:l.map((i,n)=>e.jsxs("div",{className:"border-b pb-2",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-indigo-500 font-bold text-xs",children:n+1})}),e.jsx("p",{className:"font-medium text-sm truncate max-w-[400px]",title:i.title,children:i.title||"Untitled Page"})]}),e.jsxs("div",{className:"flex justify-between text-xs pl-8",children:[e.jsx("span",{className:"text-gray-500",children:i.path}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-3 h-3 text-indigo-500 mr-1"}),e.jsx("span",{className:"font-medium",children:i.views})]})]})]},n))}):e.jsx("div",{className:"flex items-center justify-center h-[280px] bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No page view data available"})})]}),u=({pageViewsData:l})=>{const i=l&&l.length>0?Math.max(...l.map(n=>n.views)):100;return e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Page Views (Last 30 Days)"}),e.jsx(_,{className:"text-indigo-500"})]}),l&&l.length>0?e.jsx("div",{className:"h-[280px] flex items-end space-x-1",children:l.map((n,g)=>{const c=g%5===0,h=n.views/i*100+"%";return e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"w-full bg-indigo-100 hover:bg-indigo-200 transition-all rounded-t",style:{height:h},title:`${n.date}: ${n.views} views`}),c&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1 rotate-45 origin-left whitespace-nowrap",children:[n.date.substring(5)," "]})]},g)})}):e.jsx("div",{className:"flex items-center justify-center h-[280px] bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No page view data available"})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:m?e.jsx("span",{className:"text-green-500",children:"✓ Google Analytics connected"}):e.jsx("span",{className:"text-yellow-500",children:"⟳ Loading analytics..."})})}),o(),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mt-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(a,{academicians:r})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(u,{pageViewsData:(s==null?void 0:s.pageViewsOverTime)||[]}),e.jsx(p,{pages:(s==null?void 0:s.topPages)||[]})]})})]}),e.jsx("div",{className:"mt-4 shadow rounded-lg",children:e.jsx($,{motivationData:d})})]})},ie=({posts:t,events:r,projects:s,grants:d,scholarships:m,totalUsers:x,topViewedAcademicians:o,analyticsData:a,userMotivationData:p})=>{const{auth:u}=P().props,l=u.user,i=["Administration","Overview"],[n,g]=j.useState("Administration"),[c,h]=j.useState(1),b=8,v=()=>{c>1&&h(c-1)},w=()=>{c<Math.ceil(r.length/b)&&h(c+1)};return e.jsxs("div",{className:"container mx-auto px-4 py-20 md:py-8 lg:py-8",children:[e.jsx(F,{user:l,tabs:i,activeTab:n,setActiveTab:g}),e.jsxs("div",{className:"mt-8",children:[n==="Administration"&&e.jsx(M,{totalUsers:x,topViewedAcademicians:o,analyticsData:a,userMotivationData:p}),n==="Overview"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{posts:t}),e.jsx(E,{posts:t,events:r,grants:d,scholarships:m,projects:s}),e.jsx(S,{events:r,eventsPage:c,eventsPerPage:b,handleEventsPrevPage:v,handleEventsNextPage:w,setEventsPage:h})]})]})]})};export{ie as default};
