import{r as i,j as e,b as R}from"./app-BJp0Z8M9.js";import{M as U}from"./MainLayout-MAo6dNuB.js";import{u as P}from"./useRoles-CRw66aW4.js";import{F as D}from"./FilterDropdown-BEgIDhka.js";import{f as I,t as M,u as L,I as q,V as z}from"./index-CuZ64cU3.js";import"./analytics-B60H_cQS.js";import"./react-select.esm-CplQ4_M-.js";const Y=({academicians:j,faculties:O,researchOptions:v,universities:B,faculty:t,users:H})=>{var k,A;P();const[b,m]=i.useState(!1),[S,$]=i.useState({}),[u,F]=i.useState([]),[d,C]=i.useState("all"),[a,c]=i.useState(1),f=i.useRef(null),g=15;i.useEffect(()=>{function s(r){f.current&&!f.current.contains(r.target)&&window.innerWidth<1024&&m(!1)}return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const N=new Set;j.forEach(s=>{Array.isArray(s.research_expertise)&&s.research_expertise.forEach(r=>{N.add(r)})});const E=Array.from(N).map(s=>{const r=v.find(l=>`${l.field_of_research_id}-${l.research_area_id}-${l.niche_domain_id}`===s);return{value:s,label:r?`${r.field_of_research_name} - ${r.research_area_name} - ${r.niche_domain_name}`:`Unknown (${s})`}}),V=s=>{$(r=>({...r,[s]:!r[s]}))},y=j.filter(s=>{if(!s)return!1;let r=!0;u.length>0&&(r=Array.isArray(s.research_expertise)&&s.research_expertise.some(o=>u.includes(o)));const l=d==="all"||d==="verified"&&s.verified||d==="unverified"&&!s.verified;return r&&l}),n=Math.ceil(y.length/g),w=y.slice((a-1)*g,a*g),_=[];for(let s=1;s<=n;s++)_.push(s);return e.jsxs(U,{title:"",children:[e.jsxs("div",{className:"relative bg-gray-200",children:[e.jsx("div",{className:"w-full h-48 overflow-hidden",children:e.jsx("img",{src:(k=t==null?void 0:t.university)!=null&&k.background_image?`/storage/${t.university.background_image}`:"/storage/university_background_images/default.jpg",alt:"Faculty Banner",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"absolute top-28 left-1/2 transform -translate-x-1/2 w-full max-w-4xl text-center",children:[e.jsx("div",{className:"inline-block w-24 h-24 rounded-full overflow-hidden border-4 border-white",children:e.jsx("img",{src:(A=t==null?void 0:t.university)!=null&&A.profile_picture?`/storage/${t.university.profile_picture}`:"/storage/university_profile_pictures/default.jpg",alt:"University Logo",className:"w-full h-full object-cover"})}),e.jsxs("h1",{className:"mt-6 text-xl md:text-2xl font-bold text-gray-800",children:[t==null?void 0:t.name," - Academicians Directory"]})]})]}),e.jsxs("div",{className:"mt-28 px-4 lg:px-8 pb-12",children:[e.jsx("button",{onClick:()=>m(!b),className:"fixed top-20 right-4 z-50 bg-blue-600 text-white p-2 rounded-full shadow-lg lg:hidden",children:e.jsx(I,{className:"text-xl"})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{ref:f,className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-white shadow-md border-r p-5 transition-transform duration-300 z-50 overflow-y-auto ${b?"translate-x-0":"-translate-x-full"} lg:translate-x-0 rounded-lg`,children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",e.jsx("button",{onClick:()=>m(!1),className:"text-gray-600 lg:hidden",children:"✕"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(D,{label:"Research Expertise",options:E,selectedValues:u,setSelectedValues:F}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Status"}),e.jsxs("select",{className:"p-2 border border-gray-300 rounded w-full",value:d,onChange:s=>{C(s.target.value),c(1)},children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]})]})]}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:w.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No academicians match your filter criteria."})}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academician"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department & Position"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Expertise"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(s=>{var l;const r=S[s.id]||!1;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden border border-gray-200",children:e.jsx("img",{src:`/storage/${s.profile_picture||"profile_pictures/default.jpg"}`,alt:s.full_name,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx(R,{href:route("academicians.show",s),className:"font-medium text-gray-900 hover:text-blue-600",children:s.full_name||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((l=s.user)==null?void 0:l.email)||"N/A"})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.department||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.current_position||"N/A"})]}),e.jsx("td",{className:"px-6 py-4",children:s.research_expertise&&s.research_expertise.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[s.research_expertise.length," area",s.research_expertise.length!==1?"s":""]}),e.jsx("button",{onClick:()=>V(s.id),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center",children:r?e.jsxs(e.Fragment,{children:["Hide ",e.jsx(M,{className:"ml-1"})]}):e.jsxs(e.Fragment,{children:["Show ",e.jsx(L,{className:"ml-1"})]})})]}),r&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:s.research_expertise.map((o,x)=>{const h=v.find(p=>`${p.field_of_research_id}-${p.research_area_id}-${p.niche_domain_id}`===o);return h?e.jsxs("p",{className:"text-sm text-gray-700",children:[x+1,". ",h.field_of_research_name," - ",h.research_area_name," - ",h.niche_domain_name]},x):e.jsxs("p",{className:"text-sm text-gray-700",children:[x+1,". Unknown expertise (ID: ",o,")"]},x)})})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No research expertise specified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.verified?e.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[e.jsx(q,{className:"mr-1"})," Verified"]}):e.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:[e.jsx(z,{className:"mr-1"})," Unverified"]})})]},s.id)})})]})}),n>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("nav",{className:"inline-flex rounded-md shadow",children:[e.jsxs("button",{onClick:()=>c(s=>Math.max(s-1,1)),disabled:a===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border ${a===1?"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"sr-only",children:"Previous"}),"«"]}),_.map(s=>e.jsx("button",{onClick:()=>c(s),className:`relative inline-flex items-center px-4 py-2 border ${a===s?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:s},s)),e.jsxs("button",{onClick:()=>c(s=>Math.min(s+1,n)),disabled:a===n,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border ${a===n?"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"sr-only",children:"Next"}),"»"]})]})})]})]})]})]})};export{Y as default};
