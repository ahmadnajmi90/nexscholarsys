import{r,j as e,a as T}from"./app-iMgHp_eS.js";import{c as g}from"./index---wvTow-.js";import{M as k}from"./Modal-CtrNcR4a.js";import{B as $}from"./button-Ct11kXcH.js";import{I as h}from"./input-CdYr2Bcx.js";import{T as A}from"./textarea-C-VaV38D.js";import{L as m}from"./label-DMRicobw.js";import{A as C,a as E}from"./alert-6lJ_2Thn.js";import{l as L}from"./logError-BloCzXDJ.js";import{X as R}from"./x-ZEpUl_jb.js";import{L as _}from"./loader-circle-F27clpTW.js";import"./dialog-tgbUGkxp.js";import"./transition-GCCCemnQ.js";import"./index-CPRTWrZv.js";import"./utils-CBfrqCZ4.js";import"./index-CBiZf16v.js";import"./index-CdJFUDDL.js";import"./createLucideIcon-BXdi-pyk.js";function te({meeting:s,onClose:l,onRescheduled:w}){const[p,x]=r.useState(""),[j,f]=r.useState(""),[S,v]=r.useState(""),[y,b]=r.useState(""),[c,N]=r.useState(!1),[M,d]=r.useState(null);r.useEffect(()=>{if(s){x(s.title||"");const t=new Date(s.scheduled_for),a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),u=String(t.getMinutes()).padStart(2,"0");f(`${a}-${i}-${n}T${o}:${u}`),v(s.location_link||""),b(s.agenda||""),d(null)}},[s]);const D=async t=>{if(t.preventDefault(),!(!s||c)){N(!0),d(null);try{const a=j.replace("T"," ")+":00";await T.put(route("supervision.meetings.update",s.id),{title:p,scheduled_for:a,location_link:S,agenda:y}),g.success("Meeting rescheduled"),w?.(),l?.()}catch(a){L(a,"Reschedule meeting");const i=a?.response?.data?.message||"Failed to reschedule meeting",n=a?.response?.data?.errors;if(n){const o=Object.values(n).flat().join(", ");d(o),g.error(o)}else d(i),g.error(i)}finally{N(!1)}}},F=()=>{const t=new Date,a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),u=String(t.getMinutes()).padStart(2,"0");return`${a}-${i}-${n}T${o}:${u}`};return e.jsx(k,{show:!!s,onClose:l,maxWidth:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Reschedule meeting"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update the meeting time or details"})]}),e.jsx("button",{onClick:l,className:"rounded-md text-gray-400 hover:text-gray-500",children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[M&&e.jsx(C,{variant:"destructive",children:e.jsx(E,{children:M})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"meeting-title",children:"Meeting title"}),e.jsx(h,{id:"meeting-title",value:p,onChange:t=>x(t.target.value),required:!0})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"meeting-datetime",children:"Scheduled for"}),e.jsx(h,{id:"meeting-datetime",type:"datetime-local",value:j,onChange:t=>f(t.target.value),min:F(),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"meeting-location",children:"Meeting link / location"}),e.jsx(h,{id:"meeting-location",value:S,onChange:t=>v(t.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"meeting-agenda",children:"Agenda / notes"}),e.jsx(A,{id:"meeting-agenda",rows:4,value:y,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:l,disabled:c,children:"Cancel"}),e.jsxs($,{type:"submit",disabled:c,children:[c&&e.jsx(_,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Meeting"]})]})]})]})})}export{te as default};
