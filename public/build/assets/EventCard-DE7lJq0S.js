import{r as l,j as t,a as O,R as W}from"./app-Bsqeg-e1.js";import{F as i}from"./FilterDropdown-BoFR0ks5.js";import{d as z}from"./index-Cg6V0Xph.js";import"./react-select.esm-C7MLjFb4.js";const G=({events:r,researchOptions:w})=>{const[y,j]=l.useState(!1),[d,_]=l.useState([]),[c,N]=l.useState([]),[m,S]=l.useState([]),[u,F]=l.useState([]),[h,E]=l.useState([]),[x,k]=l.useState(""),[g,D]=l.useState(""),[n,b]=l.useState(1),f=9,C=[...new Set(r.map(e=>e.event_mode))].filter(Boolean).map(e=>({value:e,label:e})),A=[...new Set(r.map(e=>e.event_type))].filter(Boolean).map(e=>({value:e,label:e})),M=[...new Set(r.flatMap(e=>e.event_theme||[]))].filter(Boolean).map(e=>({value:e,label:e})),T=[...new Set(r.map(e=>e.country))].filter(Boolean).map(e=>({value:e,label:e})),V=Array.from(new Set(r.flatMap(e=>Array.isArray(e.field_of_research)?e.field_of_research:[]))).map(e=>{const s=w.find(a=>`${a.field_of_research_id}-${a.research_area_id}-${a.niche_domain_id}`===e);return{value:e,label:s?`${s.field_of_research_name} - ${s.research_area_name} - ${s.niche_domain_name}`:"Unknown Research Area"}}),v=r.filter(e=>{const s=d.length===0||d.includes(e.event_mode),a=c.length===0||c.includes(e.event_type),R=m.length===0||e.event_theme&&e.event_theme.some(p=>m.includes(p)),q=u.length===0||u.includes(e.country),B=h.length===0||Array.isArray(e.field_of_research)&&e.field_of_research.some(p=>h.includes(p)),P=(!x||new Date(e.start_date)>=new Date(x))&&(!g||new Date(e.start_date)<=new Date(g));return s&&a&&R&&q&&B&&P}),o=Math.ceil(v.length/f),$=v.slice((n-1)*f,n*f);return t.jsxs("div",{className:"min-h-screen flex",children:[t.jsx("button",{onClick:()=>j(!y),className:"fixed top-20 right-4 z-50 bg-blue-600 text-white p-2 rounded-full shadow-lg lg:hidden",children:t.jsx(z,{className:"text-xl"})}),t.jsxs("div",{className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${y?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",t.jsx("button",{onClick:()=>j(!1),className:"text-gray-600 lg:hidden",children:"✕"})]}),t.jsx(i,{label:"Event Mode",options:C,selectedValues:d,setSelectedValues:_}),t.jsx(i,{label:"Event Type",options:A,selectedValues:c,setSelectedValues:N}),t.jsx(i,{label:"Event Theme",options:M,selectedValues:m,setSelectedValues:S}),t.jsx(i,{label:"Country",options:T,selectedValues:u,setSelectedValues:F}),t.jsx(i,{label:"Research Area",options:V,selectedValues:h,setSelectedValues:E}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-gray-700 font-medium",children:"Start Date"}),t.jsx("input",{type:"date",value:x,onChange:e=>k(e.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-gray-700 font-medium",children:"End Date"}),t.jsx("input",{type:"date",value:g,onChange:e=>D(e.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200"})]})]}),t.jsxs("div",{className:"flex-1 py-6 sm:py-4 lg:py-0 px-4",children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map((e,s)=>{const a=new Date(e.end_date)<new Date;return t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden text-center pb-8",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:e.image?`/storage/${e.image}`:"/storage/default.jpg",alt:e.event_name,className:"w-full h-auto md:h-48 object-cover"}),a&&t.jsx("span",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded",children:"Ended"})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 truncate",title:e.event_name,children:e.event_name}),t.jsx("p",{className:"text-gray-600 h-12 mt-4 text-center font-extralight",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},dangerouslySetInnerHTML:{__html:e.description||"No description available."}})]}),t.jsx(O,{href:route("events.show",e.url),className:"inline-block rounded-full border border-gray-300 px-7 py-2 text-base font-medium transition hover:border-primary hover:bg-primary hover:text-dark",children:"View Details"})]},s)})}),t.jsxs("div",{className:"flex justify-center mt-6 space-x-2 items-center",children:[t.jsx("button",{onClick:()=>b(e=>Math.max(e-1,1)),disabled:n===1,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"◄"}),Array.from({length:o},(e,s)=>s+1).filter(e=>e===1||e===o||Math.abs(e-n)<=1).map((e,s,a)=>t.jsxs(W.Fragment,{children:[s>0&&e-a[s-1]>1&&t.jsx("span",{className:"px-2",children:"..."}),t.jsx("button",{onClick:()=>b(e),className:`px-4 py-2 border rounded ${n===e?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:e})]},e)),t.jsx("button",{onClick:()=>b(e=>Math.min(e+1,o)),disabled:n===o,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"►"})]})]})]})};export{G as default};
