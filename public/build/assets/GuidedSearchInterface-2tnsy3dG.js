import{r as a,j as e}from"./app-DZMAG1Os.js";import{d as _,a as w,Q as E,R as N,F as k}from"./index-CjVDtbtg.js";const R=({onQueryChange:d,initialQuery:j="",researchOptions:i,placeholder:p="e.g., Artificial Intelligence in Healthcare, Design Science Research...",onEnterPress:n=null})=>{const[u,m]=a.useState(j),[g,h]=a.useState(!1),[x,y]=a.useState([]),c=a.useRef(null);a.useEffect(()=>{function t(r){c.current&&!c.current.contains(r.target)&&h(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[c]),a.useEffect(()=>{if(i&&i.length>0){const t=new Set;i.forEach(o=>{o.field_of_research_name&&t.add(o.field_of_research_name),o.research_area_name&&t.add(o.research_area_name),o.niche_domain_name&&t.add(o.niche_domain_name)});const r=Array.from(t).slice(0,15);y(r)}},[i]);const f=t=>{const r=t.target.value;m(r),d(r)},b=t=>{t.key==="Enter"&&n&&(t.preventDefault(),n())},v=t=>{const r=u?`${u}, ${t}`:t;m(r),d(r),h(!1)};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u,onChange:f,onKeyDown:b,placeholder:p,className:"w-full px-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onFocus:()=>h(!0)}),u&&e.jsx("button",{className:"absolute right-10 top-4 text-gray-400 hover:text-gray-600",onClick:()=>{m(""),d("")},children:e.jsx(_,{})})]}),g&&x.length>0&&e.jsxs("div",{ref:c,className:"mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-3 absolute z-20 w-full max-w-3xl",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(w,{className:"text-yellow-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Suggested research terms"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((t,r)=>e.jsxs("button",{className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-sm flex items-center",onClick:()=>v(t),children:[e.jsx(E,{className:"mr-1 text-xs text-gray-500"}),t]},r))}),e.jsx("button",{className:"mt-2 text-xs text-gray-500 hover:text-gray-700",onClick:()=>h(!1),children:"Close suggestions"})]})]})},F=({onSearch:d,researchOptions:j,isSearching:i=!1,initialQuery:p=""})=>{const[n,u]=a.useState(p),[m,g]=a.useState([]),[h,x]=a.useState(!1),[y,c]=a.useState(null),f=a.useRef(null);a.useEffect(()=>{function s(l){f.current&&!f.current.contains(l.target)&&x(!1)}return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[f]),a.useEffect(()=>{try{const s=localStorage.getItem("supervisor_recent_searches");if(s){const l=JSON.parse(s);Array.isArray(l)&&g(l.slice(0,5))}}catch(s){console.error("Error loading recent searches:",s)}},[]);const b=s=>{try{if(s&&s.trim().length>0){const l=[s,...m.filter(S=>S!==s)].slice(0,5);g(l),localStorage.setItem("supervisor_recent_searches",JSON.stringify(l))}}catch(l){console.error("Error saving recent search:",l)}},v=s=>{if(s.preventDefault(),n.trim().length<3){c("Please enter at least 3 characters to search");return}c(null),b(n),d(n)},t=s=>{u(s),c(null)},r=s=>{u(s),d(s),x(!1)},o=()=>{if(n.trim().length<3){c("Please enter at least 3 characters to search");return}c(null),b(n),d(n)};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Find Your Perfect Research Supervisor"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Enter your research interest, topic, or field of study below and we'll match you with supervisors who have relevant expertise."})]}),e.jsxs("form",{onSubmit:v,className:"mb-8",children:[e.jsxs("div",{className:"relative flex",children:[e.jsx("div",{className:"relative flex-grow",children:e.jsx(R,{onQueryChange:t,initialQuery:n,researchOptions:j,onEnterPress:o,placeholder:"e.g., Artificial Intelligence in Healthcare, Design Science Research..."})}),e.jsx("div",{className:"absolute right-20 top-4 z-10",children:e.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700",onClick:()=>x(!h),title:"Recent searches",children:e.jsx(N,{})})}),e.jsx("button",{type:"submit",className:`bg-blue-600 text-white px-6 py-3 rounded-r-lg flex items-center justify-center ${i?"opacity-70 cursor-not-allowed":"hover:bg-blue-700"}`,disabled:i,children:i?e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx(k,{})}),h&&m.length>0&&e.jsx("div",{ref:f,className:"absolute top-12 right-0 mt-2 w-full md:w-72 bg-white border border-gray-200 rounded-md shadow-lg z-30",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(N,{className:"mr-2 text-gray-500"})," Recent Searches"]}),e.jsx("ul",{className:"space-y-1",children:m.map((s,l)=>e.jsx("li",{children:e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded",onClick:()=>r(s),children:s})},l))})]})})]}),y&&e.jsx("p",{className:"text-red-500 mt-2 text-center",children:y})]}),e.jsxs("div",{className:"mt-8 border-t border-gray-200 pt-10",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(w,{className:"text-yellow-500 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Tips for finding the right supervisor"})]}),e.jsxs("ol",{className:"space-y-3 text-gray-600 list-decimal list-inside",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center mr-2 mt-0.5 flex-shrink-0",children:"1"}),e.jsx("span",{children:'Be specific about your research area (e.g., "Machine Learning for Medical Imaging" rather than just "AI")'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center mr-2 mt-0.5 flex-shrink-0",children:"2"}),e.jsx("span",{children:'You can also use vague queries like "recommend supervisors for me" to get results based on your profile'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center mr-2 mt-0.5 flex-shrink-0",children:"3"}),e.jsx("span",{children:"Click on suggested research terms to quickly add them to your search"})]})]})]})]})};export{F as G};
