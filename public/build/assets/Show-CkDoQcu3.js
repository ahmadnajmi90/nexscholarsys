import{q as w,r as i,W as C,j as e,b as u,y as B}from"./app-DJY3TfTO.js";import{L as M,M as D}from"./MainLayout-C61OmMD6.js";import{C as S}from"./ConfirmationModal-B8O03Uhb.js";import{M as P}from"./ManageCollaboratorsModal-B8uJYa4A.js";import{M as E}from"./ManageBoardMembersModal-CpTJ8cy_.js";import{V as n}from"./index-CFdpmu66.js";import{C as L}from"./chevron-left-BtQx-zXQ.js";import{U as T}from"./user-plus-CGZmREDi.js";import{P as O}from"./plus-D2t4z4YU.js";import{U}from"./users-D1-0IJjm.js";import{T as W}from"./trash-2-CVp4ADdL.js";import"./house-D4L7kORK.js";import"./createLucideIcon-CQS0Rb_3.js";import"./zap-B-L5NOYp.js";import"./folder-open-DzQM0ZNt.js";import"./settings-Bfpe9rBE.js";import"./useRoles-B_G5tOWl.js";import"./proxy-CnS_9B0r.js";import"./user-round-BpgDj4Fa.js";import"./dollar-sign-CVg6Pmjm.js";import"./calendar-DZrLC5Q0.js";import"./file-text-DKn-6sOG.js";import"./message-square-DEZy3Buq.js";import"./graduation-cap-BELGL4bG.js";import"./building-K1TOnHOx.js";import"./sparkles-zuohWZOD.js";import"./building-2-3kyyzIaP.js";import"./database-Bh6GLIlF.js";import"./shield-D-cWbhA-.js";import"./clipboard-list-DmvJ5ZAs.js";import"./transition-DfXIYEF2.js";import"./analytics-BQ374C1C.js";import"./Modal-knHAl84c.js";import"./dialog-CJ9IN5XZ.js";import"./PrimaryButton-CJPmXTm3.js";import"./SecondaryButton-B-gx827-.js";import"./x-DMpCy62N.js";import"./briefcase-ccMMJaRI.js";import"./user-CyQ73xzS.js";import"./InputLabel-CqwZ2Mzb.js";import"./InputError-DQOVtT7_.js";import"./react-select.esm-B4_GWplt.js";import"./floating-ui.dom-eiE65J5j.js";import"./info-Zd6m5UJU.js";import"./clsx-B-dksMZM.js";import"./use-resolve-button-type-CBEdzmpw.js";function k({workspace:r,connections:h}){const{auth:g}=w().props,[b,d]=i.useState(!1),[o,l]=i.useState(null),[f,c]=i.useState(!1),[m,x]=i.useState(null),s=C({name:""}),j=t=>{if(t.preventDefault(),!r||!r.data||!r.data.id){console.error("Workspace ID is missing, cannot create board.");return}s.post(route("project-hub.workspaces.boards.store",r.data.id),{onSuccess:()=>{n.success(`Board "${s.data.name}" created successfully.`),d(!1),s.reset()},onError:a=>{console.error("Error creating board:",a),n.error("Failed to create board. Please check the form for errors.")}})},y=(t,a)=>{t.preventDefault(),t.stopPropagation(),l(a)},N=()=>{o&&B.delete(route("project-hub.boards.destroy",o.id),{onSuccess:()=>{n.success(`Board "${o.name}" deleted successfully.`),l(null)},onError:t=>{console.error("Error deleting board:",t),n.error("Failed to delete board. Please try again.")}})},v=(t,a)=>{t.preventDefault(),t.stopPropagation(),x(a)},p=g.user.id===r.data.owner_id;return e.jsxs("div",{className:"w-full md:max-w-8xl md:mx-auto px-4 md:px-4 lg:px-2 py-4 md:py-6 lg:mt-2 mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(u,{href:route("project-hub.index"),className:"flex items-center text-gray-500 hover:text-gray-700 mb-2",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:"Back to workspaces"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 truncate max-w-3xl",children:r.data.name}),p&&e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Manage Members"]})]}),r.data.description&&e.jsx("p",{className:"mt-1 text-gray-500 max-w-3xl",children:r.data.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Boards"})}),r.data.can.create_board&&(b?e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Create a new board"}),e.jsxs("form",{onSubmit:j,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:s.data.name,onChange:t=>s.setData("name",t.target.value),className:"w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-sm",placeholder:"Board name",disabled:s.processing,autoFocus:!0}),s.errors.name&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.errors.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),s.reset()},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:s.processing,children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md text-xs font-medium text-white bg-indigo-600 hover:bg-indigo-700",disabled:s.processing||!s.data.name.trim(),children:s.processing?"Creating...":"Create Board"})]})]})]}):e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 mb-6 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Create new board"]})),r.data.boards&&r.data.boards.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.data.boards.map(t=>e.jsxs("div",{className:"relative bg-white shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:[e.jsxs(u,{href:route("project-hub.boards.show",t.id),className:"block p-5",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(M,{className:"w-5 h-5 text-indigo-500 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.name})]}),e.jsx("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:e.jsxs("span",{children:["Created ",new Date(t.created_at).toLocaleDateString("en-GB")]})})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[p&&e.jsx("button",{onClick:a=>v(a,t),className:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-gray-100 rounded-full",title:"Manage board access",children:e.jsx(U,{className:"w-4 h-4"})}),t.can&&t.can.delete&&e.jsx("button",{onClick:a=>y(a,t),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-full",title:"Delete board",children:e.jsx(W,{className:"w-4 h-4"})})]})]},t.id))}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-500 mb-4",children:"No boards available. Create a board to get started."})})]}),e.jsx(S,{show:!!o,onClose:()=>l(null),onConfirm:N,title:"Delete Board",message:o?`Are you sure you want to delete the board "${o.name}"? This action cannot be undone and will delete all lists and tasks within this board.`:""}),e.jsx(P,{show:f,onClose:()=>c(!1),context:r,contextType:"workspace",connections:h||[]}),m&&e.jsx(E,{show:!!m,onClose:()=>x(null),board:m,workspaceMembers:r.data.members||[]})]})}k.layout=r=>e.jsx(D,{title:"Workspace Boards",children:r,TopMenuOpen:!1});export{k as default};
