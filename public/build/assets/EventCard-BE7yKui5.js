import{r,j as t,R as W}from"./app-DH3zQFH1.js";import{F as o}from"./FilterDropdown-BqRjAGtg.js";import{a as Q}from"./index-CiFenCNL.js";import"./react-select.esm-DsYmLmz_.js";const X=({events:n,researchOptions:j})=>{const[N,v]=r.useState(!1),[s,k]=r.useState(null),[S,d]=r.useState(!1),[m,E]=r.useState([]),[h,F]=r.useState([]),[u,C]=r.useState([]),[x,$]=r.useState([]),[g,D]=r.useState([]),[p,A]=r.useState(""),[b,M]=r.useState(""),[i,f]=r.useState(1),y=9,T=[...new Set(n.map(e=>e.event_mode))].filter(Boolean).map(e=>({value:e,label:e})),R=[...new Set(n.map(e=>e.event_type))].filter(Boolean).map(e=>({value:e,label:e})),V=[...new Set(n.flatMap(e=>e.event_theme||[]))].filter(Boolean).map(e=>({value:e,label:e})),B=[...new Set(n.map(e=>e.country))].filter(Boolean).map(e=>({value:e,label:e})),P=Array.from(new Set(n.flatMap(e=>Array.isArray(e.field_of_research)?e.field_of_research:[]))).map(e=>{const a=j.find(l=>`${l.field_of_research_id}-${l.research_area_id}-${l.niche_domain_id}`===e);return{value:e,label:a?`${a.field_of_research_name} - ${a.research_area_name} - ${a.niche_domain_name}`:"Unknown Research Area"}}),w=n.filter(e=>{const a=m.length===0||m.includes(e.event_mode),l=h.length===0||h.includes(e.event_type),O=u.length===0||e.event_theme&&e.event_theme.some(_=>u.includes(_)),I=x.length===0||x.includes(e.country),z=g.length===0||Array.isArray(e.field_of_research)&&e.field_of_research.some(_=>g.includes(_)),H=(!p||new Date(e.start_date)>=new Date(p))&&(!b||new Date(e.start_date)<=new Date(b));return a&&l&&O&&I&&z&&H}),c=Math.ceil(w.length/y),q=w.slice((i-1)*y,i*y),L=e=>{k(e),d(!0)};return t.jsxs("div",{className:"min-h-screen flex",children:[t.jsx("button",{onClick:()=>v(!N),className:"fixed top-20 right-4 z-50 bg-blue-600 text-white p-2 rounded-full shadow-lg lg:hidden",children:t.jsx(Q,{className:"text-xl"})}),t.jsxs("div",{className:`fixed lg:relative top-0 left-0 lg:block lg:w-1/4 w-3/4 h-full bg-gray-100 border-r rounded-lg p-4 transition-transform duration-300 z-50 ${N?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("h2",{className:"text-lg font-semibold mb-4 flex justify-between items-center",children:["Filters",t.jsx("button",{onClick:()=>v(!1),className:"text-gray-600 lg:hidden",children:"✕"})]}),t.jsx(o,{label:"Event Mode",options:T,selectedValues:m,setSelectedValues:E}),t.jsx(o,{label:"Event Type",options:R,selectedValues:h,setSelectedValues:F}),t.jsx(o,{label:"Event Theme",options:V,selectedValues:u,setSelectedValues:C}),t.jsx(o,{label:"Country",options:B,selectedValues:x,setSelectedValues:$}),t.jsx(o,{label:"Research Area",options:P,selectedValues:g,setSelectedValues:D}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-gray-700 font-medium",children:"Start Date"}),t.jsx("input",{type:"date",value:p,onChange:e=>A(e.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-gray-700 font-medium",children:"End Date"}),t.jsx("input",{type:"date",value:b,onChange:e=>M(e.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200"})]})]}),t.jsxs("div",{className:"flex-1 py-6 sm:py-4 lg:py-0 px-4",children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map((e,a)=>{const l=new Date(e.end_date)<new Date;return t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden text-center pb-8",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:e.image?`/storage/${e.image}`:"/storage/default.jpg",alt:e.event_name,className:"w-full h-48 object-cover"}),l&&t.jsx("span",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded",children:"Ended"})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 truncate",title:e.event_name,children:e.event_name}),t.jsx("p",{className:"text-gray-600 mt-4 text-center font-extralight",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},dangerouslySetInnerHTML:{__html:e.description||"No description available."}})]}),t.jsx("button",{onClick:()=>L(e),className:"inline-block rounded-full border border-gray-300 px-7 py-2 text-base font-medium transition hover:border-primary hover:bg-primary hover:text-dark",children:"View Details"})]},a)})}),t.jsxs("div",{className:"flex justify-center mt-6 space-x-2 items-center",children:[t.jsx("button",{onClick:()=>f(e=>Math.max(e-1,1)),disabled:i===1,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"◄"}),Array.from({length:c},(e,a)=>a+1).filter(e=>e===1||e===c||Math.abs(e-i)<=1).map((e,a,l)=>t.jsxs(W.Fragment,{children:[a>0&&e-l[a-1]>1&&t.jsx("span",{className:"px-2",children:"..."}),t.jsx("button",{onClick:()=>f(e),className:`px-4 py-2 border rounded ${i===e?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:e})]},e)),t.jsx("button",{onClick:()=>f(e=>Math.min(e+1,c)),disabled:i===c,className:"px-4 py-2 border rounded bg-white text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:"►"})]})]}),S&&s&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>d(!1),children:t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-3xl w-full overflow-y-auto max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[t.jsx("img",{src:s.image?`/storage/${s.image}`:"/storage/default.jpg",alt:s.event_name,className:"w-full h-48 object-cover rounded-t-lg mb-4"}),t.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:s.event_name}),t.jsx("p",{className:"text-gray-600 mb-2",dangerouslySetInnerHTML:{__html:s.description}}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Event Type:"})," ",s.event_type||"Not provided."]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Event Duration:"})," ",s.start_date?`${s.start_date} - ${s.end_date}`:"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Research Fields:"})," ",Array.isArray(s.field_of_research)&&s.field_of_research.length>0?s.field_of_research.map(e=>{const a=j.find(l=>`${l.field_of_research_id}-${l.research_area_id}-${l.niche_domain_id}`===e);return a?`${a.field_of_research_name} - ${a.research_area_name} - ${a.niche_domain_name}`:null}).filter(Boolean).join(", "):"No Research Fields"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Registration Link:"})," ",s.registration_url?t.jsx("a",{href:s.registration_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Click Here"}):"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Registration Deadline:"})," ",s.registration_deadline||"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Contact Email:"})," ",s.contact_email||"Not provided"]}),t.jsxs("p",{className:"text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Location:"})," ",`${s.venue}, ${s.city}, ${s.country}`||"Not provided"]}),t.jsxs("p",{className:"text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"Attachment:"})," ",s.attachment?t.jsx("a",{href:`/storage/${s.attachment}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"View Attachment"}):"No attachment available."]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-200",children:"Close"})})]})})]})};export{X as default};
